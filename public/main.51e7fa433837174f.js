"use strict";var kB=Object.defineProperty,FB=Object.defineProperties,LB=Object.getOwnPropertyDescriptors,WN=Object.getOwnPropertySymbols,VB=Object.prototype.hasOwnProperty,UB=Object.prototype.propertyIsEnumerable,KN=(et,be,N)=>be in et?kB(et,be,{enumerable:!0,configurable:!0,writable:!0,value:N}):et[be]=N,ZN=(et,be)=>{for(var N in be||(be={}))VB.call(be,N)&&KN(et,N,be[N]);if(WN)for(var N of WN(be))UB.call(be,N)&&KN(et,N,be[N]);return et},YN=(et,be)=>FB(et,LB(be));(self.webpackChunkSimulacroParcial=self.webpackChunkSimulacroParcial||[]).push([[179],{2011:(et,be,N)=>{N.d(be,{Dh:()=>oe,GT:()=>ge,cc:()=>xe,hO:()=>ze,on:()=>G,pX:()=>re,xv:()=>he});var h=N(5e3),X=N(127),O=N(5813);et=N.hmd(et);const le=["ngOnDestroy"],re=(De,We,Qe,Ae={})=>new Proxy(De,{get:(we,Ie)=>Qe.runOutsideAngular(()=>{var je;if(De[Ie])return(null===(je=null==Ae?void 0:Ae.spy)||void 0===je?void 0:je.get)&&Ae.spy.get(Ie,De[Ie]),De[Ie];if(le.indexOf(Ie)>-1)return()=>{};const Be=We.toPromise().then($=>{const ve=$&&$[Ie];return"function"==typeof ve?ve.bind($):ve&&ve.then?ve.then(Z=>Qe.run(()=>Z)):Qe.run(()=>ve)});return new Proxy(()=>{},{get:($,ve)=>Be[ve],apply:($,ve,Z)=>Be.then(ie=>{var ee;const ye=ie&&ie(...Z);return(null===(ee=null==Ae?void 0:Ae.spy)||void 0===ee?void 0:ee.apply)&&Ae.spy.apply(Ie,Z,ye),ye})})})}),ge=(De,We)=>{We.forEach(Qe=>{Object.getOwnPropertyNames(Qe.prototype||Qe).forEach(Ae=>{Object.defineProperty(De.prototype,Ae,Object.getOwnPropertyDescriptor(Qe.prototype||Qe,Ae))})})};class ue{constructor(We){return We}}const oe=new h.OlP("angularfire2.app.options"),he=new h.OlP("angularfire2.app.name");function G(De,We,Qe){const we="object"==typeof Qe&&Qe||{};we.name=we.name||"string"==typeof Qe&&Qe||"[DEFAULT]";const je=X.Z.apps.filter(Be=>Be&&Be.name===we.name)[0]||We.runOutsideAngular(()=>X.Z.initializeApp(De,we));try{JSON.stringify(De)!==JSON.stringify(je.options)&&H("error",`${je.name} Firebase App already initialized with different options${et.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch(Be){}return new ue(je)}const H=(De,...We)=>{(0,h.X6Q)()&&"undefined"!=typeof console&&console[De](...We)},te={provide:ue,useFactory:G,deps:[oe,h.R0b,[new h.FiY,he]]};let ze=(()=>{class De{constructor(Qe){X.Z.registerVersion("angularfire",O.q4.full,"core"),X.Z.registerVersion("angularfire",O.q4.full,"app-compat"),X.Z.registerVersion("angular",h.q4F.full,Qe.toString())}static initializeApp(Qe,Ae){return{ngModule:De,providers:[{provide:oe,useValue:Qe},{provide:he,useValue:Ae}]}}}return De.\u0275fac=function(Qe){return new(Qe||De)(h.LFG(h.Lbi))},De.\u0275mod=h.oAB({type:De}),De.\u0275inj=h.cJS({providers:[te]}),De})();function xe(De,We,Qe,Ae,we){const[,Ie,je]=globalThis.\u0275AngularfireInstanceCache.find(Be=>Be[0]===De)||[];if(Ie)return function Ne(De,We){try{return De.toString()===We.toString()}catch(Qe){return De===We}}(we,je)||(fe("error",`${We} was already initialized on the ${Qe} Firebase App with different settings.${Ue?" You may need to reload as Firebase is not HMR aware.":""}`),fe("warn",{is:we,was:je})),Ie;{const Be=Ae();return globalThis.\u0275AngularfireInstanceCache.push([De,Be,we]),Be}}const Ue=!!et.hot,fe=(De,...We)=>{(0,h.X6Q)()&&"undefined"!=typeof console&&console[De](...We)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},5813:(et,be,N)=>{N.d(be,{q4:()=>go,iC:()=>da,fc:()=>er,HU:()=>Rd,vb:()=>xd,JM:()=>Cg});var h=N(5e3),X=N(5867),O=N(5861),le=N(9681),re=N(2090),ge=N(4859),ue=N(1877),oe=N(8766);const he="@firebase/installations",G="0.5.9",te=`w:${G}`,ze="FIS_v2",We=new re.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function Qe(D){return D instanceof re.ZR&&D.code.includes("request-failed")}function Ae({projectId:D}){return`https://firebaseinstallations.googleapis.com/v1/projects/${D}/installations`}function we(D){return{token:D.token,requestStatus:2,expiresIn:ie(D.expiresIn),creationTime:Date.now()}}function Ie(D,C){return je.apply(this,arguments)}function je(){return(je=(0,O.Z)(function*(D,C){const L=(yield C.json()).error;return We.create("request-failed",{requestName:D,serverCode:L.code,serverMessage:L.message,serverStatus:L.status})})).apply(this,arguments)}function Be({apiKey:D}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":D})}function $(D,{refreshToken:C}){const R=Be(D);return R.append("Authorization",function ee(D){return`${ze} ${D}`}(C)),R}function ve(D){return Z.apply(this,arguments)}function Z(){return(Z=(0,O.Z)(function*(D){const C=yield D();return C.status>=500&&C.status<600?D():C})).apply(this,arguments)}function ie(D){return Number(D.replace("s","000"))}function ye(D,C){return ae.apply(this,arguments)}function ae(){return(ae=(0,O.Z)(function*({appConfig:D,heartbeatServiceProvider:C},{fid:R}){const L=Ae(D),Y=Be(D),ne=C.getImmediate({optional:!0});if(ne){const ht=yield ne.getHeartbeatsHeader();ht&&Y.append("x-firebase-client",ht)}const Ve={method:"POST",headers:Y,body:JSON.stringify({fid:R,authVersion:ze,appId:D.appId,sdkVersion:te})},Ct=yield ve(()=>fetch(L,Ve));if(Ct.ok){const ht=yield Ct.json();return{fid:ht.fid||R,registrationStatus:2,refreshToken:ht.refreshToken,authToken:we(ht.authToken)}}throw yield Ie("Create Installation",Ct)})).apply(this,arguments)}function Oe(D){return new Promise(C=>{setTimeout(C,D)})}const $t=/^[cdef][\w-]{21}$/;function Je(){try{const D=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(D),D[0]=112+D[0]%16;const R=function en(D){return function ct(D){return btoa(String.fromCharCode(...D)).replace(/\+/g,"-").replace(/\//g,"_")}(D).substr(0,22)}(D);return $t.test(R)?R:""}catch(D){return""}}function Mn(D){return`${D.appName}!${D.appId}`}const on=new Map;function Qt(D,C){const R=Mn(D);Vt(R,C),function ss(D,C){const R=function hr(){return!Jr&&"BroadcastChannel"in self&&(Jr=new BroadcastChannel("[Firebase] FID Change"),Jr.onmessage=D=>{Vt(D.data.key,D.data.fid)}),Jr}();R&&R.postMessage({key:D,fid:C}),function Cr(){0===on.size&&Jr&&(Jr.close(),Jr=null)}()}(R,C)}function Vt(D,C){const R=on.get(D);if(R)for(const L of R)L(C)}let Jr=null;const Xr="firebase-installations-store";let Li=null;function yt(){return Li||(Li=(0,oe.X3)("firebase-installations-database",1,{upgrade:(D,C)=>{0===C&&D.createObjectStore(Xr)}})),Li}function ei(D,C){return En.apply(this,arguments)}function En(){return(En=(0,O.Z)(function*(D,C){const R=Mn(D),Y=(yield yt()).transaction(Xr,"readwrite"),ne=Y.objectStore(Xr),me=yield ne.get(R);return yield ne.put(C,R),yield Y.done,(!me||me.fid!==C.fid)&&Qt(D,C.fid),C})).apply(this,arguments)}function xn(D){return Js.apply(this,arguments)}function Js(){return(Js=(0,O.Z)(function*(D){const C=Mn(D),L=(yield yt()).transaction(Xr,"readwrite");yield L.objectStore(Xr).delete(C),yield L.done})).apply(this,arguments)}function ti(D,C){return Zn.apply(this,arguments)}function Zn(){return(Zn=(0,O.Z)(function*(D,C){const R=Mn(D),Y=(yield yt()).transaction(Xr,"readwrite"),ne=Y.objectStore(Xr),me=yield ne.get(R),Ve=C(me);return void 0===Ve?yield ne.delete(R):yield ne.put(Ve,R),yield Y.done,Ve&&(!me||me.fid!==Ve.fid)&&Qt(D,Ve.fid),Ve})).apply(this,arguments)}function Fn(D){return Ci.apply(this,arguments)}function Ci(){return(Ci=(0,O.Z)(function*(D){let C;const R=yield ti(D.appConfig,L=>{const Y=Uo(L),ne=Gt(D,Y);return C=ne.registrationPromise,ne.installationEntry});return""===R.fid?{installationEntry:yield C}:{installationEntry:R,registrationPromise:C}})).apply(this,arguments)}function Uo(D){return Xs(D||{fid:Je(),registrationStatus:0})}function Gt(D,C){if(0===C.registrationStatus){if(!navigator.onLine)return{installationEntry:C,registrationPromise:Promise.reject(We.create("app-offline"))};const R={fid:C.fid,registrationStatus:1,registrationTime:Date.now()},L=function at(D,C){return vt.apply(this,arguments)}(D,R);return{installationEntry:R,registrationPromise:L}}return 1===C.registrationStatus?{installationEntry:C,registrationPromise:fr(D)}:{installationEntry:C}}function vt(){return(vt=(0,O.Z)(function*(D,C){try{const R=yield ye(D,C);return ei(D.appConfig,R)}catch(R){throw Qe(R)&&409===R.customData.serverCode?yield xn(D.appConfig):yield ei(D.appConfig,{fid:C.fid,registrationStatus:0}),R}})).apply(this,arguments)}function fr(D){return ni.apply(this,arguments)}function ni(){return(ni=(0,O.Z)(function*(D){let C=yield Bt(D.appConfig);for(;1===C.registrationStatus;)yield Oe(100),C=yield Bt(D.appConfig);if(0===C.registrationStatus){const{installationEntry:R,registrationPromise:L}=yield Fn(D);return L||R}return C})).apply(this,arguments)}function Bt(D){return ti(D,C=>{if(!C)throw We.create("installation-not-found");return Xs(C)})}function Xs(D){return function pr(D){return 1===D.registrationStatus&&D.registrationTime+1e4<Date.now()}(D)?{fid:D.fid,registrationStatus:0}:D}function gr(D,C){return U.apply(this,arguments)}function U(){return(U=(0,O.Z)(function*({appConfig:D,heartbeatServiceProvider:C},R){const L=z(D,R),Y=$(D,R),ne=C.getImmediate({optional:!0});if(ne){const ht=yield ne.getHeartbeatsHeader();ht&&Y.append("x-firebase-client",ht)}const Ve={method:"POST",headers:Y,body:JSON.stringify({installation:{sdkVersion:te,appId:D.appId}})},Ct=yield ve(()=>fetch(L,Ve));if(Ct.ok)return we(yield Ct.json());throw yield Ie("Generate Auth Token",Ct)})).apply(this,arguments)}function z(D,{fid:C}){return`${Ae(D)}/${C}/authTokens:generate`}function W(D){return Ce.apply(this,arguments)}function Ce(){return(Ce=(0,O.Z)(function*(D,C=!1){let R;const L=yield ti(D.appConfig,ne=>{if(!It(ne))throw We.create("not-registered");const me=ne.authToken;if(!C&&hn(me))return ne;if(1===me.requestStatus)return R=q(D,C),ne;{if(!navigator.onLine)throw We.create("app-offline");const Ve=Bn(ne);return R=Xe(D,Ve),Ve}});return R?yield R:L.authToken})).apply(this,arguments)}function q(D,C){return J.apply(this,arguments)}function J(){return(J=(0,O.Z)(function*(D,C){let R=yield Pe(D.appConfig);for(;1===R.authToken.requestStatus;)yield Oe(100),R=yield Pe(D.appConfig);const L=R.authToken;return 0===L.requestStatus?W(D,C):L})).apply(this,arguments)}function Pe(D){return ti(D,C=>{if(!It(C))throw We.create("not-registered");return function Tr(D){return 1===D.requestStatus&&D.requestTime+1e4<Date.now()}(C.authToken)?Object.assign(Object.assign({},C),{authToken:{requestStatus:0}}):C})}function Xe(D,C){return ft.apply(this,arguments)}function ft(){return(ft=(0,O.Z)(function*(D,C){try{const R=yield gr(D,C),L=Object.assign(Object.assign({},C),{authToken:R});return yield ei(D.appConfig,L),R}catch(R){if(!Qe(R)||401!==R.customData.serverCode&&404!==R.customData.serverCode){const L=Object.assign(Object.assign({},C),{authToken:{requestStatus:0}});yield ei(D.appConfig,L)}else yield xn(D.appConfig);throw R}})).apply(this,arguments)}function It(D){return void 0!==D&&2===D.registrationStatus}function hn(D){return 2===D.requestStatus&&!function Et(D){const C=Date.now();return C<D.creationTime||D.creationTime+D.expiresIn<C+36e5}(D)}function Bn(D){const C={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},D),{authToken:C})}function xa(){return(xa=(0,O.Z)(function*(D){const C=D,{installationEntry:R,registrationPromise:L}=yield Fn(C);return L?L.catch(console.error):W(C).catch(console.error),R.fid})).apply(this,arguments)}function Ra(){return(Ra=(0,O.Z)(function*(D,C=!1){const R=D;return yield jn(R),(yield W(R,C)).token})).apply(this,arguments)}function jn(D){return Ar.apply(this,arguments)}function Ar(){return(Ar=(0,O.Z)(function*(D){const{registrationPromise:C}=yield Fn(D);C&&(yield C)})).apply(this,arguments)}function Bo(D){return We.create("missing-app-config-values",{valueName:D})}const Lr="installations",lt=D=>{const C=D.getProvider("app").getImmediate(),R=function ir(D){if(!D||!D.options)throw Bo("App Configuration");if(!D.name)throw Bo("App Name");const C=["projectId","apiKey","appId"];for(const R of C)if(!D.options[R])throw Bo(R);return{appName:D.name,projectId:D.options.projectId,apiKey:D.options.apiKey,appId:D.options.appId}}(C);return{app:C,appConfig:R,heartbeatServiceProvider:(0,le._getProvider)(C,"heartbeat"),_delete:()=>Promise.resolve()}},tn=D=>{const C=D.getProvider("app").getImmediate(),R=(0,le._getProvider)(C,Lr).getImmediate();return{getId:()=>function Tu(D){return xa.apply(this,arguments)}(R),getToken:Y=>function Au(D){return Ra.apply(this,arguments)}(R,Y)}};(function Vr(){(0,le._registerComponent)(new ge.wA(Lr,lt,"PUBLIC")),(0,le._registerComponent)(new ge.wA("installations-internal",tn,"PRIVATE"))})(),(0,le.registerVersion)(he,G),(0,le.registerVersion)(he,G,"esm2017");const Vi="@firebase/remote-config",Rn=new re.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class fg{constructor(C,R,L,Y){this.client=C,this.storage=R,this.storageCache=L,this.logger=Y}isCachedDataFresh(C,R){if(!R)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const L=Date.now()-R,Y=L<=C;return this.logger.debug(`Config fetch cache check. Cache age millis: ${L}. Cache max age millis (minimumFetchIntervalMillis setting): ${C}. Is cache hit: ${Y}.`),Y}fetch(C){var R=this;return(0,O.Z)(function*(){const[L,Y]=yield Promise.all([R.storage.getLastSuccessfulFetchTimestampMillis(),R.storage.getLastSuccessfulFetchResponse()]);if(Y&&R.isCachedDataFresh(C.cacheMaxAgeMillis,L))return Y;C.eTag=Y&&Y.eTag;const ne=yield R.client.fetch(C),me=[R.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===ne.status&&me.push(R.storage.setLastSuccessfulFetchResponse(ne)),yield Promise.all(me),ne})()}}function ld(D=navigator){return D.languages&&D.languages[0]||D.language}class mr{constructor(C,R,L,Y,ne,me){this.firebaseInstallations=C,this.sdkVersion=R,this.namespace=L,this.projectId=Y,this.apiKey=ne,this.appId=me}fetch(C){var R=this;return(0,O.Z)(function*(){const[L,Y]=yield Promise.all([R.firebaseInstallations.getId(),R.firebaseInstallations.getToken()]),me=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${R.projectId}/namespaces/${R.namespace}:fetch?key=${R.apiKey}`,Ve={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":C.eTag||"*"},Ct={sdk_version:R.sdkVersion,app_instance_id:L,app_instance_id_token:Y,app_id:R.appId,language_code:ld()},ht={method:"POST",headers:Ve,body:JSON.stringify(Ct)},jt=fetch(me,ht),wt=new Promise((ci,di)=>{C.signal.addEventListener(()=>{const Ku=new Error("The operation was aborted.");Ku.name="AbortError",di(Ku)})});let _r;try{yield Promise.race([jt,wt]),_r=yield jt}catch(ci){let di="fetch-client-network";throw"AbortError"===ci.name&&(di="fetch-timeout"),Rn.create(di,{originalErrorMessage:ci.message})}let tr=_r.status;const fs=_r.headers.get("ETag")||void 0;let $r,li;if(200===_r.status){let ci;try{ci=yield _r.json()}catch(di){throw Rn.create("fetch-client-parse",{originalErrorMessage:di.message})}$r=ci.entries,li=ci.state}if("INSTANCE_STATE_UNSPECIFIED"===li?tr=500:"NO_CHANGE"===li?tr=304:("NO_TEMPLATE"===li||"EMPTY_CONFIG"===li)&&($r={}),304!==tr&&200!==tr)throw Rn.create("fetch-status",{httpStatus:tr});return{status:tr,eTag:fs,config:$r}})()}}class pg{constructor(C,R){this.client=C,this.storage=R}fetch(C){var R=this;return(0,O.Z)(function*(){const L=(yield R.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return R.attemptFetch(C,L)})()}attemptFetch(C,{throttleEndTimeMillis:R,backoffCount:L}){var Y=this;return(0,O.Z)(function*(){yield function Os(D,C){return new Promise((R,L)=>{const Y=Math.max(C-Date.now(),0),ne=setTimeout(R,Y);D.addEventListener(()=>{clearTimeout(ne),L(Rn.create("fetch-throttle",{throttleEndTimeMillis:C}))})})}(C.signal,R);try{const ne=yield Y.client.fetch(C);return yield Y.storage.deleteThrottleMetadata(),ne}catch(ne){if(!function cd(D){if(!(D instanceof re.ZR&&D.customData))return!1;const C=Number(D.customData.httpStatus);return 429===C||500===C||503===C||504===C}(ne))throw ne;const me={throttleEndTimeMillis:Date.now()+(0,re.$s)(L),backoffCount:L+1};return yield Y.storage.setThrottleMetadata(me),Y.attemptFetch(C,me)}})()}}class dd{constructor(C,R,L,Y,ne){this.app=C,this._client=R,this._storageCache=L,this._storage=Y,this._logger=ne,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function Fl(D,C){const R=D.target.error||void 0;return Rn.create(C,{originalErrorMessage:R&&R.message})}const ks="app_namespace_store";class _g{constructor(C,R,L,Y=function yg(){return new Promise((D,C)=>{try{const R=indexedDB.open("firebase_remote_config",1);R.onerror=L=>{C(Fl(L,"storage-open"))},R.onsuccess=L=>{D(L.target.result)},R.onupgradeneeded=L=>{0===L.oldVersion&&L.target.result.createObjectStore(ks,{keyPath:"compositeKey"})}}catch(R){C(Rn.create("storage-open",{originalErrorMessage:R}))}})}()){this.appId=C,this.appName=R,this.namespace=L,this.openDbPromise=Y}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(C){return this.set("last_fetch_status",C)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(C){return this.set("last_successful_fetch_timestamp_millis",C)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(C){return this.set("last_successful_fetch_response",C)}getActiveConfig(){return this.get("active_config")}setActiveConfig(C){return this.set("active_config",C)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(C){return this.set("active_config_etag",C)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(C){return this.set("throttle_metadata",C)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(C){var R=this;return(0,O.Z)(function*(){const L=yield R.openDbPromise;return new Promise((Y,ne)=>{const Ve=L.transaction([ks],"readonly").objectStore(ks),Ct=R.createCompositeKey(C);try{const ht=Ve.get(Ct);ht.onerror=jt=>{ne(Fl(jt,"storage-get"))},ht.onsuccess=jt=>{const wt=jt.target.result;Y(wt?wt.value:void 0)}}catch(ht){ne(Rn.create("storage-get",{originalErrorMessage:ht&&ht.message}))}})})()}set(C,R){var L=this;return(0,O.Z)(function*(){const Y=yield L.openDbPromise;return new Promise((ne,me)=>{const Ct=Y.transaction([ks],"readwrite").objectStore(ks),ht=L.createCompositeKey(C);try{const jt=Ct.put({compositeKey:ht,value:R});jt.onerror=wt=>{me(Fl(wt,"storage-set"))},jt.onsuccess=()=>{ne()}}catch(jt){me(Rn.create("storage-set",{originalErrorMessage:jt&&jt.message}))}})})()}delete(C){var R=this;return(0,O.Z)(function*(){const L=yield R.openDbPromise;return new Promise((Y,ne)=>{const Ve=L.transaction([ks],"readwrite").objectStore(ks),Ct=R.createCompositeKey(C);try{const ht=Ve.delete(Ct);ht.onerror=jt=>{ne(Fl(jt,"storage-delete"))},ht.onsuccess=()=>{Y()}}catch(ht){ne(Rn.create("storage-delete",{originalErrorMessage:ht&&ht.message}))}})})()}createCompositeKey(C){return[this.appId,this.appName,this.namespace,C].join()}}class fd{constructor(C){this.storage=C}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var C=this;return(0,O.Z)(function*(){const R=C.storage.getLastFetchStatus(),L=C.storage.getLastSuccessfulFetchTimestampMillis(),Y=C.storage.getActiveConfig(),ne=yield R;ne&&(C.lastFetchStatus=ne);const me=yield L;me&&(C.lastSuccessfulFetchTimestampMillis=me);const Ve=yield Y;Ve&&(C.activeConfig=Ve)})()}setLastFetchStatus(C){return this.lastFetchStatus=C,this.storage.setLastFetchStatus(C)}setLastSuccessfulFetchTimestampMillis(C){return this.lastSuccessfulFetchTimestampMillis=C,this.storage.setLastSuccessfulFetchTimestampMillis(C)}setActiveConfig(C){return this.activeConfig=C,this.storage.setActiveConfig(C)}}function Ru(){return pd.apply(this,arguments)}function pd(){return(pd=(0,O.Z)(function*(){if(!(0,re.hl)())return!1;try{return yield(0,re.eu)()}catch(D){return!1}})).apply(this,arguments)}!function Ho(){(0,le._registerComponent)(new ge.wA("remote-config",function D(C,{instanceIdentifier:R}){const L=C.getProvider("app").getImmediate(),Y=C.getProvider("installations-internal").getImmediate();if("undefined"==typeof window)throw Rn.create("registration-window");if(!(0,re.hl)())throw Rn.create("indexed-db-unavailable");const{projectId:ne,apiKey:me,appId:Ve}=L.options;if(!ne)throw Rn.create("registration-project-id");if(!me)throw Rn.create("registration-api-key");if(!Ve)throw Rn.create("registration-app-id");const Ct=new _g(Ve,L.name,R=R||"firebase"),ht=new fd(Ct),jt=new ue.Yd(Vi);jt.logLevel=ue.in.ERROR;const wt=new mr(Y,le.SDK_VERSION,R,ne,me,Ve),_r=new pg(wt,Ct),tr=new fg(_r,Ct,ht,jt),fs=new dd(L,tr,ht,Ct,jt);return function an(D){const C=(0,re.m9)(D);C._initializePromise||(C._initializePromise=C._storageCache.loadFromStorage().then(()=>{C._isInitializationComplete=!0}))}(fs),fs},"PUBLIC").setMultipleInstances(!0)),(0,le.registerVersion)(Vi,"0.3.8"),(0,le.registerVersion)(Vi,"0.3.8","esm2017")}();const gd="/firebase-messaging-sw.js",yr="/firebase-cloud-messaging-push-scope",no="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",$o="google.c.a.c_id",md="google.c.a.c_l",lf="google.c.a.ts",yd="google.c.a.e";var Go=(()=>{return(D=Go||(Go={})).PUSH_RECEIVED="push-received",D.NOTIFICATION_CLICKED="notification-clicked",Go;var D})();function Sr(D){const C=new Uint8Array(D);return btoa(String.fromCharCode(...C)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function _d(D){const R=(D+"=".repeat((4-D.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),L=atob(R),Y=new Uint8Array(L.length);for(let ne=0;ne<L.length;++ne)Y[ne]=L.charCodeAt(ne);return Y}const Mr="fcm_token_details_db",ri="fcm_token_object_Store";function Ll(D){return vd.apply(this,arguments)}function vd(){return vd=(0,O.Z)(function*(D){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(ne=>ne.name).includes(Mr))return null;let C=null;return(yield(0,oe.X3)(Mr,5,{upgrade:(L=(0,O.Z)(function*(Y,ne,me,Ve){var Ct;if(ne<2||!Y.objectStoreNames.contains(ri))return;const ht=Ve.objectStore(ri),jt=yield ht.index("fcmSenderId").get(D);if(yield ht.clear(),jt)if(2===ne){const wt=jt;if(!wt.auth||!wt.p256dh||!wt.endpoint)return;C={token:wt.fcmToken,createTime:null!==(Ct=wt.createTime)&&void 0!==Ct?Ct:Date.now(),subscriptionOptions:{auth:wt.auth,p256dh:wt.p256dh,endpoint:wt.endpoint,swScope:wt.swScope,vapidKey:"string"==typeof wt.vapidKey?wt.vapidKey:Sr(wt.vapidKey)}}}else if(3===ne){const wt=jt;C={token:wt.fcmToken,createTime:wt.createTime,subscriptionOptions:{auth:Sr(wt.auth),p256dh:Sr(wt.p256dh),endpoint:wt.endpoint,swScope:wt.swScope,vapidKey:Sr(wt.vapidKey)}}}else if(4===ne){const wt=jt;C={token:wt.fcmToken,createTime:wt.createTime,subscriptionOptions:{auth:Sr(wt.auth),p256dh:Sr(wt.p256dh),endpoint:wt.endpoint,swScope:wt.swScope,vapidKey:Sr(wt.vapidKey)}}}}),function(ne,me,Ve,Ct){return L.apply(this,arguments)})})).close(),yield(0,oe.Lj)(Mr),yield(0,oe.Lj)("fcm_vapid_details_db"),yield(0,oe.Lj)("undefined"),Vl(C)?C:null;var L}),vd.apply(this,arguments)}function Vl(D){if(!D||!D.subscriptionOptions)return!1;const{subscriptionOptions:C}=D;return"number"==typeof D.createTime&&D.createTime>0&&"string"==typeof D.token&&D.token.length>0&&"string"==typeof C.auth&&C.auth.length>0&&"string"==typeof C.p256dh&&C.p256dh.length>0&&"string"==typeof C.endpoint&&C.endpoint.length>0&&"string"==typeof C.swScope&&C.swScope.length>0&&"string"==typeof C.vapidKey&&C.vapidKey.length>0}const Gi="firebase-messaging-store";let cf=null;function nn(){return cf||(cf=(0,oe.X3)("firebase-messaging-database",1,{upgrade:(D,C)=>{0===C&&D.createObjectStore(Gi)}})),cf}function ka(D){return io.apply(this,arguments)}function io(){return(io=(0,O.Z)(function*(D){const C=sr(D),L=yield(yield nn()).transaction(Gi).objectStore(Gi).get(C);if(L)return L;{const Y=yield Ll(D.appConfig.senderId);if(Y)return yield Jt(D,Y),Y}})).apply(this,arguments)}function Jt(D,C){return Fa.apply(this,arguments)}function Fa(){return(Fa=(0,O.Z)(function*(D,C){const R=sr(D),Y=(yield nn()).transaction(Gi,"readwrite");return yield Y.objectStore(Gi).put(C,R),yield Y.done,C})).apply(this,arguments)}function Pu(D){return Fs.apply(this,arguments)}function Fs(){return(Fs=(0,O.Z)(function*(D){const C=sr(D),L=(yield nn()).transaction(Gi,"readwrite");yield L.objectStore(Gi).delete(C),yield L.done})).apply(this,arguments)}function sr({appConfig:D}){return D.appId}const yn=new re.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function qi(D,C){return or.apply(this,arguments)}function or(){return(or=(0,O.Z)(function*(D,C){const R=yield Wo(D),L=Ko(C),Y={method:"POST",headers:R,body:JSON.stringify(L)};let ne;try{ne=yield(yield fetch(zi(D.appConfig),Y)).json()}catch(me){throw yn.create("token-subscribe-failed",{errorInfo:me})}if(ne.error)throw yn.create("token-subscribe-failed",{errorInfo:ne.error.message});if(!ne.token)throw yn.create("token-subscribe-no-token");return ne.token})).apply(this,arguments)}function so(D,C){return us.apply(this,arguments)}function us(){return(us=(0,O.Z)(function*(D,C){const R=yield Wo(D),L=Ko(C.subscriptionOptions),Y={method:"PATCH",headers:R,body:JSON.stringify(L)};let ne;try{ne=yield(yield fetch(`${zi(D.appConfig)}/${C.token}`,Y)).json()}catch(me){throw yn.create("token-update-failed",{errorInfo:me})}if(ne.error)throw yn.create("token-update-failed",{errorInfo:ne.error.message});if(!ne.token)throw yn.create("token-update-no-token");return ne.token})).apply(this,arguments)}function La(D,C){return Ai.apply(this,arguments)}function Ai(){return(Ai=(0,O.Z)(function*(D,C){const L={method:"DELETE",headers:yield Wo(D)};try{const ne=yield(yield fetch(`${zi(D.appConfig)}/${C}`,L)).json();if(ne.error)throw yn.create("token-unsubscribe-failed",{errorInfo:ne.error.message})}catch(Y){throw yn.create("token-unsubscribe-failed",{errorInfo:Y})}})).apply(this,arguments)}function zi({projectId:D}){return`https://fcmregistrations.googleapis.com/v1/projects/${D}/registrations`}function Wo(D){return pt.apply(this,arguments)}function pt(){return(pt=(0,O.Z)(function*({appConfig:D,installations:C}){const R=yield C.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":D.apiKey,"x-goog-firebase-installations-auth":`FIS ${R}`})})).apply(this,arguments)}function Ko({p256dh:D,auth:C,endpoint:R,vapidKey:L}){const Y={web:{endpoint:R,auth:C,p256dh:D}};return L!==no&&(Y.web.applicationPubKey=L),Y}const Nu=6048e5;function Va(D){return jl.apply(this,arguments)}function jl(){return(jl=(0,O.Z)(function*(D){const C=yield pn(D.swRegistration,D.vapidKey),R={vapidKey:D.vapidKey,swScope:D.swRegistration.scope,endpoint:C.endpoint,auth:Sr(C.getKey("auth")),p256dh:Sr(C.getKey("p256dh"))},L=yield ka(D.firebaseDependencies);if(L){if(oo(L.subscriptionOptions,R))return Date.now()>=L.createTime+Nu?$l(D,{token:L.token,createTime:Date.now(),subscriptionOptions:R}):L.token;try{yield La(D.firebaseDependencies,L.token)}catch(Y){console.warn(Y)}return Ft(D.firebaseDependencies,R)}return Ft(D.firebaseDependencies,R)})).apply(this,arguments)}function Ua(D){return Hl.apply(this,arguments)}function Hl(){return(Hl=(0,O.Z)(function*(D){const C=yield ka(D.firebaseDependencies);C&&(yield La(D.firebaseDependencies,C.token),yield Pu(D.firebaseDependencies));const R=yield D.swRegistration.pushManager.getSubscription();return!R||R.unsubscribe()})).apply(this,arguments)}function $l(D,C){return Se.apply(this,arguments)}function Se(){return(Se=(0,O.Z)(function*(D,C){try{const R=yield so(D.firebaseDependencies,C),L=Object.assign(Object.assign({},C),{token:R,createTime:Date.now()});return yield Jt(D.firebaseDependencies,L),R}catch(R){throw yield Ua(D),R}})).apply(this,arguments)}function Ft(D,C){return Ou.apply(this,arguments)}function Ou(){return(Ou=(0,O.Z)(function*(D,C){const L={token:yield qi(D,C),createTime:Date.now(),subscriptionOptions:C};return yield Jt(D,L),L.token})).apply(this,arguments)}function pn(D,C){return Zo.apply(this,arguments)}function Zo(){return(Zo=(0,O.Z)(function*(D,C){return(yield D.pushManager.getSubscription())||D.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:_d(C)})})).apply(this,arguments)}function oo(D,C){return C.vapidKey===D.vapidKey&&C.endpoint===D.endpoint&&C.auth===D.auth&&C.p256dh===D.p256dh}function ii(D){const C={from:D.from,collapseKey:D.collapse_key,messageId:D.fcmMessageId};return function Ba(D,C){if(!C.notification)return;D.notification={};const R=C.notification.title;R&&(D.notification.title=R);const L=C.notification.body;L&&(D.notification.body=L);const Y=C.notification.image;Y&&(D.notification.image=Y)}(C,D),function Gl(D,C){!C.data||(D.data=C.data)}(C,D),function vg(D,C){if(!C.fcmOptions)return;D.fcmOptions={};const R=C.fcmOptions.link;R&&(D.fcmOptions.link=R);const L=C.fcmOptions.analytics_label;L&&(D.fcmOptions.analyticsLabel=L)}(C,D),C}function ku(D){return"object"==typeof D&&!!D&&$o in D}function ja(D,C){const R=[];for(let L=0;L<D.length;L++)R.push(D.charAt(L)),L<C.length&&R.push(C.charAt(L));return R.join("")}function Pn(D){return yn.create("missing-app-config-values",{valueName:D})}ja("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),ja("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class ls{constructor(C,R,L){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const Y=function Fu(D){if(!D||!D.options)throw Pn("App Configuration Object");if(!D.name)throw Pn("App Name");const C=["projectId","apiKey","appId","messagingSenderId"],{options:R}=D;for(const L of C)if(!R[L])throw Pn(L);return{appName:D.name,projectId:R.projectId,apiKey:R.apiKey,appId:R.appId,senderId:R.messagingSenderId}}(C);this.firebaseDependencies={app:C,appConfig:Y,installations:R,analyticsProvider:L}}_delete(){return Promise.resolve()}}function Ha(D){return Ls.apply(this,arguments)}function Ls(){return(Ls=(0,O.Z)(function*(D){try{D.swRegistration=yield navigator.serviceWorker.register(gd,{scope:yr}),D.swRegistration.update().catch(()=>{})}catch(C){throw yn.create("failed-service-worker-registration",{browserErrorMessage:C.message})}})).apply(this,arguments)}function Si(D,C){return ql.apply(this,arguments)}function ql(){return(ql=(0,O.Z)(function*(D,C){if(!C&&!D.swRegistration&&(yield Ha(D)),C||!D.swRegistration){if(!(C instanceof ServiceWorkerRegistration))throw yn.create("invalid-sw-registration");D.swRegistration=C}})).apply(this,arguments)}function Lu(D,C){return zl.apply(this,arguments)}function zl(){return(zl=(0,O.Z)(function*(D,C){C?D.vapidKey=C:D.vapidKey||(D.vapidKey=no)})).apply(this,arguments)}function $a(){return($a=(0,O.Z)(function*(D,C){if(!navigator)throw yn.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw yn.create("permission-blocked");return yield Lu(D,null==C?void 0:C.vapidKey),yield Si(D,null==C?void 0:C.serviceWorkerRegistration),Va(D)})).apply(this,arguments)}function Yo(D,C,R){return Wl.apply(this,arguments)}function Wl(){return(Wl=(0,O.Z)(function*(D,C,R){const L=Ga(C);(yield D.firebaseDependencies.analyticsProvider.get()).logEvent(L,{message_id:R[$o],message_name:R[md],message_time:R[lf],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function Ga(D){switch(D){case Go.NOTIFICATION_CLICKED:return"notification_open";case Go.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function Kl(){return(Kl=(0,O.Z)(function*(D,C){const R=C.data;if(!R.isFirebaseMessaging)return;D.onMessageHandler&&R.messageType===Go.PUSH_RECEIVED&&("function"==typeof D.onMessageHandler?D.onMessageHandler(ii(R)):D.onMessageHandler.next(ii(R)));const L=R.data;ku(L)&&"1"===L[yd]&&(yield Yo(D,R.messageType,L))})).apply(this,arguments)}const Qo="@firebase/messaging",Ed=D=>{const C=new ls(D.getProvider("app").getImmediate(),D.getProvider("installations-internal").getImmediate(),D.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",R=>function Eg(D,C){return Kl.apply(this,arguments)}(C,R)),C},Jo=D=>{const C=D.getProvider("messaging").getImmediate();return{getToken:L=>function Vu(D,C){return $a.apply(this,arguments)}(C,L)}};function Xo(){return Wi.apply(this,arguments)}function Wi(){return(Wi=(0,O.Z)(function*(){try{yield(0,re.eu)()}catch(D){return!1}return"undefined"!=typeof window&&(0,re.hl)()&&(0,re.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function wd(){(0,le._registerComponent)(new ge.wA("messaging",Ed,"PUBLIC")),(0,le._registerComponent)(new ge.wA("messaging-internal",Jo,"PRIVATE")),(0,le.registerVersion)(Qo,"0.9.13"),(0,le.registerVersion)(Qo,"0.9.13","esm2017")}();const bd="analytics",wg="firebase_id",cs="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",ea="https://www.googletagmanager.com/gtag/js",Qn=new ue.Yd("@firebase/analytics");function ff(D){return Promise.all(D.map(C=>C.catch(R=>R)))}function ao(D,C){const R=document.createElement("script");R.src=`${ea}?l=${D}&id=${C}`,R.async=!0,document.head.appendChild(R)}function Dd(D,C,R,L,Y,ne){return Bu.apply(this,arguments)}function Bu(){return(Bu=(0,O.Z)(function*(D,C,R,L,Y,ne){const me=L[Y];try{if(me)yield C[me];else{const Ct=(yield ff(R)).find(ht=>ht.measurementId===Y);Ct&&(yield C[Ct.appId])}}catch(Ve){Qn.error(Ve)}D("config",Y,ne)})).apply(this,arguments)}function ju(D,C,R,L,Y){return uo.apply(this,arguments)}function uo(){return(uo=(0,O.Z)(function*(D,C,R,L,Y){try{let ne=[];if(Y&&Y.send_to){let me=Y.send_to;Array.isArray(me)||(me=[me]);const Ve=yield ff(R);for(const Ct of me){const ht=Ve.find(wt=>wt.measurementId===Ct),jt=ht&&C[ht.appId];if(!jt){ne=[];break}ne.push(jt)}}0===ne.length&&(ne=Object.values(C)),yield Promise.all(ne),D("event",L,Y||{})}catch(ne){Qn.error(ne)}})).apply(this,arguments)}function ln(){const D=window.document.getElementsByTagName("script");for(const C of Object.values(D))if(C.src&&C.src.includes(ea))return C;return null}const rt=new re.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'}),Zl=new class bn{constructor(C={},R=1e3){this.throttleMetadata=C,this.intervalMillis=R}getThrottleMetadata(C){return this.throttleMetadata[C]}setThrottleMetadata(C,R){this.throttleMetadata[C]=R}deleteThrottleMetadata(C){delete this.throttleMetadata[C]}};function Td(D){return new Headers({Accept:"application/json","x-goog-api-key":D})}function Zi(D){return Yl.apply(this,arguments)}function Yl(){return(Yl=(0,O.Z)(function*(D){var C;const{appId:R,apiKey:L}=D,Y={method:"GET",headers:Td(L)},ne=cs.replace("{app-id}",R),me=yield fetch(ne,Y);if(200!==me.status&&304!==me.status){let Ve="";try{const Ct=yield me.json();(null===(C=Ct.error)||void 0===C?void 0:C.message)&&(Ve=Ct.error.message)}catch(Ct){}throw rt.create("config-fetch-failed",{httpStatus:me.status,responseMessage:Ve})}return me.json()})).apply(this,arguments)}function cn(D){return Ka.apply(this,arguments)}function Ka(){return(Ka=(0,O.Z)(function*(D,C=Zl,R){const{appId:L,apiKey:Y,measurementId:ne}=D.options;if(!L)throw rt.create("no-app-id");if(!Y){if(ne)return{measurementId:ne,appId:L};throw rt.create("no-api-key")}const me=C.getThrottleMetadata(L)||{backoffCount:0,throttleEndTimeMillis:Date.now()},Ve=new Sd;return setTimeout((0,O.Z)(function*(){Ve.abort()}),void 0!==R?R:6e4),Mi({appId:L,apiKey:Y,measurementId:ne},me,Ve,C)})).apply(this,arguments)}function Mi(D,C,R){return Dt.apply(this,arguments)}function Dt(){return(Dt=(0,O.Z)(function*(D,{throttleEndTimeMillis:C,backoffCount:R},L,Y=Zl){const{appId:ne,measurementId:me}=D;try{yield Hu(L,C)}catch(Ve){if(me)return Qn.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${me} provided in the "measurementId" field in the local Firebase config. [${Ve.message}]`),{appId:ne,measurementId:me};throw Ve}try{const Ve=yield Zi(D);return Y.deleteThrottleMetadata(ne),Ve}catch(Ve){if(!Ad(Ve)){if(Y.deleteThrottleMetadata(ne),me)return Qn.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${me} provided in the "measurementId" field in the local Firebase config. [${Ve.message}]`),{appId:ne,measurementId:me};throw Ve}const Ct=503===Number(Ve.customData.httpStatus)?(0,re.$s)(R,Y.intervalMillis,30):(0,re.$s)(R,Y.intervalMillis),ht={throttleEndTimeMillis:Date.now()+Ct,backoffCount:R+1};return Y.setThrottleMetadata(ne,ht),Qn.debug(`Calling attemptFetch again in ${Ct} millis`),Mi(D,ht,L,Y)}})).apply(this,arguments)}function Hu(D,C){return new Promise((R,L)=>{const Y=Math.max(C-Date.now(),0),ne=setTimeout(R,Y);D.addEventListener(()=>{clearTimeout(ne),L(rt.create("fetch-throttle",{throttleEndTimeMillis:C}))})})}function Ad(D){if(!(D instanceof re.ZR&&D.customData))return!1;const C=Number(D.customData.httpStatus);return 429===C||500===C||503===C||504===C}class Sd{constructor(){this.listeners=[]}addEventListener(C){this.listeners.push(C)}abort(){this.listeners.forEach(C=>C())}}function Ql(){return In.apply(this,arguments)}function In(){return(In=(0,O.Z)(function*(){if(!(0,re.hl)())return Qn.warn(rt.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,re.eu)()}catch(D){return Qn.warn(rt.create("indexeddb-unavailable",{errorInfo:D}).message),!1}return!0})).apply(this,arguments)}function na(){return(na=(0,O.Z)(function*(D,C,R,L,Y,ne,me){var Ve;const Ct=cn(D);Ct.then(tr=>{R[tr.measurementId]=tr.appId,D.options.measurementId&&tr.measurementId!==D.options.measurementId&&Qn.warn(`The measurement ID in the local Firebase config (${D.options.measurementId}) does not match the measurement ID fetched from the server (${tr.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(tr=>Qn.error(tr)),C.push(Ct);const ht=Ql().then(tr=>{if(tr)return L.getId()}),[jt,wt]=yield Promise.all([Ct,ht]);ln()||ao(ne,jt.measurementId),Y("js",new Date);const _r=null!==(Ve=null==me?void 0:me.config)&&void 0!==Ve?Ve:{};return _r.origin="firebase",_r.update=!0,null!=wt&&(_r[wg]=wt),Y("config",jt.measurementId,_r),jt.measurementId})).apply(this,arguments)}class Vs{constructor(C){this.app=C}_delete(){return delete ar[this.app.options.appId],Promise.resolve()}}let ar={},$u=[];const Us={};let ia,lo,ra="dataLayer",sa=!1;function Za(D,C,R){!function aa(){const D=[];if((0,re.ru)()&&D.push("This is a browser extension environment."),(0,re.zI)()||D.push("Cookies are not available."),D.length>0){const C=D.map((L,Y)=>`(${Y+1}) ${L}`).join(" "),R=rt.create("invalid-analytics-context",{errorInfo:C});Qn.warn(R.message)}}();const L=D.options.appId;if(!L)throw rt.create("no-app-id");if(!D.options.apiKey){if(!D.options.measurementId)throw rt.create("no-api-key");Qn.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${D.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=ar[L])throw rt.create("already-exists",{id:L});if(!sa){!function Uu(D){let C=[];Array.isArray(window[D])?C=window[D]:window[D]=C}(ra);const{wrappedGtag:ne,gtagCore:me}=function bg(D,C,R,L,Y){let ne=function(...me){window[L].push(arguments)};return window[Y]&&"function"==typeof window[Y]&&(ne=window[Y]),window[Y]=function Cd(D,C,R,L){function ne(){return(ne=(0,O.Z)(function*(me,Ve,Ct){try{"event"===me?yield ju(D,C,R,Ve,Ct):"config"===me?yield Dd(D,C,R,L,Ve,Ct):D("set",Ve)}catch(ht){Qn.error(ht)}})).apply(this,arguments)}return function Y(me,Ve,Ct){return ne.apply(this,arguments)}}(ne,D,C,R),{gtagCore:ne,wrappedGtag:window[Y]}}(ar,$u,Us,ra,"gtag");lo=ne,ia=me,sa=!0}return ar[L]=function ta(D,C,R,L,Y,ne,me){return na.apply(this,arguments)}(D,$u,Us,C,ia,ra,R),new Vs(D)}function Jn(){return(Jn=(0,O.Z)(function*(D,C,R,L,Y){if(Y&&Y.global)D("event",R,L);else{const ne=yield C;D("event",R,Object.assign(Object.assign({},L),{send_to:ne}))}})).apply(this,arguments)}function Ya(){return Qa.apply(this,arguments)}function Qa(){return(Qa=(0,O.Z)(function*(){if((0,re.ru)()||!(0,re.zI)()||!(0,re.hl)())return!1;try{return yield(0,re.eu)()}catch(D){return!1}})).apply(this,arguments)}const jr="@firebase/analytics";!function Hs(){(0,le._registerComponent)(new ge.wA(bd,(C,{options:R})=>Za(C.getProvider("app").getImmediate(),C.getProvider("installations-internal").getImmediate(),R),"PUBLIC")),(0,le._registerComponent)(new ge.wA("analytics-internal",function D(C){try{const R=C.getProvider(bd).getImmediate();return{logEvent:(L,Y,ne)=>function ua(D,C,R,L){D=(0,re.m9)(D),function js(D,C,R,L,Y){return Jn.apply(this,arguments)}(lo,ar[D.app.options.appId],C,R,L).catch(Y=>Qn.error(Y))}(R,L,Y,ne)}}catch(R){throw rt.create("interop-component-reg-failed",{reason:R})}},"PRIVATE")),(0,le.registerVersion)(jr,"0.7.9"),(0,le.registerVersion)(jr,"0.7.9","esm2017")}();var fo=N(4408),_n=N(7565);const po=new class Jl extends _n.v{}(class qu extends fo.o{constructor(C,R){super(C,R),this.scheduler=C,this.work=R}schedule(C,R=0){return R>0?super.schedule(C,R):(this.delay=R,this.state=C,this.scheduler.flush(this),this)}execute(C,R){return R>0||this.closed?super.execute(C,R):this._execute(C,R)}requestAsyncId(C,R,L=0){return null!=L&&L>0||null==L&&this.delay>0?super.requestAsyncId(C,R,L):C.flush(this)}});var Xl=N(4986),ui=N(8505),Hr=N(5363),la=N(9468);const go=new h.GfV("7.3.0"),mo="__angularfire_symbol__analyticsIsSupportedValue",ca="__angularfire_symbol__analyticsIsSupported",yo="__angularfire_symbol__remoteConfigIsSupportedValue",hs="__angularfire_symbol__remoteConfigIsSupported",Ja="__angularfire_symbol__messagingIsSupportedValue",kt="__angularfire_symbol__messagingIsSupported";function Cg(D,C,R){if(C){if(1===C.length)return C[0];const ne=C.filter(me=>me.app===R);if(1===ne.length)return ne[0]}return R.container.getProvider(D).getImmediate({optional:!0})}globalThis[ca]||(globalThis[ca]=Ya().then(D=>globalThis[mo]=D).catch(()=>globalThis[mo]=!1)),globalThis[kt]||(globalThis[kt]=Xo().then(D=>globalThis[Ja]=D).catch(()=>globalThis[Ja]=!1)),globalThis[hs]||(globalThis[hs]=Ru().then(D=>globalThis[yo]=D).catch(()=>globalThis[yo]=!1));const xd=(D,C)=>{const R=C?[C]:(0,X.C6)(),L=[];return R.forEach(Y=>{Y.container.getProvider(D).instances.forEach(me=>{L.includes(me)||L.push(me)})}),L};function Gs(){}class xi{constructor(C,R=po){this.zone=C,this.delegate=R}now(){return this.delegate.now()}schedule(C,R,L){const Y=this.zone;return this.delegate.schedule(function(me){Y.runGuarded(()=>{C.apply(this,[me])})},R,L)}}class Wu{constructor(C){this.zone=C,this.task=null}call(C,R){const L=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Gs,{},Gs,Gs)),R.pipe((0,ui.b)({next:L,complete:L,error:L})).subscribe(C).add(L)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let Rd=(()=>{class D{constructor(R){this.ngZone=R,this.outsideAngular=R.runOutsideAngular(()=>new xi(Zone.current)),this.insideAngular=R.run(()=>new xi(Zone.current,Xl.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return D.\u0275fac=function(R){return new(R||D)(h.LFG(h.R0b))},D.\u0275prov=h.Yz7({token:D,factory:D.\u0275fac,providedIn:"root"}),D})();function Ji(){const D=globalThis.\u0275AngularFireScheduler;if(!D)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return D}function er(D){return D.pipe((0,Hr.Q)(Ji().outsideAngular))}function da(D){return Ji(),function ha(D){return function(R){return(R=R.lift(new Wu(D.ngZone))).pipe((0,la.R)(D.outsideAngular),(0,Hr.Q)(D.insideAngular))}}(Ji())(D)}},2090:(et,be,N)=>{N.d(be,{$s:()=>Bt,BH:()=>ze,G6:()=>Be,L:()=>oe,LL:()=>ae,Mn:()=>Ie,Sg:()=>xe,UG:()=>fe,US:()=>ge,ZB:()=>H,ZR:()=>ye,b$:()=>Qe,d:()=>Ae,eu:()=>ve,hl:()=>$,jU:()=>De,m9:()=>gr,ne:()=>Li,pd:()=>Ms,r3:()=>Dr,ru:()=>We,tV:()=>he,uI:()=>Ue,vZ:()=>Jr,w1:()=>we,xO:()=>Cr,xb:()=>Vt,z$:()=>Ne,zI:()=>Z,zd:()=>Fi});const le=function(U){const z=[];let W=0;for(let Ce=0;Ce<U.length;Ce++){let q=U.charCodeAt(Ce);q<128?z[W++]=q:q<2048?(z[W++]=q>>6|192,z[W++]=63&q|128):55296==(64512&q)&&Ce+1<U.length&&56320==(64512&U.charCodeAt(Ce+1))?(q=65536+((1023&q)<<10)+(1023&U.charCodeAt(++Ce)),z[W++]=q>>18|240,z[W++]=q>>12&63|128,z[W++]=q>>6&63|128,z[W++]=63&q|128):(z[W++]=q>>12|224,z[W++]=q>>6&63|128,z[W++]=63&q|128)}return z},ge={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(U,z){if(!Array.isArray(U))throw Error("encodeByteArray takes an array as a parameter");this.init_();const W=z?this.byteToCharMapWebSafe_:this.byteToCharMap_,Ce=[];for(let q=0;q<U.length;q+=3){const J=U[q],Pe=q+1<U.length,Xe=Pe?U[q+1]:0,ft=q+2<U.length,It=ft?U[q+2]:0;let Bn=(15&Xe)<<2|It>>6,Tr=63&It;ft||(Tr=64,Pe||(Bn=64)),Ce.push(W[J>>2],W[(3&J)<<4|Xe>>4],W[Bn],W[Tr])}return Ce.join("")},encodeString(U,z){return this.HAS_NATIVE_SUPPORT&&!z?btoa(U):this.encodeByteArray(le(U),z)},decodeString(U,z){return this.HAS_NATIVE_SUPPORT&&!z?atob(U):function(U){const z=[];let W=0,Ce=0;for(;W<U.length;){const q=U[W++];if(q<128)z[Ce++]=String.fromCharCode(q);else if(q>191&&q<224){const J=U[W++];z[Ce++]=String.fromCharCode((31&q)<<6|63&J)}else if(q>239&&q<365){const ft=((7&q)<<18|(63&U[W++])<<12|(63&U[W++])<<6|63&U[W++])-65536;z[Ce++]=String.fromCharCode(55296+(ft>>10)),z[Ce++]=String.fromCharCode(56320+(1023&ft))}else{const J=U[W++],Pe=U[W++];z[Ce++]=String.fromCharCode((15&q)<<12|(63&J)<<6|63&Pe)}}return z.join("")}(this.decodeStringToByteArray(U,z))},decodeStringToByteArray(U,z){this.init_();const W=z?this.charToByteMapWebSafe_:this.charToByteMap_,Ce=[];for(let q=0;q<U.length;){const J=W[U.charAt(q++)],Xe=q<U.length?W[U.charAt(q)]:0;++q;const It=q<U.length?W[U.charAt(q)]:64;++q;const Et=q<U.length?W[U.charAt(q)]:64;if(++q,null==J||null==Xe||null==It||null==Et)throw Error();Ce.push(J<<2|Xe>>4),64!==It&&(Ce.push(Xe<<4&240|It>>2),64!==Et&&Ce.push(It<<6&192|Et))}return Ce},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let U=0;U<this.ENCODED_VALS.length;U++)this.byteToCharMap_[U]=this.ENCODED_VALS.charAt(U),this.charToByteMap_[this.byteToCharMap_[U]]=U,this.byteToCharMapWebSafe_[U]=this.ENCODED_VALS_WEBSAFE.charAt(U),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[U]]=U,U>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(U)]=U,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(U)]=U)}}},oe=function(U){return function(U){const z=le(U);return ge.encodeByteArray(z,!0)}(U).replace(/\./g,"")},he=function(U){try{return ge.decodeString(U,!0)}catch(z){console.error("base64Decode failed: ",z)}return null};function H(U,z){if(!(z instanceof Object))return z;switch(z.constructor){case Date:return new Date(z.getTime());case Object:void 0===U&&(U={});break;case Array:U=[];break;default:return z}for(const W in z)!z.hasOwnProperty(W)||!te(W)||(U[W]=H(U[W],z[W]));return U}function te(U){return"__proto__"!==U}class ze{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((z,W)=>{this.resolve=z,this.reject=W})}wrapCallback(z){return(W,Ce)=>{W?this.reject(W):this.resolve(Ce),"function"==typeof z&&(this.promise.catch(()=>{}),1===z.length?z(W):z(W,Ce))}}}function xe(U,z){if(U.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const Ce=z||"demo-project",q=U.iat||0,J=U.sub||U.user_id;if(!J)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const Pe=Object.assign({iss:`https://securetoken.google.com/${Ce}`,aud:Ce,iat:q,exp:q+3600,auth_time:q,sub:J,user_id:J,firebase:{sign_in_provider:"custom",identities:{}}},U);return[oe(JSON.stringify({alg:"none",type:"JWT"})),oe(JSON.stringify(Pe)),""].join(".")}function Ne(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function Ue(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ne())}function fe(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(U){return!1}}function De(){return"object"==typeof self&&self.self===self}function We(){const U="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof U&&void 0!==U.id}function Qe(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function Ae(){return Ne().indexOf("Electron/")>=0}function we(){const U=Ne();return U.indexOf("MSIE ")>=0||U.indexOf("Trident/")>=0}function Ie(){return Ne().indexOf("MSAppHost/")>=0}function Be(){return!fe()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function $(){return"object"==typeof indexedDB}function ve(){return new Promise((U,z)=>{try{let W=!0;const Ce="validate-browser-context-for-indexeddb-analytics-module",q=self.indexedDB.open(Ce);q.onsuccess=()=>{q.result.close(),W||self.indexedDB.deleteDatabase(Ce),U(!0)},q.onupgradeneeded=()=>{W=!1},q.onerror=()=>{var J;z((null===(J=q.error)||void 0===J?void 0:J.message)||"")}}catch(W){z(W)}})}function Z(){return!("undefined"==typeof navigator||!navigator.cookieEnabled)}class ye extends Error{constructor(z,W,Ce){super(W),this.code=z,this.customData=Ce,this.name="FirebaseError",Object.setPrototypeOf(this,ye.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,ae.prototype.create)}}class ae{constructor(z,W,Ce){this.service=z,this.serviceName=W,this.errors=Ce}create(z,...W){const Ce=W[0]||{},q=`${this.service}/${z}`,J=this.errors[z],Pe=J?function Oe(U,z){return U.replace(ct,(W,Ce)=>{const q=z[Ce];return null!=q?String(q):`<${Ce}?>`})}(J,Ce):"Error";return new ye(q,`${this.serviceName}: ${Pe} (${q}).`,Ce)}}const ct=/\{\$([^}]+)}/g;function Dr(U,z){return Object.prototype.hasOwnProperty.call(U,z)}function Vt(U){for(const z in U)if(Object.prototype.hasOwnProperty.call(U,z))return!1;return!0}function Jr(U,z){if(U===z)return!0;const W=Object.keys(U),Ce=Object.keys(z);for(const q of W){if(!Ce.includes(q))return!1;const J=U[q],Pe=z[q];if(hr(J)&&hr(Pe)){if(!Jr(J,Pe))return!1}else if(J!==Pe)return!1}for(const q of Ce)if(!W.includes(q))return!1;return!0}function hr(U){return null!==U&&"object"==typeof U}function Cr(U){const z=[];for(const[W,Ce]of Object.entries(U))Array.isArray(Ce)?Ce.forEach(q=>{z.push(encodeURIComponent(W)+"="+encodeURIComponent(q))}):z.push(encodeURIComponent(W)+"="+encodeURIComponent(Ce));return z.length?"&"+z.join("&"):""}function Fi(U){const z={};return U.replace(/^\?/,"").split("&").forEach(Ce=>{if(Ce){const[q,J]=Ce.split("=");z[decodeURIComponent(q)]=decodeURIComponent(J)}}),z}function Ms(U){const z=U.indexOf("?");if(!z)return"";const W=U.indexOf("#",z);return U.substring(z,W>0?W:void 0)}function Li(U,z){const W=new yt(U,z);return W.subscribe.bind(W)}class yt{constructor(z,W){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=W,this.task.then(()=>{z(this)}).catch(Ce=>{this.error(Ce)})}next(z){this.forEachObserver(W=>{W.next(z)})}error(z){this.forEachObserver(W=>{W.error(z)}),this.close(z)}complete(){this.forEachObserver(z=>{z.complete()}),this.close()}subscribe(z,W,Ce){let q;if(void 0===z&&void 0===W&&void 0===Ce)throw new Error("Missing Observer.");q=function En(U,z){if("object"!=typeof U||null===U)return!1;for(const W of z)if(W in U&&"function"==typeof U[W])return!0;return!1}(z,["next","error","complete"])?z:{next:z,error:W,complete:Ce},void 0===q.next&&(q.next=xn),void 0===q.error&&(q.error=xn),void 0===q.complete&&(q.complete=xn);const J=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?q.error(this.finalError):q.complete()}catch(Pe){}}),this.observers.push(q),J}unsubscribeOne(z){void 0===this.observers||void 0===this.observers[z]||(delete this.observers[z],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(z){if(!this.finalized)for(let W=0;W<this.observers.length;W++)this.sendOne(W,z)}sendOne(z,W){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[z])try{W(this.observers[z])}catch(Ce){"undefined"!=typeof console&&console.error&&console.error(Ce)}})}close(z){this.finalized||(this.finalized=!0,void 0!==z&&(this.finalError=z),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function xn(){}function Bt(U,z=1e3,W=2){const Ce=z*Math.pow(W,U),q=Math.round(.5*Ce*(Math.random()-.5)*2);return Math.min(144e5,Ce+q)}function gr(U){return U&&U._delegate?U._delegate:U}},4127:(et,be,N)=>{var h=N(5e3);let X=null;function O(){return X}const ue=new h.OlP("DocumentToken");let oe=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:function(){return function he(){return(0,h.LFG)(H)}()},providedIn:"platform"}),n})();const G=new h.OlP("Location Initialized");let H=(()=>{class n extends oe{constructor(t){super(),this._doc=t,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return O().getBaseHref(this._doc)}onPopState(t){const r=O().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){const r=O().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(t){this.location.pathname=t}pushState(t,r,i){te()?this._history.pushState(t,r,i):this.location.hash=i}replaceState(t,r,i){te()?this._history.replaceState(t,r,i):this.location.hash=i}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(ue))},n.\u0275prov=h.Yz7({token:n,factory:function(){return function ze(){return new H((0,h.LFG)(ue))}()},providedIn:"platform"}),n})();function te(){return!!window.history.pushState}function xe(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function Ne(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function Ue(n){return n&&"?"!==n[0]?"?"+n:n}let fe=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:function(){return function De(n){const e=(0,h.LFG)(ue).location;return new Qe((0,h.LFG)(oe),e&&e.origin||"")}()},providedIn:"root"}),n})();const We=new h.OlP("appBaseHref");let Qe=(()=>{class n extends fe{constructor(t,r){if(super(),this._platformLocation=t,this._removeListenerFns=[],null==r&&(r=this._platformLocation.getBaseHrefFromDOM()),null==r)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=r}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return xe(this._baseHref,t)}path(t=!1){const r=this._platformLocation.pathname+Ue(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,u){const c=this.prepareExternalUrl(i+Ue(u));this._platformLocation.pushState(t,r,c)}replaceState(t,r,i,u){const c=this.prepareExternalUrl(i+Ue(u));this._platformLocation.replaceState(t,r,c)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(t=0){var r,i;null===(i=(r=this._platformLocation).historyGo)||void 0===i||i.call(r,t)}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(oe),h.LFG(We,8))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})(),Ae=(()=>{class n extends fe{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(t){const r=xe(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,i,u){let c=this.prepareExternalUrl(i+Ue(u));0==c.length&&(c=this._platformLocation.pathname),this._platformLocation.pushState(t,r,c)}replaceState(t,r,i,u){let c=this.prepareExternalUrl(i+Ue(u));0==c.length&&(c=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,c)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(t=0){var r,i;null===(i=(r=this._platformLocation).historyGo)||void 0===i||i.call(r,t)}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(oe),h.LFG(We,8))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})(),we=(()=>{class n{constructor(t,r){this._subject=new h.vpe,this._urlChangeListeners=[],this._platformStrategy=t;const i=this._platformStrategy.getBaseHref();this._platformLocation=r,this._baseHref=Ne(Be(i)),this._platformStrategy.onPopState(u=>{this._subject.emit({url:this.path(!0),pop:!0,state:u.state,type:u.type})})}path(t=!1){return this.normalize(this._platformStrategy.path(t))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+Ue(r))}normalize(t){return n.stripTrailingSlash(function je(n,e){return n&&e.startsWith(n)?e.substring(n.length):e}(this._baseHref,Be(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._platformStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._platformStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Ue(r)),i)}replaceState(t,r="",i=null){this._platformStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Ue(r)),i)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}historyGo(t=0){var r,i;null===(i=(r=this._platformStrategy).historyGo)||void 0===i||i.call(r,t)}onUrlChange(t){this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}))}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r,complete:i})}}return n.normalizeQueryParams=Ue,n.joinWithSlash=xe,n.stripTrailingSlash=Ne,n.\u0275fac=function(t){return new(t||n)(h.LFG(fe),h.LFG(oe))},n.\u0275prov=h.Yz7({token:n,factory:function(){return function Ie(){return new we((0,h.LFG)(fe),(0,h.LFG)(oe))}()},providedIn:"root"}),n})();function Be(n){return n.replace(/\/index.html$/,"")}function jo(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const r=t.indexOf("="),[i,u]=-1==r?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(u)}return null}class Ps{constructor(e,t,r,i){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=i}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let Vn=(()=>{class n{constructor(t,r,i){this._viewContainer=t,this._template=r,this._differs=i,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const r=this._viewContainer;t.forEachOperation((i,u,c)=>{if(null==i.previousIndex)r.createEmbeddedView(this._template,new Ps(i.item,this._ngForOf,-1,-1),null===c?void 0:c);else if(null==c)r.remove(null===u?void 0:u);else if(null!==u){const p=r.get(u);r.move(p,c),to(p,i)}});for(let i=0,u=r.length;i<u;i++){const p=r.get(i).context;p.index=i,p.count=u,p.ngForOf=this._ngForOf}t.forEachIdentityChange(i=>{to(r.get(i.currentIndex),i)})}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(h.s_b),h.Y36(h.Rgc),h.Y36(h.ZZ4))},n.\u0275dir=h.lG2({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}}),n})();function to(n,e){n.context.$implicit=e.item}let $n=(()=>{class n{constructor(t,r){this._viewContainer=t,this._context=new an,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){Mu("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){Mu("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(h.s_b),h.Y36(h.Rgc))},n.\u0275dir=h.lG2({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),n})();class an{constructor(){this.$implicit=null,this.ngIf=null}}function Mu(n,e){if(e&&!e.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${(0,h.AaK)(e)}'.`)}let yd=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({}),n})();function qo(n){return"server"===n}let Vl=(()=>{class n{}return n.\u0275prov=(0,h.Yz7)({token:n,providedIn:"root",factory:()=>new zo((0,h.LFG)(ue),window)}),n})();class zo{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function Gi(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&(n.body.createShadowRoot||n.body.attachShadow)){const r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let i=r.currentNode;for(;i;){const u=i.shadowRoot;if(u){const c=u.getElementById(e)||u.querySelector(`[name="${e}"]`);if(c)return c}i=r.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){if(this.supportScrollRestoration()){const t=this.window.history;t&&t.scrollRestoration&&(t.scrollRestoration=e)}}scrollToElement(e){const t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,i=t.top+this.window.pageYOffset,u=this.offset();this.window.scrollTo(r-u[0],i-u[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const e=Ul(this.window.history)||Ul(Object.getPrototypeOf(this.window.history));return!(!e||!e.writable&&!e.set)}catch(e){return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(e){return!1}}}function Ul(n){return Object.getOwnPropertyDescriptor(n,"scrollRestoration")}class nn{}class io extends class ka extends class ge{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){!function re(n){X||(X=n)}(new io)}onAndCancel(e,t,r){return e.addEventListener(t,r,!1),()=>{e.removeEventListener(t,r,!1)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function Fa(){return Jt=Jt||document.querySelector("base"),Jt?Jt.getAttribute("href"):null}();return null==t?null:function Fs(n){Pu=Pu||document.createElement("a"),Pu.setAttribute("href",n);const e=Pu.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){Jt=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return jo(document.cookie,e)}}let Pu,Jt=null;const sr=new h.OlP("TRANSITION_ID"),yn=[{provide:h.ip1,useFactory:function Bl(n,e,t){return()=>{t.get(h.CZH).donePromise.then(()=>{const r=O(),i=e.querySelectorAll(`style[ng-transition="${n}"]`);for(let u=0;u<i.length;u++)r.remove(i[u])})}},deps:[sr,ue,h.zs3],multi:!0}];class qi{static init(){(0,h.VLi)(new qi)}addToWindow(e){h.dqk.getAngularTestability=(r,i=!0)=>{const u=e.findTestabilityInTree(r,i);if(null==u)throw new Error("Could not find testability for element.");return u},h.dqk.getAllAngularTestabilities=()=>e.getAllTestabilities(),h.dqk.getAllAngularRootElements=()=>e.getAllRootElements(),h.dqk.frameworkStabilizers||(h.dqk.frameworkStabilizers=[]),h.dqk.frameworkStabilizers.push(r=>{const i=h.dqk.getAllAngularTestabilities();let u=i.length,c=!1;const p=function(y){c=c||y,u--,0==u&&r(c)};i.forEach(function(y){y.whenStable(p)})})}findTestabilityInTree(e,t,r){if(null==t)return null;const i=e.getTestability(t);return null!=i?i:r?O().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null}}let or=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();const so=new h.OlP("EventManagerPlugins");let us=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(i=>i.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,r,i){return this._findPluginFor(r).addEventListener(t,r,i)}addGlobalEventListener(t,r,i){return this._findPluginFor(r).addGlobalEventListener(t,r,i)}getZone(){return this._zone}_findPluginFor(t){const r=this._eventNameToPlugin.get(t);if(r)return r;const i=this._plugins;for(let u=0;u<i.length;u++){const c=i[u];if(c.supports(t))return this._eventNameToPlugin.set(t,c),c}throw new Error(`No event manager plugin found for event ${t}`)}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(so),h.LFG(h.R0b))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();class La{constructor(e){this._doc=e}addGlobalEventListener(e,t,r){const i=O().getGlobalEventTarget(this._doc,e);if(!i)throw new Error(`Unsupported event target ${i} for event ${t}`);return this.addEventListener(i,t,r)}}let Ai=(()=>{class n{constructor(){this._stylesSet=new Set}addStyles(t){const r=new Set;t.forEach(i=>{this._stylesSet.has(i)||(this._stylesSet.add(i),r.add(i))}),this.onStylesAdded(r)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})(),zi=(()=>{class n extends Ai{constructor(t){super(),this._doc=t,this._hostNodes=new Map,this._hostNodes.set(t.head,[])}_addStylesToHost(t,r,i){t.forEach(u=>{const c=this._doc.createElement("style");c.textContent=u,i.push(r.appendChild(c))})}addHost(t){const r=[];this._addStylesToHost(this._stylesSet,t,r),this._hostNodes.set(t,r)}removeHost(t){const r=this._hostNodes.get(t);r&&r.forEach(Wo),this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach((r,i)=>{this._addStylesToHost(t,i,r)})}ngOnDestroy(){this._hostNodes.forEach(t=>t.forEach(Wo))}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(ue))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();function Wo(n){O().remove(n)}const pt={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},Ko=/%COMP%/g;function Se(n,e,t){for(let r=0;r<e.length;r++){let i=e[r];Array.isArray(i)?Se(n,i,t):(i=i.replace(Ko,n),t.push(i))}return t}function Ft(n){return e=>{if("__ngUnwrap__"===e)return n;!1===n(e)&&(e.preventDefault(),e.returnValue=!1)}}let pn=(()=>{class n{constructor(t,r,i){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.rendererByCompId=new Map,this.defaultRenderer=new Zo(t)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;switch(r.encapsulation){case h.ifc.Emulated:{let i=this.rendererByCompId.get(r.id);return i||(i=new Ba(this.eventManager,this.sharedStylesHost,r,this.appId),this.rendererByCompId.set(r.id,i)),i.applyToHost(t),i}case 1:case h.ifc.ShadowDom:return new Gl(this.eventManager,this.sharedStylesHost,t,r);default:if(!this.rendererByCompId.has(r.id)){const i=Se(r.id,r.styles,[]);this.sharedStylesHost.addStyles(i),this.rendererByCompId.set(r.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(us),h.LFG(zi),h.LFG(h.AFp))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();class Zo{constructor(e){this.eventManager=e,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?document.createElementNS(pt[t]||t,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,t){e.appendChild(t)}insertBefore(e,t,r){e&&e.insertBefore(t,r)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let r="string"==typeof e?document.querySelector(e):e;if(!r)throw new Error(`The selector "${e}" did not match any elements`);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;const u=pt[i];u?e.setAttributeNS(u,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){const i=pt[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(h.JOm.DashCase|h.JOm.Important)?e.style.setProperty(t,r,i&h.JOm.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&h.JOm.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e[t]=r}setValue(e,t){e.nodeValue=t}listen(e,t,r){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,Ft(r)):this.eventManager.addEventListener(e,t,Ft(r))}}class Ba extends Zo{constructor(e,t,r,i){super(e),this.component=r;const u=Se(i+"-"+r.id,r.styles,[]);t.addStyles(u),this.contentAttr=function Hl(n){return"_ngcontent-%COMP%".replace(Ko,n)}(i+"-"+r.id),this.hostAttr=function $l(n){return"_nghost-%COMP%".replace(Ko,n)}(i+"-"+r.id)}applyToHost(e){super.setAttribute(e,this.hostAttr,"")}createElement(e,t){const r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}}class Gl extends Zo{constructor(e,t,r,i){super(e),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const u=Se(i.id,i.styles,[]);for(let c=0;c<u.length;c++){const p=document.createElement("style");p.textContent=u[c],this.shadowRoot.appendChild(p)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}}let vg=(()=>{class n extends La{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i){return t.addEventListener(r,i,!1),()=>this.removeEventListener(t,r,i)}removeEventListener(t,r,i){return t.removeEventListener(r,i)}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(ue))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();const ku=["alt","control","meta","shift"],Fu={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Pn={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},ls={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let Ha=(()=>{class n extends La{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,r,i){const u=n.parseEventName(r),c=n.eventCallback(u.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>O().onAndCancel(t,u.domEventName,c))}static parseEventName(t){const r=t.toLowerCase().split("."),i=r.shift();if(0===r.length||"keydown"!==i&&"keyup"!==i)return null;const u=n._normalizeKey(r.pop());let c="";if(ku.forEach(y=>{const b=r.indexOf(y);b>-1&&(r.splice(b,1),c+=y+".")}),c+=u,0!=r.length||0===u.length)return null;const p={};return p.domEventName=i,p.fullKey=c,p}static getEventFullKey(t){let r="",i=function Ls(n){let e=n.key;if(null==e){if(e=n.keyIdentifier,null==e)return"Unidentified";e.startsWith("U+")&&(e=String.fromCharCode(parseInt(e.substring(2),16)),3===n.location&&Pn.hasOwnProperty(e)&&(e=Pn[e]))}return Fu[e]||e}(t);return i=i.toLowerCase()," "===i?i="space":"."===i&&(i="dot"),ku.forEach(u=>{u!=i&&ls[u](t)&&(r+=u+".")}),r+=i,r}static eventCallback(t,r,i){return u=>{n.getEventFullKey(u)===t&&i.runGuarded(()=>r(u))}}static _normalizeKey(t){return"esc"===t?"escape":t}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(ue))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();const Vu=(0,h.eFA)(h._c5,"browser",[{provide:h.Lbi,useValue:"browser"},{provide:h.g9A,useValue:function Si(){io.makeCurrent(),qi.init()},multi:!0},{provide:ue,useFactory:function Lu(){return(0,h.RDi)(document),document},deps:[]}]),$a=[{provide:h.zSh,useValue:"root"},{provide:h.qLn,useFactory:function ql(){return new h.qLn},deps:[]},{provide:so,useClass:vg,multi:!0,deps:[ue,h.R0b,h.Lbi]},{provide:so,useClass:Ha,multi:!0,deps:[ue]},{provide:pn,useClass:pn,deps:[us,zi,h.AFp]},{provide:h.FYo,useExisting:pn},{provide:Ai,useExisting:zi},{provide:zi,useClass:zi,deps:[ue]},{provide:h.dDg,useClass:h.dDg,deps:[h.R0b]},{provide:us,useClass:us,deps:[so,h.R0b]},{provide:nn,useClass:or,deps:[]}];let Yo=(()=>{class n{constructor(t){if(t)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(t){return{ngModule:n,providers:[{provide:h.AFp,useValue:t.appId},{provide:sr,useExisting:h.AFp},yn]}}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(n,12))},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({providers:$a,imports:[yd,h.hGG]}),n})();"undefined"!=typeof window&&window;var ln=N(8996),Wa=N(7669);function rt(...n){const e=(0,Wa.yG)(n);return(0,ln.D)(n,e)}var si=N(7579);class oi extends si.x{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){const{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}}var bn=N(8306);const{isArray:Zl}=Array,{getPrototypeOf:Td,prototype:Zi,keys:Yl}=Object;function cn(n){if(1===n.length){const e=n[0];if(Zl(e))return{args:e,keys:null};if(function Ka(n){return n&&"object"==typeof n&&Td(n)===Zi}(e)){const t=Yl(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}var Mi=N(4671),Dt=N(4004);const{isArray:Hu}=Array;function Sd(n){return(0,Dt.U)(e=>function Ad(n,e){return Hu(e)?n(...e):n(e)}(n,e))}function Ql(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}var In=N(5403),ta=N(9672);function ar(n,e,t){n?(0,ta.f)(t,n,e):e()}var $u=N(576);function Us(n,e){const t=(0,$u.m)(n)?n:()=>n,r=i=>i.error(t());return new bn.y(e?i=>e.schedule(r,0,i):r)}const Bs=(0,N(3888).d)(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});var ia=N(8189);function sa(...n){return function lo(){return(0,ia.J)(1)}()((0,ln.D)(n,(0,Wa.yG)(n)))}var oa=N(8421);function aa(n){return new bn.y(e=>{(0,oa.Xf)(n()).subscribe(e)})}var Za=N(515),js=N(727),Jn=N(4482);function co(){return(0,Jn.e)((n,e)=>{let t=null;n._refCount++;const r=(0,In.x)(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(t=null);const i=n._connection,u=t;t=null,i&&(!u||i===u)&&i.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}class Gu extends bn.y{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,(0,Jn.A)(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,null==e||e.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new js.w0;const t=this.getSubject();e.add(this.source.subscribe((0,In.x)(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=js.w0.EMPTY)}return e}refCount(){return co()(this)}}function Dn(n,e){return(0,Jn.e)((t,r)=>{let i=null,u=0,c=!1;const p=()=>c&&!i&&r.complete();t.subscribe((0,In.x)(r,y=>{null==i||i.unsubscribe();let b=0;const A=u++;(0,oa.Xf)(n(y,A)).subscribe(i=(0,In.x)(r,M=>r.next(e?e(y,M,A,b++):M),()=>{i=null,p()}))},()=>{c=!0,p()}))})}var ho=N(5698);function Yi(...n){const e=(0,Wa.yG)(n);return(0,Jn.e)((t,r)=>{(e?sa(n,t,e):sa(n,t)).subscribe(r)})}function ds(n,e,t,r,i){return(u,c)=>{let p=t,y=e,b=0;u.subscribe((0,In.x)(c,A=>{const M=b++;y=p?n(y,A,M):(p=!0,A),r&&c.next(y)},i&&(()=>{p&&c.next(y),c.complete()})))}}function Qi(n,e){return(0,Jn.e)(ds(n,e,arguments.length>=2,!0))}function Br(n,e){return(0,Jn.e)((t,r)=>{let i=0;t.subscribe((0,In.x)(r,u=>n.call(e,u,i++)&&r.next(u)))})}function ai(n){return(0,Jn.e)((e,t)=>{let u,r=null,i=!1;r=e.subscribe((0,In.x)(t,void 0,void 0,c=>{u=(0,oa.Xf)(n(c,ai(n)(e))),r?(r.unsubscribe(),r=null,u.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,u.subscribe(t))})}var Cn=N(5577);function Ya(n,e){return(0,$u.m)(e)?(0,Cn.z)(n,e,1):(0,Cn.z)(n,1)}function Qa(n){return n<=0?()=>Za.E:(0,Jn.e)((e,t)=>{let r=[];e.subscribe((0,In.x)(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(const i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}function gn(n=Ig){return(0,Jn.e)((e,t)=>{let r=!1;e.subscribe((0,In.x)(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function Ig(){return new Bs}function Dg(n){return(0,Jn.e)((e,t)=>{let r=!1;e.subscribe((0,In.x)(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function ua(n,e){const t=arguments.length>=2;return r=>r.pipe(n?Br((i,u)=>n(i,u,r)):Mi.y,(0,ho.q)(1),t?Dg(e):gn(()=>new Bs))}var jr=N(8505);class Hs{constructor(e,t){this.id=e,this.url=t}}class fo extends Hs{constructor(e,t,r="imperative",i=null){super(e,t),this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class qu extends Hs{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class _n extends Hs{constructor(e,t,r){super(e,t),this.reason=r}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class Jl extends Hs{constructor(e,t,r){super(e,t),this.error=r}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class po extends Hs{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Qy extends Hs{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Xl extends Hs{constructor(e,t,r,i,u){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=u}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class ui extends Hs{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Hr extends Hs{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class la{constructor(e){this.route=e}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class go{constructor(e){this.route=e}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class mo{constructor(e){this.snapshot=e}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class ca{constructor(e){this.snapshot=e}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class yo{constructor(e){this.snapshot=e}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class hs{constructor(e){this.snapshot=e}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Ja{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}const kt="primary";class zu{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function Xn(n){return new zu(n)}const Xa="ngNavigationCancelingError";function $s(n){const e=Error("NavigationCancelingError: "+n);return e[Xa]=!0,e}function xd(n,e,t){const r=t.path.split("/");if(r.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||r.length<n.length))return null;const i={};for(let u=0;u<r.length;u++){const c=r[u],p=n[u];if(c.startsWith(":"))i[c.substring(1)]=p;else if(c!==p.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function xi(n,e){const t=n?Object.keys(n):void 0,r=e?Object.keys(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let u=0;u<t.length;u++)if(i=t[u],!Wu(n[i],e[i]))return!1;return!0}function Wu(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),r=[...e].sort();return t.every((i,u)=>r[u]===i)}return n===e}function Rd(n){return Array.prototype.concat.apply([],n)}function Ji(n){return n.length>0?n[n.length-1]:null}function dn(n,e){for(const t in n)n.hasOwnProperty(t)&&e(n[t],t)}function er(n){return(0,h.CqO)(n)?n:(0,h.QGY)(n)?(0,ln.D)(Promise.resolve(n)):rt(n)}const da={exact:function D(n,e,t){if(!ht(n.segments,e.segments)||!Y(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!n.children[r]||!D(n.children[r],e.children[r],t))return!1;return!0},subset:R},ha={exact:function Pd(n,e){return xi(n,e)},subset:function C(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>Wu(n[t],e[t]))},ignored:()=>!0};function _o(n,e,t){return da[t.paths](n.root,e.root,t.matrixParams)&&ha[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function R(n,e,t){return L(n,e,e.segments,t)}function L(n,e,t,r){if(n.segments.length>t.length){const i=n.segments.slice(0,t.length);return!(!ht(i,t)||e.hasChildren()||!Y(i,t,r))}if(n.segments.length===t.length){if(!ht(n.segments,t)||!Y(n.segments,t,r))return!1;for(const i in e.children)if(!n.children[i]||!R(n.children[i],e.children[i],r))return!1;return!0}{const i=t.slice(0,n.segments.length),u=t.slice(n.segments.length);return!!(ht(n.segments,i)&&Y(n.segments,i,r)&&n.children[kt])&&L(n.children[kt],e,u,r)}}function Y(n,e,t){return e.every((r,i)=>ha[t](n[i].parameters,r.parameters))}class ne{constructor(e,t,r){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Xn(this.queryParams)),this._queryParamMap}toString(){return tr.serialize(this)}}class me{constructor(e,t){this.segments=e,this.children=t,this.parent=null,dn(t,(r,i)=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return fs(this)}}class Ve{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=Xn(this.parameters)),this._parameterMap}toString(){return Yu(this)}}function ht(n,e){return n.length===e.length&&n.every((t,r)=>t.path===e[r].path)}class wt{}class _r{parse(e){const t=new e_(e);return new ne(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${$r(e.root,!0)}`,r=function Ag(n){const e=Object.keys(n).map(t=>{const r=n[t];return Array.isArray(r)?r.map(i=>`${ci(t)}=${ci(i)}`).join("&"):`${ci(t)}=${ci(r)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams);return`${t}${r}${"string"==typeof e.fragment?`#${function di(n){return encodeURI(n)}(e.fragment)}`:""}`}}const tr=new _r;function fs(n){return n.segments.map(e=>Yu(e)).join("/")}function $r(n,e){if(!n.hasChildren())return fs(n);if(e){const t=n.children[kt]?$r(n.children[kt],!1):"",r=[];return dn(n.children,(i,u)=>{u!==kt&&r.push(`${u}:${$r(i,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}{const t=function jt(n,e){let t=[];return dn(n.children,(r,i)=>{i===kt&&(t=t.concat(e(r,i)))}),dn(n.children,(r,i)=>{i!==kt&&(t=t.concat(e(r,i)))}),t}(n,(r,i)=>i===kt?[$r(n.children[kt],!1)]:[`${i}:${$r(r,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[kt]?`${fs(n)}/${t[0]}`:`${fs(n)}/(${t.join("//")})`}}function li(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function ci(n){return li(n).replace(/%3B/gi,";")}function Ku(n){return li(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Zu(n){return decodeURIComponent(n)}function tc(n){return Zu(n.replace(/\+/g,"%20"))}function Yu(n){return`${Ku(n.path)}${function Tg(n){return Object.keys(n).map(e=>`;${Ku(e)}=${Ku(n[e])}`).join("")}(n.parameters)}`}const pf=/^[^\/()?;=#]+/;function vo(n){const e=n.match(pf);return e?e[0]:""}const nc=/^[^=?&#]+/,Sg=/^[^&#]+/;class e_{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new me([],{}):new me([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[kt]=new me(e,t)),r}parseSegment(){const e=vo(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(e),new Ve(Zu(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=vo(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const i=vo(this.remaining);i&&(r=i,this.capture(r))}e[Zu(t)]=Zu(r)}parseQueryParam(e){const t=function Xy(n){const e=n.match(nc);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const c=function Mg(n){const e=n.match(Sg);return e?e[0]:""}(this.remaining);c&&(r=c,this.capture(r))}const i=tc(t),u=tc(r);if(e.hasOwnProperty(i)){let c=e[i];Array.isArray(c)||(c=[c],e[i]=c),c.push(u)}else e[i]=u}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=vo(this.remaining),i=this.remaining[r.length];if("/"!==i&&")"!==i&&";"!==i)throw new Error(`Cannot parse url '${this.url}'`);let u;r.indexOf(":")>-1?(u=r.substr(0,r.indexOf(":")),this.capture(u),this.capture(":")):e&&(u=kt);const c=this.parseChildren();t[u]=1===Object.keys(c).length?c[kt]:new me([],c),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new Error(`Expected "${e}".`)}}class xg{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=gf(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){const t=gf(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=Qu(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return Qu(e,this._root).map(t=>t.value)}}function gf(n,e){if(n===e.value)return e;for(const t of e.children){const r=gf(n,t);if(r)return r}return null}function Qu(n,e){if(n===e.value)return[e];for(const t of e.children){const r=Qu(n,t);if(r.length)return r.unshift(e),r}return[]}class Eo{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function wo(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class Nd extends xg{constructor(e,t){super(e),this.snapshot=t,kd(this,e)}toString(){return this.snapshot.toString()}}function eu(n,e){const t=function t_(n,e){const c=new fa([],{},{},"",{},kt,e,null,n.root,-1,{});return new mf("",new Eo(c,[]))}(n,e),r=new oi([new Ve("",{})]),i=new oi({}),u=new oi({}),c=new oi({}),p=new oi(""),y=new Ju(r,i,c,p,u,kt,e,t.root);return y.snapshot=t.root,new Nd(new Eo(y,[]),t)}class Ju{constructor(e,t,r,i,u,c,p,y){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=u,this.outlet=c,this.component=p,this._futureSnapshot=y}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,Dt.U)(e=>Xn(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,Dt.U)(e=>Xn(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function n_(n,e="emptyOnly"){const t=n.pathFromRoot;let r=0;if("always"!==e)for(r=t.length-1;r>=1;){const i=t[r],u=t[r-1];if(i.routeConfig&&""===i.routeConfig.path)r--;else{if(u.component)break;r--}}return function Od(n){return n.reduce((e,t)=>({params:Object.assign(Object.assign({},e.params),t.params),data:Object.assign(Object.assign({},e.data),t.data),resolve:Object.assign(Object.assign({},e.resolve),t._resolvedData)}),{params:{},data:{},resolve:{}})}(t.slice(r))}class fa{constructor(e,t,r,i,u,c,p,y,b,A,M){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=u,this.outlet=c,this.component=p,this.routeConfig=y,this._urlSegment=b,this._lastPathIndex=A,this._resolve=M}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=Xn(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Xn(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class mf extends xg{constructor(e,t){super(t),this.url=e,kd(this,t)}toString(){return yf(this._root)}}function kd(n,e){e.value._routerState=n,e.children.forEach(t=>kd(n,t))}function yf(n){const e=n.children.length>0?` { ${n.children.map(yf).join(", ")} } `:"";return`${n.value}${e}`}function Fd(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,xi(e.queryParams,t.queryParams)||n.queryParams.next(t.queryParams),e.fragment!==t.fragment&&n.fragment.next(t.fragment),xi(e.params,t.params)||n.params.next(t.params),function Gs(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!xi(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.url.next(t.url),xi(e.data,t.data)||n.data.next(t.data)}else n.snapshot=n._futureSnapshot,n.data.next(n._futureSnapshot.data)}function _f(n,e){const t=xi(n.params,e.params)&&function Ct(n,e){return ht(n,e)&&n.every((t,r)=>xi(t.parameters,e[r].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||_f(n.parent,e.parent))}function rc(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const r=t.value;r._futureSnapshot=e.value;const i=function r_(n,e,t){return e.children.map(r=>{for(const i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return rc(n,r,i);return rc(n,r)})}(n,e,t);return new Eo(r,i)}{if(n.shouldAttach(e.value)){const u=n.retrieve(e.value);if(null!==u){const c=u.route;return c.value._futureSnapshot=e.value,c.children=e.children.map(p=>rc(n,p)),c}}const r=function i_(n){return new Ju(new oi(n.url),new oi(n.params),new oi(n.queryParams),new oi(n.fragment),new oi(n.data),n.outlet,n.component,n)}(e.value),i=e.children.map(u=>rc(n,u));return new Eo(r,i)}}function qs(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function ic(n){return"object"==typeof n&&null!=n&&n.outlets}function Ld(n,e,t,r,i){let u={};if(r&&dn(r,(p,y)=>{u[y]=Array.isArray(p)?p.map(b=>`${b}`):`${p}`}),n===e)return new ne(t,u,i);const c=s_(n,e,t);return new ne(c,u,i)}function s_(n,e,t){const r={};return dn(n.children,(i,u)=>{r[u]=i===e?t:s_(i,e,t)}),new me(n.segments,r)}class Pg{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&qs(r[0]))throw new Error("Root segment cannot have matrix parameters");const i=r.find(ic);if(i&&i!==Ji(r))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class Vd{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}}function Fg(n,e,t){if(n||(n=new me([],{})),0===n.segments.length&&n.hasChildren())return Ud(n,e,t);const r=function A0(n,e,t){let r=0,i=e;const u={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return u;const c=n.segments[i],p=t[r];if(ic(p))break;const y=`${p}`,b=r<t.length-1?t[r+1]:null;if(i>0&&void 0===y)break;if(y&&b&&"object"==typeof b&&void 0===b.outlets){if(!ps(y,b,c))return u;r+=2}else{if(!ps(y,{},c))return u;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){const u=new me(n.segments.slice(0,r.pathIndex),{});return u.children[kt]=new me(n.segments.slice(r.pathIndex),n.children),Ud(u,0,i)}return r.match&&0===i.length?new me(n.segments,{}):r.match&&!n.hasChildren()?Lg(n,e,t):r.match?Ud(n,0,i):Lg(n,e,t)}function Ud(n,e,t){if(0===t.length)return new me(n.segments,{});{const r=function kg(n){return ic(n[0])?n[0].outlets:{[kt]:n}}(t),i={};return dn(r,(u,c)=>{"string"==typeof u&&(u=[u]),null!==u&&(i[c]=Fg(n.children[c],e,u))}),dn(n.children,(u,c)=>{void 0===r[c]&&(i[c]=u)}),new me(n.segments,i)}}function Lg(n,e,t){const r=n.segments.slice(0,e);let i=0;for(;i<t.length;){const u=t[i];if(ic(u)){const y=zs(u.outlets);return new me(r,y)}if(0===i&&qs(t[0])){r.push(new Ve(n.segments[e].path,vf(t[0]))),i++;continue}const c=ic(u)?u.outlets[kt]:`${u}`,p=i<t.length-1?t[i+1]:null;c&&p&&qs(p)?(r.push(new Ve(c,vf(p))),i+=2):(r.push(new Ve(c,{})),i++)}return new me(r,{})}function zs(n){const e={};return dn(n,(t,r)=>{"string"==typeof t&&(t=[t]),null!==t&&(e[r]=Lg(new me([],{}),0,t))}),e}function vf(n){const e={};return dn(n,(t,r)=>e[r]=`${t}`),e}function ps(n,e,t){return n==t.path&&xi(e,t.parameters)}class Vg{constructor(e,t,r,i){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i}activate(e){const t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),Fd(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){const i=wo(t);e.children.forEach(u=>{const c=u.value.outlet;this.deactivateRoutes(u,i[c],r),delete i[c]}),dn(i,(u,c)=>{this.deactivateRouteAndItsChildren(u,r)})}deactivateRoutes(e,t,r){const i=e.value,u=t?t.value:null;if(i===u)if(i.component){const c=r.getContext(i.outlet);c&&this.deactivateChildRoutes(e,t,c.children)}else this.deactivateChildRoutes(e,t,r);else u&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,u=wo(e);for(const c of Object.keys(u))this.deactivateRouteAndItsChildren(u[c],i);if(r&&r.outlet){const c=r.outlet.detach(),p=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:c,route:e,contexts:p})}}deactivateRouteAndOutlet(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,u=wo(e);for(const c of Object.keys(u))this.deactivateRouteAndItsChildren(u[c],i);r&&r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated(),r.attachRef=null,r.resolver=null,r.route=null)}activateChildRoutes(e,t,r){const i=wo(t);e.children.forEach(u=>{this.activateRoutes(u,i[u.value.outlet],r),this.forwardEvent(new hs(u.value.snapshot))}),e.children.length&&this.forwardEvent(new ca(e.value.snapshot))}activateRoutes(e,t,r){const i=e.value,u=t?t.value:null;if(Fd(i),i===u)if(i.component){const c=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,c.children)}else this.activateChildRoutes(e,t,r);else if(i.component){const c=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){const p=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),c.children.onOutletReAttached(p.contexts),c.attachRef=p.componentRef,c.route=p.route.value,c.outlet&&c.outlet.attach(p.componentRef,p.route.value),Fd(p.route.value),this.activateChildRoutes(e,null,c.children)}else{const p=function Bd(n){for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig;if(t&&t.component)return null}return null}(i.snapshot),y=p?p.module.componentFactoryResolver:null;c.attachRef=null,c.route=i,c.resolver=y,c.outlet&&c.outlet.activateWith(i,y),this.activateChildRoutes(e,null,c.children)}}else this.activateChildRoutes(e,null,r)}}class jd{constructor(e,t){this.routes=e,this.module=t}}function nu(n){return"function"==typeof n}function Xu(n){return n instanceof ne}const Hd=Symbol("INITIAL_VALUE");function el(){return Dn(n=>function na(...n){const e=(0,Wa.yG)(n),t=(0,Wa.jO)(n),{args:r,keys:i}=cn(n);if(0===r.length)return(0,ln.D)([],e);const u=new bn.y(function Vs(n,e,t=Mi.y){return r=>{ar(e,()=>{const{length:i}=n,u=new Array(i);let c=i,p=i;for(let y=0;y<i;y++)ar(e,()=>{const b=(0,ln.D)(n[y],e);let A=!1;b.subscribe((0,In.x)(r,M=>{u[y]=M,A||(A=!0,p--),p||r.next(t(u.slice()))},()=>{--c||r.complete()}))},r)},r)}}(r,e,i?c=>Ql(i,c):Mi.y));return t?u.pipe(Sd(t)):u}(n.map(e=>e.pipe((0,ho.q)(1),Yi(Hd)))).pipe(Qi((e,t)=>{let r=!1;return t.reduce((i,u,c)=>i!==Hd?i:(u===Hd&&(r=!0),r||!1!==u&&c!==t.length-1&&!Xu(u)?i:u),e)},Hd),Br(e=>e!==Hd),(0,Dt.U)(e=>Xu(e)?e:!0===e),(0,ho.q)(1)))}class o_{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new tl,this.attachRef=null}}class tl{constructor(){this.contexts=new Map}onChildOutletCreated(e,t){const r=this.getOrCreateContext(e);r.outlet=t,this.contexts.set(e,r)}onChildOutletDestroyed(e){const t=this.getContext(e);t&&(t.outlet=null,t.attachRef=null)}onOutletDeactivated(){const e=this.contexts;return this.contexts=new Map,e}onOutletReAttached(e){this.contexts=e}getOrCreateContext(e){let t=this.getContext(e);return t||(t=new o_,this.contexts.set(e,t)),t}getContext(e){return this.contexts.get(e)||null}}let oc=(()=>{class n{constructor(t,r,i,u,c){this.parentContexts=t,this.location=r,this.resolver=i,this.changeDetector=c,this.activated=null,this._activatedRoute=null,this.activateEvents=new h.vpe,this.deactivateEvents=new h.vpe,this.attachEvents=new h.vpe,this.detachEvents=new h.vpe,this.name=u||kt,t.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const t=this.parentContexts.getContext(this.name);t&&t.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=t;const c=(r=r||this.resolver).resolveComponentFactory(t._futureSnapshot.routeConfig.component),p=this.parentContexts.getOrCreateContext(this.name).children,y=new a_(t,p,this.location.injector);this.activated=this.location.createComponent(c,this.location.length,y),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(tl),h.Y36(h.s_b),h.Y36(h._Vd),h.$8M("name"),h.Y36(h.sBO))},n.\u0275dir=h.lG2({type:n,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"]}),n})();class a_{constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===Ju?this.route:e===tl?this.childContexts:this.parent.get(e,t)}}let bf=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=h.Xpm({type:n,selectors:[["ng-component"]],decls:1,vars:0,template:function(t,r){1&t&&h._UZ(0,"router-outlet")},directives:[oc],encapsulation:2}),n})();function ru(n,e=""){for(let t=0;t<n.length;t++){const r=n[t];If(r,Df(e,r))}}function If(n,e){n.children&&ru(n.children,e)}function Df(n,e){return e?n||e.path?n&&!e.path?`${n}/`:!n&&e.path?e.path:`${n}/${e.path}`:"":n}function Cf(n){const e=n.children&&n.children.map(Cf),t=e?Object.assign(Object.assign({},n),{children:e}):Object.assign({},n);return!t.component&&(e||t.loadChildren)&&t.outlet&&t.outlet!==kt&&(t.component=bf),t}function qt(n){return n.outlet||kt}function Bg(n,e){const t=n.filter(r=>qt(r)===e);return t.push(...n.filter(r=>qt(r)!==e)),t}const jg={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function nl(n,e,t){var r;if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?Object.assign({},jg):{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};const u=(e.matcher||xd)(t,n,e);if(!u)return Object.assign({},jg);const c={};dn(u.posParams,(y,b)=>{c[b]=y.path});const p=u.consumed.length>0?Object.assign(Object.assign({},c),u.consumed[u.consumed.length-1].parameters):c;return{matched:!0,consumedSegments:u.consumed,remainingSegments:t.slice(u.consumed.length),parameters:p,positionalParamSegments:null!==(r=u.posParams)&&void 0!==r?r:{}}}function rl(n,e,t,r,i="corrected"){if(t.length>0&&function c_(n,e,t){return t.some(r=>iu(n,e,r)&&qt(r)!==kt)}(n,t,r)){const c=new me(e,function l_(n,e,t,r){const i={};i[kt]=r,r._sourceSegment=n,r._segmentIndexShift=e.length;for(const u of t)if(""===u.path&&qt(u)!==kt){const c=new me([],{});c._sourceSegment=n,c._segmentIndexShift=e.length,i[qt(u)]=c}return i}(n,e,r,new me(t,n.children)));return c._sourceSegment=n,c._segmentIndexShift=e.length,{segmentGroup:c,slicedSegments:[]}}if(0===t.length&&function d_(n,e,t){return t.some(r=>iu(n,e,r))}(n,t,r)){const c=new me(n.segments,function u_(n,e,t,r,i,u){const c={};for(const p of r)if(iu(n,t,p)&&!i[qt(p)]){const y=new me([],{});y._sourceSegment=n,y._segmentIndexShift="legacy"===u?n.segments.length:e.length,c[qt(p)]=y}return Object.assign(Object.assign({},i),c)}(n,e,t,r,n.children,i));return c._sourceSegment=n,c._segmentIndexShift=e.length,{segmentGroup:c,slicedSegments:t}}const u=new me(n.segments,n.children);return u._sourceSegment=n,u._segmentIndexShift=e.length,{segmentGroup:u,slicedSegments:t}}function iu(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}function h_(n,e,t,r){return!!(qt(n)===r||r!==kt&&iu(e,t,n))&&("**"===n.path||nl(e,n,t).matched)}function Hg(n,e,t){return 0===e.length&&!n.children[t]}class ga{constructor(e){this.segmentGroup=e||null}}class xr{constructor(e){this.urlTree=e}}function su(n){return Us(new ga(n))}function Tf(n){return Us(new xr(n))}class $d{constructor(e,t,r,i,u){this.configLoader=t,this.urlSerializer=r,this.urlTree=i,this.config=u,this.allowRedirects=!0,this.ngModule=e.get(h.h0i)}apply(){const e=rl(this.urlTree.root,[],[],this.config).segmentGroup,t=new me(e.segments,e.children);return this.expandSegmentGroup(this.ngModule,this.config,t,kt).pipe((0,Dt.U)(u=>this.createUrlTree(ac(u),this.urlTree.queryParams,this.urlTree.fragment))).pipe(ai(u=>{if(u instanceof xr)return this.allowRedirects=!1,this.match(u.urlTree);throw u instanceof ga?this.noMatchError(u):u}))}match(e){return this.expandSegmentGroup(this.ngModule,this.config,e.root,kt).pipe((0,Dt.U)(i=>this.createUrlTree(ac(i),e.queryParams,e.fragment))).pipe(ai(i=>{throw i instanceof ga?this.noMatchError(i):i}))}noMatchError(e){return new Error(`Cannot match any routes. URL Segment: '${e.segmentGroup}'`)}createUrlTree(e,t,r){const i=e.segments.length>0?new me([],{[kt]:e}):e;return new ne(i,t,r)}expandSegmentGroup(e,t,r,i){return 0===r.segments.length&&r.hasChildren()?this.expandChildren(e,t,r).pipe((0,Dt.U)(u=>new me([],u))):this.expandSegment(e,r,t,r.segments,i,!0)}expandChildren(e,t,r){const i=[];for(const u of Object.keys(r.children))"primary"===u?i.unshift(u):i.push(u);return(0,ln.D)(i).pipe(Ya(u=>{const c=r.children[u],p=Bg(t,u);return this.expandSegmentGroup(e,p,c,u).pipe((0,Dt.U)(y=>({segment:y,outlet:u})))}),Qi((u,c)=>(u[c.outlet]=c.segment,u),{}),function Yy(n,e){const t=arguments.length>=2;return r=>r.pipe(n?Br((i,u)=>n(i,u,r)):Mi.y,Qa(1),t?Dg(e):gn(()=>new Bs))}())}expandSegment(e,t,r,i,u,c){return(0,ln.D)(r).pipe(Ya(p=>this.expandSegmentAgainstRoute(e,t,r,p,i,u,c).pipe(ai(b=>{if(b instanceof ga)return rt(null);throw b}))),ua(p=>!!p),ai((p,y)=>{if(p instanceof Bs||"EmptyError"===p.name)return Hg(t,i,u)?rt(new me([],{})):su(t);throw p}))}expandSegmentAgainstRoute(e,t,r,i,u,c,p){return h_(i,t,u,c)?void 0===i.redirectTo?this.matchSegmentAgainstRoute(e,t,i,u,c):p&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,t,r,i,u,c):su(t):su(t)}expandSegmentAgainstRouteUsingRedirect(e,t,r,i,u,c){return"**"===i.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,r,i,c):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,u,c)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,r,i){const u=this.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?Tf(u):this.lineralizeSegments(r,u).pipe((0,Cn.z)(c=>{const p=new me(c,{});return this.expandSegment(e,p,t,c,i,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,u,c){const{matched:p,consumedSegments:y,remainingSegments:b,positionalParamSegments:A}=nl(t,i,u);if(!p)return su(t);const M=this.applyRedirectCommands(y,i.redirectTo,A);return i.redirectTo.startsWith("/")?Tf(M):this.lineralizeSegments(i,M).pipe((0,Cn.z)(F=>this.expandSegment(e,t,r,F.concat(b),c,!1)))}matchSegmentAgainstRoute(e,t,r,i,u){if("**"===r.path)return r.loadChildren?(r._loadedConfig?rt(r._loadedConfig):this.configLoader.load(e.injector,r)).pipe((0,Dt.U)(M=>(r._loadedConfig=M,new me(i,{})))):rt(new me(i,{}));const{matched:c,consumedSegments:p,remainingSegments:y}=nl(t,r,i);return c?this.getChildConfig(e,r,i).pipe((0,Cn.z)(A=>{const M=A.module,F=A.routes,{segmentGroup:V,slicedSegments:B}=rl(t,p,y,F),se=new me(V.segments,V.children);if(0===B.length&&se.hasChildren())return this.expandChildren(M,F,se).pipe((0,Dt.U)(tt=>new me(p,tt)));if(0===F.length&&0===B.length)return rt(new me(p,{}));const Te=qt(r)===u;return this.expandSegment(M,se,F,B,Te?kt:u,!0).pipe((0,Dt.U)(nt=>new me(p.concat(nt.segments),nt.children)))})):su(t)}getChildConfig(e,t,r){return t.children?rt(new jd(t.children,e)):t.loadChildren?void 0!==t._loadedConfig?rt(t._loadedConfig):this.runCanLoadGuards(e.injector,t,r).pipe((0,Cn.z)(i=>i?this.configLoader.load(e.injector,t).pipe((0,Dt.U)(u=>(t._loadedConfig=u,u))):function ur(n){return Us($s(`Cannot load children because the guard of the route "path: '${n.path}'" returned false`))}(t))):rt(new jd([],e))}runCanLoadGuards(e,t,r){const i=t.canLoad;return i&&0!==i.length?rt(i.map(c=>{const p=e.get(c);let y;if(function Ef(n){return n&&nu(n.canLoad)}(p))y=p.canLoad(t,r);else{if(!nu(p))throw new Error("Invalid CanLoad guard");y=p(t,r)}return er(y)})).pipe(el(),(0,jr.b)(c=>{if(!Xu(c))return;const p=$s(`Redirecting to "${this.urlSerializer.serialize(c)}"`);throw p.url=c,p}),(0,Dt.U)(c=>!0===c)):rt(!0)}lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),0===i.numberOfChildren)return rt(r);if(i.numberOfChildren>1||!i.children[kt])return Us(new Error(`Only absolute redirects can have named outlets. redirectTo: '${e.redirectTo}'`));i=i.children[kt]}}applyRedirectCommands(e,t,r){return this.applyRedirectCreatreUrlTree(t,this.urlSerializer.parse(t),e,r)}applyRedirectCreatreUrlTree(e,t,r,i){const u=this.createSegmentGroup(e,t.root,r,i);return new ne(u,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const r={};return dn(e,(i,u)=>{if("string"==typeof i&&i.startsWith(":")){const p=i.substring(1);r[u]=t[p]}else r[u]=i}),r}createSegmentGroup(e,t,r,i){const u=this.createSegments(e,t.segments,r,i);let c={};return dn(t.children,(p,y)=>{c[y]=this.createSegmentGroup(e,p,r,i)}),new me(u,c)}createSegments(e,t,r,i){return t.map(u=>u.path.startsWith(":")?this.findPosParam(e,u,i):this.findOrReturn(u,r))}findPosParam(e,t,r){const i=r[t.path.substring(1)];if(!i)throw new Error(`Cannot redirect to '${e}'. Cannot find '${t.path}'.`);return i}findOrReturn(e,t){let r=0;for(const i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}}function ac(n){const e={};for(const r of Object.keys(n.children)){const u=ac(n.children[r]);(u.segments.length>0||u.hasChildren())&&(e[r]=u)}return function f_(n){if(1===n.numberOfChildren&&n.children[kt]){const e=n.children[kt];return new me(n.segments.concat(e.segments),e.children)}return n}(new me(n.segments,e))}class hi{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class bo{constructor(e,t){this.component=e,this.route=t}}function Gg(n,e,t){const r=n._root;return au(r,e?e._root:null,t,[r.value])}function il(n,e,t){const r=function Sf(n){if(!n)return null;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig}return null}(e);return(r?r.module.injector:t).get(n)}function au(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const u=wo(e);return n.children.forEach(c=>{(function zg(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const u=n.value,c=e?e.value:null,p=t?t.getContext(n.value.outlet):null;if(c&&u.routeConfig===c.routeConfig){const y=function p_(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!ht(n.url,e.url);case"pathParamsOrQueryParamsChange":return!ht(n.url,e.url)||!xi(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!_f(n,e)||!xi(n.queryParams,e.queryParams);default:return!_f(n,e)}}(c,u,u.routeConfig.runGuardsAndResolvers);y?i.canActivateChecks.push(new hi(r)):(u.data=c.data,u._resolvedData=c._resolvedData),au(n,e,u.component?p?p.children:null:t,r,i),y&&p&&p.outlet&&p.outlet.isActivated&&i.canDeactivateChecks.push(new bo(p.outlet.component,c))}else c&&fi(e,p,i),i.canActivateChecks.push(new hi(r)),au(n,null,u.component?p?p.children:null:t,r,i)})(c,u[c.value.outlet],t,r.concat([c.value]),i),delete u[c.value.outlet]}),dn(u,(c,p)=>fi(c,t.getContext(p),i)),i}function fi(n,e,t){const r=wo(n),i=n.value;dn(r,(u,c)=>{fi(u,i.component?e?e.children.getContext(c):null:e,t)}),t.canDeactivateChecks.push(new bo(i.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,i))}class Zg{}function Ws(n){return new bn.y(e=>e.error(n))}class Yg{constructor(e,t,r,i,u,c){this.rootComponentType=e,this.config=t,this.urlTree=r,this.url=i,this.paramsInheritanceStrategy=u,this.relativeLinkResolution=c}recognize(){const e=rl(this.urlTree.root,[],[],this.config.filter(c=>void 0===c.redirectTo),this.relativeLinkResolution).segmentGroup,t=this.processSegmentGroup(this.config,e,kt);if(null===t)return null;const r=new fa([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},kt,this.rootComponentType,null,this.urlTree.root,-1,{}),i=new Eo(r,t),u=new mf(this.url,i);return this.inheritParamsAndData(u._root),u}inheritParamsAndData(e){const t=e.value,r=n_(t,this.paramsInheritanceStrategy);t.params=Object.freeze(r.params),t.data=Object.freeze(r.data),e.children.forEach(i=>this.inheritParamsAndData(i))}processSegmentGroup(e,t,r){return 0===t.segments.length&&t.hasChildren()?this.processChildren(e,t):this.processSegment(e,t,t.segments,r)}processChildren(e,t){const r=[];for(const u of Object.keys(t.children)){const c=t.children[u],p=Bg(e,u),y=this.processSegmentGroup(p,c,u);if(null===y)return null;r.push(...y)}const i=Jg(r);return function Qg(n){n.sort((e,t)=>e.value.outlet===kt?-1:t.value.outlet===kt?1:e.value.outlet.localeCompare(t.value.outlet))}(i),i}processSegment(e,t,r,i){for(const u of e){const c=this.processSegmentAgainstRoute(u,t,r,i);if(null!==c)return c}return Hg(t,r,i)?[]:null}processSegmentAgainstRoute(e,t,r,i){if(e.redirectTo||!h_(e,t,r,i))return null;let u,c=[],p=[];if("**"===e.path){const V=r.length>0?Ji(r).parameters:{};u=new fa(r,V,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,_(e),qt(e),e.component,e,uu(t),gs(t)+r.length,f(e))}else{const V=nl(t,e,r);if(!V.matched)return null;c=V.consumedSegments,p=V.remainingSegments,u=new fa(c,V.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,_(e),qt(e),e.component,e,uu(t),gs(t)+c.length,f(e))}const y=function y_(n){return n.children?n.children:n.loadChildren?n._loadedConfig.routes:[]}(e),{segmentGroup:b,slicedSegments:A}=rl(t,c,p,y.filter(V=>void 0===V.redirectTo),this.relativeLinkResolution);if(0===A.length&&b.hasChildren()){const V=this.processChildren(y,b);return null===V?null:[new Eo(u,V)]}if(0===y.length&&0===A.length)return[new Eo(u,[])];const M=qt(e)===i,F=this.processSegment(y,b,A,M?kt:i);return null===F?null:[new Eo(u,F)]}}function Rf(n){const e=n.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function Jg(n){const e=[],t=new Set;for(const r of n){if(!Rf(r)){e.push(r);continue}const i=e.find(u=>r.value.routeConfig===u.value.routeConfig);void 0!==i?(i.children.push(...r.children),t.add(i)):e.push(r)}for(const r of t){const i=Jg(r.children);e.push(new Eo(r.value,i))}return e.filter(r=>!t.has(r))}function uu(n){let e=n;for(;e._sourceSegment;)e=e._sourceSegment;return e}function gs(n){let e=n,t=e._segmentIndexShift?e._segmentIndexShift:0;for(;e._sourceSegment;)e=e._sourceSegment,t+=e._segmentIndexShift?e._segmentIndexShift:0;return t-1}function _(n){return n.data||{}}function f(n){return n.resolve||{}}function K(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function Le(n){return Dn(e=>{const t=n(e);return t?(0,ln.D)(t).pipe((0,Dt.U)(()=>e)):rt(e)})}class dt extends class _t{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}{}const Tn=new h.OlP("ROUTES");class gi{constructor(e,t,r,i){this.injector=e,this.compiler=t,this.onLoadStartListener=r,this.onLoadEndListener=i}load(e,t){if(t._loader$)return t._loader$;this.onLoadStartListener&&this.onLoadStartListener(t);const i=this.loadModuleFactory(t.loadChildren).pipe((0,Dt.U)(u=>{this.onLoadEndListener&&this.onLoadEndListener(t);const c=u.create(e);return new jd(Rd(c.injector.get(Tn,void 0,h.XFs.Self|h.XFs.Optional)).map(Cf),c)}),ai(u=>{throw t._loader$=void 0,u}));return t._loader$=new Gu(i,()=>new si.x).pipe(co()),t._loader$}loadModuleFactory(e){return er(e()).pipe((0,Cn.z)(t=>t instanceof h.YKP?rt(t):(0,ln.D)(this.compiler.compileModuleAsync(t))))}}class __{shouldProcessUrl(e){return!0}extract(e){return e}merge(e,t){return e}}function ma(n){throw n}function qd(n,e,t){return e.parse("/")}function zd(n,e){return rt(null)}const Pf={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},Wd={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let Gr=(()=>{class n{constructor(t,r,i,u,c,p,y){this.rootComponentType=t,this.urlSerializer=r,this.rootContexts=i,this.location=u,this.config=y,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new si.x,this.errorHandler=ma,this.malformedUriErrorHandler=qd,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:zd,afterPreactivation:zd},this.urlHandlingStrategy=new __,this.routeReuseStrategy=new dt,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.ngModule=c.get(h.h0i),this.console=c.get(h.c2e);const M=c.get(h.R0b);this.isNgZoneEnabled=M instanceof h.R0b&&h.R0b.isInAngularZone(),this.resetConfig(y),this.currentUrlTree=function Jy(){return new ne(new me([],{}),{},null)}(),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new gi(c,p,F=>this.triggerEvent(new la(F)),F=>this.triggerEvent(new go(F))),this.routerState=eu(this.currentUrlTree,this.rootComponentType),this.transitions=new oi({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){var t;return null===(t=this.location.getState())||void 0===t?void 0:t.\u0275routerPageId}setupNavigations(t){const r=this.events;return t.pipe(Br(i=>0!==i.id),(0,Dt.U)(i=>Object.assign(Object.assign({},i),{extractedUrl:this.urlHandlingStrategy.extract(i.rawUrl)})),Dn(i=>{let u=!1,c=!1;return rt(i).pipe((0,jr.b)(p=>{this.currentNavigation={id:p.id,initialUrl:p.currentRawUrl,extractedUrl:p.extractedUrl,trigger:p.source,extras:p.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign(Object.assign({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),Dn(p=>{const y=this.browserUrlTree.toString(),b=!this.navigated||p.extractedUrl.toString()!==y||y!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||b)&&this.urlHandlingStrategy.shouldProcessUrl(p.rawUrl))return Of(p.source)&&(this.browserUrlTree=p.extractedUrl),rt(p).pipe(Dn(M=>{const F=this.transitions.getValue();return r.next(new fo(M.id,this.serializeUrl(M.extractedUrl),M.source,M.restoredState)),F!==this.transitions.getValue()?Za.E:Promise.resolve(M)}),function $g(n,e,t,r){return Dn(i=>function ou(n,e,t,r,i){return new $d(n,e,t,r,i).apply()}(n,e,t,i.extractedUrl,r).pipe((0,Dt.U)(u=>Object.assign(Object.assign({},i),{urlAfterRedirects:u}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),(0,jr.b)(M=>{this.currentNavigation=Object.assign(Object.assign({},this.currentNavigation),{finalUrl:M.urlAfterRedirects})}),function m(n,e,t,r,i){return(0,Cn.z)(u=>function uc(n,e,t,r,i="emptyOnly",u="legacy"){try{const c=new Yg(n,e,t,r,i,u).recognize();return null===c?Ws(new Zg):rt(c)}catch(c){return Ws(c)}}(n,e,u.urlAfterRedirects,t(u.urlAfterRedirects),r,i).pipe((0,Dt.U)(c=>Object.assign(Object.assign({},u),{targetSnapshot:c}))))}(this.rootComponentType,this.config,M=>this.serializeUrl(M),this.paramsInheritanceStrategy,this.relativeLinkResolution),(0,jr.b)(M=>{if("eager"===this.urlUpdateStrategy){if(!M.extras.skipLocationChange){const V=this.urlHandlingStrategy.merge(M.urlAfterRedirects,M.rawUrl);this.setBrowserUrl(V,M)}this.browserUrlTree=M.urlAfterRedirects}const F=new po(M.id,this.serializeUrl(M.extractedUrl),this.serializeUrl(M.urlAfterRedirects),M.targetSnapshot);r.next(F)}));if(b&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:F,extractedUrl:V,source:B,restoredState:se,extras:Te}=p,He=new fo(F,this.serializeUrl(V),B,se);r.next(He);const nt=eu(V,this.rootComponentType).snapshot;return rt(Object.assign(Object.assign({},p),{targetSnapshot:nt,urlAfterRedirects:V,extras:Object.assign(Object.assign({},Te),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=p.rawUrl,p.resolve(null),Za.E}),Le(p=>{const{targetSnapshot:y,id:b,extractedUrl:A,rawUrl:M,extras:{skipLocationChange:F,replaceUrl:V}}=p;return this.hooks.beforePreactivation(y,{navigationId:b,appliedUrlTree:A,rawUrlTree:M,skipLocationChange:!!F,replaceUrl:!!V})}),(0,jr.b)(p=>{const y=new Qy(p.id,this.serializeUrl(p.extractedUrl),this.serializeUrl(p.urlAfterRedirects),p.targetSnapshot);this.triggerEvent(y)}),(0,Dt.U)(p=>Object.assign(Object.assign({},p),{guards:Gg(p.targetSnapshot,p.currentSnapshot,this.rootContexts)})),function Wg(n,e){return(0,Cn.z)(t=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:u,canDeactivateChecks:c}}=t;return 0===c.length&&0===u.length?rt(Object.assign(Object.assign({},t),{guardsResult:!0})):function g_(n,e,t,r){return(0,ln.D)(n).pipe((0,Cn.z)(i=>function xf(n,e,t,r,i){const u=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return u&&0!==u.length?rt(u.map(p=>{const y=il(p,e,i);let b;if(function S0(n){return n&&nu(n.canDeactivate)}(y))b=er(y.canDeactivate(n,e,t,r));else{if(!nu(y))throw new Error("Invalid CanDeactivate guard");b=er(y(n,e,t,r))}return b.pipe(ua())})).pipe(el()):rt(!0)}(i.component,i.route,t,e,r)),ua(i=>!0!==i,!0))}(c,r,i,n).pipe((0,Cn.z)(p=>p&&function Ug(n){return"boolean"==typeof n}(p)?function Gd(n,e,t,r){return(0,ln.D)(e).pipe(Ya(i=>sa(function Kg(n,e){return null!==n&&e&&e(new mo(n)),rt(!0)}(i.route.parent,r),function m_(n,e){return null!==n&&e&&e(new yo(n)),rt(!0)}(i.route,r),function Mf(n,e,t){const r=e[e.length-1],u=e.slice(0,e.length-1).reverse().map(c=>function qg(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(c)).filter(c=>null!==c).map(c=>aa(()=>rt(c.guards.map(y=>{const b=il(y,c.node,t);let A;if(function wf(n){return n&&nu(n.canActivateChild)}(b))A=er(b.canActivateChild(r,n));else{if(!nu(b))throw new Error("Invalid CanActivateChild guard");A=er(b(r,n))}return A.pipe(ua())})).pipe(el())));return rt(u).pipe(el())}(n,i.path,t),function pi(n,e,t){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return rt(!0);const i=r.map(u=>aa(()=>{const c=il(u,e,t);let p;if(function sc(n){return n&&nu(n.canActivate)}(c))p=er(c.canActivate(e,n));else{if(!nu(c))throw new Error("Invalid CanActivate guard");p=er(c(e,n))}return p.pipe(ua())}));return rt(i).pipe(el())}(n,i.route,t))),ua(i=>!0!==i,!0))}(r,u,n,e):rt(p)),(0,Dt.U)(p=>Object.assign(Object.assign({},t),{guardsResult:p})))})}(this.ngModule.injector,p=>this.triggerEvent(p)),(0,jr.b)(p=>{if(Xu(p.guardsResult)){const b=$s(`Redirecting to "${this.serializeUrl(p.guardsResult)}"`);throw b.url=p.guardsResult,b}const y=new Xl(p.id,this.serializeUrl(p.extractedUrl),this.serializeUrl(p.urlAfterRedirects),p.targetSnapshot,!!p.guardsResult);this.triggerEvent(y)}),Br(p=>!!p.guardsResult||(this.restoreHistory(p),this.cancelNavigationTransition(p,""),!1)),Le(p=>{if(p.guards.canActivateChecks.length)return rt(p).pipe((0,jr.b)(y=>{const b=new ui(y.id,this.serializeUrl(y.extractedUrl),this.serializeUrl(y.urlAfterRedirects),y.targetSnapshot);this.triggerEvent(b)}),Dn(y=>{let b=!1;return rt(y).pipe(function E(n,e){return(0,Cn.z)(t=>{const{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return rt(t);let u=0;return(0,ln.D)(i).pipe(Ya(c=>function T(n,e,t,r){return function P(n,e,t,r){const i=K(n);if(0===i.length)return rt({});const u={};return(0,ln.D)(i).pipe((0,Cn.z)(c=>function pe(n,e,t,r){const i=il(n,e,r);return er(i.resolve?i.resolve(e,t):i(e,t))}(n[c],e,t,r).pipe((0,jr.b)(p=>{u[c]=p}))),Qa(1),(0,Cn.z)(()=>K(u).length===i.length?rt(u):Za.E))}(n._resolve,n,e,r).pipe((0,Dt.U)(u=>(n._resolvedData=u,n.data=Object.assign(Object.assign({},n.data),n_(n,t).resolve),null)))}(c.route,r,n,e)),(0,jr.b)(()=>u++),Qa(1),(0,Cn.z)(c=>u===i.length?rt(t):Za.E))})}(this.paramsInheritanceStrategy,this.ngModule.injector),(0,jr.b)({next:()=>b=!0,complete:()=>{b||(this.restoreHistory(y),this.cancelNavigationTransition(y,"At least one route resolver didn't emit any value."))}}))}),(0,jr.b)(y=>{const b=new Hr(y.id,this.serializeUrl(y.extractedUrl),this.serializeUrl(y.urlAfterRedirects),y.targetSnapshot);this.triggerEvent(b)}))}),Le(p=>{const{targetSnapshot:y,id:b,extractedUrl:A,rawUrl:M,extras:{skipLocationChange:F,replaceUrl:V}}=p;return this.hooks.afterPreactivation(y,{navigationId:b,appliedUrlTree:A,rawUrlTree:M,skipLocationChange:!!F,replaceUrl:!!V})}),(0,Dt.U)(p=>{const y=function Rg(n,e,t){const r=rc(n,e._root,t?t._root:void 0);return new Nd(r,e)}(this.routeReuseStrategy,p.targetSnapshot,p.currentRouterState);return Object.assign(Object.assign({},p),{targetRouterState:y})}),(0,jr.b)(p=>{this.currentUrlTree=p.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(p.urlAfterRedirects,p.rawUrl),this.routerState=p.targetRouterState,"deferred"===this.urlUpdateStrategy&&(p.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,p),this.browserUrlTree=p.urlAfterRedirects)}),((n,e,t)=>(0,Dt.U)(r=>(new Vg(e,r.targetRouterState,r.currentRouterState,t).activate(n),r)))(this.rootContexts,this.routeReuseStrategy,p=>this.triggerEvent(p)),(0,jr.b)({next(){u=!0},complete(){u=!0}}),function Md(n){return(0,Jn.e)((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}(()=>{var p;u||c||this.cancelNavigationTransition(i,`Navigation ID ${i.id} is not equal to the current navigation id ${this.navigationId}`),(null===(p=this.currentNavigation)||void 0===p?void 0:p.id)===i.id&&(this.currentNavigation=null)}),ai(p=>{if(c=!0,function Cg(n){return n&&n[Xa]}(p)){const y=Xu(p.url);y||(this.navigated=!0,this.restoreHistory(i,!0));const b=new _n(i.id,this.serializeUrl(i.extractedUrl),p.message);r.next(b),y?setTimeout(()=>{const A=this.urlHandlingStrategy.merge(p.url,this.rawUrlTree),M={skipLocationChange:i.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||Of(i.source)};this.scheduleNavigation(A,"imperative",null,M,{resolve:i.resolve,reject:i.reject,promise:i.promise})},0):i.resolve(!1)}else{this.restoreHistory(i,!0);const y=new Jl(i.id,this.serializeUrl(i.extractedUrl),p);r.next(y);try{i.resolve(this.errorHandler(p))}catch(b){i.reject(b)}}return Za.E}))}))}resetRootComponentType(t){this.rootComponentType=t,this.routerState.root.component=this.rootComponentType}setTransition(t){this.transitions.next(Object.assign(Object.assign({},this.transitions.value),t))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const r="popstate"===t.type?"popstate":"hashchange";"popstate"===r&&setTimeout(()=>{var i;const u={replaceUrl:!0},c=(null===(i=t.state)||void 0===i?void 0:i.navigationId)?t.state:null;if(c){const y=Object.assign({},c);delete y.navigationId,delete y.\u0275routerPageId,0!==Object.keys(y).length&&(u.state=y)}const p=this.parseUrl(t.url);this.scheduleNavigation(p,r,c,u)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(t){this.events.next(t)}resetConfig(t){ru(t),this.config=t.map(Cf),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,r={}){const{relativeTo:i,queryParams:u,fragment:c,queryParamsHandling:p,preserveFragment:y}=r,b=i||this.routerState.root,A=y?this.currentUrlTree.fragment:c;let M=null;switch(p){case"merge":M=Object.assign(Object.assign({},this.currentUrlTree.queryParams),u);break;case"preserve":M=this.currentUrlTree.queryParams;break;default:M=u||null}return null!==M&&(M=this.removeEmptyProps(M)),function pa(n,e,t,r,i){if(0===t.length)return Ld(e.root,e.root,e.root,r,i);const u=function T0(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new Pg(!0,0,n);let e=0,t=!1;const r=n.reduce((i,u,c)=>{if("object"==typeof u&&null!=u){if(u.outlets){const p={};return dn(u.outlets,(y,b)=>{p[b]="string"==typeof y?y.split("/"):y}),[...i,{outlets:p}]}if(u.segmentPath)return[...i,u.segmentPath]}return"string"!=typeof u?[...i,u]:0===c?(u.split("/").forEach((p,y)=>{0==y&&"."===p||(0==y&&""===p?t=!0:".."===p?e++:""!=p&&i.push(p))}),i):[...i,u]},[]);return new Pg(t,e,r)}(t);if(u.toRoot())return Ld(e.root,e.root,new me([],{}),r,i);const c=function Ng(n,e,t){if(n.isAbsolute)return new Vd(e.root,!0,0);if(-1===t.snapshot._lastPathIndex){const u=t.snapshot._urlSegment;return new Vd(u,u===e.root,0)}const r=qs(n.commands[0])?0:1;return function Og(n,e,t){let r=n,i=e,u=t;for(;u>i;){if(u-=i,r=r.parent,!r)throw new Error("Invalid number of '../'");i=r.segments.length}return new Vd(r,!1,i-u)}(t.snapshot._urlSegment,t.snapshot._lastPathIndex+r,n.numberOfDoubleDots)}(u,e,n),p=c.processChildren?Ud(c.segmentGroup,c.index,u.commands):Fg(c.segmentGroup,c.index,u.commands);return Ld(e.root,c.segmentGroup,p,r,i)}(b,this.currentUrlTree,t,M,null!=A?A:null)}navigateByUrl(t,r={skipLocationChange:!1}){const i=Xu(t)?t:this.parseUrl(t),u=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(u,"imperative",null,r)}navigate(t,r={skipLocationChange:!1}){return function Nf(n){for(let e=0;e<n.length;e++){const t=n[e];if(null==t)throw new Error(`The requested path contains ${t} segment at index ${e}`)}}(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let r;try{r=this.urlSerializer.parse(t)}catch(i){r=this.malformedUriErrorHandler(i,this.urlSerializer,t)}return r}isActive(t,r){let i;if(i=!0===r?Object.assign({},Pf):!1===r?Object.assign({},Wd):r,Xu(t))return _o(this.currentUrlTree,t,i);const u=this.parseUrl(t);return _o(this.currentUrlTree,u,i)}removeEmptyProps(t){return Object.keys(t).reduce((r,i)=>{const u=t[i];return null!=u&&(r[i]=u),r},{})}processNavigations(){this.navigations.subscribe(t=>{this.navigated=!0,this.lastSuccessfulId=t.id,this.currentPageId=t.targetPageId,this.events.next(new qu(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,t.resolve(!0)},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)})}scheduleNavigation(t,r,i,u,c){var p,y;if(this.disposed)return Promise.resolve(!1);let b,A,M;c?(b=c.resolve,A=c.reject,M=c.promise):M=new Promise((B,se)=>{b=B,A=se});const F=++this.navigationId;let V;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(i=this.location.getState()),V=i&&i.\u0275routerPageId?i.\u0275routerPageId:u.replaceUrl||u.skipLocationChange?null!==(p=this.browserPageId)&&void 0!==p?p:0:(null!==(y=this.browserPageId)&&void 0!==y?y:0)+1):V=0,this.setTransition({id:F,targetPageId:V,source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:t,extras:u,resolve:b,reject:A,promise:M,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),M.catch(B=>Promise.reject(B))}setBrowserUrl(t,r){const i=this.urlSerializer.serialize(t),u=Object.assign(Object.assign({},r.extras.state),this.generateNgRouterState(r.id,r.targetPageId));this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl?this.location.replaceState(i,"",u):this.location.go(i,"",u)}restoreHistory(t,r=!1){var i,u;if("computed"===this.canceledNavigationResolution){const c=this.currentPageId-t.targetPageId;"popstate"!==t.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==(null===(i=this.currentNavigation)||void 0===i?void 0:i.finalUrl)||0===c?this.currentUrlTree===(null===(u=this.currentNavigation)||void 0===u?void 0:u.finalUrl)&&0===c&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(c)}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(t,r){const i=new _n(t.id,this.serializeUrl(t.extractedUrl),r);this.triggerEvent(i),t.resolve(!1)}generateNgRouterState(t,r){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}}return n.\u0275fac=function(t){h.$Z()},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();function Of(n){return"imperative"!==n}let kf=(()=>{class n{constructor(t,r,i,u,c){this.router=t,this.route=r,this.tabIndexAttribute=i,this.renderer=u,this.el=c,this.commands=null,this.onChanges=new si.x,this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(t){if(null!=this.tabIndexAttribute)return;const r=this.renderer,i=this.el.nativeElement;null!==t?r.setAttribute(i,"tabindex",t):r.removeAttribute(i,"tabindex")}ngOnChanges(t){this.onChanges.next(this)}set routerLink(t){null!=t?(this.commands=Array.isArray(t)?t:[t],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(){if(null===this.urlTree)return!0;const t={skipLocationChange:ol(this.skipLocationChange),replaceUrl:ol(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,t),!0}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:ol(this.preserveFragment)})}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(Gr),h.Y36(Ju),h.$8M("tabindex"),h.Y36(h.Qsj),h.Y36(h.SBq))},n.\u0275dir=h.lG2({type:n,selectors:[["","routerLink","",5,"a",5,"area"]],hostBindings:function(t,r){1&t&&h.NdJ("click",function(){return r.onClick()})},inputs:{queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo",routerLink:"routerLink"},features:[h.TTD]}),n})(),sl=(()=>{class n{constructor(t,r,i){this.router=t,this.route=r,this.locationStrategy=i,this.commands=null,this.href=null,this.onChanges=new si.x,this.subscription=t.events.subscribe(u=>{u instanceof qu&&this.updateTargetUrlAndHref()})}set routerLink(t){this.commands=null!=t?Array.isArray(t)?t:[t]:null}ngOnChanges(t){this.updateTargetUrlAndHref(),this.onChanges.next(this)}ngOnDestroy(){this.subscription.unsubscribe()}onClick(t,r,i,u,c){if(0!==t||r||i||u||c||"string"==typeof this.target&&"_self"!=this.target||null===this.urlTree)return!0;const p={skipLocationChange:ol(this.skipLocationChange),replaceUrl:ol(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,p),!1}updateTargetUrlAndHref(){this.href=null!==this.urlTree?this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:ol(this.preserveFragment)})}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(Gr),h.Y36(Ju),h.Y36(fe))},n.\u0275dir=h.lG2({type:n,selectors:[["a","routerLink",""],["area","routerLink",""]],hostVars:2,hostBindings:function(t,r){1&t&&h.NdJ("click",function(u){return r.onClick(u.button,u.ctrlKey,u.shiftKey,u.altKey,u.metaKey)}),2&t&&h.uIk("target",r.target)("href",r.href,h.LSH)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo",routerLink:"routerLink"},features:[h.TTD]}),n})();function ol(n){return""===n||!!n}let v_=(()=>{class n{constructor(t,r,i,u,c,p){this.router=t,this.element=r,this.renderer=i,this.cdr=u,this.link=c,this.linkWithHref=p,this.classes=[],this.isActive=!1,this.routerLinkActiveOptions={exact:!1},this.isActiveChange=new h.vpe,this.routerEventsSubscription=t.events.subscribe(y=>{y instanceof qu&&this.update()})}ngAfterContentInit(){rt(this.links.changes,this.linksWithHrefs.changes,rt(null)).pipe((0,ia.J)()).subscribe(t=>{this.update(),this.subscribeToEachLinkOnChanges()})}subscribeToEachLinkOnChanges(){var t;null===(t=this.linkInputChangesSubscription)||void 0===t||t.unsubscribe();const r=[...this.links.toArray(),...this.linksWithHrefs.toArray(),this.link,this.linkWithHref].filter(i=>!!i).map(i=>i.onChanges);this.linkInputChangesSubscription=(0,ln.D)(r).pipe((0,ia.J)()).subscribe(i=>{this.isActive!==this.isLinkActive(this.router)(i)&&this.update()})}set routerLinkActive(t){const r=Array.isArray(t)?t:t.split(" ");this.classes=r.filter(i=>!!i)}ngOnChanges(t){this.update()}ngOnDestroy(){var t;this.routerEventsSubscription.unsubscribe(),null===(t=this.linkInputChangesSubscription)||void 0===t||t.unsubscribe()}update(){!this.links||!this.linksWithHrefs||!this.router.navigated||Promise.resolve().then(()=>{const t=this.hasActiveLinks();this.isActive!==t&&(this.isActive=t,this.cdr.markForCheck(),this.classes.forEach(r=>{t?this.renderer.addClass(this.element.nativeElement,r):this.renderer.removeClass(this.element.nativeElement,r)}),this.isActiveChange.emit(t))})}isLinkActive(t){const r=function E_(n){return!!n.paths}(this.routerLinkActiveOptions)?this.routerLinkActiveOptions:this.routerLinkActiveOptions.exact||!1;return i=>!!i.urlTree&&t.isActive(i.urlTree,r)}hasActiveLinks(){const t=this.isLinkActive(this.router);return this.link&&t(this.link)||this.linkWithHref&&t(this.linkWithHref)||this.links.some(t)||this.linksWithHrefs.some(t)}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(Gr),h.Y36(h.SBq),h.Y36(h.Qsj),h.Y36(h.sBO),h.Y36(kf,8),h.Y36(sl,8))},n.\u0275dir=h.lG2({type:n,selectors:[["","routerLinkActive",""]],contentQueries:function(t,r,i){if(1&t&&(h.Suo(i,kf,5),h.Suo(i,sl,5)),2&t){let u;h.iGM(u=h.CRH())&&(r.links=u),h.iGM(u=h.CRH())&&(r.linksWithHrefs=u)}},inputs:{routerLinkActiveOptions:"routerLinkActiveOptions",routerLinkActive:"routerLinkActive"},outputs:{isActiveChange:"isActiveChange"},exportAs:["routerLinkActive"],features:[h.TTD]}),n})();class w_{}class x0{preload(e,t){return rt(null)}}let R0=(()=>{class n{constructor(t,r,i,u){this.router=t,this.injector=i,this.preloadingStrategy=u,this.loader=new gi(i,r,y=>t.triggerEvent(new la(y)),y=>t.triggerEvent(new go(y)))}setUpPreloading(){this.subscription=this.router.events.pipe(Br(t=>t instanceof qu),Ya(()=>this.preload())).subscribe(()=>{})}preload(){const t=this.injector.get(h.h0i);return this.processRoutes(t,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){const i=[];for(const u of r)if(u.loadChildren&&!u.canLoad&&u._loadedConfig){const c=u._loadedConfig;i.push(this.processRoutes(c.module,c.routes))}else u.loadChildren&&!u.canLoad?i.push(this.preloadConfig(t,u)):u.children&&i.push(this.processRoutes(t,u.children));return(0,ln.D)(i).pipe((0,ia.J)(),(0,Dt.U)(u=>{}))}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>(r._loadedConfig?rt(r._loadedConfig):this.loader.load(t.injector,r)).pipe((0,Cn.z)(u=>(r._loadedConfig=u,this.processRoutes(u.module,u.routes)))))}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(Gr),h.LFG(h.Sil),h.LFG(h.zs3),h.LFG(w_))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})(),Xg=(()=>{class n{constructor(t,r,i={}){this.router=t,this.viewportScroller=r,this.options=i,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},i.scrollPositionRestoration=i.scrollPositionRestoration||"disabled",i.anchorScrolling=i.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(t=>{t instanceof fo?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof qu&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.router.parseUrl(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(t=>{t instanceof Ja&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.router.triggerEvent(new Ja(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return n.\u0275fac=function(t){h.$Z()},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();const ms=new h.OlP("ROUTER_CONFIGURATION"),I_=new h.OlP("ROUTER_FORROOT_GUARD"),P0=[we,{provide:wt,useClass:_r},{provide:Gr,useFactory:function C_(n,e,t,r,i,u,c={},p,y){const b=new Gr(null,n,e,t,r,i,Rd(u));return p&&(b.urlHandlingStrategy=p),y&&(b.routeReuseStrategy=y),function k0(n,e){n.errorHandler&&(e.errorHandler=n.errorHandler),n.malformedUriErrorHandler&&(e.malformedUriErrorHandler=n.malformedUriErrorHandler),n.onSameUrlNavigation&&(e.onSameUrlNavigation=n.onSameUrlNavigation),n.paramsInheritanceStrategy&&(e.paramsInheritanceStrategy=n.paramsInheritanceStrategy),n.relativeLinkResolution&&(e.relativeLinkResolution=n.relativeLinkResolution),n.urlUpdateStrategy&&(e.urlUpdateStrategy=n.urlUpdateStrategy),n.canceledNavigationResolution&&(e.canceledNavigationResolution=n.canceledNavigationResolution)}(c,b),c.enableTracing&&b.events.subscribe(A=>{var M,F;null===(M=console.group)||void 0===M||M.call(console,`Router Event: ${A.constructor.name}`),console.log(A.toString()),console.log(A),null===(F=console.groupEnd)||void 0===F||F.call(console)}),b},deps:[wt,tl,we,h.zs3,h.Sil,Tn,ms,[class lc{},new h.FiY],[class Ye{},new h.FiY]]},tl,{provide:Ju,useFactory:function em(n){return n.routerState.root},deps:[Gr]},R0,x0,class b_{preload(e,t){return t().pipe(ai(()=>rt(null)))}},{provide:ms,useValue:{enableTracing:!1}}];function WD(){return new h.PXZ("Router",Gr)}let Ff=(()=>{class n{constructor(t,r){}static forRoot(t,r){return{ngModule:n,providers:[P0,D_(t),{provide:I_,useFactory:O0,deps:[[Gr,new h.FiY,new h.tp0]]},{provide:ms,useValue:r||{}},{provide:fe,useFactory:N0,deps:[oe,[new h.tBr(We),new h.FiY],ms]},{provide:Xg,useFactory:KD,deps:[Gr,Vl,ms]},{provide:w_,useExisting:r&&r.preloadingStrategy?r.preloadingStrategy:x0},{provide:h.PXZ,multi:!0,useFactory:WD},[Kd,{provide:h.ip1,multi:!0,useFactory:F0,deps:[Kd]},{provide:A_,useFactory:T_,deps:[Kd]},{provide:h.tb,multi:!0,useExisting:A_}]]}}static forChild(t){return{ngModule:n,providers:[D_(t)]}}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(I_,8),h.LFG(Gr,8))},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({}),n})();function KD(n,e,t){return t.scrollOffset&&e.setOffset(t.scrollOffset),new Xg(n,e,t)}function N0(n,e,t={}){return t.useHash?new Ae(n,e):new Qe(n,e)}function O0(n){return"guarded"}function D_(n){return[{provide:h.deG,multi:!0,useValue:n},{provide:Tn,multi:!0,useValue:n}]}let Kd=(()=>{class n{constructor(t){this.injector=t,this.initNavigation=!1,this.destroyed=!1,this.resultOfPreactivationDone=new si.x}appInitializer(){return this.injector.get(G,Promise.resolve(null)).then(()=>{if(this.destroyed)return Promise.resolve(!0);let r=null;const i=new Promise(p=>r=p),u=this.injector.get(Gr),c=this.injector.get(ms);return"disabled"===c.initialNavigation?(u.setUpLocationChangeListener(),r(!0)):"enabled"===c.initialNavigation||"enabledBlocking"===c.initialNavigation?(u.hooks.afterPreactivation=()=>this.initNavigation?rt(null):(this.initNavigation=!0,r(!0),this.resultOfPreactivationDone),u.initialNavigation()):r(!0),i})}bootstrapListener(t){const r=this.injector.get(ms),i=this.injector.get(R0),u=this.injector.get(Xg),c=this.injector.get(Gr),p=this.injector.get(h.z2F);t===p.components[0]&&(("enabledNonBlocking"===r.initialNavigation||void 0===r.initialNavigation)&&c.initialNavigation(),i.setUpPreloading(),u.init(),c.resetRootComponentType(p.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}ngOnDestroy(){this.destroyed=!0}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(h.zs3))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();function F0(n){return n.appInitializer.bind(n)}function T_(n){return n.bootstrapListener.bind(n)}const A_=new h.OlP("Router Initializer");let M_=(()=>{class n{constructor(t,r){this._renderer=t,this._elementRef=r,this.onChange=i=>{},this.onTouched=()=>{}}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(h.Qsj),h.Y36(h.SBq))},n.\u0275dir=h.lG2({type:n}),n})(),cc=(()=>{class n extends M_{}return n.\u0275fac=function(){let e;return function(r){return(e||(e=h.n5z(n)))(r||n)}}(),n.\u0275dir=h.lG2({type:n,features:[h.qOj]}),n})();const ya=new h.OlP("NgValueAccessor"),V0={provide:ya,useExisting:(0,h.Gpc)(()=>Zd),multi:!0},U0=new h.OlP("CompositionEventMode");let Zd=(()=>{class n extends M_{constructor(t,r,i){super(t,r),this._compositionMode=i,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function fM(){const n=O()?O().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}writeValue(t){this.setProperty("value",null==t?"":t)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(h.Qsj),h.Y36(h.SBq),h.Y36(U0,8))},n.\u0275dir=h.lG2({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(t,r){1&t&&h.NdJ("input",function(u){return r._handleInput(u.target.value)})("blur",function(){return r.onTouched()})("compositionstart",function(){return r._compositionStart()})("compositionend",function(u){return r._compositionEnd(u.target.value)})},features:[h._Bn([V0]),h.qOj]}),n})();function lu(n){return null==n||0===n.length}function B0(n){return null!=n&&"number"==typeof n.length}const mi=new h.OlP("NgValidators"),Rr=new h.OlP("NgAsyncValidators"),YD=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class Xi{static min(e){return function j0(n){return e=>{if(lu(e.value)||lu(n))return null;const t=parseFloat(e.value);return!isNaN(t)&&t<n?{min:{min:n,actual:e.value}}:null}}(e)}static max(e){return function H0(n){return e=>{if(lu(e.value)||lu(n))return null;const t=parseFloat(e.value);return!isNaN(t)&&t>n?{max:{max:n,actual:e.value}}:null}}(e)}static required(e){return function $0(n){return lu(n.value)?{required:!0}:null}(e)}static requiredTrue(e){return function G0(n){return!0===n.value?null:{required:!0}}(e)}static email(e){return function x_(n){return lu(n.value)||YD.test(n.value)?null:{email:!0}}(e)}static minLength(e){return function q0(n){return e=>lu(e.value)||!B0(e.value)?null:e.value.length<n?{minlength:{requiredLength:n,actualLength:e.value.length}}:null}(e)}static maxLength(e){return function z0(n){return e=>B0(e.value)&&e.value.length>n?{maxlength:{requiredLength:n,actualLength:e.value.length}}:null}(e)}static pattern(e){return function W0(n){if(!n)return Mt;let e,t;return"string"==typeof n?(t="","^"!==n.charAt(0)&&(t+="^"),t+=n,"$"!==n.charAt(n.length-1)&&(t+="$"),e=new RegExp(t)):(t=n.toString(),e=n),r=>{if(lu(r.value))return null;const i=r.value;return e.test(i)?null:{pattern:{requiredPattern:t,actualValue:i}}}}(e)}static nullValidator(e){return null}static compose(e){return K0(e)}static composeAsync(e){return _a(e)}}function Mt(n){return null}function R_(n){return null!=n}function P_(n){const e=(0,h.QGY)(n)?(0,ln.D)(n):n;return(0,h.CqO)(e),e}function N_(n){let e={};return n.forEach(t=>{e=null!=t?Object.assign(Object.assign({},e),t):e}),0===Object.keys(e).length?null:e}function Lf(n,e){return e.map(t=>t(n))}function O_(n){return n.map(e=>function Io(n){return!n.validate}(e)?e:t=>e.validate(t))}function K0(n){if(!n)return null;const e=n.filter(R_);return 0==e.length?null:function(t){return N_(Lf(t,e))}}function Vf(n){return null!=n?K0(O_(n)):null}function _a(n){if(!n)return null;const e=n.filter(R_);return 0==e.length?null:function(t){return function ZD(...n){const e=(0,Wa.jO)(n),{args:t,keys:r}=cn(n),i=new bn.y(u=>{const{length:c}=t;if(!c)return void u.complete();const p=new Array(c);let y=c,b=c;for(let A=0;A<c;A++){let M=!1;(0,oa.Xf)(t[A]).subscribe((0,In.x)(u,F=>{M||(M=!0,b--),p[A]=F},()=>y--,void 0,()=>{(!y||!M)&&(b||u.next(r?Ql(r,p):p),u.complete())}))}});return e?i.pipe(Sd(e)):i}(Lf(t,e).map(P_)).pipe((0,Dt.U)(N_))}}function Uf(n){return null!=n?_a(O_(n)):null}function k_(n,e){return null===n?[e]:Array.isArray(n)?[...n,e]:[n,e]}function rm(n){return n._rawValidators}function QD(n){return n._rawAsyncValidators}function im(n){return n?Array.isArray(n)?n:[n]:[]}function F_(n,e){return Array.isArray(n)?n.includes(e):n===e}function Bf(n,e){const t=im(e);return im(n).forEach(i=>{F_(t,i)||t.push(i)}),t}function jf(n,e){return im(e).filter(t=>!F_(n,t))}class sm{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=Vf(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=Uf(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e){this.control&&this.control.reset(e)}hasError(e,t){return!!this.control&&this.control.hasError(e,t)}getError(e,t){return this.control?this.control.getError(e,t):null}}class va extends sm{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class qr extends sm{get formDirective(){return null}get path(){return null}}class JD{constructor(e){this._cd=e}is(e){var t,r,i;return"submitted"===e?!!(null===(t=this._cd)||void 0===t?void 0:t.submitted):!!(null===(i=null===(r=this._cd)||void 0===r?void 0:r.control)||void 0===i?void 0:i[e])}}let om=(()=>{class n extends JD{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(va,2))},n.\u0275dir=h.lG2({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(t,r){2&t&&h.ekj("ng-untouched",r.is("untouched"))("ng-touched",r.is("touched"))("ng-pristine",r.is("pristine"))("ng-dirty",r.is("dirty"))("ng-valid",r.is("valid"))("ng-invalid",r.is("invalid"))("ng-pending",r.is("pending"))},features:[h.qOj]}),n})(),L_=(()=>{class n extends JD{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(qr,10))},n.\u0275dir=h.lG2({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(t,r){2&t&&h.ekj("ng-untouched",r.is("untouched"))("ng-touched",r.is("touched"))("ng-pristine",r.is("pristine"))("ng-dirty",r.is("dirty"))("ng-valid",r.is("valid"))("ng-invalid",r.is("invalid"))("ng-pending",r.is("pending"))("ng-submitted",r.is("submitted"))},features:[h.qOj]}),n})();function U_(n,e){return[...e.path,n]}function um(n,e){lm(n,e),e.valueAccessor.writeValue(n.value),function J0(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&X0(n,e)})}(n,e),function al(n,e){const t=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}(n,e),function B_(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&X0(n,e),"submit"!==n.updateOn&&n.markAsTouched()})}(n,e),function nC(n,e){if(e.valueAccessor.setDisabledState){const t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}(n,e)}function Do(n,e,t=!0){const r=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(r),e.valueAccessor.registerOnTouched(r)),Qd(n,e),n&&(e._invokeOnDestroyCallbacks(),n._registerOnCollectionChange(()=>{}))}function Yd(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function lm(n,e){const t=rm(n);null!==e.validator?n.setValidators(k_(t,e.validator)):"function"==typeof t&&n.setValidators([t]);const r=QD(n);null!==e.asyncValidator?n.setAsyncValidators(k_(r,e.asyncValidator)):"function"==typeof r&&n.setAsyncValidators([r]);const i=()=>n.updateValueAndValidity();Yd(e._rawValidators,i),Yd(e._rawAsyncValidators,i)}function Qd(n,e){let t=!1;if(null!==n){if(null!==e.validator){const i=rm(n);if(Array.isArray(i)&&i.length>0){const u=i.filter(c=>c!==e.validator);u.length!==i.length&&(t=!0,n.setValidators(u))}}if(null!==e.asyncValidator){const i=QD(n);if(Array.isArray(i)&&i.length>0){const u=i.filter(c=>c!==e.asyncValidator);u.length!==i.length&&(t=!0,n.setAsyncValidators(u))}}}const r=()=>{};return Yd(e._rawValidators,r),Yd(e._rawAsyncValidators,r),t}function X0(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function $_(n,e){if(!n.hasOwnProperty("model"))return!1;const t=n.model;return!!t.isFirstChange()||!Object.is(e,t.currentValue)}function $f(n,e){if(!e)return null;let t,r,i;return Array.isArray(e),e.forEach(u=>{u.constructor===Zd?t=u:function Hf(n){return Object.getPrototypeOf(n.constructor)===cc}(u)?r=u:i=u}),i||r||t||null}function ul(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}const Gf="VALID",qf="INVALID",hc="PENDING",fc="DISABLED";function dm(n){return(W_(n)?n.validators:n)||null}function zf(n){return Array.isArray(n)?Vf(n):n||null}function q_(n,e){return(W_(e)?e.asyncValidators:n)||null}function z_(n){return Array.isArray(n)?Uf(n):n||null}function W_(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}const hm=n=>n instanceof Z_,Wf=n=>n instanceof fm,tw=n=>n instanceof sC;function K_(n){return hm(n)?n.value:n.getRawValue()}function nw(n,e){const t=Wf(n),r=n.controls;if(!(t?Object.keys(r):r).length)throw new h.vHH(1e3,"");if(!r[e])throw new h.vHH(1001,"")}function rw(n,e){Wf(n),n._forEachChild((r,i)=>{if(void 0===e[i])throw new h.vHH(1002,"")})}class Ri{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=e,this._rawAsyncValidators=t,this._composedValidatorFn=zf(this._rawValidators),this._composedAsyncValidatorFn=z_(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===Gf}get invalid(){return this.status===qf}get pending(){return this.status==hc}get disabled(){return this.status===fc}get enabled(){return this.status!==fc}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._rawValidators=e,this._composedValidatorFn=zf(e)}setAsyncValidators(e){this._rawAsyncValidators=e,this._composedAsyncValidatorFn=z_(e)}addValidators(e){this.setValidators(Bf(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(Bf(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(jf(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(jf(e,this._rawAsyncValidators))}hasValidator(e){return F_(this._rawValidators,e)}hasAsyncValidator(e){return F_(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=hc,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=fc,this.errors=null,this._forEachChild(r=>{r.disable(Object.assign(Object.assign({},e),{onlySelf:!0}))}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Object.assign(Object.assign({},e),{skipPristineCheck:t})),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=Gf,this._forEachChild(r=>{r.enable(Object.assign(Object.assign({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(Object.assign(Object.assign({},e),{skipPristineCheck:t})),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Gf||this.status===hc)&&this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?fc:Gf}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=hc,this._hasOwnPendingAsyncValidator=!0;const t=P_(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)}get(e){return function G_(n,e,t){if(null==e||(Array.isArray(e)||(e=e.split(t)),Array.isArray(e)&&0===e.length))return null;let r=n;return e.forEach(i=>{r=Wf(r)?r.controls.hasOwnProperty(i)?r.controls[i]:null:tw(r)&&r.at(i)||null}),r}(this,e,".")}getError(e,t){const r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new h.vpe,this.statusChanges=new h.vpe}_calculateStatus(){return this._allControlsDisabled()?fc:this.errors?qf:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(hc)?hc:this._anyControlsHaveStatus(qf)?qf:Gf}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_isBoxedValue(e){return"object"==typeof e&&null!==e&&2===Object.keys(e).length&&"value"in e&&"disabled"in e}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){W_(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}}class Z_ extends Ri{constructor(e=null,t,r){super(dm(t),q_(r,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),W_(t)&&t.initialValueIsDefault&&(this.defaultValue=this._isBoxedValue(e)?e.value:e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(r=>r(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){ul(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){ul(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){this._isBoxedValue(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}}class fm extends Ri{constructor(e,t,r){super(dm(t),q_(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){rw(this,e),Object.keys(e).forEach(r=>{nw(this,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(Object.keys(e).forEach(r=>{this.controls[r]&&this.controls[r].patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,i)=>{r.reset(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=K_(t),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>!!r._syncPendingControls()||t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{const r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(const t of Object.keys(this.controls)){const r=this.controls[t];if(this.contains(t)&&e(r))return!0}return!1}_reduceValue(){return this._reduceChildren({},(e,t,r)=>((t.enabled||this.disabled)&&(e[r]=t.value),e))}_reduceChildren(e,t){let r=e;return this._forEachChild((i,u)=>{r=t(r,i,u)}),r}_allControlsDisabled(){for(const e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}}class sC extends Ri{constructor(e,t,r){super(dm(t),q_(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(e){return this.controls[e]}push(e,t={}){this.controls.push(e),this._registerControl(e),this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}insert(e,t,r={}){this.controls.splice(e,0,t),this._registerControl(t),this.updateValueAndValidity({emitEvent:r.emitEvent})}removeAt(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),this.controls.splice(e,1),this.updateValueAndValidity({emitEvent:t.emitEvent})}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),this.controls.splice(e,1),t&&(this.controls.splice(e,0,t),this._registerControl(t)),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(e,t={}){rw(this,e),e.forEach((r,i)=>{nw(this,i),this.at(i).setValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(e.forEach((r,i)=>{this.at(i)&&this.at(i).patchValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e=[],t={}){this._forEachChild((r,i)=>{r.reset(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this.controls.map(e=>K_(e))}clear(e={}){this.controls.length<1||(this._forEachChild(t=>t._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:e.emitEvent}))}_syncPendingControls(){let e=this.controls.reduce((t,r)=>!!r._syncPendingControls()||t,!1);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){this.controls.forEach((t,r)=>{e(t,r)})}_updateValue(){this.value=this.controls.filter(e=>e.enabled||this.disabled).map(e=>e.value)}_anyControls(e){return this.controls.some(t=>t.enabled&&e(t))}_setUpControls(){this._forEachChild(e=>this._registerControl(e))}_allControlsDisabled(){for(const e of this.controls)if(e.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(e){e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)}}const uC={provide:va,useExisting:(0,h.Gpc)(()=>J_)},Q_=(()=>Promise.resolve(null))();let J_=(()=>{class n extends va{constructor(t,r,i,u,c){super(),this._changeDetectorRef=c,this.control=new Z_,this._registered=!1,this.update=new h.vpe,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=$f(0,u)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){const r=t.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),$_(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){um(this.control,this),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(t){Q_.then(()=>{var r;this.control.setValue(t,{emitViewToModelChange:!1}),null===(r=this._changeDetectorRef)||void 0===r||r.markForCheck()})}_updateDisabled(t){const r=t.isDisabled.currentValue,i=""===r||r&&"false"!==r;Q_.then(()=>{var u;i&&!this.control.disabled?this.control.disable():!i&&this.control.disabled&&this.control.enable(),null===(u=this._changeDetectorRef)||void 0===u||u.markForCheck()})}_getPath(t){return this._parent?U_(t,this._parent):[t]}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(qr,9),h.Y36(mi,10),h.Y36(Rr,10),h.Y36(ya,10),h.Y36(h.sBO,8))},n.\u0275dir=h.lG2({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[h._Bn([uC]),h.qOj,h.TTD]}),n})(),X_=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=h.lG2({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),n})();const aw={provide:ya,useExisting:(0,h.Gpc)(()=>pm),multi:!0};let pm=(()=>{class n extends cc{writeValue(t){this.setProperty("value",null==t?"":t)}registerOnChange(t){this.onChange=r=>{t(""==r?null:parseFloat(r))}}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=h.n5z(n)))(r||n)}}(),n.\u0275dir=h.lG2({type:n,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(t,r){1&t&&h.NdJ("input",function(u){return r.onChange(u.target.value)})("blur",function(){return r.onTouched()})},features:[h._Bn([aw]),h.qOj]}),n})();const lC={provide:ya,useExisting:(0,h.Gpc)(()=>ev),multi:!0};let gm=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({}),n})(),cC=(()=>{class n{constructor(){this._accessors=[]}add(t,r){this._accessors.push([t,r])}remove(t){for(let r=this._accessors.length-1;r>=0;--r)if(this._accessors[r][1]===t)return void this._accessors.splice(r,1)}select(t){this._accessors.forEach(r=>{this._isSameGroup(r,t)&&r[1]!==t&&r[1].fireUncheck(t.value)})}_isSameGroup(t,r){return!!t[0].control&&t[0]._parent===r._control._parent&&t[1].name===r.name}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:gm}),n})(),ev=(()=>{class n extends cc{constructor(t,r,i,u){super(t,r),this._registry=i,this._injector=u,this.onChange=()=>{}}ngOnInit(){this._control=this._injector.get(va),this._checkName(),this._registry.add(this._control,this)}ngOnDestroy(){this._registry.remove(this)}writeValue(t){this._state=t===this.value,this.setProperty("checked",this._state)}registerOnChange(t){this._fn=t,this.onChange=()=>{t(this.value),this._registry.select(this)}}fireUncheck(t){this.writeValue(t)}_checkName(){!this.name&&this.formControlName&&(this.name=this.formControlName)}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(h.Qsj),h.Y36(h.SBq),h.Y36(cC),h.Y36(h.zs3))},n.\u0275dir=h.lG2({type:n,selectors:[["input","type","radio","formControlName",""],["input","type","radio","formControl",""],["input","type","radio","ngModel",""]],hostBindings:function(t,r){1&t&&h.NdJ("change",function(){return r.onChange()})("blur",function(){return r.onTouched()})},inputs:{name:"name",formControlName:"formControlName",value:"value"},features:[h._Bn([lC]),h.qOj]}),n})();const nv=new h.OlP("NgModelWithFormControlWarning"),rv={provide:qr,useExisting:(0,h.Gpc)(()=>Kf)};let Kf=(()=>{class n extends qr{constructor(t,r){super(),this.validators=t,this.asyncValidators=r,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new h.vpe,this._setValidators(t),this._setAsyncValidators(r)}ngOnChanges(t){this._checkFormPresent(),t.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(Qd(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(t){const r=this.form.get(t.path);return um(r,t),r.updateValueAndValidity({emitEvent:!1}),this.directives.push(t),r}getControl(t){return this.form.get(t.path)}removeControl(t){Do(t.control||null,t,!1),ul(this.directives,t)}addFormGroup(t){this._setUpFormContainer(t)}removeFormGroup(t){this._cleanUpFormContainer(t)}getFormGroup(t){return this.form.get(t.path)}addFormArray(t){this._setUpFormContainer(t)}removeFormArray(t){this._cleanUpFormContainer(t)}getFormArray(t){return this.form.get(t.path)}updateModel(t,r){this.form.get(t.path).setValue(r)}onSubmit(t){return this.submitted=!0,function dc(n,e){n._syncPendingControls(),e.forEach(t=>{const r=t.control;"submit"===r.updateOn&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}(this.form,this.directives),this.ngSubmit.emit(t),!1}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_updateDomValue(){this.directives.forEach(t=>{const r=t.control,i=this.form.get(t.path);r!==i&&(Do(r||null,t),hm(i)&&(um(i,t),t.control=i))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(t){const r=this.form.get(t.path);(function j_(n,e){lm(n,e)})(r,t),r.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(t){if(this.form){const r=this.form.get(t.path);r&&function rC(n,e){return Qd(n,e)}(r,t)&&r.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){lm(this.form,this),this._oldForm&&Qd(this._oldForm,this)}_checkFormPresent(){}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(mi,10),h.Y36(Rr,10))},n.\u0275dir=h.lG2({type:n,selectors:[["","formGroup",""]],hostBindings:function(t,r){1&t&&h.NdJ("submit",function(u){return r.onSubmit(u)})("reset",function(){return r.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[h._Bn([rv]),h.qOj,h.TTD]}),n})();const ov={provide:va,useExisting:(0,h.Gpc)(()=>Zf)};let Zf=(()=>{class n extends va{constructor(t,r,i,u,c){super(),this._ngModelWarningConfig=c,this._added=!1,this.update=new h.vpe,this._ngModelWarningSent=!1,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=$f(0,u)}set isDisabled(t){}ngOnChanges(t){this._added||this._setUpControl(),$_(t,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}get path(){return U_(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this.control.disabled&&this.valueAccessor.setDisabledState&&this.valueAccessor.setDisabledState(!0),this._added=!0}}return n._ngModelWarningSentOnce=!1,n.\u0275fac=function(t){return new(t||n)(h.Y36(qr,13),h.Y36(mi,10),h.Y36(Rr,10),h.Y36(ya,10),h.Y36(nv,8))},n.\u0275dir=h.lG2({type:n,selectors:[["","formControlName",""]],inputs:{name:["formControlName","name"],isDisabled:["disabled","isDisabled"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},features:[h._Bn([ov]),h.qOj,h.TTD]}),n})(),yw=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({imports:[[gm]]}),n})(),vC=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({imports:[yw]}),n})(),_w=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:nv,useValue:t.warnOnNgModelWithFormControl}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({imports:[yw]}),n})(),Co=(()=>{class n{group(t,r=null){const i=this._reduceControls(t);let p,u=null,c=null;return null!=r&&(function EC(n){return void 0!==n.asyncValidators||void 0!==n.validators||void 0!==n.updateOn}(r)?(u=null!=r.validators?r.validators:null,c=null!=r.asyncValidators?r.asyncValidators:null,p=null!=r.updateOn?r.updateOn:void 0):(u=null!=r.validator?r.validator:null,c=null!=r.asyncValidator?r.asyncValidator:null)),new fm(i,{asyncValidators:c,updateOn:p,validators:u})}control(t,r,i){return new Z_(t,r,i)}array(t,r,i){const u=t.map(c=>this._createControl(c));return new sC(u,r,i)}_reduceControls(t){const r={};return Object.keys(t).forEach(i=>{r[i]=this._createControl(t[i])}),r}_createControl(t){return hm(t)||Wf(t)||tw(t)?t:Array.isArray(t)?this.control(t[0],t.length>1?t[1]:null,t.length>2?t[2]:null):this.control(t)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:_w}),n})();class Ew{constructor(){this.nombre="",this.apellido="",this.email="",this.direccion="",this.telefono="",this.pais=""}}var yv=N(4986),An=N(5813);function vm(){return(0,Jn.e)((n,e)=>{let t,r=!1;n.subscribe((0,In.x)(e,i=>{const u=t;t=i,r&&e.next([u,i]),r=!0}))})}function bC(n,e){return n===e}var ot,Pi=N(2011),_v=(N(7092),N(3942)),Ee=N(5861),Ks=N(9681),rh=N(4859),cl=N(1877),xt=N(2090),MM="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},To={},Em=Em||{},Nt=MM||self;function vv(){}function ys(n){var e=typeof n;return"array"==(e="object"!=e?e:n?Array.isArray(n)?"array":e:"null")||"object"==e&&"number"==typeof n.length}function wm(n){var e=typeof n;return"object"==e&&null!=n||"function"==e}var bm="closure_uid_"+(1e9*Math.random()>>>0),ww=0;function bw(n,e,t){return n.call.apply(n.bind,arguments)}function IC(n,e,t){if(!n)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,r),n.apply(e,i)}}return function(){return n.apply(e,arguments)}}function yi(n,e,t){return(yi=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?bw:IC).apply(null,arguments)}function Jf(n,e){var t=Array.prototype.slice.call(arguments,1);return function(){var r=t.slice();return r.push.apply(r,arguments),n.apply(this,r)}}function vr(n,e){function t(){}t.prototype=e.prototype,n.Z=e.prototype,n.prototype=new t,n.prototype.constructor=n,n.Vb=function(r,i,u){for(var c=Array(arguments.length-2),p=2;p<arguments.length;p++)c[p-2]=arguments[p];return e.prototype[i].apply(r,c)}}function dl(){this.s=this.s,this.o=this.o}var DC={};dl.prototype.s=!1,dl.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var n=function xM(n){return Object.prototype.hasOwnProperty.call(n,bm)&&n[bm]||(n[bm]=++ww)}(this);delete DC[n]}},dl.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const Iw=Array.prototype.indexOf?function(n,e){return Array.prototype.indexOf.call(n,e,void 0)}:function(n,e){if("string"==typeof n)return"string"!=typeof e||1!=e.length?-1:n.indexOf(e,0);for(let t=0;t<n.length;t++)if(t in n&&n[t]===e)return t;return-1},Dw=Array.prototype.forEach?function(n,e,t){Array.prototype.forEach.call(n,e,t)}:function(n,e,t){const r=n.length,i="string"==typeof n?n.split(""):n;for(let u=0;u<r;u++)u in i&&e.call(t,i[u],u,n)};function Cw(n){return Array.prototype.concat.apply([],arguments)}function wv(n){const e=n.length;if(0<e){const t=Array(e);for(let r=0;r<e;r++)t[r]=n[r];return t}return[]}function pc(n){return/^[\s\xa0]*$/.test(n)}var Oi,gc=String.prototype.trim?function(n){return n.trim()}:function(n){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(n)[1]};function Ni(n,e){return-1!=n.indexOf(e)}function mc(n,e){return n<e?-1:n>e?1:0}e:{var Tw=Nt.navigator;if(Tw){var Im=Tw.userAgent;if(Im){Oi=Im;break e}}Oi=""}function Zs(n,e,t){for(const r in n)e.call(t,n[r],r,n)}function ih(n){const e={};for(const t in n)e[t]=n[t];return e}var zr="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function hl(n,e){let t,r;for(let i=1;i<arguments.length;i++){for(t in r=arguments[i],r)n[t]=r[t];for(let u=0;u<zr.length;u++)t=zr[u],Object.prototype.hasOwnProperty.call(r,t)&&(n[t]=r[t])}}function sh(n){return sh[" "](n),n}sh[" "]=vv;var hu,n,bv=Ni(Oi,"Opera"),Ao=Ni(Oi,"Trident")||Ni(Oi,"MSIE"),yc=Ni(Oi,"Edge"),fl=yc||Ao,_c=Ni(Oi,"Gecko")&&!(Ni(Oi.toLowerCase(),"webkit")&&!Ni(Oi,"Edge"))&&!(Ni(Oi,"Trident")||Ni(Oi,"MSIE"))&&!Ni(Oi,"Edge"),oh=Ni(Oi.toLowerCase(),"webkit")&&!Ni(Oi,"Edge");function vc(){var n=Nt.document;return n?n.documentMode:void 0}e:{var pl="",gl=(n=Oi,_c?/rv:([^\);]+)(\)|;)/.exec(n):yc?/Edge\/([\d\.]+)/.exec(n):Ao?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):oh?/WebKit\/(\S+)/.exec(n):bv?/(?:Version)[ \/]?(\S+)/.exec(n):void 0);if(gl&&(pl=gl?gl[1]:""),Ao){var Dm=vc();if(null!=Dm&&Dm>parseFloat(pl)){hu=String(Dm);break e}}hu=pl}var Aw={};var Mw=Nt.document&&Ao&&(vc()||parseInt(hu,10))||void 0,xw=function(){if(!Nt.addEventListener||!Object.defineProperty)return!1;var n=!1,e=Object.defineProperty({},"passive",{get:function(){n=!0}});try{Nt.addEventListener("test",vv,e),Nt.removeEventListener("test",vv,e)}catch(t){}return n}();function Wr(n,e){this.type=n,this.g=this.target=e,this.defaultPrevented=!1}function ah(n,e){if(Wr.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var t=this.type=n.type,r=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=e,e=n.relatedTarget){if(_c){e:{try{sh(e.nodeName);var i=!0;break e}catch(u){}i=!1}i||(e=null)}}else"mouseover"==t?e=n.fromElement:"mouseout"==t&&(e=n.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:TC[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&ah.Z.h.call(this)}}Wr.prototype.h=function(){this.defaultPrevented=!0},vr(ah,Wr);var TC={2:"touch",3:"pen",4:"mouse"};ah.prototype.h=function(){ah.Z.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var uh="closure_listenable_"+(1e6*Math.random()|0),AC=0;function Rw(n,e,t,r,i){this.listener=n,this.proxy=null,this.src=e,this.type=t,this.capture=!!r,this.ia=i,this.key=++AC,this.ca=this.fa=!1}function Xf(n){n.ca=!0,n.listener=null,n.proxy=null,n.src=null,n.ia=null}function Tm(n){this.src=n,this.g={},this.h=0}function Dv(n,e){var t=e.type;if(t in n.g){var u,r=n.g[t],i=Iw(r,e);(u=0<=i)&&Array.prototype.splice.call(r,i,1),u&&(Xf(e),0==n.g[t].length&&(delete n.g[t],n.h--))}}function Am(n,e,t,r){for(var i=0;i<n.length;++i){var u=n[i];if(!u.ca&&u.listener==e&&u.capture==!!t&&u.ia==r)return i}return-1}Tm.prototype.add=function(n,e,t,r,i){var u=n.toString();(n=this.g[u])||(n=this.g[u]=[],this.h++);var c=Am(n,e,r,i);return-1<c?(e=n[c],t||(e.fa=!1)):((e=new Rw(e,this.src,u,!!r,i)).fa=t,n.push(e)),e};var Cv="closure_lm_"+(1e6*Math.random()|0),Sm={};function Pw(n,e,t,r,i){if(r&&r.once)return Ow(n,e,t,r,i);if(Array.isArray(e)){for(var u=0;u<e.length;u++)Pw(n,e[u],t,r,i);return null}return t=Tv(t),n&&n[uh]?n.N(e,t,wm(r)?!!r.capture:!!r,i):Nw(n,e,t,!1,r,i)}function Nw(n,e,t,r,i,u){if(!e)throw Error("Invalid event type");var c=wm(i)?!!i.capture:!!i,p=Fw(n);if(p||(n[Cv]=p=new Tm(n)),(t=p.add(e,t,r,c,u)).proxy)return t;if(r=function RM(){var e=PM;return function n(t){return e.call(n.src,n.listener,t)}}(),t.proxy=r,r.src=n,r.listener=t,n.addEventListener)xw||(i=c),void 0===i&&(i=!1),n.addEventListener(e.toString(),r,i);else if(n.attachEvent)n.attachEvent(kw(e.toString()),r);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(r)}return t}function Ow(n,e,t,r,i){if(Array.isArray(e)){for(var u=0;u<e.length;u++)Ow(n,e[u],t,r,i);return null}return t=Tv(t),n&&n[uh]?n.O(e,t,wm(r)?!!r.capture:!!r,i):Nw(n,e,t,!0,r,i)}function Mm(n,e,t,r,i){if(Array.isArray(e))for(var u=0;u<e.length;u++)Mm(n,e[u],t,r,i);else r=wm(r)?!!r.capture:!!r,t=Tv(t),n&&n[uh]?(n=n.i,(e=String(e).toString())in n.g&&-1<(t=Am(u=n.g[e],t,r,i))&&(Xf(u[t]),Array.prototype.splice.call(u,t,1),0==u.length&&(delete n.g[e],n.h--))):n&&(n=Fw(n))&&(e=n.g[e.toString()],n=-1,e&&(n=Am(e,t,r,i)),(t=-1<n?e[n]:null)&&ep(t))}function ep(n){if("number"!=typeof n&&n&&!n.ca){var e=n.src;if(e&&e[uh])Dv(e.i,n);else{var t=n.type,r=n.proxy;e.removeEventListener?e.removeEventListener(t,r,n.capture):e.detachEvent?e.detachEvent(kw(t),r):e.addListener&&e.removeListener&&e.removeListener(r),(t=Fw(e))?(Dv(t,n),0==t.h&&(t.src=null,e[Cv]=null)):Xf(n)}}}function kw(n){return n in Sm?Sm[n]:Sm[n]="on"+n}function PM(n,e){if(n.ca)n=!0;else{e=new ah(e,this);var t=n.listener,r=n.ia||n.src;n.fa&&ep(n),n=t.call(r,e)}return n}function Fw(n){return(n=n[Cv])instanceof Tm?n:null}var Lw="__closure_events_fn_"+(1e9*Math.random()>>>0);function Tv(n){return"function"==typeof n?n:(n[Lw]||(n[Lw]=function(e){return n.handleEvent(e)}),n[Lw])}function Er(){dl.call(this),this.i=new Tm(this),this.P=this,this.I=null}function _i(n,e){var t,r=n.I;if(r)for(t=[];r;r=r.I)t.push(r);if(n=n.P,r=e.type||e,"string"==typeof e)e=new Wr(e,n);else if(e instanceof Wr)e.target=e.target||n;else{var i=e;hl(e=new Wr(r,n),i)}if(i=!0,t)for(var u=t.length-1;0<=u;u--){var c=e.g=t[u];i=xm(c,r,!0,e)&&i}if(i=xm(c=e.g=n,r,!0,e)&&i,i=xm(c,r,!1,e)&&i,t)for(u=0;u<t.length;u++)i=xm(c=e.g=t[u],r,!1,e)&&i}function xm(n,e,t,r){if(!(e=n.i.g[String(e)]))return!0;e=e.concat();for(var i=!0,u=0;u<e.length;++u){var c=e[u];if(c&&!c.ca&&c.capture==t){var p=c.listener,y=c.ia||c.src;c.fa&&Dv(n.i,c),i=!1!==p.call(y,r)&&i}}return i&&!r.defaultPrevented}vr(Er,dl),Er.prototype[uh]=!0,Er.prototype.removeEventListener=function(n,e,t,r){Mm(this,n,e,t,r)},Er.prototype.M=function(){if(Er.Z.M.call(this),this.i){var e,n=this.i;for(e in n.g){for(var t=n.g[e],r=0;r<t.length;r++)Xf(t[r]);delete n.g[e],n.h--}}this.I=null},Er.prototype.N=function(n,e,t,r){return this.i.add(String(n),e,!1,t,r)},Er.prototype.O=function(n,e,t,r){return this.i.add(String(n),e,!0,t,r)};var ml=Nt.JSON.stringify;function SC(){var n=jw;let e=null;return n.g&&(e=n.g,n.g=n.g.next,n.g||(n.h=null),e.next=null),e}var Pm,Uw=new class{constructor(n,e){this.i=n,this.j=e,this.h=0,this.g=null}get(){let n;return 0<this.h?(this.h--,n=this.g,this.g=n.next,n.next=null):n=this.i(),n}}(()=>new Bw,n=>n.reset());class Bw{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function Rm(n){Nt.setTimeout(()=>{throw n},0)}function Av(n,e){Pm||function MC(){var n=Nt.Promise.resolve(void 0);Pm=function(){n.then(xC)}}(),Sv||(Pm(),Sv=!0),jw.add(n,e)}var Sv=!1,jw=new class Vw{constructor(){this.h=this.g=null}add(e,t){const r=Uw.get();r.set(e,t),this.h?this.h.next=r:this.g=r,this.h=r}};function xC(){for(var n;n=SC();){try{n.h.call(n.g)}catch(t){Rm(t)}var e=Uw;e.j(n),100>e.h&&(e.h++,n.next=e.g,e.g=n)}Sv=!1}function Nm(n,e){Er.call(this),this.h=n||1,this.g=e||Nt,this.j=yi(this.kb,this),this.l=Date.now()}function Om(n){n.da=!1,n.S&&(n.g.clearTimeout(n.S),n.S=null)}function Mv(n,e,t){if("function"==typeof n)t&&(n=yi(n,t));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=yi(n.handleEvent,n)}return 2147483647<Number(e)?-1:Nt.setTimeout(n,e||0)}function xv(n){n.g=Mv(()=>{n.g=null,n.i&&(n.i=!1,xv(n))},n.j);const e=n.h;n.h=null,n.m.apply(null,e)}vr(Nm,Er),(ot=Nm.prototype).da=!1,ot.S=null,ot.kb=function(){if(this.da){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-n):(this.S&&(this.g.clearTimeout(this.S),this.S=null),_i(this,"tick"),this.da&&(Om(this),this.start()))}},ot.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},ot.M=function(){Nm.Z.M.call(this),Om(this),delete this.g};class Hw extends dl{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:xv(this)}M(){super.M(),this.g&&(Nt.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Ec(n){dl.call(this),this.h=n,this.g={}}vr(Ec,dl);var RC=[];function km(n,e,t,r){Array.isArray(t)||(t&&(RC[0]=t.toString()),t=RC);for(var i=0;i<t.length;i++){var u=Pw(e,t[i],r||n.handleEvent,!1,n.h||n);if(!u)break;n.g[u.key]=u}}function $w(n){Zs(n.g,function(e,t){this.g.hasOwnProperty(t)&&ep(e)},n),n.g={}}function Rv(){this.g=!0}function yl(n,e,t,r){n.info(function(){return"XMLHTTP TEXT ("+e+"): "+function PC(n,e){if(!n.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(n=0;n<t.length;n++)if(Array.isArray(t[n])){var r=t[n];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var u=i[0];if("noop"!=u&&"stop"!=u&&"close"!=u)for(var c=1;c<i.length;c++)i[c]=""}}}return ml(t)}catch(p){return e}}(n,t)+(r?" "+r:"")})}Ec.prototype.M=function(){Ec.Z.M.call(this),$w(this)},Ec.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Rv.prototype.Aa=function(){this.g=!1},Rv.prototype.info=function(){};var Ea={},np=null;function lh(){return np=np||new Er}function NC(n){Wr.call(this,Ea.Ma,n)}function rp(n){const e=lh();_i(e,new NC(e,n))}function Fm(n,e){Wr.call(this,Ea.STAT_EVENT,n),this.stat=e}function Kr(n){const e=lh();_i(e,new Fm(e,n))}function Nv(n,e){Wr.call(this,Ea.Na,n),this.size=e}function ch(n,e){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return Nt.setTimeout(function(){n()},e)}Ea.Ma="serverreachability",vr(NC,Wr),Ea.STAT_EVENT="statevent",vr(Fm,Wr),Ea.Na="timingevent",vr(Nv,Wr);var dh={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},Ov={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function Lm(){}function kv(){}Lm.prototype.h=null;var sp,ip={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function Um(){Wr.call(this,"d")}function Bm(){Wr.call(this,"c")}function op(){}function ap(n,e,t,r){this.l=n,this.j=e,this.m=t,this.X=r||1,this.V=new Ec(this),this.P=OC,this.W=new Nm(n=fl?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new qw}function qw(){this.i=null,this.g="",this.h=!1}vr(Um,Wr),vr(Bm,Wr),vr(op,Lm),op.prototype.g=function(){return new XMLHttpRequest},op.prototype.i=function(){return{}},sp=new op;var OC=45e3,jm={},hh={};function Hm(n,e,t){n.K=1,n.v=zm(wa(e)),n.s=t,n.U=!0,Fv(n,null)}function Fv(n,e){n.F=Date.now(),fh(n),n.A=wa(n.v);var t=n.A,r=n.X;Array.isArray(r)||(r=[String(r)]),tb(t.h,"t",r),n.C=0,t=n.l.H,n.h=new qw,n.g=eE(n.l,t?e:null,!n.s),0<n.O&&(n.L=new Hw(yi(n.Ia,n,n.g),n.O)),km(n.V,n.g,"readystatechange",n.gb),e=n.H?ih(n.H):{},n.s?(n.u||(n.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",n.g.ea(n.A,n.u,n.s,e)):(n.u="GET",n.g.ea(n.A,n.u,null,e)),rp(1),function tp(n,e,t,r,i,u){n.info(function(){if(n.g)if(u)for(var c="",p=u.split("&"),y=0;y<p.length;y++){var b=p[y].split("=");if(1<b.length){var A=b[0];b=b[1];var M=A.split("_");c=2<=M.length&&"type"==M[1]?c+(A+"=")+b+"&":c+(A+"=redacted&")}}else c=null;else c=u;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+t+"\n"+c})}(n.j,n.u,n.A,n.m,n.X,n.s)}function Lv(n){return!!n.g&&"GET"==n.u&&2!=n.K&&n.l.Ba}function Vv(n,e,t){let i,r=!0;for(;!n.I&&n.C<t.length;){if(i=zw(n,t),i==hh){4==e&&(n.o=4,Kr(14),r=!1),yl(n.j,n.m,null,"[Incomplete Response]");break}if(i==jm){n.o=4,Kr(15),yl(n.j,n.m,t,"[Invalid Chunk]"),r=!1;break}yl(n.j,n.m,i,null),Bv(n,i)}Lv(n)&&i!=hh&&i!=jm&&(n.h.g="",n.C=0),4!=e||0!=t.length||n.h.h||(n.o=1,Kr(16),r=!1),n.i=n.i&&r,r?0<t.length&&!n.aa&&(n.aa=!0,(e=n.l).g==n&&e.$&&!e.L&&(e.h.info("Great, no buffering proxy detected. Bytes received: "+t.length),mu(e),e.L=!0,Kr(11))):(yl(n.j,n.m,t,"[Invalid Chunked Response]"),wc(n),$m(n))}function zw(n,e){var t=n.C,r=e.indexOf("\n",t);return-1==r?hh:(t=Number(e.substring(t,r)),isNaN(t)?jm:(r+=1)+t>e.length?hh:(e=e.substr(r,t),n.C=r+t,e))}function fh(n){n.Y=Date.now()+n.P,Uv(n,n.P)}function Uv(n,e){if(null!=n.B)throw Error("WatchDog timer not null");n.B=ch(yi(n.eb,n),e)}function up(n){n.B&&(Nt.clearTimeout(n.B),n.B=null)}function $m(n){0==n.l.G||n.I||Cc(n.l,n)}function wc(n){up(n);var e=n.L;e&&"function"==typeof e.na&&e.na(),n.L=null,Om(n.W),$w(n.V),n.g&&(e=n.g,n.g=null,e.abort(),e.na())}function Bv(n,e){try{var t=n.l;if(0!=t.G&&(t.g==n||Wm(t.i,n)))if(t.I=n.N,!n.J&&Wm(t.i,n)&&3==t.G){try{var r=t.Ca.g.parse(e)}catch(b){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0])e:if(t.u)t.ta=i[1],0<t.ta-t.U&&37500>i[2]&&t.N&&0==t.A&&!t.v&&(t.v=ch(yi(t.ab,t),6e3));else{if(t.g){if(!(t.g.F+3e3<n.F))break e;ty(t),pp(t)}ey(t),Kr(18)}if(1>=$v(t.i)&&t.ka){try{t.ka()}catch(b){}t.ka=void 0}}else yu(t,11)}else if((n.J||t.g==n)&&ty(t),!pc(e))for(i=t.Ca.g.parse(e),e=0;e<i.length;e++){let b=i[e];if(t.U=b[0],b=b[1],2==t.G)if("c"==b[0]){t.J=b[1],t.la=b[2];const A=b[3];null!=A&&(t.ma=A,t.h.info("VER="+t.ma));const M=b[4];null!=M&&(t.za=M,t.h.info("SVER="+t.za));const F=b[5];null!=F&&"number"==typeof F&&0<F&&(t.K=r=1.5*F,t.h.info("backChannelRequestTimeoutMs_="+r)),r=t;const V=n.g;if(V){const B=V.g?V.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(B){var u=r.i;!u.g&&(Ni(B,"spdy")||Ni(B,"quic")||Ni(B,"h2"))&&(u.j=u.l,u.g=new Set,u.h&&(yh(u,u.h),u.h=null))}if(r.D){const se=V.g?V.g.getResponseHeader("X-HTTP-Session-Id"):null;se&&(r.sa=se,Sn(r.F,r.D,se))}}t.G=3,t.j&&t.j.xa(),t.$&&(t.O=Date.now()-n.F,t.h.info("Handshake RTT: "+t.O+"ms"));var c=n;if((r=t).oa=Xv(r,r.H?r.la:null,r.W),c.J){sb(r.i,c);var p=c,y=r.K;y&&p.setTimeout(y),p.B&&(up(p),fh(p)),r.g=c}else Jv(r);0<t.l.length&&gp(t)}else"stop"!=b[0]&&"close"!=b[0]||yu(t,7);else 3==t.G&&("stop"==b[0]||"close"==b[0]?"stop"==b[0]?yu(t,7):Jm(t):"noop"!=b[0]&&t.j&&t.j.wa(b),t.A=0)}rp(4)}catch(b){}}function jv(n,e){if(n.forEach&&"function"==typeof n.forEach)n.forEach(e,void 0);else if(ys(n)||"string"==typeof n)Dw(n,e,void 0);else{if(n.T&&"function"==typeof n.T)var t=n.T();else if(n.R&&"function"==typeof n.R)t=void 0;else if(ys(n)||"string"==typeof n){t=[];for(var r=n.length,i=0;i<r;i++)t.push(i)}else for(i in t=[],r=0,n)t[r++]=i;r=function Ww(n){if(n.R&&"function"==typeof n.R)return n.R();if("string"==typeof n)return n.split("");if(ys(n)){for(var e=[],t=n.length,r=0;r<t;r++)e.push(n[r]);return e}for(r in e=[],t=0,n)e[t++]=n[r];return e}(n),i=r.length;for(var u=0;u<i;u++)e.call(void 0,r[u],t&&t[u],n)}}function Nn(n,e){this.h={},this.g=[],this.i=0;var t=arguments.length;if(1<t){if(t%2)throw Error("Uneven number of arguments");for(var r=0;r<t;r+=2)this.set(arguments[r],arguments[r+1])}else if(n)if(n instanceof Nn)for(t=n.T(),r=0;r<t.length;r++)this.set(t[r],n.get(t[r]));else for(r in n)this.set(r,n[r])}function Gm(n){if(n.i!=n.g.length){for(var e=0,t=0;e<n.g.length;){var r=n.g[e];bc(n.h,r)&&(n.g[t++]=r),e++}n.g.length=t}if(n.i!=n.g.length){var i={};for(t=e=0;e<n.g.length;)bc(i,r=n.g[e])||(n.g[t++]=r,i[r]=1),e++;n.g.length=t}}function bc(n,e){return Object.prototype.hasOwnProperty.call(n,e)}(ot=ap.prototype).setTimeout=function(n){this.P=n},ot.gb=function(n){n=n.target;const e=this.L;e&&3==gu(n)?e.l():this.Ia(n)},ot.Ia=function(n){try{if(n==this.g)e:{const A=gu(this.g);var e=this.g.Da();const M=this.g.ba();if(!(3>A)&&(3!=A||fl||this.g&&(this.h.h||this.g.ga()||db(this.g)))){this.I||4!=A||7==e||rp(8==e||0>=M?3:2),up(this);var t=this.g.ba();this.N=t;t:if(Lv(this)){var r=db(this.g);n="";var i=r.length,u=4==gu(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){wc(this),$m(this);var c="";break t}this.h.i=new Nt.TextDecoder}for(e=0;e<i;e++)this.h.h=!0,n+=this.h.i.decode(r[e],{stream:u&&e==i-1});r.splice(0,i),this.h.g+=n,this.C=0,c=this.h.g}else c=this.g.ga();if(this.i=200==t,function Gw(n,e,t,r,i,u,c){n.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+t+"\n"+u+" "+c})}(this.j,this.u,this.A,this.m,this.X,A,t),this.i){if(this.$&&!this.J){t:{if(this.g){var p,y=this.g;if((p=y.g?y.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!pc(p)){var b=p;break t}}b=null}if(!(t=b)){this.i=!1,this.o=3,Kr(12),wc(this),$m(this);break e}yl(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,Bv(this,t)}this.U?(Vv(this,A,c),fl&&this.i&&3==A&&(km(this.V,this.W,"tick",this.fb),this.W.start())):(yl(this.j,this.m,c,null),Bv(this,c)),4==A&&wc(this),this.i&&!this.I&&(4==A?Cc(this.l,this):(this.i=!1,fh(this)))}else 400==t&&0<c.indexOf("Unknown SID")?(this.o=3,Kr(12)):(this.o=0,Kr(13)),wc(this),$m(this)}}}catch(A){}},ot.fb=function(){if(this.g){var n=gu(this.g),e=this.g.ga();this.C<e.length&&(up(this),Vv(this,n,e),this.i&&4!=n&&fh(this))}},ot.cancel=function(){this.I=!0,wc(this)},ot.eb=function(){this.B=null;const n=Date.now();0<=n-this.Y?(function Pv(n,e){n.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.K&&(rp(3),Kr(17)),wc(this),this.o=2,$m(this)):Uv(this,this.Y-n)},(ot=Nn.prototype).R=function(){Gm(this);for(var n=[],e=0;e<this.g.length;e++)n.push(this.h[this.g[e]]);return n},ot.T=function(){return Gm(this),this.g.concat()},ot.get=function(n,e){return bc(this.h,n)?this.h[n]:e},ot.set=function(n,e){bc(this.h,n)||(this.i++,this.g.push(n)),this.h[n]=e},ot.forEach=function(n,e){for(var t=this.T(),r=0;r<t.length;r++){var i=t[r],u=this.get(i);n.call(e,u,i,this)}};var Kw=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function Ic(n,e){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,n instanceof Ic){this.g=void 0!==e?e:n.g,lp(this,n.j),this.s=n.s,fu(this,n.i),qm(this,n.m),this.l=n.l,e=n.h;var t=new gh;t.i=e.i,e.g&&(t.g=new Nn(e.g),t.h=e.h),Yw(this,t),this.o=n.o}else n&&(t=String(n).match(Kw))?(this.g=!!e,lp(this,t[1]||"",!0),this.s=ph(t[2]||""),fu(this,t[3]||"",!0),qm(this,t[4]),this.l=ph(t[5]||"",!0),Yw(this,t[6]||"",!0),this.o=ph(t[7]||"")):(this.g=!!e,this.h=new gh(null,this.g))}function wa(n){return new Ic(n)}function lp(n,e,t){n.j=t?ph(e,!0):e,n.j&&(n.j=n.j.replace(/:$/,""))}function fu(n,e,t){n.i=t?ph(e,!0):e}function qm(n,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);n.m=e}else n.m=null}function Yw(n,e,t){e instanceof gh?(n.h=e,function Hv(n,e){e&&!n.j&&(pu(n),n.i=null,n.g.forEach(function(t,r){var i=r.toLowerCase();r!=i&&(Xw(this,r),tb(this,i,t))},n)),n.j=e}(n.h,n.g)):(t||(e=Dc(e,So)),n.h=new gh(e,n.g))}function Sn(n,e,t){n.h.set(e,t)}function zm(n){return Sn(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function ph(n,e){return n?e?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function Dc(n,e,t){return"string"==typeof n?(n=encodeURI(n).replace(e,ba),t&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function ba(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}Ic.prototype.toString=function(){var n=[],e=this.j;e&&n.push(Dc(e,Jw,!0),":");var t=this.i;return(t||"file"==e)&&(n.push("//"),(e=this.s)&&n.push(Dc(e,Jw,!0),"@"),n.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&n.push(":",String(t))),(t=this.l)&&(this.i&&"/"!=t.charAt(0)&&n.push("/"),n.push(Dc(t,"/"==t.charAt(0)?Ia:kC,!0))),(t=this.h.toString())&&n.push("?",t),(t=this.o)&&n.push("#",Dc(t,Mo)),n.join("")};var Jw=/[#\/\?@]/g,kC=/[#\?:]/g,Ia=/[#\?]/g,So=/[#\?@]/g,Mo=/#/g;function gh(n,e){this.h=this.g=null,this.i=n||null,this.j=!!e}function pu(n){n.g||(n.g=new Nn,n.h=0,n.i&&function Zw(n,e){if(n){n=n.split("&");for(var t=0;t<n.length;t++){var r=n[t].indexOf("="),i=null;if(0<=r){var u=n[t].substring(0,r);i=n[t].substring(r+1)}else u=n[t];e(u,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(n.i,function(e,t){n.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function Xw(n,e){pu(n),e=mh(n,e),bc(n.g.h,e)&&(n.i=null,n.h-=n.g.get(e).length,bc((n=n.g).h,e)&&(delete n.h[e],n.i--,n.g.length>2*n.i&&Gm(n)))}function eb(n,e){return pu(n),e=mh(n,e),bc(n.g.h,e)}function tb(n,e,t){Xw(n,e),0<t.length&&(n.i=null,n.g.set(mh(n,e),wv(t)),n.h+=t.length)}function mh(n,e){return e=String(e),n.j&&(e=e.toLowerCase()),e}function nb(n){this.l=n||rb,n=Nt.PerformanceNavigationTiming?0<(n=Nt.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!(Nt.g&&Nt.g.Ea&&Nt.g.Ea()&&Nt.g.Ea().Zb),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(ot=gh.prototype).add=function(n,e){pu(this),this.i=null,n=mh(this,n);var t=this.g.get(n);return t||this.g.set(n,t=[]),t.push(e),this.h+=1,this},ot.forEach=function(n,e){pu(this),this.g.forEach(function(t,r){Dw(t,function(i){n.call(e,i,r,this)},this)},this)},ot.T=function(){pu(this);for(var n=this.g.R(),e=this.g.T(),t=[],r=0;r<e.length;r++)for(var i=n[r],u=0;u<i.length;u++)t.push(e[r]);return t},ot.R=function(n){pu(this);var e=[];if("string"==typeof n)eb(this,n)&&(e=Cw(e,this.g.get(mh(this,n))));else{n=this.g.R();for(var t=0;t<n.length;t++)e=Cw(e,n[t])}return e},ot.set=function(n,e){return pu(this),this.i=null,eb(this,n=mh(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[e]),this.h+=1,this},ot.get=function(n,e){return n&&0<(n=this.R(n)).length?String(n[0]):e},ot.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var n=[],e=this.g.T(),t=0;t<e.length;t++){var r=e[t],i=encodeURIComponent(String(r));r=this.R(r);for(var u=0;u<r.length;u++){var c=i;""!==r[u]&&(c+="="+encodeURIComponent(String(r[u]))),n.push(c)}}return this.i=n.join("&")};var rb=10;function ib(n){return!!n.h||!!n.g&&n.g.size>=n.j}function $v(n){return n.h?1:n.g?n.g.size:0}function Wm(n,e){return n.h?n.h==e:!!n.g&&n.g.has(e)}function yh(n,e){n.g?n.g.add(e):n.h=e}function sb(n,e){n.h&&n.h==e?n.h=null:n.g&&n.g.has(e)&&n.g.delete(e)}function Gv(n){if(null!=n.h)return n.i.concat(n.h.D);if(null!=n.g&&0!==n.g.size){let e=n.i;for(const t of n.g.values())e=e.concat(t.D);return e}return wv(n.i)}function Km(){}function qv(){this.g=new Km}function Zm(n,e,t){const r=t||"";try{jv(n,function(i,u){let c=i;wm(i)&&(c=ml(i)),e.push(r+u+"="+encodeURIComponent(c))})}catch(i){throw e.push(r+"type="+encodeURIComponent("_badmap")),i}}function dp(n,e,t,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch(u){}}function _h(n){this.l=n.$b||null,this.j=n.ib||!1}function hp(n,e){Er.call(this),this.D=n,this.u=e,this.m=void 0,this.readyState=Ym,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}nb.prototype.cancel=function(){if(this.i=Gv(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}},Km.prototype.stringify=function(n){return Nt.JSON.stringify(n,void 0)},Km.prototype.parse=function(n){return Nt.JSON.parse(n,void 0)},vr(_h,Lm),_h.prototype.g=function(){return new hp(this.l,this.j)},_h.prototype.i=function(n){return function(){return n}}({}),vr(hp,Er);var Ym=0;function Wv(n){n.j.read().then(n.Sa.bind(n)).catch(n.ha.bind(n))}function vh(n){n.readyState=4,n.l=null,n.j=null,n.A=null,Eh(n)}function Eh(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(ot=hp.prototype).open=function(n,e){if(this.readyState!=Ym)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=e,this.readyState=1,Eh(this)},ot.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(e.body=n),(this.D||Nt).fetch(new Request(this.B,e)).then(this.Va.bind(this),this.ha.bind(this))},ot.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,vh(this)),this.readyState=Ym},ot.Va=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,Eh(this)),this.g&&(this.readyState=3,Eh(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if(void 0!==Nt.ReadableStream&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;Wv(this)}else n.text().then(this.Ua.bind(this),this.ha.bind(this))},ot.Sa=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var e=n.value?n.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!n.done}))&&(this.response=this.responseText+=e)}n.done?vh(this):Eh(this),3==this.readyState&&Wv(this)}},ot.Ua=function(n){this.g&&(this.response=this.responseText=n,vh(this))},ot.Ta=function(n){this.g&&(this.response=n,vh(this))},ot.ha=function(){this.g&&vh(this)},ot.setRequestHeader=function(n,e){this.v.append(n,e)},ot.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},ot.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],e=this.h.entries();for(var t=e.next();!t.done;)n.push((t=t.value)[0]+": "+t[1]),t=e.next();return n.join("\r\n")},Object.defineProperty(hp.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var FC=Nt.JSON.parse;function lr(n){Er.call(this),this.headers=new Nn,this.u=n||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=ob,this.K=this.L=!1}vr(lr,Er);var ob="",LC=/^https?$/i,VC=["POST","PUT"];function BC(n){return"content-type"==n.toLowerCase()}function ab(n,e){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=e,n.m=5,ub(n),Qm(n)}function ub(n){n.D||(n.D=!0,_i(n,"complete"),_i(n,"error"))}function lb(n){if(n.h&&void 0!==Em&&(!n.C[1]||4!=gu(n)||2!=n.ba()))if(n.v&&4==gu(n))Mv(n.Fa,0,n);else if(_i(n,"readystatechange"),4==gu(n)){n.h=!1;try{const p=n.ba();e:switch(p){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var r;if(r=0===p){var i=String(n.H).match(Kw)[1]||null;if(!i&&Nt.self&&Nt.self.location){var u=Nt.self.location.protocol;i=u.substr(0,u.length-1)}r=!LC.test(i?i.toLowerCase():"")}t=r}if(t)_i(n,"complete"),_i(n,"success");else{n.m=6;try{var c=2<gu(n)?n.g.statusText:""}catch(y){c=""}n.j=c+" ["+n.ba()+"]",ub(n)}}finally{Qm(n)}}}function Qm(n,e){if(n.g){cb(n);const t=n.g,r=n.C[0]?vv:null;n.g=null,n.C=null,e||_i(n,"ready");try{t.onreadystatechange=r}catch(i){}}}function cb(n){n.g&&n.K&&(n.g.ontimeout=null),n.A&&(Nt.clearTimeout(n.A),n.A=null)}function gu(n){return n.g?n.g.readyState:0}function db(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.J){case ob:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch(e){return null}}function Kv(n,e,t){e:{for(r in t){var r=!1;break e}r=!0}r||(t=function jC(n){let e="";return Zs(n,function(t,r){e+=r,e+=":",e+=t,e+="\r\n"}),e}(t),"string"==typeof n?null!=t&&encodeURIComponent(String(t)):Sn(n,e,t))}function fp(n,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[n]||e}function hb(n){this.za=0,this.l=[],this.h=new Rv,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=fp("failFast",!1,n),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=fp("baseRetryDelayMs",5e3,n),this.$a=fp("retryDelaySeedMs",1e4,n),this.Ya=fp("forwardChannelMaxRetries",2,n),this.ra=fp("forwardChannelRequestTimeoutMs",2e4,n),this.qa=n&&n.xmlHttpFactory||void 0,this.Ba=n&&n.Yb||!1,this.K=void 0,this.H=n&&n.supportsCrossDomainXhr||!1,this.J="",this.i=new nb(n&&n.concurrentRequestLimit),this.Ca=new qv,this.ja=n&&n.fastHandshake||!1,this.Ra=n&&n.Wb||!1,n&&n.Aa&&this.h.Aa(),n&&n.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&n&&n.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!n||!1!==n.Xb}function Jm(n){if(Zv(n),3==n.G){var e=n.V++,t=wa(n.F);Sn(t,"SID",n.J),Sn(t,"RID",e),Sn(t,"TYPE","terminate"),wh(n,t),(e=new ap(n,n.h,e,void 0)).K=2,e.v=zm(wa(t)),t=!1,Nt.navigator&&Nt.navigator.sendBeacon&&(t=Nt.navigator.sendBeacon(e.v.toString(),"")),!t&&Nt.Image&&((new Image).src=e.v,t=!0),t||(e.g=eE(e.l,null),e.g.ea(e.v)),e.F=Date.now(),fh(e)}$C(n)}function pp(n){n.g&&(mu(n),n.g.cancel(),n.g=null)}function Zv(n){pp(n),n.u&&(Nt.clearTimeout(n.u),n.u=null),ty(n),n.i.cancel(),n.m&&("number"==typeof n.m&&Nt.clearTimeout(n.m),n.m=null)}function Xm(n,e){n.l.push(new class{constructor(n,e){this.h=n,this.g=e}}(n.Za++,e)),3==n.G&&gp(n)}function gp(n){ib(n.i)||n.m||(n.m=!0,Av(n.Ha,n),n.C=0)}function Yv(n,e){var t;t=e?e.m:n.V++;const r=wa(n.F);Sn(r,"SID",n.J),Sn(r,"RID",t),Sn(r,"AID",n.U),wh(n,r),n.o&&n.s&&Kv(r,n.o,n.s),t=new ap(n,n.h,t,n.C+1),null===n.o&&(t.H=n.s),e&&(n.l=e.D.concat(n.l)),e=Qv(n,t,1e3),t.setTimeout(Math.round(.5*n.ra)+Math.round(.5*n.ra*Math.random())),yh(n.i,t),Hm(t,r,e)}function wh(n,e){n.j&&jv({},function(t,r){Sn(e,r,t)})}function Qv(n,e,t){t=Math.min(n.l.length,t);var r=n.j?yi(n.j.Oa,n.j,n):null;e:{var i=n.l;let u=-1;for(;;){const c=["count="+t];-1==u?0<t?(u=i[0].h,c.push("ofs="+u)):u=0:c.push("ofs="+u);let p=!0;for(let y=0;y<t;y++){let b=i[y].h;const A=i[y].g;if(b-=u,0>b)u=Math.max(0,i[y].h-100),p=!1;else try{Zm(A,c,"req"+b+"_")}catch(M){r&&r(A)}}if(p){r=c.join("&");break e}}}return n=n.l.splice(0,t),e.D=n,r}function Jv(n){n.g||n.u||(n.Y=1,Av(n.Ga,n),n.A=0)}function ey(n){return!(n.g||n.u||3<=n.A||(n.Y++,n.u=ch(yi(n.Ga,n),HC(n,n.A)),n.A++,0))}function mu(n){null!=n.B&&(Nt.clearTimeout(n.B),n.B=null)}function pb(n){n.g=new ap(n,n.h,"rpc",n.Y),null===n.o&&(n.g.H=n.s),n.g.O=0;var e=wa(n.oa);Sn(e,"RID","rpc"),Sn(e,"SID",n.J),Sn(e,"CI",n.N?"0":"1"),Sn(e,"AID",n.U),wh(n,e),Sn(e,"TYPE","xmlhttp"),n.o&&n.s&&Kv(e,n.o,n.s),n.K&&n.g.setTimeout(n.K);var t=n.g;n=n.la,t.K=1,t.v=zm(wa(e)),t.s=null,t.U=!0,Fv(t,n)}function ty(n){null!=n.v&&(Nt.clearTimeout(n.v),n.v=null)}function Cc(n,e){var t=null;if(n.g==e){ty(n),mu(n),n.g=null;var r=2}else{if(!Wm(n.i,e))return;t=e.D,sb(n.i,e),r=1}if(n.I=e.N,0!=n.G)if(e.i)if(1==r){t=e.s?e.s.length:0,e=Date.now()-e.F;var i=n.C;_i(r=lh(),new Nv(r,t,e,i)),gp(n)}else Jv(n);else if(3==(i=e.o)||0==i&&0<n.I||!(1==r&&function fb(n,e){return!($v(n.i)>=n.i.j-(n.m?1:0)||(n.m?(n.l=e.D.concat(n.l),0):1==n.G||2==n.G||n.C>=(n.Xa?0:n.Ya)||(n.m=ch(yi(n.Ha,n,e),HC(n,n.C)),n.C++,0)))}(n,e)||2==r&&ey(n)))switch(t&&0<t.length&&(e=n.i,e.i=e.i.concat(t)),i){case 1:yu(n,5);break;case 4:yu(n,10);break;case 3:yu(n,6);break;default:yu(n,2)}}function HC(n,e){let t=n.Pa+Math.floor(Math.random()*n.$a);return n.j||(t*=2),t*e}function yu(n,e){if(n.h.info("Error code "+e),2==e){var t=null;n.j&&(t=null);var r=yi(n.jb,n);t||(t=new Ic("//www.google.com/images/cleardot.gif"),Nt.location&&"http"==Nt.location.protocol||lp(t,"https"),zm(t)),function zv(n,e){const t=new Rv;if(Nt.Image){const r=new Image;r.onload=Jf(dp,t,r,"TestLoadImage: loaded",!0,e),r.onerror=Jf(dp,t,r,"TestLoadImage: error",!1,e),r.onabort=Jf(dp,t,r,"TestLoadImage: abort",!1,e),r.ontimeout=Jf(dp,t,r,"TestLoadImage: timeout",!1,e),Nt.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=n}else e(!1)}(t.toString(),r)}else Kr(2);n.G=0,n.j&&n.j.va(e),$C(n),Zv(n)}function $C(n){n.G=0,n.I=-1,n.j&&((0!=Gv(n.i).length||0!=n.l.length)&&(n.i.i.length=0,wv(n.l),n.l.length=0),n.j.ua())}function Xv(n,e,t){let r=function Qw(n){return n instanceof Ic?wa(n):new Ic(n,void 0)}(t);if(""!=r.i)e&&fu(r,e+"."+r.i),qm(r,r.m);else{const i=Nt.location;r=function NM(n,e,t,r){var i=new Ic(null,void 0);return n&&lp(i,n),e&&fu(i,e),t&&qm(i,t),r&&(i.l=r),i}(i.protocol,e?e+"."+i.hostname:i.hostname,+i.port,t)}return n.aa&&Zs(n.aa,function(i,u){Sn(r,u,i)}),t=n.sa,(e=n.D)&&t&&Sn(r,e,t),Sn(r,"VER",n.ma),wh(n,r),r}function eE(n,e,t){if(e&&!n.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new lr(t&&n.Ba&&!n.qa?new _h({ib:!0}):n.qa)).L=n.H,e}function GC(){}function gt(){if(Ao&&!(10<=Number(Mw)))throw Error("Environmental error: no available transport.")}function _s(n,e){Er.call(this),this.g=new hb(e),this.l=n,this.h=e&&e.messageUrlParams||null,n=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(n?n["X-WebChannel-Content-Type"]=e.messageContentType:n={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(n?n["X-WebChannel-Client-Profile"]=e.ya:n={"X-WebChannel-Client-Profile":e.ya}),this.g.P=n,(n=e&&e.httpHeadersOverwriteParam)&&!pc(n)&&(this.g.o=n),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!pc(e)&&(this.g.D=e,null!==(n=this.h)&&e in n&&e in(n=this.h)&&delete n[e]),this.j=new _u(this)}function gb(n){Um.call(this);var e=n.__sm__;if(e){e:{for(const t in e){n=t;break e}n=void 0}(this.i=n)&&(n=this.i,e=null!==e&&n in e?e[n]:void 0),this.data=e}else this.data=n}function mb(){Bm.call(this),this.status=1}function _u(n){this.g=n}(ot=lr.prototype).ea=function(n,e,t,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+n);e=e?e.toUpperCase():"GET",this.H=n,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():sp.g(),this.C=function Vm(n){return n.h||(n.h=n.i())}(this.u?this.u:sp),this.g.onreadystatechange=yi(this.Fa,this);try{this.F=!0,this.g.open(e,String(n),!0),this.F=!1}catch(u){return void ab(this,u)}n=t||"";const i=new Nn(this.headers);r&&jv(r,function(u,c){i.set(c,u)}),r=function CC(n){e:{var e=BC;const t=n.length,r="string"==typeof n?n.split(""):n;for(let i=0;i<t;i++)if(i in r&&e.call(void 0,r[i],i,n)){e=i;break e}e=-1}return 0>e?null:"string"==typeof n?n.charAt(e):n[e]}(i.T()),t=Nt.FormData&&n instanceof Nt.FormData,!(0<=Iw(VC,e))||r||t||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach(function(u,c){this.g.setRequestHeader(c,u)},this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{cb(this),0<this.B&&((this.K=function UC(n){return Ao&&function Sw(){return function Ys(n){var e=Aw;return Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=n(9)}(function(){let n=0;const e=gc(String(hu)).split("."),t=gc("9").split("."),r=Math.max(e.length,t.length);for(let c=0;0==n&&c<r;c++){var i=e[c]||"",u=t[c]||"";do{if(i=/(\d*)(\D*)(.*)/.exec(i)||["","","",""],u=/(\d*)(\D*)(.*)/.exec(u)||["","","",""],0==i[0].length&&0==u[0].length)break;n=mc(0==i[1].length?0:parseInt(i[1],10),0==u[1].length?0:parseInt(u[1],10))||mc(0==i[2].length,0==u[2].length)||mc(i[2],u[2]),i=i[3],u=u[3]}while(0==n)}return 0<=n})}()&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=yi(this.pa,this)):this.A=Mv(this.pa,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(u){ab(this,u)}},ot.pa=function(){void 0!==Em&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,_i(this,"timeout"),this.abort(8))},ot.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,_i(this,"complete"),_i(this,"abort"),Qm(this))},ot.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Qm(this,!0)),lr.Z.M.call(this)},ot.Fa=function(){this.s||(this.F||this.v||this.l?lb(this):this.cb())},ot.cb=function(){lb(this)},ot.ba=function(){try{return 2<gu(this)?this.g.status:-1}catch(n){return-1}},ot.ga=function(){try{return this.g?this.g.responseText:""}catch(n){return""}},ot.Qa=function(n){if(this.g){var e=this.g.responseText;return n&&0==e.indexOf(n)&&(e=e.substring(n.length)),FC(e)}},ot.Da=function(){return this.m},ot.La=function(){return"string"==typeof this.j?this.j:String(this.j)},(ot=hb.prototype).ma=8,ot.G=1,ot.hb=function(n){try{this.h.info("Origin Trials invoked: "+n)}catch(e){}},ot.Ha=function(n){if(this.m)if(this.m=null,1==this.G){if(!n){this.V=Math.floor(1e5*Math.random()),n=this.V++;const i=new ap(this,this.h,n,void 0);let u=this.s;if(this.P&&(u?(u=ih(u),hl(u,this.P)):u=this.P),null===this.o&&(i.H=u),this.ja)e:{for(var e=0,t=0;t<this.l.length;t++){var r=this.l[t];if(void 0===(r="__data__"in r.g&&"string"==typeof(r=r.g.__data__)?r.length:void 0))break;if(4096<(e+=r)){e=t;break e}if(4096===e||t===this.l.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=Qv(this,i,e),Sn(t=wa(this.F),"RID",n),Sn(t,"CVER",22),this.D&&Sn(t,"X-HTTP-Session-Id",this.D),wh(this,t),this.o&&u&&Kv(t,this.o,u),yh(this.i,i),this.Ra&&Sn(t,"TYPE","init"),this.ja?(Sn(t,"$req",e),Sn(t,"SID","null"),i.$=!0,Hm(i,t,null)):Hm(i,t,e),this.G=2}}else 3==this.G&&(n?Yv(this,n):0==this.l.length||ib(this.i)||Yv(this))},ot.Ga=function(){if(this.u=null,pb(this),this.$&&!(this.L||null==this.g||0>=this.O)){var n=2*this.O;this.h.info("BP detection timer enabled: "+n),this.B=ch(yi(this.bb,this),n)}},ot.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,Kr(10),pp(this),pb(this))},ot.ab=function(){null!=this.v&&(this.v=null,pp(this),ey(this),Kr(19))},ot.jb=function(n){n?(this.h.info("Successfully pinged google.com"),Kr(2)):(this.h.info("Failed to ping google.com"),Kr(1))},(ot=GC.prototype).xa=function(){},ot.wa=function(){},ot.va=function(){},ot.ua=function(){},ot.Oa=function(){},gt.prototype.g=function(n,e){return new _s(n,e)},vr(_s,Er),_s.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var n=this.g,e=this.l,t=this.h||void 0;n.Wa&&(n.h.info("Origin Trials enabled."),Av(yi(n.hb,n,e))),Kr(0),n.W=e,n.aa=t||{},n.N=n.X,n.F=Xv(n,null,n.W),gp(n)},_s.prototype.close=function(){Jm(this.g)},_s.prototype.u=function(n){if("string"==typeof n){var e={};e.__data__=n,Xm(this.g,e)}else this.v?((e={}).__data__=ml(n),Xm(this.g,e)):Xm(this.g,n)},_s.prototype.M=function(){this.g.j=null,delete this.j,Jm(this.g),delete this.g,_s.Z.M.call(this)},vr(gb,Um),vr(mb,Bm),vr(_u,GC),_u.prototype.xa=function(){_i(this.g,"a")},_u.prototype.wa=function(n){_i(this.g,new gb(n))},_u.prototype.va=function(n){_i(this.g,new mb(n))},_u.prototype.ua=function(){_i(this.g,"b")},gt.prototype.createWebChannel=gt.prototype.g,_s.prototype.send=_s.prototype.u,_s.prototype.open=_s.prototype.m,_s.prototype.close=_s.prototype.close,dh.NO_ERROR=0,dh.TIMEOUT=8,dh.HTTP_ERROR=6,Ov.COMPLETE="complete",kv.EventType=ip,ip.OPEN="a",ip.CLOSE="b",ip.ERROR="c",ip.MESSAGE="d",Er.prototype.listen=Er.prototype.N,lr.prototype.listenOnce=lr.prototype.O,lr.prototype.getLastError=lr.prototype.La,lr.prototype.getLastErrorCode=lr.prototype.Da,lr.prototype.getStatus=lr.prototype.ba,lr.prototype.getResponseJson=lr.prototype.Qa,lr.prototype.getResponseText=lr.prototype.ga,lr.prototype.send=lr.prototype.ea;var qC=To.createWebChannelTransport=function(){return new gt},ny=To.getStatEventTarget=function(){return lh()},bh=To.ErrorCode=dh,Gn=To.EventType=Ov,OM=To.Event=Ea,tE=To.Stat={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},zC=To.FetchXmlHttpFactory=_h,ry=To.WebChannel=kv,yb=To.XhrIo=lr;const nE="@firebase/firestore";class Pr{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Pr.UNAUTHENTICATED=new Pr(null),Pr.GOOGLE_CREDENTIALS=new Pr("google-credentials-uid"),Pr.FIRST_PARTY=new Pr("first-party-uid"),Pr.MOCK_USER=new Pr("mock-user");let Tc="9.8.0";const _l=new cl.Yd("@firebase/firestore");function rE(){return _l.logLevel}function ke(n,...e){if(_l.logLevel<=cl.in.DEBUG){const t=e.map(iE);_l.debug(`Firestore (${Tc}): ${n}`,...t)}}function cr(n,...e){if(_l.logLevel<=cl.in.ERROR){const t=e.map(iE);_l.error(`Firestore (${Tc}): ${n}`,...t)}}function mp(n,...e){if(_l.logLevel<=cl.in.WARN){const t=e.map(iE);_l.warn(`Firestore (${Tc}): ${n}`,...t)}}function iE(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch(t){return n}}function it(n="Unexpected state"){const e=`FIRESTORE (${Tc}) INTERNAL ASSERTION FAILED: `+n;throw cr(e),new Error(e)}function St(n,e){n||it()}function Ze(n,e){return n}const ce={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Re extends xt.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class qn{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class vb{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class KC{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Pr.UNAUTHENTICATED))}shutdown(){}}class ZC{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class Eb{constructor(e){this.t=e,this.currentUser=Pr.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var r=this;let i=this.i;const u=b=>this.i!==i?(i=this.i,t(b)):Promise.resolve();let c=new qn;this.o=()=>{this.i++,this.currentUser=this.u(),c.resolve(),c=new qn,e.enqueueRetryable(()=>u(this.currentUser))};const p=()=>{const b=c;e.enqueueRetryable((0,Ee.Z)(function*(){yield b.promise,yield u(r.currentUser)}))},y=b=>{ke("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=b,this.auth.addAuthTokenListener(this.o),p()};this.t.onInit(b=>y(b)),setTimeout(()=>{if(!this.auth){const b=this.t.getImmediate({optional:!0});b?y(b):(ke("FirebaseAuthCredentialsProvider","Auth not yet detected"),c.resolve(),c=new qn)}},0),p()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(ke("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(St("string"==typeof r.accessToken),new vb(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return St(null===e||"string"==typeof e),new Pr(e)}}class wb{constructor(e,t,r){this.type="FirstParty",this.user=Pr.FIRST_PARTY,this.headers=new Map,this.headers.set("X-Goog-AuthUser",t);const i=e.auth.getAuthHeaderValueForFirstParty([]);i&&this.headers.set("Authorization",i),r&&this.headers.set("X-Goog-Iam-Authorization-Token",r)}}class bb{constructor(e,t,r){this.h=e,this.l=t,this.m=r}getToken(){return Promise.resolve(new wb(this.h,this.l,this.m))}start(e,t){e.enqueueRetryable(()=>t(Pr.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Ib{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Db{constructor(e){this.g=e,this.forceRefresh=!1,this.appCheck=null,this.p=null}start(e,t){const r=u=>{null!=u.error&&ke("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${u.error.message}`);const c=u.token!==this.p;return this.p=u.token,ke("FirebaseAppCheckTokenProvider",`Received ${c?"new":"existing"} token.`),c?t(u.token):Promise.resolve()};this.o=u=>{e.enqueueRetryable(()=>r(u))};const i=u=>{ke("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=u,this.appCheck.addTokenListener(this.o)};this.g.onInit(u=>i(u)),setTimeout(()=>{if(!this.appCheck){const u=this.g.getImmediate({optional:!0});u?i(u):ke("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(St("string"==typeof t.token),this.p=t.token,new Ib(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}class vs{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.I(r),this.T=r=>t.writeSequenceNumber(r))}I(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.T&&this.T(e),e}}function FM(n){const e="undefined"!=typeof self&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}vs.A=-1;class YC{static R(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=FM(40);for(let u=0;u<i.length;++u)r.length<20&&i[u]<t&&(r+=e.charAt(i[u]%e.length))}return r}}function Lt(n,e){return n<e?-1:n>e?1:0}function yp(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}function sE(n){return n+"\0"}class On{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Re(ce.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Re(ce.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new Re(ce.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Re(ce.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return On.fromMillis(Date.now())}static fromDate(e){return On.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new On(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Lt(this.nanoseconds,e.nanoseconds):Lt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class Tt{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Tt(e)}static min(){return new Tt(new On(0,0))}static max(){return new Tt(new On(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}function Cb(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function vl(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function Ih(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}class _p{constructor(e,t,r){void 0===t?t=0:t>e.length&&it(),void 0===r?r=e.length-t:r>e.length-t&&it(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return 0===_p.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof _p?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let i=0;i<r;i++){const u=e.get(i),c=t.get(i);if(u<c)return-1;if(u>c)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class Kt extends _p{construct(e,t,r){return new Kt(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new Re(ce.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new Kt(t)}static emptyPath(){return new Kt([])}}const QC=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class wr extends _p{construct(e,t,r){return new wr(e,t,r)}static isValidIdentifier(e){return QC.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),wr.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new wr(["__name__"])}static fromServerFormat(e){const t=[];let r="",i=0;const u=()=>{if(0===r.length)throw new Re(ce.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let c=!1;for(;i<e.length;){const p=e[i];if("\\"===p){if(i+1===e.length)throw new Re(ce.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const y=e[i+1];if("\\"!==y&&"."!==y&&"`"!==y)throw new Re(ce.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=y,i+=2}else"`"===p?(c=!c,i++):"."!==p||c?(r+=p,i++):(u(),i++)}if(u(),c)throw new Re(ce.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new wr(t)}static emptyPath(){return new wr([])}}class Dh{constructor(e){this.fields=e,e.sort(wr.comparator)}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return yp(this.fields,e.fields,(t,r)=>t.isEqual(r))}}class br{constructor(e){this.binaryString=e}static fromBase64String(e){const t=atob(e);return new br(t)}static fromUint8Array(e){const t=function(r){let i="";for(let u=0;u<r.length;++u)i+=String.fromCharCode(r[u]);return i}(e);return new br(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Lt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}br.EMPTY_BYTE_STRING=new br("");const JC=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Es(n){if(St(!!n),"string"==typeof n){let e=0;const t=JC.exec(n);if(St(!!t),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:zn(n.seconds),nanos:zn(n.nanos)}}function zn(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function El(n){return"string"==typeof n?br.fromBase64String(n):br.fromUint8Array(n)}function oE(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=null==n?void 0:n.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function aE(n){const e=n.mapValue.fields.__previous_value__;return oE(e)?aE(e):e}function vp(n){const e=Es(n.mapValue.fields.__local_write_time__.timestampValue);return new On(e.seconds,e.nanos)}class Ab{constructor(e,t,r,i,u,c,p,y){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=u,this.forceLongPolling=c,this.autoDetectLongPolling=p,this.useFetchStreams=y}}class vu{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new vu("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof vu&&e.projectId===this.projectId&&e.database===this.database}}function Ac(n){return null==n}function Ep(n){return 0===n&&1/n==-1/0}function uE(n){return"number"==typeof n&&Number.isInteger(n)&&!Ep(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}class $e{constructor(e){this.path=e}static fromPath(e){return new $e(Kt.fromString(e))}static fromName(e){return new $e(Kt.fromString(e).popFirst(5))}static empty(){return new $e(Kt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===Kt.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return Kt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new $e(new Kt(e.slice()))}}const wl={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},iy={nullValue:"NULL_VALUE"};function Sc(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?oE(n)?4:Rb(n)?9007199254740991:10:it()}function Qs(n,e){if(n===e)return!0;const t=Sc(n);if(t!==Sc(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return vp(n).isEqual(vp(e));case 3:return function(r,i){if("string"==typeof r.timestampValue&&"string"==typeof i.timestampValue&&r.timestampValue.length===i.timestampValue.length)return r.timestampValue===i.timestampValue;const u=Es(r.timestampValue),c=Es(i.timestampValue);return u.seconds===c.seconds&&u.nanos===c.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return i=e,El(n.bytesValue).isEqual(El(i.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(r,i){return zn(r.geoPointValue.latitude)===zn(i.geoPointValue.latitude)&&zn(r.geoPointValue.longitude)===zn(i.geoPointValue.longitude)}(n,e);case 2:return function(r,i){if("integerValue"in r&&"integerValue"in i)return zn(r.integerValue)===zn(i.integerValue);if("doubleValue"in r&&"doubleValue"in i){const u=zn(r.doubleValue),c=zn(i.doubleValue);return u===c?Ep(u)===Ep(c):isNaN(u)&&isNaN(c)}return!1}(n,e);case 9:return yp(n.arrayValue.values||[],e.arrayValue.values||[],Qs);case 10:return function(r,i){const u=r.mapValue.fields||{},c=i.mapValue.fields||{};if(Cb(u)!==Cb(c))return!1;for(const p in u)if(u.hasOwnProperty(p)&&(void 0===c[p]||!Qs(u[p],c[p])))return!1;return!0}(n,e);default:return it()}var i}function wp(n,e){return void 0!==(n.values||[]).find(t=>Qs(t,e))}function Eu(n,e){if(n===e)return 0;const t=Sc(n),r=Sc(e);if(t!==r)return Lt(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return Lt(n.booleanValue,e.booleanValue);case 2:return function(i,u){const c=zn(i.integerValue||i.doubleValue),p=zn(u.integerValue||u.doubleValue);return c<p?-1:c>p?1:c===p?0:isNaN(c)?isNaN(p)?0:-1:1}(n,e);case 3:return Sb(n.timestampValue,e.timestampValue);case 4:return Sb(vp(n),vp(e));case 5:return Lt(n.stringValue,e.stringValue);case 6:return function(i,u){const c=El(i),p=El(u);return c.compareTo(p)}(n.bytesValue,e.bytesValue);case 7:return function(i,u){const c=i.split("/"),p=u.split("/");for(let y=0;y<c.length&&y<p.length;y++){const b=Lt(c[y],p[y]);if(0!==b)return b}return Lt(c.length,p.length)}(n.referenceValue,e.referenceValue);case 8:return function(i,u){const c=Lt(zn(i.latitude),zn(u.latitude));return 0!==c?c:Lt(zn(i.longitude),zn(u.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(i,u){const c=i.values||[],p=u.values||[];for(let y=0;y<c.length&&y<p.length;++y){const b=Eu(c[y],p[y]);if(b)return b}return Lt(c.length,p.length)}(n.arrayValue,e.arrayValue);case 10:return function(i,u){if(i===wl.mapValue&&u===wl.mapValue)return 0;if(i===wl.mapValue)return 1;if(u===wl.mapValue)return-1;const c=i.fields||{},p=Object.keys(c),y=u.fields||{},b=Object.keys(y);p.sort(),b.sort();for(let A=0;A<p.length&&A<b.length;++A){const M=Lt(p[A],b[A]);if(0!==M)return M;const F=Eu(c[p[A]],y[b[A]]);if(0!==F)return F}return Lt(p.length,b.length)}(n.mapValue,e.mapValue);default:throw it()}}function Sb(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return Lt(n,e);const t=Es(n),r=Es(e),i=Lt(t.seconds,r.seconds);return 0!==i?i:Lt(t.nanos,r.nanos)}function Ch(n){return lE(n)}function lE(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(r){const i=Es(r);return`time(${i.seconds},${i.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?El(n.bytesValue).toBase64():"referenceValue"in n?$e.fromName(n.referenceValue).toString():"geoPointValue"in n?`geo(${(e=n.geoPointValue).latitude},${e.longitude})`:"arrayValue"in n?function(r){let i="[",u=!0;for(const c of r.values||[])u?u=!1:i+=",",i+=lE(c);return i+"]"}(n.arrayValue):"mapValue"in n?function(r){const i=Object.keys(r.fields||{}).sort();let u="{",c=!0;for(const p of i)c?c=!1:u+=",",u+=`${p}:${lE(r.fields[p])}`;return u+"}"}(n.mapValue):it();var e}function Mc(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function cE(n){return!!n&&"integerValue"in n}function bp(n){return!!n&&"arrayValue"in n}function Mb(n){return!!n&&"nullValue"in n}function xb(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Ip(n){return!!n&&"mapValue"in n}function Th(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return vl(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=Th(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Th(n.arrayValue.values[t]);return e}return Object.assign({},n)}function Rb(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}function XC(n){return"nullValue"in n?iy:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?Mc(vu.empty(),$e.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?{mapValue:{}}:it()}function Pb(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?Mc(vu.empty(),$e.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?{mapValue:{}}:"mapValue"in n?wl:it()}function Nb(n,e){const t=Eu(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function Ob(n,e){const t=Eu(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}class vi{constructor(e){this.value=e}static empty(){return new vi({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!Ip(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Th(t)}setAll(e){let t=wr.emptyPath(),r={},i=[];e.forEach((c,p)=>{if(!t.isImmediateParentOf(p)){const y=this.getFieldsMap(t);this.applyChanges(y,r,i),r={},i=[],t=p.popLast()}c?r[p.lastSegment()]=Th(c):i.push(p.lastSegment())});const u=this.getFieldsMap(t);this.applyChanges(u,r,i)}delete(e){const t=this.field(e.popLast());Ip(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Qs(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];Ip(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){vl(t,(i,u)=>e[i]=u);for(const i of r)delete e[i]}clone(){return new vi(Th(this.value))}}function sy(n){const e=[];return vl(n.fields,(t,r)=>{const i=new wr([t]);if(Ip(r)){const u=sy(r.mapValue).fields;if(0===u.length)e.push(i);else for(const c of u)e.push(i.child(c))}else e.push(i)}),new Dh(e)}class mn{constructor(e,t,r,i,u,c){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.data=u,this.documentState=c}static newInvalidDocument(e){return new mn(e,0,Tt.min(),Tt.min(),vi.empty(),0)}static newFoundDocument(e,t,r){return new mn(e,1,t,Tt.min(),r,0)}static newNoDocument(e,t){return new mn(e,2,t,Tt.min(),vi.empty(),0)}static newUnknownDocument(e,t){return new mn(e,3,t,Tt.min(),vi.empty(),2)}convertToFoundDocument(e,t){return this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=vi.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=vi.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof mn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new mn(this.key,this.documentType,this.version,this.readTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Dp{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}}function Cp(n){return n.fields.find(e=>2===e.kind)}function xc(n){return n.fields.filter(e=>2!==e.kind)}Dp.UNKNOWN_ID=-1;class oy{constructor(e,t){this.fieldPath=e,this.kind=t}}class Rc{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new Rc(0,xo.min())}}function kb(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=Tt.fromTimestamp(1e9===r?new On(t+1,0):new On(t,r));return new xo(i,$e.empty(),e)}function Fb(n){return new xo(n.readTime,n.key,-1)}class xo{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new xo(Tt.min(),$e.empty(),-1)}static max(){return new xo(Tt.max(),$e.empty(),-1)}}function dE(n,e){let t=n.readTime.compareTo(e.readTime);return 0!==t?t:(t=$e.comparator(n.documentKey,e.documentKey),0!==t?t:Lt(n.largestBatchId,e.largestBatchId))}class nr{constructor(e,t){this.comparator=e,this.root=t||Ei.EMPTY}insert(e,t){return new nr(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Ei.BLACK,null,null))}remove(e){return new nr(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Ei.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(0===r)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(0===i)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Tp(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Tp(this.root,e,this.comparator,!1)}getReverseIterator(){return new Tp(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Tp(this.root,e,this.comparator,!0)}}class Tp{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let u=1;for(;!e.isEmpty();)if(u=t?r(e.key,t):1,t&&i&&(u*=-1),u<0)e=this.isReverse?e.left:e.right;else{if(0===u){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Ei{constructor(e,t,r,i,u){this.key=e,this.value=t,this.color=null!=r?r:Ei.RED,this.left=null!=i?i:Ei.EMPTY,this.right=null!=u?u:Ei.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,u){return new Ei(null!=e?e:this.key,null!=t?t:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=u?u:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this;const u=r(e,i.key);return i=u<0?i.copy(null,null,null,i.left.insert(e,t,r),null):0===u?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return Ei.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===t(e,i.key)){if(i.right.isEmpty())return Ei.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Ei.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Ei.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw it();const e=this.left.check();if(e!==this.right.check())throw it();return e+(this.isRed()?0:1)}}Ei.EMPTY=null,Ei.RED=!0,Ei.BLACK=!1,Ei.EMPTY=new class{constructor(){this.size=0}get key(){throw it()}get value(){throw it()}get color(){throw it()}get left(){throw it()}get right(){throw it()}copy(n,e,t,r,i){return this}insert(n,e,t){return new Ei(n,e)}remove(n,e){return this}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class vn{constructor(e){this.comparator=e,this.data=new nr(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Ap(this.data.getIterator())}getIteratorFrom(e){return new Ap(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof vn)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const i=t.getNext().key,u=r.getNext().key;if(0!==this.comparator(i,u))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new vn(this.comparator);return t.data=e,t}}class Ap{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Ah(n){return n.hasNext()?n.getNext():void 0}class Sh{constructor(e,t=null,r=[],i=[],u=null,c=null,p=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=u,this.startAt=c,this.endAt=p,this.P=null}}function Mh(n,e=null,t=[],r=[],i=null,u=null,c=null){return new Sh(n,e,t,r,i,u,c)}function Pc(n){const e=Ze(n);if(null===e.P){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>{return(i=r).field.canonicalString()+i.op.toString()+Ch(i.value);var i}).join(","),t+="|ob:",t+=e.orderBy.map(r=>{return(i=r).field.canonicalString()+i.dir;var i}).join(","),Ac(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>Ch(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>Ch(r)).join(",")),e.P=t}return e.P}function xh(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let i=0;i<n.orderBy.length;i++)if(!nT(n.orderBy[i],e.orderBy[i]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let i=0;i<n.filters.length;i++)if((t=n.filters[i]).op!==(r=e.filters[i]).op||!t.field.isEqual(r.field)||!Qs(t.value,r.value))return!1;var t,r;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!Hb(n.startAt,e.startAt)&&Hb(n.endAt,e.endAt)}function ay(n){return $e.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}function uy(n,e){return n.filters.filter(t=>t instanceof Nr&&t.field.isEqual(e))}function Lb(n,e,t){let r=iy,i=!0;for(const u of uy(n,e)){let c=iy,p=!0;switch(u.op){case"<":case"<=":c=XC(u.value);break;case"==":case"in":case">=":c=u.value;break;case">":c=u.value,p=!1;break;case"!=":case"not-in":c=iy}Nb({value:r,inclusive:i},{value:c,inclusive:p})<0&&(r=c,i=p)}if(null!==t)for(let u=0;u<n.orderBy.length;++u)if(n.orderBy[u].field.isEqual(e)){const c=t.position[u];Nb({value:r,inclusive:i},{value:c,inclusive:t.inclusive})<0&&(r=c,i=t.inclusive);break}return{value:r,inclusive:i}}function Vb(n,e,t){let r=wl,i=!0;for(const u of uy(n,e)){let c=wl,p=!0;switch(u.op){case">=":case">":c=Pb(u.value),p=!1;break;case"==":case"in":case"<=":c=u.value;break;case"<":c=u.value,p=!1;break;case"!=":case"not-in":c=wl}Ob({value:r,inclusive:i},{value:c,inclusive:p})>0&&(r=c,i=p)}if(null!==t)for(let u=0;u<n.orderBy.length;++u)if(n.orderBy[u].field.isEqual(e)){const c=t.position[u];Ob({value:r,inclusive:i},{value:c,inclusive:t.inclusive})>0&&(r=c,i=t.inclusive);break}return{value:r,inclusive:i}}class Nr extends class{}{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.V(e,t,r):new Ub(e,t,r):"array-contains"===t?new eT(e,r):"in"===t?new Bb(e,r):"not-in"===t?new jb(e,r):"array-contains-any"===t?new tT(e,r):new Nr(e,t,r)}static V(e,t,r){return"in"===t?new hE(e,r):new ly(e,r)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.v(Eu(t,this.value)):null!==t&&Sc(this.value)===Sc(t)&&this.v(Eu(t,this.value))}v(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return it()}}S(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}class Ub extends Nr{constructor(e,t,r){super(e,t,r),this.key=$e.fromName(r.referenceValue)}matches(e){const t=$e.comparator(e.key,this.key);return this.v(t)}}class hE extends Nr{constructor(e,t){super(e,"in",t),this.keys=Rh(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class ly extends Nr{constructor(e,t){super(e,"not-in",t),this.keys=Rh(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function Rh(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(r=>$e.fromName(r.referenceValue))}class eT extends Nr{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return bp(t)&&wp(t.arrayValue,this.value)}}class Bb extends Nr{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&wp(this.value.arrayValue,t)}}class jb extends Nr{constructor(e,t){super(e,"not-in",t)}matches(e){if(wp(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!wp(this.value.arrayValue,t)}}class tT extends Nr{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!bp(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>wp(this.value.arrayValue,r))}}class bl{constructor(e,t){this.position=e,this.inclusive=t}}class Il{constructor(e,t="asc"){this.field=e,this.dir=t}}function nT(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}function rT(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){const u=e[i],c=n.position[i];if(r=u.field.isKeyField()?$e.comparator($e.fromName(c.referenceValue),t.key):Eu(c,t.data.field(u.field)),"desc"===u.dir&&(r*=-1),0!==r)break}return r}function Hb(n,e){if(null===n)return null===e;if(null===e||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Qs(n.position[t],e.position[t]))return!1;return!0}class wu{constructor(e,t=null,r=[],i=[],u=null,c="F",p=null,y=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=u,this.limitType=c,this.startAt=p,this.endAt=y,this.D=null,this.C=null}}function Nc(n,e,t,r,i,u,c,p){return new wu(n,e,t,r,i,u,c,p)}function Oc(n){return new wu(n)}function $b(n){return n.explicitOrderBy.length>0?n.explicitOrderBy[0].field:null}function cy(n){for(const e of n.filters)if(e.S())return e.field;return null}function fE(n){return null!==n.collectionGroup}function Sp(n){const e=Ze(n);if(null===e.D){e.D=[];const t=cy(e),r=$b(e);if(null!==t&&null===r)t.isKeyField()||e.D.push(new Il(t)),e.D.push(new Il(wr.keyField(),"asc"));else{let i=!1;for(const u of e.explicitOrderBy)e.D.push(u),u.field.isKeyField()&&(i=!0);if(!i){const u=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.D.push(new Il(wr.keyField(),u))}}}return e.D}function ws(n){const e=Ze(n);if(!e.C)if("F"===e.limitType)e.C=Mh(e.path,e.collectionGroup,Sp(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const u of Sp(e))t.push(new Il(u.field,"desc"===u.dir?"asc":"desc"));const r=e.endAt?new bl(e.endAt.position,e.endAt.inclusive):null,i=e.startAt?new bl(e.startAt.position,e.startAt.inclusive):null;e.C=Mh(e.path,e.collectionGroup,t,e.filters,e.limit,r,i)}return e.C}function iT(n,e,t){return new wu(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Nh(n,e){return xh(ws(n),ws(e))&&n.limitType===e.limitType}function dy(n){return`${Pc(ws(n))}|lt:${n.limitType}`}function pE(n){return`Query(target=${function LM(n){let e=n.path.canonicalString();return null!==n.collectionGroup&&(e+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(e+=`, filters: [${n.filters.map(t=>{return`${(r=t).field.canonicalString()} ${r.op} ${Ch(r.value)}`;var r}).join(", ")}]`),Ac(n.limit)||(e+=", limit: "+n.limit),n.orderBy.length>0&&(e+=`, orderBy: [${n.orderBy.map(t=>{return`${(r=t).field.canonicalString()} (${r.dir})`;var r}).join(", ")}]`),n.startAt&&(e+=", startAt: ",e+=n.startAt.inclusive?"b:":"a:",e+=n.startAt.position.map(t=>Ch(t)).join(",")),n.endAt&&(e+=", endAt: ",e+=n.endAt.inclusive?"a:":"b:",e+=n.endAt.position.map(t=>Ch(t)).join(",")),`Target(${e})`}(ws(n))}; limitType=${n.limitType})`}function gE(n,e){return e.isFoundDocument()&&function(t,r){const i=r.key.path;return null!==t.collectionGroup?r.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(i):$e.isDocumentKey(t.path)?t.path.isEqual(i):t.path.isImmediateParentOf(i)}(n,e)&&function(t,r){for(const i of t.explicitOrderBy)if(!i.field.isKeyField()&&null===r.data.field(i.field))return!1;return!0}(n,e)&&function(t,r){for(const i of t.filters)if(!i.matches(r))return!1;return!0}(n,e)&&(r=e,!((t=n).startAt&&!function(i,u,c){const p=rT(i,u,c);return i.inclusive?p<=0:p<0}(t.startAt,Sp(t),r)||t.endAt&&!function(i,u,c){const p=rT(i,u,c);return i.inclusive?p>=0:p>0}(t.endAt,Sp(t),r)));var t,r}function Gb(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function qb(n){return(e,t)=>{let r=!1;for(const i of Sp(n)){const u=sT(i,e,t);if(0!==u)return u;r=r||i.field.isKeyField()}return 0}}function sT(n,e,t){const r=n.field.isKeyField()?$e.comparator(e.key,t.key):function(i,u,c){const p=u.data.field(i),y=c.data.field(i);return null!==p&&null!==y?Eu(p,y):it()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return it()}}function zb(n,e){if(n.N){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Ep(e)?"-0":e}}function Wb(n){return{integerValue:""+n}}function Kb(n,e){return uE(e)?Wb(e):zb(n,e)}class hy{constructor(){this._=void 0}}function oT(n,e,t){return n instanceof kc?function(r,i){const u={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return i&&(u.fields.__previous_value__=i),{mapValue:u}}(t,e):n instanceof Dl?yE(n,e):n instanceof Cl?Zb(n,e):function(r,i){const u=mE(r,i),c=Yb(u)+Yb(r.k);return cE(u)&&cE(r.k)?Wb(c):zb(r.M,c)}(n,e)}function Mp(n,e,t){return n instanceof Dl?yE(n,e):n instanceof Cl?Zb(n,e):t}function mE(n,e){return n instanceof Oh?cE(t=e)||(r=t)&&"doubleValue"in r?e:{integerValue:0}:null;var r,t}class kc extends hy{}class Dl extends hy{constructor(e){super(),this.elements=e}}function yE(n,e){const t=Qb(e);for(const r of n.elements)t.some(i=>Qs(i,r))||t.push(r);return{arrayValue:{values:t}}}class Cl extends hy{constructor(e){super(),this.elements=e}}function Zb(n,e){let t=Qb(e);for(const r of n.elements)t=t.filter(i=>!Qs(i,r));return{arrayValue:{values:t}}}class Oh extends hy{constructor(e,t){super(),this.M=e,this.k=t}}function Yb(n){return zn(n.integerValue||n.doubleValue)}function Qb(n){return bp(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class xp{constructor(e,t){this.field=e,this.transform=t}}class uT{constructor(e,t){this.version=e,this.transformResults=t}}class kn{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new kn}static exists(e){return new kn(void 0,e)}static updateTime(e){return new kn(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function fy(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class kh{}function Da(n,e,t){n instanceof Rp?function(r,i,u){const c=r.value.clone(),p=Np(r.fieldTransforms,i,u.transformResults);c.setAll(p),i.convertToFoundDocument(u.version,c).setHasCommittedMutations()}(n,e,t):n instanceof Fc?function(r,i,u){if(!fy(r.precondition,i))return void i.convertToUnknownDocument(u.version);const c=Np(r.fieldTransforms,i,u.transformResults),p=i.data;p.setAll(Pp(r)),p.setAll(c),i.convertToFoundDocument(u.version,p).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function _E(n,e,t){var i;n instanceof Rp?function(r,i,u){if(!fy(r.precondition,i))return;const c=r.value.clone(),p=Xb(r.fieldTransforms,u,i);c.setAll(p),i.convertToFoundDocument(Jb(i),c).setHasLocalMutations()}(n,e,t):n instanceof Fc?function(r,i,u){if(!fy(r.precondition,i))return;const c=Xb(r.fieldTransforms,u,i),p=i.data;p.setAll(Pp(r)),p.setAll(c),i.convertToFoundDocument(Jb(i),p).setHasLocalMutations()}(n,e,t):fy(n.precondition,i=e)&&i.convertToNoDocument(Tt.min())}function vE(n,e){let t=null;for(const r of n.fieldTransforms){const i=e.data.field(r.field),u=mE(r.transform,i||null);null!=u&&(null==t&&(t=vi.empty()),t.set(r.field,u))}return t||null}function Fh(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(r=e.fieldTransforms,!!(void 0===(t=n.fieldTransforms)&&void 0===r||t&&r&&yp(t,r,(i,u)=>function aT(n,e){return n.field.isEqual(e.field)&&(r=e.transform,(t=n.transform)instanceof Dl&&r instanceof Dl||t instanceof Cl&&r instanceof Cl?yp(t.elements,r.elements,Qs):t instanceof Oh&&r instanceof Oh?Qs(t.k,r.k):t instanceof kc&&r instanceof kc);var t,r}(i,u))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var t,r}function Jb(n){return n.isFoundDocument()?n.version:Tt.min()}class Rp extends kh{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}}class Fc extends kh{constructor(e,t,r,i,u=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=u,this.type=1}}function Pp(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function Np(n,e,t){const r=new Map;St(n.length===t.length);for(let i=0;i<t.length;i++){const u=n[i],c=u.transform,p=e.data.field(u.field);r.set(u.field,Mp(c,p,t[i]))}return r}function Xb(n,e,t){const r=new Map;for(const i of n){const u=i.transform,c=t.data.field(i.field);r.set(i.field,oT(u,c,e))}return r}class Op extends kh{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}}class py extends kh{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}}class eI{constructor(e){this.count=e}}var Wn,Wt;function tI(n){switch(n){default:return it();case ce.CANCELLED:case ce.UNKNOWN:case ce.DEADLINE_EXCEEDED:case ce.RESOURCE_EXHAUSTED:case ce.INTERNAL:case ce.UNAVAILABLE:case ce.UNAUTHENTICATED:return!1;case ce.INVALID_ARGUMENT:case ce.NOT_FOUND:case ce.ALREADY_EXISTS:case ce.PERMISSION_DENIED:case ce.FAILED_PRECONDITION:case ce.ABORTED:case ce.OUT_OF_RANGE:case ce.UNIMPLEMENTED:case ce.DATA_LOSS:return!0}}function nI(n){if(void 0===n)return cr("GRPC error has no .code"),ce.UNKNOWN;switch(n){case Wn.OK:return ce.OK;case Wn.CANCELLED:return ce.CANCELLED;case Wn.UNKNOWN:return ce.UNKNOWN;case Wn.DEADLINE_EXCEEDED:return ce.DEADLINE_EXCEEDED;case Wn.RESOURCE_EXHAUSTED:return ce.RESOURCE_EXHAUSTED;case Wn.INTERNAL:return ce.INTERNAL;case Wn.UNAVAILABLE:return ce.UNAVAILABLE;case Wn.UNAUTHENTICATED:return ce.UNAUTHENTICATED;case Wn.INVALID_ARGUMENT:return ce.INVALID_ARGUMENT;case Wn.NOT_FOUND:return ce.NOT_FOUND;case Wn.ALREADY_EXISTS:return ce.ALREADY_EXISTS;case Wn.PERMISSION_DENIED:return ce.PERMISSION_DENIED;case Wn.FAILED_PRECONDITION:return ce.FAILED_PRECONDITION;case Wn.ABORTED:return ce.ABORTED;case Wn.OUT_OF_RANGE:return ce.OUT_OF_RANGE;case Wn.UNIMPLEMENTED:return ce.UNIMPLEMENTED;case Wn.DATA_LOSS:return ce.DATA_LOSS;default:return it()}}(Wt=Wn||(Wn={}))[Wt.OK=0]="OK",Wt[Wt.CANCELLED=1]="CANCELLED",Wt[Wt.UNKNOWN=2]="UNKNOWN",Wt[Wt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Wt[Wt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Wt[Wt.NOT_FOUND=5]="NOT_FOUND",Wt[Wt.ALREADY_EXISTS=6]="ALREADY_EXISTS",Wt[Wt.PERMISSION_DENIED=7]="PERMISSION_DENIED",Wt[Wt.UNAUTHENTICATED=16]="UNAUTHENTICATED",Wt[Wt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Wt[Wt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Wt[Wt.ABORTED=10]="ABORTED",Wt[Wt.OUT_OF_RANGE=11]="OUT_OF_RANGE",Wt[Wt.UNIMPLEMENTED=12]="UNIMPLEMENTED",Wt[Wt.INTERNAL=13]="INTERNAL",Wt[Wt.UNAVAILABLE=14]="UNAVAILABLE",Wt[Wt.DATA_LOSS=15]="DATA_LOSS";class Lc{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0!==r)for(const[i,u]of r)if(this.equalsFn(i,e))return u}has(e){return void 0!==this.get(e)}set(e,t){const r=this.mapKeyFn(e),i=this.inner[r];if(void 0===i)return this.inner[r]=[[e,t]],void this.innerSize++;for(let u=0;u<i.length;u++)if(this.equalsFn(i[u][0],e))return void(i[u]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0===r)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return 1===r.length?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){vl(this.inner,(t,r)=>{for(const[i,u]of r)e(i,u)})}isEmpty(){return Ih(this.inner)}size(){return this.innerSize}}const EE=new nr($e.comparator);function es(){return EE}const rI=new nr($e.comparator);function kp(...n){let e=rI;for(const t of n)e=e.insert(t.key,t);return e}function Vc(){return new Lc(n=>n.toString(),(n,e)=>n.isEqual(e))}const lT=new nr($e.comparator),cT=new vn($e.comparator);function un(...n){let e=cT;for(const t of n)e=e.add(t);return e}const dT=new vn(Lt);function Fp(){return dT}class Uc{constructor(e,t,r,i,u){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=u}static createSynthesizedRemoteEventForCurrentChange(e,t){const r=new Map;return r.set(e,Lh.createSynthesizedTargetChangeForCurrentChange(e,t)),new Uc(Tt.min(),r,Fp(),es(),un())}}class Lh{constructor(e,t,r,i,u){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=u}static createSynthesizedTargetChangeForCurrentChange(e,t){return new Lh(br.EMPTY_BYTE_STRING,t,un(),un(),un())}}class gy{constructor(e,t,r,i){this.O=e,this.removedTargetIds=t,this.key=r,this.F=i}}class wE{constructor(e,t){this.targetId=e,this.$=t}}class bE{constructor(e,t,r=br.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}}class iI{constructor(){this.B=0,this.L=oI(),this.U=br.EMPTY_BYTE_STRING,this.q=!1,this.K=!0}get current(){return this.q}get resumeToken(){return this.U}get G(){return 0!==this.B}get j(){return this.K}W(e){e.approximateByteSize()>0&&(this.K=!0,this.U=e)}H(){let e=un(),t=un(),r=un();return this.L.forEach((i,u)=>{switch(u){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:it()}}),new Lh(this.U,this.q,e,t,r)}J(){this.K=!1,this.L=oI()}Y(e,t){this.K=!0,this.L=this.L.insert(e,t)}X(e){this.K=!0,this.L=this.L.remove(e)}Z(){this.B+=1}tt(){this.B-=1}et(){this.K=!0,this.q=!0}}class sI{constructor(e){this.nt=e,this.st=new Map,this.it=es(),this.rt=IE(),this.ot=new vn(Lt)}ut(e){for(const t of e.O)e.F&&e.F.isFoundDocument()?this.at(t,e.F):this.ct(t,e.key,e.F);for(const t of e.removedTargetIds)this.ct(t,e.key,e.F)}ht(e){this.forEachTarget(e,t=>{const r=this.lt(t);switch(e.state){case 0:this.ft(t)&&r.W(e.resumeToken);break;case 1:r.tt(),r.G||r.J(),r.W(e.resumeToken);break;case 2:r.tt(),r.G||this.removeTarget(t);break;case 3:this.ft(t)&&(r.et(),r.W(e.resumeToken));break;case 4:this.ft(t)&&(this.dt(t),r.W(e.resumeToken));break;default:it()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.st.forEach((r,i)=>{this.ft(i)&&t(i)})}_t(e){const t=e.targetId,r=e.$.count,i=this.wt(t);if(i){const u=i.target;if(ay(u))if(0===r){const c=new $e(u.path);this.ct(t,c,mn.newNoDocument(c,Tt.min()))}else St(1===r);else this.gt(t)!==r&&(this.dt(t),this.ot=this.ot.add(t))}}yt(e){const t=new Map;this.st.forEach((u,c)=>{const p=this.wt(c);if(p){if(u.current&&ay(p.target)){const y=new $e(p.target.path);null!==this.it.get(y)||this.It(c,y)||this.ct(c,y,mn.newNoDocument(y,e))}u.j&&(t.set(c,u.H()),u.J())}});let r=un();this.rt.forEach((u,c)=>{let p=!0;c.forEachWhile(y=>{const b=this.wt(y);return!b||2===b.purpose||(p=!1,!1)}),p&&(r=r.add(u))}),this.it.forEach((u,c)=>c.setReadTime(e));const i=new Uc(e,t,this.ot,this.it,r);return this.it=es(),this.rt=IE(),this.ot=new vn(Lt),i}at(e,t){if(!this.ft(e))return;const r=this.It(e,t.key)?2:0;this.lt(e).Y(t.key,r),this.it=this.it.insert(t.key,t),this.rt=this.rt.insert(t.key,this.Tt(t.key).add(e))}ct(e,t,r){if(!this.ft(e))return;const i=this.lt(e);this.It(e,t)?i.Y(t,1):i.X(t),this.rt=this.rt.insert(t,this.Tt(t).delete(e)),r&&(this.it=this.it.insert(t,r))}removeTarget(e){this.st.delete(e)}gt(e){const t=this.lt(e).H();return this.nt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Z(e){this.lt(e).Z()}lt(e){let t=this.st.get(e);return t||(t=new iI,this.st.set(e,t)),t}Tt(e){let t=this.rt.get(e);return t||(t=new vn(Lt),this.rt=this.rt.insert(e,t)),t}ft(e){const t=null!==this.wt(e);return t||ke("WatchChangeAggregator","Detected inactive target",e),t}wt(e){const t=this.st.get(e);return t&&t.G?null:this.nt.Et(e)}dt(e){this.st.set(e,new iI),this.nt.getRemoteKeysForTarget(e).forEach(t=>{this.ct(e,t,null)})}It(e,t){return this.nt.getRemoteKeysForTarget(e).has(t)}}function IE(){return new nr($e.comparator)}function oI(){return new nr($e.comparator)}const aI={asc:"ASCENDING",desc:"DESCENDING"},uI={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"};class ki{constructor(e,t){this.databaseId=e,this.N=t}}function Ca(n,e){return n.N?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function lI(n,e){return n.N?e.toBase64():e.toUint8Array()}function hT(n,e){return Ca(n,e.toTimestamp())}function Zr(n){return St(!!n),Tt.fromTimestamp(function(e){const t=Es(e);return new On(t.seconds,t.nanos)}(n))}function Bc(n,e){return(t=n,new Kt(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function cI(n){const e=Kt.fromString(n);return St(xE(e)),e}function jc(n,e){return Bc(n.databaseId,e.path)}function Ta(n,e){const t=cI(e);if(t.get(1)!==n.databaseId.projectId)throw new Re(ce.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new Re(ce.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new $e(yy(t))}function my(n,e){return Bc(n.databaseId,e)}function dI(n){const e=cI(n);return 4===e.length?Kt.emptyPath():yy(e)}function Lp(n){return new Kt(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function yy(n){return St(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function DE(n,e,t){return{name:jc(n,e),fields:t.value.mapValue.fields}}function CE(n,e,t){const r=Ta(n,e.name),i=Zr(e.updateTime),u=new vi({mapValue:{fields:e.fields}}),c=mn.newFoundDocument(r,i,u);return t&&c.setHasCommittedMutations(),t?c.setHasCommittedMutations():c}function vy(n,e){let t;if(e instanceof Rp)t={update:DE(n,e.key,e.value)};else if(e instanceof Op)t={delete:jc(n,e.key)};else if(e instanceof Fc)t={update:DE(n,e.key,e.data),updateMask:gT(e.fieldMask)};else{if(!(e instanceof py))return it();t={verify:jc(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(i,u){const c=u.transform;if(c instanceof kc)return{fieldPath:u.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(c instanceof Dl)return{fieldPath:u.field.canonicalString(),appendMissingElements:{values:c.elements}};if(c instanceof Cl)return{fieldPath:u.field.canonicalString(),removeAllFromArray:{values:c.elements}};if(c instanceof Oh)return{fieldPath:u.field.canonicalString(),increment:c.k};throw it()}(0,r))),e.precondition.isNone||(t.currentDocument=void 0!==(i=e.precondition).updateTime?{updateTime:hT(n,i.updateTime)}:void 0!==i.exists?{exists:i.exists}:it()),t;var i}function Ey(n,e){const t=e.currentDocument?void 0!==(i=e.currentDocument).updateTime?kn.updateTime(Zr(i.updateTime)):void 0!==i.exists?kn.exists(i.exists):kn.none():kn.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(u,c){let p=null;"setToServerValue"in c?(St("REQUEST_TIME"===c.setToServerValue),p=new kc):"appendMissingElements"in c?p=new Dl(c.appendMissingElements.values||[]):"removeAllFromArray"in c?p=new Cl(c.removeAllFromArray.values||[]):"increment"in c?p=new Oh(u,c.increment):it();const y=wr.fromServerFormat(c.fieldPath);return new xp(y,p)}(n,i)):[];var i;if(e.update){const i=Ta(n,e.update.name),u=new vi({mapValue:{fields:e.update.fields}});if(e.updateMask){const c=new Dh((e.updateMask.fieldPaths||[]).map(b=>wr.fromServerFormat(b)));return new Fc(i,u,c,t,r)}return new Rp(i,u,t,r)}if(e.delete){const i=Ta(n,e.delete);return new Op(i,t)}if(e.verify){const i=Ta(n,e.verify);return new py(i,t)}return it()}function AE(n,e){return{documents:[my(n,e.path)]}}function Vp(n,e){const t={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(t.parent=my(n,r),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=my(n,r.popLast()),t.structuredQuery.from=[{collectionId:r.lastSegment()}]);const i=function(y){if(0===y.length)return;const b=y.map(A=>function(M){if("=="===M.op){if(xb(M.value))return{unaryFilter:{field:Vh(M.field),op:"IS_NAN"}};if(Mb(M.value))return{unaryFilter:{field:Vh(M.field),op:"IS_NULL"}}}else if("!="===M.op){if(xb(M.value))return{unaryFilter:{field:Vh(M.field),op:"IS_NOT_NAN"}};if(Mb(M.value))return{unaryFilter:{field:Vh(M.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Vh(M.field),op:VM(M.op),value:M.value}}}(A));return 1===b.length?b[0]:{compositeFilter:{op:"AND",filters:b}}}(e.filters);i&&(t.structuredQuery.where=i);const u=function(y){if(0!==y.length)return y.map(b=>{return{field:Vh((A=b).field),direction:ME(A.dir)};var A})}(e.orderBy);u&&(t.structuredQuery.orderBy=u);const c=(b=e.limit,n.N||Ac(b)?b:{value:b});var b,p,y;return null!==c&&(t.structuredQuery.limit=c),e.startAt&&(t.structuredQuery.startAt={before:(p=e.startAt).inclusive,values:p.position}),e.endAt&&(t.structuredQuery.endAt={before:!(y=e.endAt).inclusive,values:y.position}),t}function SE(n){let e=dI(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let i=null;if(r>0){St(1===r);const A=t.from[0];A.allDescendants?i=A.collectionId:e=e.child(A.collectionId)}let u=[];t.where&&(u=wy(t.where));let c=[];t.orderBy&&(c=t.orderBy.map(A=>{return new Il(Uh((M=A).field),function(F){switch(F){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(M.direction));var M}));let p=null;t.limit&&(p=function(A){let M;return M="object"==typeof A?A.value:A,Ac(M)?null:M}(t.limit));let y=null;var A;t.startAt&&(y=new bl((A=t.startAt).values||[],!!A.before));let b=null;return t.endAt&&(b=function(A){return new bl(A.values||[],!A.before)}(t.endAt)),Nc(e,i,c,u,p,"F",y,b)}function wy(n){return n?void 0!==n.unaryFilter?[fI(n)]:void 0!==n.fieldFilter?[hI(n)]:void 0!==n.compositeFilter?n.compositeFilter.filters.map(e=>wy(e)).reduce((e,t)=>e.concat(t)):it():[]}function ME(n){return aI[n]}function VM(n){return uI[n]}function Vh(n){return{fieldPath:n.canonicalString()}}function Uh(n){return wr.fromServerFormat(n.fieldPath)}function hI(n){return Nr.create(Uh(n.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return it()}}(n.fieldFilter.op),n.fieldFilter.value)}function fI(n){switch(n.unaryFilter.op){case"IS_NAN":const e=Uh(n.unaryFilter.field);return Nr.create(e,"==",{doubleValue:NaN});case"IS_NULL":const t=Uh(n.unaryFilter.field);return Nr.create(t,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=Uh(n.unaryFilter.field);return Nr.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const i=Uh(n.unaryFilter.field);return Nr.create(i,"!=",{nullValue:"NULL_VALUE"});default:return it()}}function gT(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function xE(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}function wi(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=pI(e)),e=mT(n.get(t),e);return pI(e)}function mT(n,e){let t=e;const r=n.length;for(let i=0;i<r;i++){const u=n.charAt(i);switch(u){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=u}}return t}function pI(n){return n+"\x01\x01"}function Ro(n){const e=n.length;if(St(e>=2),2===e)return St("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),Kt.emptyPath();const t=e-2,r=[];let i="";for(let u=0;u<e;){const c=n.indexOf("\x01",u);switch((c<0||c>t)&&it(),n.charAt(c+1)){case"\x01":const p=n.substring(u,c);let y;0===i.length?y=p:(i+=p,y=i,i=""),r.push(y);break;case"\x10":i+=n.substring(u,c),i+="\0";break;case"\x11":i+=n.substring(u,c+1);break;default:it()}u=c+2}return new Kt(r)}const gI=["userId","batchId"];function Up(n,e){return[n,wi(e)]}function RE(n,e,t){return[n,wi(e),t]}const mI={},yI=["prefixPath","collectionGroup","readTime","documentId"],yT=["prefixPath","collectionGroup","documentId"],_T=["collectionGroup","readTime","prefixPath","documentId"],UM=["canonicalId","targetId"],_I=["targetId","path"],BM=["path","targetId"],jM=["collectionId","parent"],HM=["indexId","uid"],$M=["uid","sequenceNumber"],GM=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],qM=["indexId","uid","orderedDocumentKey"],zM=["userId","collectionPath","documentId"],WM=["userId","collectionPath","largestBatchId"],by=["userId","collectionGroup","largestBatchId"],vT=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],vI=[...vT,"documentOverlays"],Iy=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],EI=[...Iy,"indexConfiguration","indexState","indexEntries"],PE="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class ET{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}class de{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&it(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new de((r,i)=>{this.nextCallback=u=>{this.wrapSuccess(e,u).next(r,i)},this.catchCallback=u=>{this.wrapFailure(t,u).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof de?t:de.resolve(t)}catch(t){return de.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):de.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):de.reject(t)}static resolve(e){return new de((t,r)=>{t(e)})}static reject(e){return new de((t,r)=>{r(e)})}static waitFor(e){return new de((t,r)=>{let i=0,u=0,c=!1;e.forEach(p=>{++i,p.next(()=>{++u,c&&u===i&&t()},y=>r(y))}),c=!0,u===i&&t()})}static or(e){let t=de.resolve(!1);for(const r of e)t=t.next(i=>i?de.resolve(i):r());return t}static forEach(e,t){const r=[];return e.forEach((i,u)=>{r.push(t.call(this,i,u))}),this.waitFor(r)}}class Bp{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.At=new qn,this.transaction.oncomplete=()=>{this.At.resolve()},this.transaction.onabort=()=>{t.error?this.At.reject(new Dy(e,t.error)):this.At.resolve()},this.transaction.onerror=r=>{const i=II(r.target.error);this.At.reject(new Dy(e,i))}}static open(e,t,r,i){try{return new Bp(t,e.transaction(i,r))}catch(u){throw new Dy(t,u)}}get Rt(){return this.At.promise}abort(e){e&&this.At.reject(e),this.aborted||(ke("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}bt(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new wT(t)}}class Po{constructor(e,t,r){this.name=e,this.version=t,this.Pt=r,12.2===Po.Vt((0,xt.z$)())&&cr("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return ke("SimpleDb","Removing database:",e),bu(window.indexedDB.deleteDatabase(e)).toPromise()}static vt(){if(!(0,xt.hl)())return!1;if(Po.St())return!0;const e=(0,xt.z$)(),t=Po.Vt(e),r=0<t&&t<10,i=Po.Dt(e),u=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||u)}static St(){var e;return"undefined"!=typeof process&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.Ct)}static xt(e,t){return e.store(t)}static Vt(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static Dt(e){const t=e.match(/Android ([\d.]+)/i),r=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(r)}Nt(e){var t=this;return(0,Ee.Z)(function*(){return t.db||(ke("SimpleDb","Opening database:",t.name),t.db=yield new Promise((r,i)=>{const u=indexedDB.open(t.name,t.version);u.onsuccess=c=>{r(c.target.result)},u.onblocked=()=>{i(new Dy(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},u.onerror=c=>{const p=c.target.error;i("VersionError"===p.name?new Re(ce.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===p.name?new Re(ce.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+p):new Dy(e,p))},u.onupgradeneeded=c=>{ke("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',c.oldVersion),t.Pt.kt(c.target.result,u.transaction,c.oldVersion,t.version).next(()=>{ke("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.Mt&&(t.db.onversionchange=r=>t.Mt(r)),t.db})()}Ot(e){this.Mt=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,i){var u=this;return(0,Ee.Z)(function*(){const c="readonly"===t;let p=0;for(;;){++p;try{u.db=yield u.Nt(e);const y=Bp.open(u.db,e,c?"readonly":"readwrite",r),b=i(y).next(A=>(y.bt(),A)).catch(A=>(y.abort(A),de.reject(A))).toPromise();return b.catch(()=>{}),yield y.Rt,b}catch(y){const b="FirebaseError"!==y.name&&p<3;if(ke("SimpleDb","Transaction failed with error:",y.message,"Retrying:",b),u.close(),!b)return Promise.reject(y)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class wI{constructor(e){this.Ft=e,this.$t=!1,this.Bt=null}get isDone(){return this.$t}get Lt(){return this.Bt}set cursor(e){this.Ft=e}done(){this.$t=!0}Ut(e){this.Bt=e}delete(){return bu(this.Ft.delete())}}class Dy extends Re{constructor(e,t){super(ce.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function Hc(n){return"IndexedDbTransactionError"===n.name}class wT{constructor(e){this.store=e}put(e,t){let r;return void 0!==t?(ke("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(ke("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),bu(r)}add(e){return ke("SimpleDb","ADD",this.store.name,e,e),bu(this.store.add(e))}get(e){return bu(this.store.get(e)).next(t=>(void 0===t&&(t=null),ke("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return ke("SimpleDb","DELETE",this.store.name,e),bu(this.store.delete(e))}count(){return ke("SimpleDb","COUNT",this.store.name),bu(this.store.count())}qt(e,t){const r=this.options(e,t);if(r.index||"function"!=typeof this.store.getAll){const i=this.cursor(r),u=[];return this.Kt(i,(c,p)=>{u.push(p)}).next(()=>u)}{const i=this.store.getAll(r.range);return new de((u,c)=>{i.onerror=p=>{c(p.target.error)},i.onsuccess=p=>{u(p.target.result)}})}}Gt(e,t){const r=this.store.getAll(e,null===t?void 0:t);return new de((i,u)=>{r.onerror=c=>{u(c.target.error)},r.onsuccess=c=>{i(c.target.result)}})}Qt(e,t){ke("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,t);r.jt=!1;const i=this.cursor(r);return this.Kt(i,(u,c,p)=>p.delete())}Wt(e,t){let r;t?r=e:(r={},t=e);const i=this.cursor(r);return this.Kt(i,t)}zt(e){const t=this.cursor({});return new de((r,i)=>{t.onerror=u=>{const c=II(u.target.error);i(c)},t.onsuccess=u=>{const c=u.target.result;c?e(c.primaryKey,c.value).next(p=>{p?c.continue():r()}):r()}})}Kt(e,t){const r=[];return new de((i,u)=>{e.onerror=c=>{u(c.target.error)},e.onsuccess=c=>{const p=c.target.result;if(!p)return void i();const y=new wI(p),b=t(p.primaryKey,p.value,y);if(b instanceof de){const A=b.catch(M=>(y.done(),de.reject(M)));r.push(A)}y.isDone?i():null===y.Lt?p.continue():p.continue(y.Lt)}}).next(()=>de.waitFor(r))}options(e,t){let r;return void 0!==e&&("string"==typeof e?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.jt?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function bu(n){return new de((e,t)=>{n.onsuccess=r=>{e(r.target.result)},n.onerror=r=>{const i=II(r.target.error);t(i)}})}let bI=!1;function II(n){const e=Po.Vt((0,xt.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new Re("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return bI||(bI=!0,setTimeout(()=>{throw r},0)),r}}return n}class bT extends ET{constructor(e,t){super(),this.Ht=e,this.currentSequenceNumber=t}}function Yr(n,e){const t=Ze(n);return Po.xt(t.Ht,e)}class NE{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){const u=this.mutations[i];u.key.isEqual(e.key)&&Da(u,e,r[i])}}applyToLocalView(e){for(const t of this.baseMutations)t.key.isEqual(e.key)&&_E(t,e,this.localWriteTime);for(const t of this.mutations)t.key.isEqual(e.key)&&_E(t,e,this.localWriteTime)}applyToLocalDocumentSet(e){this.mutations.forEach(t=>{const r=e.get(t.key),i=r;this.applyToLocalView(i),r.isValidDocument()||i.convertToNoDocument(Tt.min())})}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),un())}isEqual(e){return this.batchId===e.batchId&&yp(this.mutations,e.mutations,(t,r)=>Fh(t,r))&&yp(this.baseMutations,e.baseMutations,(t,r)=>Fh(t,r))}}class OE{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){St(e.mutations.length===r.length);let i=lT;const u=e.mutations;for(let c=0;c<u.length;c++)i=i.insert(u[c].key,r[c].version);return new OE(e,t,r,i)}}class kE{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class $c{constructor(e,t,r,i,u=Tt.min(),c=Tt.min(),p=br.EMPTY_BYTE_STRING){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=u,this.lastLimboFreeSnapshotVersion=c,this.resumeToken=p}withSequenceNumber(e){return new $c(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,t){return new $c(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new $c(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}class DI{constructor(e){this.Jt=e}}function CI(n,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:ts(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document={name:jc(i=n.Jt,(u=e).key),fields:u.data.value.mapValue.fields,updateTime:Ca(i,u.version.toTimestamp())};else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:Gc(e.version)};else{if(!e.isUnknownDocument())return it();r.unknownDocument={path:t.path.toArray(),version:Gc(e.version)}}var i,u;return r}function ts(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function Gc(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Iu(n){const e=new On(n.seconds,n.nanoseconds);return Tt.fromTimestamp(e)}function Bh(n,e){const t=(e.baseMutations||[]).map(u=>Ey(n.Jt,u));for(let u=0;u<e.mutations.length-1;++u){const c=e.mutations[u];u+1<e.mutations.length&&void 0!==e.mutations[u+1].transform&&(c.updateTransforms=e.mutations[u+1].transform.fieldTransforms,e.mutations.splice(u+1,1),++u)}const r=e.mutations.map(u=>Ey(n.Jt,u)),i=On.fromMillis(e.localWriteTimeMs);return new NE(e.batchId,i,t,r)}function jp(n){const e=Iu(n.readTime),t=void 0!==n.lastLimboFreeSnapshotVersion?Iu(n.lastLimboFreeSnapshotVersion):Tt.min();let r;var i;return void 0!==n.query.documents?(St(1===(i=n.query).documents.length),r=ws(Oc(dI(i.documents[0])))):r=ws(SE(n.query)),new $c(r,n.targetId,0,n.lastListenSequenceNumber,e,t,br.fromBase64String(n.resumeToken))}function Cy(n,e){const t=Gc(e.snapshotVersion),r=Gc(e.lastLimboFreeSnapshotVersion);let i;i=ay(e.target)?AE(n.Jt,e.target):Vp(n.Jt,e.target);const u=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Pc(e.target),readTime:t,resumeToken:u,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function Ty(n){const e=SE({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?iT(e,e.limit,"L"):e}function Ay(n,e){return new kE(e.largestBatchId,Ey(n.Jt,e.overlayMutation))}function TI(n,e){const t=e.path.lastSegment();return[n,wi(e.path.popLast()),t]}class AI{getBundleMetadata(e,t){return SI(e).get(t).next(r=>{if(r)return{id:(i=r).bundleId,createTime:Iu(i.createTime),version:i.version};var i})}saveBundleMetadata(e,t){return SI(e).put({bundleId:(r=t).id,createTime:Gc(Zr(r.createTime)),version:r.version});var r}getNamedQuery(e,t){return MI(e).get(t).next(r=>{if(r)return{name:(i=r).name,query:Ty(i.bundledQuery),readTime:Iu(i.readTime)};var i})}saveNamedQuery(e,t){return MI(e).put({name:(r=t).name,readTime:Gc(Zr(r.readTime)),bundledQuery:r.bundledQuery});var r}}function SI(n){return Yr(n,"bundles")}function MI(n){return Yr(n,"namedQueries")}class LE{constructor(e,t){this.M=e,this.userId=t}static Yt(e,t){return new LE(e,t.uid||"")}getOverlay(e,t){return qc(e).get(TI(this.userId,t)).next(r=>r?Ay(this.M,r):null)}saveOverlays(e,t,r){const i=[];return r.forEach((u,c)=>{const p=new kE(t,c);i.push(this.Xt(e,p))}),de.waitFor(i)}removeOverlaysForBatchId(e,t,r){const i=new Set;t.forEach(c=>i.add(wi(c.getCollectionPath())));const u=[];return i.forEach(c=>{const p=IDBKeyRange.bound([this.userId,c,r],[this.userId,c,r+1],!1,!0);u.push(qc(e).Qt("collectionPathOverlayIndex",p))}),de.waitFor(u)}getOverlaysForCollection(e,t,r){const i=Vc(),u=wi(t),c=IDBKeyRange.bound([this.userId,u,r],[this.userId,u,Number.POSITIVE_INFINITY],!0);return qc(e).qt("collectionPathOverlayIndex",c).next(p=>{for(const y of p){const b=Ay(this.M,y);i.set(b.getKey(),b)}return i})}getOverlaysForCollectionGroup(e,t,r,i){const u=Vc();let c;const p=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return qc(e).Wt({index:"collectionGroupOverlayIndex",range:p},(y,b,A)=>{const M=Ay(this.M,b);u.size()<i||M.largestBatchId===c?(u.set(M.getKey(),M),c=M.largestBatchId):A.done()}).next(()=>u)}Xt(e,t){return qc(e).put(function(r,i,u){const[c,p,y]=TI(i,u.mutation.key);return{userId:i,collectionPath:p,documentId:y,collectionGroup:u.mutation.key.getCollectionGroup(),largestBatchId:u.largestBatchId,overlayMutation:vy(r.Jt,u.mutation)}}(this.M,this.userId,t))}}function qc(n){return Yr(n,"documentOverlays")}class bs{constructor(){}Zt(e,t){this.te(e,t),t.ee()}te(e,t){if("nullValue"in e)this.ne(t,5);else if("booleanValue"in e)this.ne(t,10),t.se(e.booleanValue?1:0);else if("integerValue"in e)this.ne(t,15),t.se(zn(e.integerValue));else if("doubleValue"in e){const r=zn(e.doubleValue);isNaN(r)?this.ne(t,13):(this.ne(t,15),Ep(r)?t.se(0):t.se(r))}else if("timestampValue"in e){const r=e.timestampValue;this.ne(t,20),"string"==typeof r?t.ie(r):(t.ie(`${r.seconds||""}`),t.se(r.nanos||0))}else if("stringValue"in e)this.re(e.stringValue,t),this.oe(t);else if("bytesValue"in e)this.ne(t,30),t.ue(El(e.bytesValue)),this.oe(t);else if("referenceValue"in e)this.ae(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.ne(t,45),t.se(r.latitude||0),t.se(r.longitude||0)}else"mapValue"in e?Rb(e)?this.ne(t,Number.MAX_SAFE_INTEGER):(this.ce(e.mapValue,t),this.oe(t)):"arrayValue"in e?(this.he(e.arrayValue,t),this.oe(t)):it()}re(e,t){this.ne(t,25),this.le(e,t)}le(e,t){t.ie(e)}ce(e,t){const r=e.fields||{};this.ne(t,55);for(const i of Object.keys(r))this.re(i,t),this.te(r[i],t)}he(e,t){const r=e.values||[];this.ne(t,50);for(const i of r)this.te(i,t)}ae(e,t){this.ne(t,37),$e.fromName(e).path.forEach(r=>{this.ne(t,60),this.le(r,t)})}ne(e,t){e.se(t)}oe(e){e.se(2)}}function xI(n){if(0===n)return 8;let e=0;return n>>4==0&&(e+=4,n<<=4),n>>6==0&&(e+=2,n<<=2),n>>7==0&&(e+=1),e}function VE(n){const e=64-function(t){let r=0;for(let i=0;i<8;++i){const u=xI(255&t[i]);if(r+=u,8!==u)break}return r}(n);return Math.ceil(e/8)}bs.fe=new bs;class IT{constructor(){this.buffer=new Uint8Array(1024),this.position=0}de(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this._e(r.value),r=t.next();this.we()}me(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.ge(r.value),r=t.next();this.ye()}pe(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this._e(r);else if(r<2048)this._e(960|r>>>6),this._e(128|63&r);else if(t<"\ud800"||"\udbff"<t)this._e(480|r>>>12),this._e(128|63&r>>>6),this._e(128|63&r);else{const i=t.codePointAt(0);this._e(240|i>>>18),this._e(128|63&i>>>12),this._e(128|63&i>>>6),this._e(128|63&i)}}this.we()}Ie(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.ge(r);else if(r<2048)this.ge(960|r>>>6),this.ge(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.ge(480|r>>>12),this.ge(128|63&r>>>6),this.ge(128|63&r);else{const i=t.codePointAt(0);this.ge(240|i>>>18),this.ge(128|63&i>>>12),this.ge(128|63&i>>>6),this.ge(128|63&i)}}this.ye()}Te(e){const t=this.Ee(e),r=VE(t);this.Ae(1+r),this.buffer[this.position++]=255&r;for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=255&t[i]}Re(e){const t=this.Ee(e),r=VE(t);this.Ae(1+r),this.buffer[this.position++]=~(255&r);for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=~(255&t[i])}be(){this.Pe(255),this.Pe(255)}Ve(){this.ve(255),this.ve(255)}reset(){this.position=0}seed(e){this.Ae(e.length),this.buffer.set(e,this.position),this.position+=e.length}Se(){return this.buffer.slice(0,this.position)}Ee(e){const t=function(i){const u=new DataView(new ArrayBuffer(8));return u.setFloat64(0,i,!1),new Uint8Array(u.buffer)}(e),r=0!=(128&t[0]);t[0]^=r?255:128;for(let i=1;i<t.length;++i)t[i]^=r?255:0;return t}_e(e){const t=255&e;0===t?(this.Pe(0),this.Pe(255)):255===t?(this.Pe(255),this.Pe(0)):this.Pe(t)}ge(e){const t=255&e;0===t?(this.ve(0),this.ve(255)):255===t?(this.ve(255),this.ve(0)):this.ve(e)}we(){this.Pe(0),this.Pe(1)}ye(){this.ve(0),this.ve(1)}Pe(e){this.Ae(1),this.buffer[this.position++]=e}ve(e){this.Ae(1),this.buffer[this.position++]=~e}Ae(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}}class KM{constructor(e){this.De=e}ue(e){this.De.de(e)}ie(e){this.De.pe(e)}se(e){this.De.Te(e)}ee(){this.De.be()}}class DT{constructor(e){this.De=e}ue(e){this.De.me(e)}ie(e){this.De.Ie(e)}se(e){this.De.Re(e)}ee(){this.De.Ve()}}class Hp{constructor(){this.De=new IT,this.Ce=new KM(this.De),this.xe=new DT(this.De)}seed(e){this.De.seed(e)}Ne(e){return 0===e?this.Ce:this.xe}Se(){return this.De.Se()}reset(){this.De.reset()}}class zc{constructor(e,t,r,i){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=i}ke(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new zc(this.indexId,this.documentKey,this.arrayValue,r)}}function Tl(n,e){let t=n.indexId-e.indexId;return 0!==t?t:(t=RI(n.arrayValue,e.arrayValue),0!==t?t:(t=RI(n.directionalValue,e.directionalValue),0!==t?t:$e.comparator(n.documentKey,e.documentKey)))}function RI(n,e){for(let t=0;t<n.length&&t<e.length;++t){const r=n[t]-e[t];if(0!==r)return r}return n.length-e.length}class CT{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Me=e.orderBy,this.Oe=[];for(const t of e.filters){const r=t;r.S()?this.Fe=r:this.Oe.push(r)}}$e(e){const t=Cp(e);if(void 0!==t&&!this.Be(t))return!1;const r=xc(e);let i=0,u=0;for(;i<r.length&&this.Be(r[i]);++i);if(i===r.length)return!0;if(void 0!==this.Fe){const c=r[i];if(!this.Le(this.Fe,c)||!this.Ue(this.Me[u++],c))return!1;++i}for(;i<r.length;++i){const c=r[i];if(u>=this.Me.length||!this.Ue(this.Me[u++],c))return!1}return!0}Be(e){for(const t of this.Oe)if(this.Le(t,e))return!0;return!1}Le(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}Ue(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}class ZM{constructor(){this.qe=new $p}addToCollectionParentIndex(e,t){return this.qe.add(t),de.resolve()}getCollectionParents(e,t){return de.resolve(this.qe.getEntries(t))}addFieldIndex(e,t){return de.resolve()}deleteFieldIndex(e,t){return de.resolve()}getDocumentsMatchingTarget(e,t){return de.resolve(null)}getIndexType(e,t){return de.resolve(0)}getFieldIndexes(e,t){return de.resolve([])}getNextCollectionGroupToUpdate(e){return de.resolve(null)}getMinOffset(e,t){return de.resolve(xo.min())}updateCollectionGroup(e,t,r){return de.resolve()}updateIndexEntries(e,t){return de.resolve()}}class $p{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new vn(Kt.comparator),u=!i.has(r);return this.index[t]=i.add(r),u}has(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new vn(Kt.comparator)).toArray()}}const Gp=new Uint8Array(0);class TT{constructor(e,t){this.user=e,this.databaseId=t,this.Ke=new $p,this.Ge=new Lc(r=>Pc(r),(r,i)=>xh(r,i)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.Ke.has(t)){const r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener(()=>{this.Ke.add(t)});const u={collectionId:r,parent:wi(i)};return PI(e).put(u)}return de.resolve()}getCollectionParents(e,t){const r=[],i=IDBKeyRange.bound([t,""],[sE(t),""],!1,!0);return PI(e).qt(i).next(u=>{for(const c of u){if(c.collectionId!==t)break;r.push(Ro(c.parent))}return r})}addFieldIndex(e,t){const r=Hh(e),i={indexId:(u=t).indexId,collectionGroup:u.collectionGroup,fields:u.fields.map(c=>[c.fieldPath.canonicalString(),c.kind])};var u;return delete i.indexId,r.add(i).next()}deleteFieldIndex(e,t){const r=Hh(e),i=$h(e),u=jh(e);return r.delete(t.indexId).next(()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>u.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t){const r=jh(e);let i=!0;const u=new Map;return de.forEach(this.Qe(t),c=>this.je(e,c).next(p=>{i&&(i=!!p),u.set(c,p)})).next(()=>{if(i){let c=un();const p=[];return de.forEach(u,(y,b)=>{var A;ke("IndexedDbIndexManager",`Using index ${A=y,`id=${A.indexId}|cg=${A.collectionGroup}|f=${A.fields.map(tt=>`${tt.fieldPath}:${tt.kind}`).join(",")}`} to execute ${Pc(t)}`);const M=function(tt,qe){const At=Cp(qe);if(void 0===At)return null;for(const Rt of uy(tt,At.fieldPath))switch(Rt.op){case"array-contains-any":return Rt.value.arrayValue.values||[];case"array-contains":return[Rt.value]}return null}(b,y),F=function(tt,qe){const At=new Map;for(const Rt of xc(qe))for(const Yt of uy(tt,Rt.fieldPath))switch(Yt.op){case"==":case"in":At.set(Rt.fieldPath.canonicalString(),Yt.value);break;case"not-in":case"!=":return At.set(Rt.fieldPath.canonicalString(),Yt.value),Array.from(At.values())}return null}(b,y),V=function(tt,qe){const At=[];let Rt=!0;for(const Yt of xc(qe)){const Ir=0===Yt.kind?Lb(tt,Yt.fieldPath,tt.startAt):Vb(tt,Yt.fieldPath,tt.startAt);At.push(Ir.value),Rt&&(Rt=Ir.inclusive)}return new bl(At,Rt)}(b,y),B=function(tt,qe){const At=[];let Rt=!0;for(const Yt of xc(qe)){const Ir=0===Yt.kind?Vb(tt,Yt.fieldPath,tt.endAt):Lb(tt,Yt.fieldPath,tt.endAt);At.push(Ir.value),Rt&&(Rt=Ir.inclusive)}return new bl(At,Rt)}(b,y),se=this.We(y,b,V),Te=this.We(y,b,B),He=this.ze(y,b,F),nt=this.He(y.indexId,M,se,V.inclusive,Te,B.inclusive,He);return de.forEach(nt,tt=>r.Gt(tt,t.limit).next(qe=>{qe.forEach(At=>{const Rt=$e.fromSegments(At.documentKey);c.has(Rt)||(c=c.add(Rt),p.push(Rt))})}))}).next(()=>p)}return de.resolve(null)})}Qe(e){let t=this.Ge.get(e);return t||(t=[e],this.Ge.set(e,t),t)}He(e,t,r,i,u,c,p){const y=(null!=t?t.length:1)*Math.max(r.length,u.length),b=y/(null!=t?t.length:1),A=[];for(let M=0;M<y;++M){const F=t?this.Je(t[M/b]):Gp,V=this.Ye(e,F,r[M%b],i),B=this.Xe(e,F,u[M%b],c),se=p.map(Te=>this.Ye(e,F,Te,!0));A.push(...this.createRange(V,B,se))}return A}Ye(e,t,r,i){const u=new zc(e,$e.empty(),t,r);return i?u:u.ke()}Xe(e,t,r,i){const u=new zc(e,$e.empty(),t,r);return i?u.ke():u}je(e,t){const r=new CT(t),i=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,i).next(u=>{let c=null;for(const p of u)r.$e(p)&&(!c||p.fields.length>c.fields.length)&&(c=p);return c})}getIndexType(e,t){let r=2;return de.forEach(this.Qe(t),i=>this.je(e,i).next(u=>{u?0!==r&&u.fields.length<function(c){let p=new vn(wr.comparator),y=!1;for(const b of c.filters){const A=b;A.field.isKeyField()||("array-contains"===A.op||"array-contains-any"===A.op?y=!0:p=p.add(A.field))}for(const b of c.orderBy)b.field.isKeyField()||(p=p.add(b.field));return p.size+(y?1:0)}(i)&&(r=1):r=0})).next(()=>r)}Ze(e,t){const r=new Hp;for(const i of xc(e)){const u=t.data.field(i.fieldPath);if(null==u)return null;const c=r.Ne(i.kind);bs.fe.Zt(u,c)}return r.Se()}Je(e){const t=new Hp;return bs.fe.Zt(e,t.Ne(0)),t.Se()}tn(e,t){const r=new Hp;return bs.fe.Zt(Mc(this.databaseId,t),r.Ne(function(i){const u=xc(i);return 0===u.length?0:u[u.length-1].kind}(e))),r.Se()}ze(e,t,r){if(null===r)return[];let i=[];i.push(new Hp);let u=0;for(const c of xc(e)){const p=r[u++];for(const y of i)if(this.en(t,c.fieldPath)&&bp(p))i=this.nn(i,c,p);else{const b=y.Ne(c.kind);bs.fe.Zt(p,b)}}return this.sn(i)}We(e,t,r){return this.ze(e,t,r.position)}sn(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].Se();return t}nn(e,t,r){const i=[...e],u=[];for(const c of r.arrayValue.values||[])for(const p of i){const y=new Hp;y.seed(p.Se()),bs.fe.Zt(c,y.Ne(t.kind)),u.push(y)}return u}en(e,t){return!!e.filters.find(r=>r instanceof Nr&&r.field.isEqual(t)&&("in"===r.op||"not-in"===r.op))}getFieldIndexes(e,t){const r=Hh(e),i=$h(e);return(t?r.qt("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.qt()).next(u=>{const c=[];return de.forEach(u,p=>i.get([p.indexId,this.uid]).next(y=>{c.push(function(b,A){const M=A?new Rc(A.sequenceNumber,new xo(Iu(A.readTime),new $e(Ro(A.documentKey)),A.largestBatchId)):Rc.empty(),F=b.fields.map(([V,B])=>new oy(wr.fromServerFormat(V),B));return new Dp(b.indexId,b.collectionGroup,F,M)}(p,y))})).next(()=>c)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((r,i)=>{const u=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return 0!==u?u:Lt(r.collectionGroup,i.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){const i=Hh(e),u=$h(e);return this.rn(e).next(c=>i.qt("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(p=>de.forEach(p,y=>{return u.put({indexId:y.indexId,uid:this.user.uid||"",sequenceNumber:c,readTime:Gc((F=r).readTime),documentKey:wi(F.documentKey.path),largestBatchId:F.largestBatchId});var F})))}updateIndexEntries(e,t){const r=new Map;return de.forEach(t,(i,u)=>{const c=r.get(i.collectionGroup);return(c?de.resolve(c):this.getFieldIndexes(e,i.collectionGroup)).next(p=>(r.set(i.collectionGroup,p),de.forEach(p,y=>this.on(e,i,y).next(b=>{const A=this.un(u,y);return b.isEqual(A)?de.resolve():this.an(e,u,y,b,A)}))))})}cn(e,t,r,i){return jh(e).put({indexId:i.indexId,uid:this.uid,arrayValue:i.arrayValue,directionalValue:i.directionalValue,orderedDocumentKey:this.tn(r,t.key),documentKey:t.key.path.toArray()})}hn(e,t,r,i){return jh(e).delete([i.indexId,this.uid,i.arrayValue,i.directionalValue,this.tn(r,t.key),t.key.path.toArray()])}on(e,t,r){const i=jh(e);let u=new vn(Tl);return i.Wt({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.tn(r,t)])},(c,p)=>{u=u.add(new zc(r.indexId,t,p.arrayValue,p.directionalValue))}).next(()=>u)}un(e,t){let r=new vn(Tl);const i=this.Ze(t,e);if(null==i)return r;const u=Cp(t);if(null!=u){const c=e.data.field(u.fieldPath);if(bp(c))for(const p of c.arrayValue.values||[])r=r.add(new zc(t.indexId,e.key,this.Je(p),i))}else r=r.add(new zc(t.indexId,e.key,Gp,i));return r}an(e,t,r,i,u){ke("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const c=[];return function(p,y,b,A,M){const F=p.getIterator(),V=y.getIterator();let B=Ah(F),se=Ah(V);for(;B||se;){let Te=!1,He=!1;if(B&&se){const nt=b(B,se);nt<0?He=!0:nt>0&&(Te=!0)}else null!=B?He=!0:Te=!0;Te?(A(se),se=Ah(V)):He?(M(B),B=Ah(F)):(B=Ah(F),se=Ah(V))}}(i,u,Tl,p=>{c.push(this.cn(e,t,r,p))},p=>{c.push(this.hn(e,t,r,p))}),de.waitFor(c)}rn(e){let t=1;return $h(e).Wt({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,u)=>{u.done(),t=i.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((c,p)=>Tl(c,p)).filter((c,p,y)=>!p||0!==Tl(c,y[p-1]));const i=[];i.push(e);for(const c of r){const p=Tl(c,e),y=Tl(c,t);if(0===p)i[0]=e.ke();else if(p>0&&y<0)i.push(c),i.push(c.ke());else if(y>0)break}i.push(t);const u=[];for(let c=0;c<i.length;c+=2)u.push(IDBKeyRange.bound([i[c].indexId,this.uid,i[c].arrayValue,i[c].directionalValue,Gp,[]],[i[c+1].indexId,this.uid,i[c+1].arrayValue,i[c+1].directionalValue,Gp,[]]));return u}getMinOffset(e,t){let r;return de.forEach(this.Qe(t),i=>this.je(e,i).next(u=>{u?(!r||dE(u.indexState.offset,r)<0)&&(r=u.indexState.offset):r=xo.min()})).next(()=>r)}}function PI(n){return Yr(n,"collectionParents")}function jh(n){return Yr(n,"indexEntries")}function Hh(n){return Yr(n,"indexConfiguration")}function $h(n){return Yr(n,"indexState")}const UE={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class ns{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new ns(e,ns.DEFAULT_COLLECTION_PERCENTILE,ns.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function BE(n,e,t){const r=n.store("mutations"),i=n.store("documentMutations"),u=[],c=IDBKeyRange.only(t.batchId);let p=0;const y=r.Wt({range:c},(A,M,F)=>(p++,F.delete()));u.push(y.next(()=>{St(1===p)}));const b=[];for(const A of t.mutations){const M=RE(e,A.key.path,t.batchId);u.push(i.delete(M)),b.push(A.key)}return de.waitFor(u).next(()=>b)}function qp(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw it();e=n.noDocument}return JSON.stringify(e).length}ns.DEFAULT_COLLECTION_PERCENTILE=10,ns.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,ns.DEFAULT=new ns(41943040,ns.DEFAULT_COLLECTION_PERCENTILE,ns.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),ns.DISABLED=new ns(-1,0,0);class jE{constructor(e,t,r,i){this.userId=e,this.M=t,this.indexManager=r,this.referenceDelegate=i,this.ln={}}static Yt(e,t,r,i){St(""!==e.uid);const u=e.isAuthenticated()?e.uid:"";return new jE(u,t,r,i)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Wc(e).Wt({index:"userMutationsIndex",range:r},(i,u,c)=>{t=!1,c.done()}).next(()=>t)}addMutationBatch(e,t,r,i){const u=zp(e),c=Wc(e);return c.add({}).next(p=>{St("number"==typeof p);const y=new NE(p,t,r,i),b=function(F,V,B){const se=B.baseMutations.map(He=>vy(F.Jt,He)),Te=B.mutations.map(He=>vy(F.Jt,He));return{userId:V,batchId:B.batchId,localWriteTimeMs:B.localWriteTime.toMillis(),baseMutations:se,mutations:Te}}(this.M,this.userId,y),A=[];let M=new vn((F,V)=>Lt(F.canonicalString(),V.canonicalString()));for(const F of i){const V=RE(this.userId,F.key.path,p);M=M.add(F.key.path.popLast()),A.push(c.put(b)),A.push(u.put(V,mI))}return M.forEach(F=>{A.push(this.indexManager.addToCollectionParentIndex(e,F))}),e.addOnCommittedListener(()=>{this.ln[p]=y.keys()}),de.waitFor(A).next(()=>y)})}lookupMutationBatch(e,t){return Wc(e).get(t).next(r=>r?(St(r.userId===this.userId),Bh(this.M,r)):null)}fn(e,t){return this.ln[t]?de.resolve(this.ln[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){const i=r.keys();return this.ln[t]=i,i}return null})}getNextMutationBatchAfterBatchId(e,t){const r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]);let u=null;return Wc(e).Wt({index:"userMutationsIndex",range:i},(c,p,y)=>{p.userId===this.userId&&(St(p.batchId>=r),u=Bh(this.M,p)),y.done()}).next(()=>u)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return Wc(e).Wt({index:"userMutationsIndex",range:t,reverse:!0},(i,u,c)=>{r=u.batchId,c.done()}).next(()=>r)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Wc(e).qt("userMutationsIndex",t).next(r=>r.map(i=>Bh(this.M,i)))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=Up(this.userId,t.path),i=IDBKeyRange.lowerBound(r),u=[];return zp(e).Wt({range:i},(c,p,y)=>{const[b,A,M]=c,F=Ro(A);if(b===this.userId&&t.path.isEqual(F))return Wc(e).get(M).next(V=>{if(!V)throw it();St(V.userId===this.userId),u.push(Bh(this.M,V))});y.done()}).next(()=>u)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new vn(Lt);const i=[];return t.forEach(u=>{const c=Up(this.userId,u.path),p=IDBKeyRange.lowerBound(c),y=zp(e).Wt({range:p},(b,A,M)=>{const[F,V,B]=b,se=Ro(V);F===this.userId&&u.path.isEqual(se)?r=r.add(B):M.done()});i.push(y)}),de.waitFor(i).next(()=>this.dn(e,r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1,u=Up(this.userId,r),c=IDBKeyRange.lowerBound(u);let p=new vn(Lt);return zp(e).Wt({range:c},(y,b,A)=>{const[M,F,V]=y,B=Ro(F);M===this.userId&&r.isPrefixOf(B)?B.length===i&&(p=p.add(V)):A.done()}).next(()=>this.dn(e,p))}dn(e,t){const r=[],i=[];return t.forEach(u=>{i.push(Wc(e).get(u).next(c=>{if(null===c)throw it();St(c.userId===this.userId),r.push(Bh(this.M,c))}))}),de.waitFor(i).next(()=>r)}removeMutationBatch(e,t){return BE(e.Ht,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this._n(t.batchId)}),de.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}_n(e){delete this.ln[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return de.resolve();const r=IDBKeyRange.lowerBound([this.userId]),i=[];return zp(e).Wt({range:r},(u,c,p)=>{if(u[0]===this.userId){const y=Ro(u[1]);i.push(y)}else p.done()}).next(()=>{St(0===i.length)})})}containsKey(e,t){return NI(e,this.userId,t)}wn(e){return HE(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function NI(n,e,t){const r=Up(e,t.path),i=r[1],u=IDBKeyRange.lowerBound(r);let c=!1;return zp(n).Wt({range:u,jt:!0},(p,y,b)=>{const[A,M,F]=p;A===e&&M===i&&(c=!0),b.done()}).next(()=>c)}function Wc(n){return Yr(n,"mutations")}function zp(n){return Yr(n,"documentMutations")}function HE(n){return Yr(n,"mutationQueues")}class Kc{constructor(e){this.mn=e}next(){return this.mn+=2,this.mn}static gn(){return new Kc(0)}static yn(){return new Kc(-1)}}class AT{constructor(e,t){this.referenceDelegate=e,this.M=t}allocateTargetId(e){return this.pn(e).next(t=>{const r=new Kc(t.highestTargetId);return t.highestTargetId=r.next(),this.In(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.pn(e).next(t=>Tt.fromTimestamp(new On(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.pn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.pn(e).next(i=>(i.highestListenSequenceNumber=t,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),this.In(e,i)))}addTargetData(e,t){return this.Tn(e,t).next(()=>this.pn(e).next(r=>(r.targetCount+=1,this.En(t,r),this.In(e,r))))}updateTargetData(e,t){return this.Tn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>Gh(e).delete(t.targetId)).next(()=>this.pn(e)).next(r=>(St(r.targetCount>0),r.targetCount-=1,this.In(e,r)))}removeTargets(e,t,r){let i=0;const u=[];return Gh(e).Wt((c,p)=>{const y=jp(p);y.sequenceNumber<=t&&null===r.get(y.targetId)&&(i++,u.push(this.removeTargetData(e,y)))}).next(()=>de.waitFor(u)).next(()=>i)}forEachTarget(e,t){return Gh(e).Wt((r,i)=>{const u=jp(i);t(u)})}pn(e){return ST(e).get("targetGlobalKey").next(t=>(St(null!==t),t))}In(e,t){return ST(e).put("targetGlobalKey",t)}Tn(e,t){return Gh(e).put(Cy(this.M,t))}En(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.pn(e).next(t=>t.targetCount)}getTargetData(e,t){const r=Pc(t),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let u=null;return Gh(e).Wt({range:i,index:"queryTargetsIndex"},(c,p,y)=>{const b=jp(p);xh(t,b.target)&&(u=b,y.done())}).next(()=>u)}addMatchingKeys(e,t,r){const i=[],u=Zc(e);return t.forEach(c=>{const p=wi(c.path);i.push(u.put({targetId:r,path:p})),i.push(this.referenceDelegate.addReference(e,r,c))}),de.waitFor(i)}removeMatchingKeys(e,t,r){const i=Zc(e);return de.forEach(t,u=>{const c=wi(u.path);return de.waitFor([i.delete([r,c]),this.referenceDelegate.removeReference(e,r,u)])})}removeMatchingKeysForTargetId(e,t){const r=Zc(e),i=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),i=Zc(e);let u=un();return i.Wt({range:r,jt:!0},(c,p,y)=>{const b=Ro(c[1]),A=new $e(b);u=u.add(A)}).next(()=>u)}containsKey(e,t){const r=wi(t.path),i=IDBKeyRange.bound([r],[sE(r)],!1,!0);let u=0;return Zc(e).Wt({index:"documentTargetsIndex",jt:!0,range:i},([c,p],y,b)=>{0!==c&&(u++,b.done())}).next(()=>u>0)}Et(e,t){return Gh(e).get(t).next(r=>r?jp(r):null)}}function Gh(n){return Yr(n,"targets")}function ST(n){return Yr(n,"targetGlobal")}function Zc(n){return Yr(n,"targetDocuments")}function qh(n){return OI.apply(this,arguments)}function OI(){return OI=(0,Ee.Z)(function*(n){if(n.code!==ce.FAILED_PRECONDITION||n.message!==PE)throw n;ke("LocalStore","Unexpectedly lost primary lease")}),OI.apply(this,arguments)}function MT([n,e],[t,r]){const i=Lt(n,t);return 0===i?Lt(e,r):i}class xT{constructor(e){this.An=e,this.buffer=new vn(MT),this.Rn=0}bn(){return++this.Rn}Pn(e){const t=[e,this.bn()];if(this.buffer.size<this.An)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();MT(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class Sy{constructor(e,t){this.garbageCollector=e,this.asyncQueue=t,this.Vn=!1,this.vn=null}start(e){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Sn(e)}stop(){this.vn&&(this.vn.cancel(),this.vn=null)}get started(){return null!==this.vn}Sn(e){var t=this;const r=this.Vn?3e5:6e4;ke("LruGarbageCollector",`Garbage collection scheduled in ${r}ms`),this.vn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",r,(0,Ee.Z)(function*(){t.vn=null,t.Vn=!0;try{yield e.collectGarbage(t.garbageCollector)}catch(i){Hc(i)?ke("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",i):yield qh(i)}yield t.Sn(e)}))}}class RT{constructor(e,t){this.Dn=e,this.params=t}calculateTargetCount(e,t){return this.Dn.Cn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(0===t)return de.resolve(vs.A);const r=new xT(t);return this.Dn.forEachTarget(e,i=>r.Pn(i.sequenceNumber)).next(()=>this.Dn.xn(e,i=>r.Pn(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.Dn.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.Dn.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(ke("LruGarbageCollector","Garbage collection skipped; disabled"),de.resolve(UE)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(ke("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),UE):this.Nn(e,t))}getCacheSize(e){return this.Dn.getCacheSize(e)}Nn(e,t){let r,i,u,c,p,y,b;const A=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(M=>(M>this.params.maximumSequenceNumbersToCollect?(ke("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${M}`),i=this.params.maximumSequenceNumbersToCollect):i=M,c=Date.now(),this.nthSequenceNumber(e,i))).next(M=>(r=M,p=Date.now(),this.removeTargets(e,r,t))).next(M=>(u=M,y=Date.now(),this.removeOrphanedDocuments(e,r))).next(M=>(b=Date.now(),rE()<=cl.in.DEBUG&&ke("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${c-A}ms\n\tDetermined least recently used ${i} in `+(p-c)+`ms\n\tRemoved ${u} targets in `+(y-p)+`ms\n\tRemoved ${M} documents in `+(b-y)+`ms\nTotal Duration: ${b-A}ms`),de.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:u,documentsRemoved:M})))}}class PT{constructor(e,t){this.db=e,this.garbageCollector=new RT(this,t)}Cn(e){const t=this.kn(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}kn(e){let t=0;return this.xn(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}xn(e,t){return this.Mn(e,(r,i)=>t(i))}addReference(e,t,r){return Wp(e,r)}removeReference(e,t,r){return Wp(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return Wp(e,t)}On(e,t){return function(r,i){let u=!1;return HE(r).zt(c=>NI(r,c,i).next(p=>(p&&(u=!0),de.resolve(!p)))).next(()=>u)}(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let u=0;return this.Mn(e,(c,p)=>{if(p<=t){const y=this.On(e,c).next(b=>{if(!b)return u++,r.getEntry(e,c).next(()=>(r.removeEntry(c,Tt.min()),Zc(e).delete([0,wi(c.path)])))});i.push(y)}}).next(()=>de.waitFor(i)).next(()=>r.apply(e)).next(()=>u)}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return Wp(e,t)}Mn(e,t){const r=Zc(e);let i,u=vs.A;return r.Wt({index:"documentTargetsIndex"},([c,p],{path:y,sequenceNumber:b})=>{0===c?(u!==vs.A&&t(new $e(Ro(i)),u),u=b,i=y):u=vs.A}).next(()=>{u!==vs.A&&t(new $e(Ro(i)),u)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function Wp(n,e){return Zc(n).put((r=n.currentSequenceNumber,{targetId:0,path:wi(e.path),sequenceNumber:r}));var r}class Al{constructor(){this.changes=new Lc(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,mn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return void 0!==r?de.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class kI{constructor(e){this.M=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return Yc(e).put(r)}removeEntry(e,t,r){return Yc(e).delete(function(i,u){const c=i.path.toArray();return[c.slice(0,c.length-2),c[c.length-2],ts(u),c[c.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.Fn(e,r)))}getEntry(e,t){let r=mn.newInvalidDocument(t);return Yc(e).Wt({index:"documentKeyIndex",range:IDBKeyRange.only(Qc(t))},(i,u)=>{r=this.$n(t,u)}).next(()=>r)}Bn(e,t){let r={size:0,document:mn.newInvalidDocument(t)};return Yc(e).Wt({index:"documentKeyIndex",range:IDBKeyRange.only(Qc(t))},(i,u)=>{r={document:this.$n(t,u),size:qp(u)}}).next(()=>r)}getEntries(e,t){let r=es();return this.Ln(e,t,(i,u)=>{const c=this.$n(i,u);r=r.insert(i,c)}).next(()=>r)}Un(e,t){let r=es(),i=new nr($e.comparator);return this.Ln(e,t,(u,c)=>{const p=this.$n(u,c);r=r.insert(u,p),i=i.insert(u,qp(c))}).next(()=>({documents:r,qn:i}))}Ln(e,t,r){if(t.isEmpty())return de.resolve();let i=new vn(Kp);t.forEach(y=>i=i.add(y));const u=IDBKeyRange.bound(Qc(i.first()),Qc(i.last())),c=i.getIterator();let p=c.getNext();return Yc(e).Wt({index:"documentKeyIndex",range:u},(y,b,A)=>{const M=$e.fromSegments([...b.prefixPath,b.collectionGroup,b.documentId]);for(;p&&Kp(p,M)<0;)r(p,null),p=c.getNext();p&&p.isEqual(M)&&(r(p,b),p=c.hasNext()?c.getNext():null),p?A.Ut(Qc(p)):A.done()}).next(()=>{for(;p;)r(p,null),p=c.hasNext()?c.getNext():null})}getAllFromCollection(e,t,r){const i=[t.popLast().toArray(),t.lastSegment(),ts(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],u=[t.popLast().toArray(),t.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Yc(e).qt(IDBKeyRange.bound(i,u,!0)).next(c=>{let p=es();for(const y of c){const b=this.$n($e.fromSegments(y.prefixPath.concat(y.collectionGroup,y.documentId)),y);p=p.insert(b.key,b)}return p})}getAllFromCollectionGroup(e,t,r,i){let u=es();const c=xy(t,r),p=xy(t,xo.max());return Yc(e).Wt({index:"collectionGroupIndex",range:IDBKeyRange.bound(c,p,!0)},(y,b,A)=>{const M=this.$n($e.fromSegments(b.prefixPath.concat(b.collectionGroup,b.documentId)),b);u=u.insert(M.key,M),u.size===i&&A.done()}).next(()=>u)}newChangeBuffer(e){return new $E(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return My(e).get("remoteDocumentGlobalKey").next(t=>(St(!!t),t))}Fn(e,t){return My(e).put("remoteDocumentGlobalKey",t)}$n(e,t){if(t){const r=function FE(n,e){let t;if(e.document)t=CE(n.Jt,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=$e.fromSegments(e.noDocument.path),i=Iu(e.noDocument.readTime);t=mn.newNoDocument(r,i),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return it();{const r=$e.fromSegments(e.unknownDocument.path),i=Iu(e.unknownDocument.version);t=mn.newUnknownDocument(r,i)}}return e.readTime&&t.setReadTime(function(r){const i=new On(r[0],r[1]);return Tt.fromTimestamp(i)}(e.readTime)),t}(this.M,t);if(!r.isNoDocument()||!r.version.isEqual(Tt.min()))return r}return mn.newInvalidDocument(e)}}class $E extends Al{constructor(e,t){super(),this.Kn=e,this.trackRemovals=t,this.Gn=new Lc(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){const t=[];let r=0,i=new vn((u,c)=>Lt(u.canonicalString(),c.canonicalString()));return this.changes.forEach((u,c)=>{const p=this.Gn.get(u);if(t.push(this.Kn.removeEntry(e,u,p.readTime)),c.isValidDocument()){const y=CI(this.Kn.M,c);i=i.add(u.path.popLast()),r+=qp(y)-p.size,t.push(this.Kn.addEntry(e,u,y))}else if(r-=p.size,this.trackRemovals){const y=CI(this.Kn.M,c.convertToNoDocument(Tt.min()));t.push(this.Kn.addEntry(e,u,y))}}),i.forEach(u=>{t.push(this.Kn.indexManager.addToCollectionParentIndex(e,u))}),t.push(this.Kn.updateMetadata(e,r)),de.waitFor(t)}getFromCache(e,t){return this.Kn.Bn(e,t).next(r=>(this.Gn.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.Kn.Un(e,t).next(({documents:r,qn:i})=>(i.forEach((u,c)=>{this.Gn.set(u,{size:c,readTime:r.get(u).readTime})}),r))}}function My(n){return Yr(n,"remoteDocumentGlobal")}function Yc(n){return Yr(n,"remoteDocumentsV14")}function Qc(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function xy(n,e){const t=e.documentKey.path.toArray();return[n,ts(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function Kp(n,e){const t=n.path.toArray(),r=e.path.toArray();let i=0;for(let u=0;u<t.length-2&&u<r.length-2;++u)if(i=Lt(t[u],r[u]),i)return i;return i=Lt(t.length,r.length),i||(i=Lt(t[t.length-2],r[r.length-2]),i||Lt(t[t.length-1],r[r.length-1]))}class YM{constructor(e){this.M=e}kt(e,t,r,i){const u=new Bp("createOrUpgrade",t);var p;r<1&&i>=1&&(e.createObjectStore("owner"),(p=e).createObjectStore("mutationQueues",{keyPath:"userId"}),p.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",gI,{unique:!0}),p.createObjectStore("documentMutations"),NT(e),function(p){p.createObjectStore("remoteDocuments")}(e));let c=de.resolve();return r<3&&i>=3&&(0!==r&&(function(p){p.deleteObjectStore("targetDocuments"),p.deleteObjectStore("targets"),p.deleteObjectStore("targetGlobal")}(e),NT(e)),c=c.next(()=>function(p){const y=p.store("targetGlobal"),b={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Tt.min().toTimestamp(),targetCount:0};return y.put("targetGlobalKey",b)}(u))),r<4&&i>=4&&(0!==r&&(c=c.next(()=>function(p,y){return y.store("mutations").qt().next(b=>{p.deleteObjectStore("mutations"),p.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",gI,{unique:!0});const A=y.store("mutations"),M=b.map(F=>A.put(F));return de.waitFor(M)})}(e,u))),c=c.next(()=>{!function(p){p.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),r<5&&i>=5&&(c=c.next(()=>this.Qn(u))),r<6&&i>=6&&(c=c.next(()=>(function(p){p.createObjectStore("remoteDocumentGlobal")}(e),this.jn(u)))),r<7&&i>=7&&(c=c.next(()=>this.Wn(u))),r<8&&i>=8&&(c=c.next(()=>this.zn(e,u))),r<9&&i>=9&&(c=c.next(()=>{!function(p){p.objectStoreNames.contains("remoteDocumentChanges")&&p.deleteObjectStore("remoteDocumentChanges")}(e)})),r<10&&i>=10&&(c=c.next(()=>this.Hn(u))),r<11&&i>=11&&(c=c.next(()=>{(function(p){p.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(p){p.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&i>=12&&(c=c.next(()=>{!function(p){const y=p.createObjectStore("documentOverlays",{keyPath:zM});y.createIndex("collectionPathOverlayIndex",WM,{unique:!1}),y.createIndex("collectionGroupOverlayIndex",by,{unique:!1})}(e)})),r<13&&i>=13&&(c=c.next(()=>function(p){const y=p.createObjectStore("remoteDocumentsV14",{keyPath:yI});y.createIndex("documentKeyIndex",yT),y.createIndex("collectionGroupIndex",_T)}(e)).next(()=>this.Jn(e,u)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&i>=14&&(c=c.next(()=>{!function(p){p.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),p.createObjectStore("indexState",{keyPath:HM}).createIndex("sequenceNumberIndex",$M,{unique:!1}),p.createObjectStore("indexEntries",{keyPath:GM}).createIndex("documentKeyIndex",qM,{unique:!1})}(e)})),c}jn(e){let t=0;return e.store("remoteDocuments").Wt((r,i)=>{t+=qp(i)}).next(()=>{const r={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}Qn(e){const t=e.store("mutationQueues"),r=e.store("mutations");return t.qt().next(i=>de.forEach(i,u=>{const c=IDBKeyRange.bound([u.userId,-1],[u.userId,u.lastAcknowledgedBatchId]);return r.qt("userMutationsIndex",c).next(p=>de.forEach(p,y=>{St(y.userId===u.userId);const b=Bh(this.M,y);return BE(e,u.userId,b).next(()=>{})}))}))}Wn(e){const t=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(i=>{const u=[];return r.Wt((c,p)=>{const y=new Kt(c),b=[0,wi(y)];u.push(t.get(b).next(A=>A?de.resolve():t.put({targetId:0,path:wi(y),sequenceNumber:i.highestListenSequenceNumber})))}).next(()=>de.waitFor(u))})}zn(e,t){e.createObjectStore("collectionParents",{keyPath:jM});const r=t.store("collectionParents"),i=new $p,u=c=>{if(i.add(c)){const p=c.lastSegment(),y=c.popLast();return r.put({collectionId:p,parent:wi(y)})}};return t.store("remoteDocuments").Wt({jt:!0},(c,p)=>{const y=new Kt(c);return u(y.popLast())}).next(()=>t.store("documentMutations").Wt({jt:!0},([c,p,y],b)=>{const A=Ro(p);return u(A.popLast())}))}Hn(e){const t=e.store("targets");return t.Wt((r,i)=>{const u=jp(i),c=Cy(this.M,u);return t.put(c)})}Jn(e,t){const r=t.store("remoteDocuments"),i=[];return r.Wt((u,c)=>{const p=t.store("remoteDocumentsV14"),y=(b=c,b.document?new $e(Kt.fromString(b.document.name).popFirst(5)):b.noDocument?$e.fromSegments(b.noDocument.path):b.unknownDocument?$e.fromSegments(b.unknownDocument.path):it()).path.toArray();var b;const A={prefixPath:y.slice(0,y.length-2),collectionGroup:y[y.length-2],documentId:y[y.length-1],readTime:c.readTime||[0,0],unknownDocument:c.unknownDocument,noDocument:c.noDocument,document:c.document,hasCommittedMutations:!!c.hasCommittedMutations};i.push(p.put(A))}).next(()=>de.waitFor(i))}}function NT(n){n.createObjectStore("targetDocuments",{keyPath:_I}).createIndex("documentTargetsIndex",BM,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",UM,{unique:!0}),n.createObjectStore("targetGlobal")}const FI="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class LI{constructor(e,t,r,i,u,c,p,y,b,A,M=13){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.Yn=u,this.window=c,this.document=p,this.Xn=b,this.Zn=A,this.ts=M,this.es=null,this.ns=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ss=null,this.inForeground=!1,this.rs=null,this.os=null,this.us=Number.NEGATIVE_INFINITY,this.cs=F=>Promise.resolve(),!LI.vt())throw new Re(ce.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new PT(this,i),this.hs=t+"main",this.M=new DI(y),this.ls=new Po(this.hs,this.ts,new YM(this.M)),this.fs=new AT(this.referenceDelegate,this.M),this.ds=new kI(this.M),this._s=new AI,this.window&&this.window.localStorage?this.ws=this.window.localStorage:(this.ws=null,!1===A&&cr("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.gs().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Re(ce.FAILED_PRECONDITION,FI);return this.ys(),this.ps(),this.Is(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.fs.getHighestSequenceNumber(e))}).then(e=>{this.es=new vs(e,this.Xn)}).then(()=>{this.ns=!0}).catch(e=>(this.ls&&this.ls.close(),Promise.reject(e)))}Ts(e){var t=this;return this.cs=function(){var r=(0,Ee.Z)(function*(i){if(t.started)return e(i)});return function(i){return r.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.ls.Ot(function(){var t=(0,Ee.Z)(function*(r){null===r.newVersion&&(yield e())});return function(r){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Yn.enqueueAndForget((0,Ee.Z)(function*(){t.started&&(yield t.gs())})))}gs(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>Ry(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.Es(e).next(t=>{t||(this.isPrimary=!1,this.Yn.enqueueRetryable(()=>this.cs(!1)))})}).next(()=>this.As(e)).next(t=>this.isPrimary&&!t?this.Rs(e).next(()=>!1):!!t&&this.bs(e).next(()=>!0))).catch(e=>{if(Hc(e))return ke("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return ke("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Yn.enqueueRetryable(()=>this.cs(e)),this.isPrimary=e})}Es(e){return zh(e).get("owner").next(t=>de.resolve(this.Ps(t)))}Vs(e){return Ry(e).delete(this.clientId)}vs(){var e=this;return(0,Ee.Z)(function*(){if(e.isPrimary&&!e.Ss(e.us,18e5)){e.us=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const i=Yr(r,"clientMetadata");return i.qt().next(u=>{const c=e.Ds(u,18e5),p=u.filter(y=>-1===c.indexOf(y));return de.forEach(p,y=>i.delete(y.clientId)).next(()=>p)})}).catch(()=>[]);if(e.ws)for(const r of t)e.ws.removeItem(e.Cs(r.clientId))}})()}Is(){this.os=this.Yn.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.gs().then(()=>this.vs()).then(()=>this.Is()))}Ps(e){return!!e&&e.ownerId===this.clientId}As(e){return this.Zn?de.resolve(!0):zh(e).get("owner").next(t=>{if(null!==t&&this.Ss(t.leaseTimestampMs,5e3)&&!this.xs(t.ownerId)){if(this.Ps(t)&&this.networkEnabled)return!0;if(!this.Ps(t)){if(!t.allowTabSynchronization)throw new Re(ce.FAILED_PRECONDITION,FI);return!1}}return!(!this.networkEnabled||!this.inForeground)||Ry(e).qt().next(r=>void 0===this.Ds(r,5e3).find(i=>{if(this.clientId!==i.clientId){const c=!this.inForeground&&i.inForeground,p=this.networkEnabled===i.networkEnabled;if(!this.networkEnabled&&i.networkEnabled||c&&p)return!0}return!1}))}).next(t=>(this.isPrimary!==t&&ke("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,Ee.Z)(function*(){e.ns=!1,e.Ns(),e.os&&(e.os.cancel(),e.os=null),e.ks(),e.Ms(),yield e.ls.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const r=new bT(t,vs.A);return e.Rs(r).next(()=>e.Vs(r))}),e.ls.close(),e.Os()})()}Ds(e,t){return e.filter(r=>this.Ss(r.updateTimeMs,t)&&!this.xs(r.clientId))}Fs(){return this.runTransaction("getActiveClients","readonly",e=>Ry(e).qt().next(t=>this.Ds(t,18e5).map(r=>r.clientId)))}get started(){return this.ns}getMutationQueue(e,t){return jE.Yt(e,this.M,t,this.referenceDelegate)}getTargetCache(){return this.fs}getRemoteDocumentCache(){return this.ds}getIndexManager(e){return new TT(e,this.M.Jt.databaseId)}getDocumentOverlayCache(e){return LE.Yt(this.M,e)}getBundleCache(){return this._s}runTransaction(e,t,r){ke("IndexedDbPersistence","Starting transaction:",e);const i="readonly"===t?"readonly":"readwrite",u=14===(c=this.ts)?EI:13===c?Iy:12===c?vI:11===c?vT:void it();var c;let p;return this.ls.runTransaction(e,i,u,y=>(p=new bT(y,this.es?this.es.next():vs.A),"readwrite-primary"===t?this.Es(p).next(b=>!!b||this.As(p)).next(b=>{if(!b)throw cr(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Yn.enqueueRetryable(()=>this.cs(!1)),new Re(ce.FAILED_PRECONDITION,PE);return r(p)}).next(b=>this.bs(p).next(()=>b)):this.$s(p).next(()=>r(p)))).then(y=>(p.raiseOnCommittedEvent(),y))}$s(e){return zh(e).get("owner").next(t=>{if(null!==t&&this.Ss(t.leaseTimestampMs,5e3)&&!this.xs(t.ownerId)&&!this.Ps(t)&&!(this.Zn||this.allowTabSynchronization&&t.allowTabSynchronization))throw new Re(ce.FAILED_PRECONDITION,FI)})}bs(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return zh(e).put("owner",t)}static vt(){return Po.vt()}Rs(e){const t=zh(e);return t.get("owner").next(r=>this.Ps(r)?(ke("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):de.resolve())}Ss(e,t){const r=Date.now();return!(e<r-t||e>r&&(cr(`Detected an update time that is in the future: ${e} > ${r}`),1))}ys(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.rs=()=>{this.Yn.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.gs()))},this.document.addEventListener("visibilitychange",this.rs),this.inForeground="visible"===this.document.visibilityState)}ks(){this.rs&&(this.document.removeEventListener("visibilitychange",this.rs),this.rs=null)}ps(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ss=()=>{this.Ns(),(0,xt.G6)()&&navigator.appVersion.match(/Version\/1[45]/)&&this.Yn.enterRestrictedMode(!0),this.Yn.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.ss))}Ms(){this.ss&&(this.window.removeEventListener("pagehide",this.ss),this.ss=null)}xs(e){var t;try{const r=null!==(null===(t=this.ws)||void 0===t?void 0:t.getItem(this.Cs(e)));return ke("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return cr("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}Ns(){if(this.ws)try{this.ws.setItem(this.Cs(this.clientId),String(Date.now()))}catch(e){cr("Failed to set zombie client id.",e)}}Os(){if(this.ws)try{this.ws.removeItem(this.Cs(this.clientId))}catch(e){}}Cs(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function zh(n){return Yr(n,"owner")}function Ry(n){return Yr(n,"clientMetadata")}function GE(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class OT{constructor(e,t,r){this.ds=e,this.Bs=t,this.indexManager=r}Ls(e,t){return this.Bs.getAllMutationBatchesAffectingDocumentKey(e,t).next(r=>this.Us(e,t,r))}Us(e,t,r){return this.ds.getEntry(e,t).next(i=>{for(const u of r)u.applyToLocalView(i);return i})}qs(e,t){e.forEach((r,i)=>{for(const u of t)u.applyToLocalView(i)})}Ks(e,t){return this.ds.getEntries(e,t).next(r=>this.Gs(e,r).next(()=>r))}Gs(e,t){return this.Bs.getAllMutationBatchesAffectingDocumentKeys(e,t).next(r=>this.qs(t,r))}Qs(e,t,r){return $e.isDocumentKey((i=t).path)&&null===i.collectionGroup&&0===i.filters.length?this.js(e,t.path):fE(t)?this.Ws(e,t,r):this.zs(e,t,r);var i}js(e,t){return this.Ls(e,new $e(t)).next(r=>{let i=kp();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}Ws(e,t,r){const i=t.collectionGroup;let u=kp();return this.indexManager.getCollectionParents(e,i).next(c=>de.forEach(c,p=>{const y=(b=t,A=p.child(i),new wu(A,null,b.explicitOrderBy.slice(),b.filters.slice(),b.limit,b.limitType,b.startAt,b.endAt));var b,A;return this.zs(e,y,r).next(b=>{b.forEach((A,M)=>{u=u.insert(A,M)})})}).next(()=>u))}zs(e,t,r){let i;return this.ds.getAllFromCollection(e,t.path,r).next(u=>(i=u,this.Bs.getAllMutationBatchesAffectingQuery(e,t))).next(u=>{for(const c of u)for(const p of c.mutations){const y=p.key;let b=i.get(y);null==b&&(b=mn.newInvalidDocument(y),i=i.insert(y,b)),_E(p,b,c.localWriteTime),b.isFoundDocument()||(i=i.remove(y))}}).next(()=>(i.forEach((u,c)=>{gE(t,c)||(i=i.remove(u))}),i))}}class qE{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.Hs=r,this.Js=i}static Ys(e,t){let r=un(),i=un();for(const u of t.docChanges)switch(u.type){case 0:r=r.add(u.doc.key);break;case 1:i=i.add(u.doc.key)}return new qE(e,t.fromCache,r,i)}}class zE{constructor(){this.Xs=!1}initialize(e,t){this.Zs=e,this.indexManager=t,this.Xs=!0}Qs(e,t,r,i){return this.ti(e,t).next(u=>u||this.ei(e,t,i,r)).next(u=>u||this.ni(e,t))}ti(e,t){return de.resolve(null)}ei(e,t,r,i){return function Ph(n){return 0===n.filters.length&&null===n.limit&&null==n.startAt&&null==n.endAt&&(0===n.explicitOrderBy.length||1===n.explicitOrderBy.length&&n.explicitOrderBy[0].field.isKeyField())}(t)||i.isEqual(Tt.min())?this.ni(e,t):this.Zs.Ks(e,r).next(u=>{const c=this.si(t,u);return this.ii(t,c,r,i)?this.ni(e,t):(rE()<=cl.in.DEBUG&&ke("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),pE(t)),this.ri(e,c,t,kb(i,-1)))})}si(e,t){let r=new vn(qb(e));return t.forEach((i,u)=>{gE(e,u)&&(r=r.add(u))}),r}ii(e,t,r,i){if(null===e.limit)return!1;if(r.size!==t.size)return!0;const u="F"===e.limitType?t.last():t.first();return!!u&&(u.hasPendingWrites||u.version.compareTo(i)>0)}ni(e,t){return rE()<=cl.in.DEBUG&&ke("QueryEngine","Using full collection scan to execute query:",pE(t)),this.Zs.Qs(e,t,xo.min())}ri(e,t,r,i){return this.Zs.Qs(e,r,i).next(u=>(t.forEach(c=>{u=u.insert(c.key,c)}),u))}}class VI{constructor(e,t,r,i){this.persistence=e,this.oi=t,this.M=i,this.ui=new nr(Lt),this.ai=new Lc(u=>Pc(u),xh),this.ci=new Map,this.hi=e.getRemoteDocumentCache(),this.fs=e.getTargetCache(),this._s=e.getBundleCache(),this.li(r)}li(e){this.indexManager=this.persistence.getIndexManager(e),this.Bs=this.persistence.getMutationQueue(e,this.indexManager),this.fi=new OT(this.hi,this.Bs,this.indexManager),this.hi.setIndexManager(this.indexManager),this.oi.initialize(this.fi,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.ui))}}function WE(n,e,t,r){return new VI(n,e,t,r)}function UI(n,e){return KE.apply(this,arguments)}function KE(){return KE=(0,Ee.Z)(function*(n,e){const t=Ze(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.Bs.getAllMutationBatches(r).next(u=>(i=u,t.li(e),t.Bs.getAllMutationBatches(r))).next(u=>{const c=[],p=[];let y=un();for(const b of i){c.push(b.batchId);for(const A of b.mutations)y=y.add(A.key)}for(const b of u){p.push(b.batchId);for(const A of b.mutations)y=y.add(A.key)}return t.fi.Ks(r,y).next(b=>({di:b,removedBatchIds:c,addedBatchIds:p}))})})}),KE.apply(this,arguments)}function BI(n,e){const t=Ze(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),u=t.hi.newChangeBuffer({trackRemovals:!0});return function(c,p,y,b){const A=y.batch,M=A.keys();let F=de.resolve();return M.forEach(V=>{F=F.next(()=>b.getEntry(p,V)).next(B=>{const se=y.docVersions.get(V);St(null!==se),B.version.compareTo(se)<0&&(A.applyToRemoteDocument(B,y),B.isValidDocument()&&(B.setReadTime(y.commitVersion),b.addEntry(B)))})}),F.next(()=>c.Bs.removeMutationBatch(p,A))}(t,r,e,u).next(()=>u.apply(r)).next(()=>t.Bs.performConsistencyCheck(r)).next(()=>t.fi.Ks(r,i))})}function Py(n){const e=Ze(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.fs.getLastRemoteSnapshotVersion(t))}function QM(n,e){const t=Ze(n),r=e.snapshotVersion;let i=t.ui;return t.persistence.runTransaction("Apply remote event","readwrite-primary",u=>{const c=t.hi.newChangeBuffer({trackRemovals:!0});i=t.ui;const p=[];e.targetChanges.forEach((b,A)=>{const M=i.get(A);if(!M)return;p.push(t.fs.removeMatchingKeys(u,b.removedDocuments,A).next(()=>t.fs.addMatchingKeys(u,b.addedDocuments,A)));let F=M.withSequenceNumber(u.currentSequenceNumber);var V,B,se;e.targetMismatches.has(A)?F=F.withResumeToken(br.EMPTY_BYTE_STRING,Tt.min()).withLastLimboFreeSnapshotVersion(Tt.min()):b.resumeToken.approximateByteSize()>0&&(F=F.withResumeToken(b.resumeToken,r)),i=i.insert(A,F),B=F,se=b,(0===(V=M).resumeToken.approximateByteSize()||B.snapshotVersion.toMicroseconds()-V.snapshotVersion.toMicroseconds()>=3e8||se.addedDocuments.size+se.modifiedDocuments.size+se.removedDocuments.size>0)&&p.push(t.fs.updateTargetData(u,F))});let y=es();if(e.documentUpdates.forEach(b=>{e.resolvedLimboDocuments.has(b)&&p.push(t.persistence.referenceDelegate.updateLimboDocument(u,b))}),p.push(ZE(u,c,e.documentUpdates).next(b=>{y=b})),!r.isEqual(Tt.min())){const b=t.fs.getLastRemoteSnapshotVersion(u).next(A=>t.fs.setTargetsMetadata(u,u.currentSequenceNumber,r));p.push(b)}return de.waitFor(p).next(()=>c.apply(u)).next(()=>t.fi.Gs(u,y)).next(()=>y)}).then(u=>(t.ui=i,u))}function ZE(n,e,t){let r=un();return t.forEach(i=>r=r.add(i)),e.getEntries(n,r).next(i=>{let u=es();return t.forEach((c,p)=>{const y=i.get(c);p.isNoDocument()&&p.version.isEqual(Tt.min())?(e.removeEntry(c,p.readTime),u=u.insert(c,p)):!y.isValidDocument()||p.version.compareTo(y.version)>0||0===p.version.compareTo(y.version)&&y.hasPendingWrites?(e.addEntry(p),u=u.insert(c,p)):ke("LocalStore","Ignoring outdated watch update for ",c,". Current version:",y.version," Watch version:",p.version)}),u})}function YE(n,e){const t=Ze(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),t.Bs.getNextMutationBatchAfterBatchId(r,e)))}function Wh(n,e){const t=Ze(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.fs.getTargetData(r,e).next(u=>u?(i=u,de.resolve(i)):t.fs.allocateTargetId(r).next(c=>(i=new $c(e,c,0,r.currentSequenceNumber),t.fs.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=t.ui.get(r.targetId);return(null===i||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.ui=t.ui.insert(r.targetId,r),t.ai.set(e,r.targetId)),r})}function Kh(n,e,t){return jI.apply(this,arguments)}function jI(){return jI=(0,Ee.Z)(function*(n,e,t){const r=Ze(n),i=r.ui.get(e),u=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",u,c=>r.persistence.referenceDelegate.removeTarget(c,i)))}catch(c){if(!Hc(c))throw c;ke("LocalStore",`Failed to update sequence numbers for target ${e}: ${c}`)}r.ui=r.ui.remove(e),r.ai.delete(i.target)}),jI.apply(this,arguments)}function QE(n,e,t){const r=Ze(n);let i=Tt.min(),u=un();return r.persistence.runTransaction("Execute query","readonly",c=>function(p,y,b){const A=Ze(p),M=A.ai.get(b);return void 0!==M?de.resolve(A.ui.get(M)):A.fs.getTargetData(y,b)}(r,c,ws(e)).next(p=>{if(p)return i=p.lastLimboFreeSnapshotVersion,r.fs.getMatchingKeysForTargetId(c,p.targetId).next(y=>{u=y})}).next(()=>r.oi.Qs(c,e,t?i:Tt.min(),t?u:un())).next(p=>(kT(r,Gb(e),p),{documents:p,_i:u})))}function HI(n,e){const t=Ze(n),r=Ze(t.fs),i=t.ui.get(e);return i?Promise.resolve(i.target):t.persistence.runTransaction("Get target data","readonly",u=>r.Et(u,e).next(c=>c?c.target:null))}function $I(n,e){const t=Ze(n),r=t.ci.get(e)||Tt.min();return t.persistence.runTransaction("Get new document changes","readonly",i=>t.hi.getAllFromCollectionGroup(i,e,kb(r,-1),Number.MAX_SAFE_INTEGER)).then(i=>(kT(t,e,i),i))}function kT(n,e,t){let r=Tt.min();t.forEach((i,u)=>{u.readTime.compareTo(r)>0&&(r=u.readTime)}),n.ci.set(e,r)}function GI(){return GI=(0,Ee.Z)(function*(n,e,t,r){const i=Ze(n);let u=un(),c=es();for(const b of t){const A=e.wi(b.metadata.name);b.document&&(u=u.add(A));const M=e.mi(b);M.setReadTime(e.gi(b.metadata.readTime)),c=c.insert(A,M)}const p=i.hi.newChangeBuffer({trackRemovals:!0}),y=yield Wh(i,(b=r,ws(Oc(Kt.fromString(`__bundle__/docs/${b}`)))));var b;return i.persistence.runTransaction("Apply bundle documents","readwrite",b=>ZE(b,p,c).next(A=>(p.apply(b),A)).next(A=>i.fs.removeMatchingKeysForTargetId(b,y.targetId).next(()=>i.fs.addMatchingKeys(b,u,y.targetId)).next(()=>i.fi.Gs(b,A)).next(()=>A)))}),GI.apply(this,arguments)}function XM(n,e){return qI.apply(this,arguments)}function qI(){return qI=(0,Ee.Z)(function*(n,e,t=un()){const r=yield Wh(n,ws(Ty(e.bundledQuery))),i=Ze(n);return i.persistence.runTransaction("Save named query","readwrite",u=>{const c=Zr(e.readTime);if(r.snapshotVersion.compareTo(c)>=0)return i._s.saveNamedQuery(u,e);const p=r.withResumeToken(br.EMPTY_BYTE_STRING,c);return i.ui=i.ui.insert(p.targetId,p),i.fs.updateTargetData(u,p).next(()=>i.fs.removeMatchingKeysForTargetId(u,r.targetId)).next(()=>i.fs.addMatchingKeys(u,t,r.targetId)).next(()=>i._s.saveNamedQuery(u,e))})}),qI.apply(this,arguments)}class FT{constructor(e){this.M=e,this.yi=new Map,this.pi=new Map}getBundleMetadata(e,t){return de.resolve(this.yi.get(t))}saveBundleMetadata(e,t){var r;return this.yi.set(t.id,{id:(r=t).id,version:r.version,createTime:Zr(r.createTime)}),de.resolve()}getNamedQuery(e,t){return de.resolve(this.pi.get(t))}saveNamedQuery(e,t){return this.pi.set(t.name,{name:(r=t).name,query:Ty(r.bundledQuery),readTime:Zr(r.readTime)}),de.resolve();var r}}class ex{constructor(){this.overlays=new nr($e.comparator),this.Ii=new Map}getOverlay(e,t){return de.resolve(this.overlays.get(t))}saveOverlays(e,t,r){return r.forEach((i,u)=>{this.Xt(e,t,u)}),de.resolve()}removeOverlaysForBatchId(e,t,r){const i=this.Ii.get(r);return void 0!==i&&(i.forEach(u=>this.overlays=this.overlays.remove(u)),this.Ii.delete(r)),de.resolve()}getOverlaysForCollection(e,t,r){const i=Vc(),u=t.length+1,c=new $e(t.child("")),p=this.overlays.getIteratorFrom(c);for(;p.hasNext();){const y=p.getNext().value,b=y.getKey();if(!t.isPrefixOf(b.path))break;b.path.length===u&&y.largestBatchId>r&&i.set(y.getKey(),y)}return de.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let u=new nr((b,A)=>b-A);const c=this.overlays.getIterator();for(;c.hasNext();){const b=c.getNext().value;if(b.getKey().getCollectionGroup()===t&&b.largestBatchId>r){let A=u.get(b.largestBatchId);null===A&&(A=Vc(),u=u.insert(b.largestBatchId,A)),A.set(b.getKey(),b)}}const p=Vc(),y=u.getIterator();for(;y.hasNext()&&(y.getNext().value.forEach((b,A)=>p.set(b,A)),!(p.size()>=i)););return de.resolve(p)}Xt(e,t,r){if(null===r)return;const i=this.overlays.get(r.key);if(null!==i){const c=this.Ii.get(i.largestBatchId).delete(r.key);this.Ii.set(i.largestBatchId,c)}this.overlays=this.overlays.insert(r.key,new kE(t,r));let u=this.Ii.get(t);void 0===u&&(u=un(),this.Ii.set(t,u)),this.Ii.set(t,u.add(r.key))}}class zI{constructor(){this.Ti=new vn(Qr.Ei),this.Ai=new vn(Qr.Ri)}isEmpty(){return this.Ti.isEmpty()}addReference(e,t){const r=new Qr(e,t);this.Ti=this.Ti.add(r),this.Ai=this.Ai.add(r)}bi(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.Pi(new Qr(e,t))}Vi(e,t){e.forEach(r=>this.removeReference(r,t))}vi(e){const t=new $e(new Kt([])),r=new Qr(t,e),i=new Qr(t,e+1),u=[];return this.Ai.forEachInRange([r,i],c=>{this.Pi(c),u.push(c.key)}),u}Si(){this.Ti.forEach(e=>this.Pi(e))}Pi(e){this.Ti=this.Ti.delete(e),this.Ai=this.Ai.delete(e)}Di(e){const t=new $e(new Kt([])),r=new Qr(t,e),i=new Qr(t,e+1);let u=un();return this.Ai.forEachInRange([r,i],c=>{u=u.add(c.key)}),u}containsKey(e){const t=new Qr(e,0),r=this.Ti.firstAfterOrEqual(t);return null!==r&&e.isEqual(r.key)}}class Qr{constructor(e,t){this.key=e,this.Ci=t}static Ei(e,t){return $e.comparator(e.key,t.key)||Lt(e.Ci,t.Ci)}static Ri(e,t){return Lt(e.Ci,t.Ci)||$e.comparator(e.key,t.key)}}class tx{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.Bs=[],this.xi=1,this.Ni=new vn(Qr.Ei)}checkEmpty(e){return de.resolve(0===this.Bs.length)}addMutationBatch(e,t,r,i){const u=this.xi;this.xi++;const c=new NE(u,t,r,i);this.Bs.push(c);for(const p of i)this.Ni=this.Ni.add(new Qr(p.key,u)),this.indexManager.addToCollectionParentIndex(e,p.key.path.popLast());return de.resolve(c)}lookupMutationBatch(e,t){return de.resolve(this.ki(t))}getNextMutationBatchAfterBatchId(e,t){const i=this.Mi(t+1),u=i<0?0:i;return de.resolve(this.Bs.length>u?this.Bs[u]:null)}getHighestUnacknowledgedBatchId(){return de.resolve(0===this.Bs.length?-1:this.xi-1)}getAllMutationBatches(e){return de.resolve(this.Bs.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new Qr(t,0),i=new Qr(t,Number.POSITIVE_INFINITY),u=[];return this.Ni.forEachInRange([r,i],c=>{const p=this.ki(c.Ci);u.push(p)}),de.resolve(u)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new vn(Lt);return t.forEach(i=>{const u=new Qr(i,0),c=new Qr(i,Number.POSITIVE_INFINITY);this.Ni.forEachInRange([u,c],p=>{r=r.add(p.Ci)})}),de.resolve(this.Oi(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1;let u=r;$e.isDocumentKey(u)||(u=u.child(""));const c=new Qr(new $e(u),0);let p=new vn(Lt);return this.Ni.forEachWhile(y=>{const b=y.key.path;return!!r.isPrefixOf(b)&&(b.length===i&&(p=p.add(y.Ci)),!0)},c),de.resolve(this.Oi(p))}Oi(e){const t=[];return e.forEach(r=>{const i=this.ki(r);null!==i&&t.push(i)}),t}removeMutationBatch(e,t){St(0===this.Fi(t.batchId,"removed")),this.Bs.shift();let r=this.Ni;return de.forEach(t.mutations,i=>{const u=new Qr(i.key,t.batchId);return r=r.delete(u),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Ni=r})}_n(e){}containsKey(e,t){const r=new Qr(t,0),i=this.Ni.firstAfterOrEqual(r);return de.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return de.resolve()}Fi(e,t){return this.Mi(e)}Mi(e){return 0===this.Bs.length?0:e-this.Bs[0].batchId}ki(e){const t=this.Mi(e);return t<0||t>=this.Bs.length?null:this.Bs[t]}}class s{constructor(e){this.$i=e,this.docs=new nr($e.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,i=this.docs.get(r),u=i?i.size:0,c=this.$i(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:c}),this.size+=c-u,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return de.resolve(r?r.document.mutableCopy():mn.newInvalidDocument(t))}getEntries(e,t){let r=es();return t.forEach(i=>{const u=this.docs.get(i);r=r.insert(i,u?u.document.mutableCopy():mn.newInvalidDocument(i))}),de.resolve(r)}getAllFromCollection(e,t,r){let i=es();const u=new $e(t.child("")),c=this.docs.getIteratorFrom(u);for(;c.hasNext();){const{key:p,value:{document:y}}=c.getNext();if(!t.isPrefixOf(p.path))break;p.path.length>t.length+1||dE(Fb(y),r)<=0||(i=i.insert(y.key,y.mutableCopy()))}return de.resolve(i)}getAllFromCollectionGroup(e,t,r,i){it()}Bi(e,t){return de.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new o(this)}getSize(e){return de.resolve(this.size)}}class o extends Al{constructor(e){super(),this.Kn=e}applyChanges(e){const t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.Kn.addEntry(e,i)):this.Kn.removeEntry(r)}),de.waitFor(t)}getFromCache(e,t){return this.Kn.getEntry(e,t)}getAllFromCache(e,t){return this.Kn.getEntries(e,t)}}class a{constructor(e){this.persistence=e,this.Li=new Lc(t=>Pc(t),xh),this.lastRemoteSnapshotVersion=Tt.min(),this.highestTargetId=0,this.Ui=0,this.qi=new zI,this.targetCount=0,this.Ki=Kc.gn()}forEachTarget(e,t){return this.Li.forEach((r,i)=>t(i)),de.resolve()}getLastRemoteSnapshotVersion(e){return de.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return de.resolve(this.Ui)}allocateTargetId(e){return this.highestTargetId=this.Ki.next(),de.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.Ui&&(this.Ui=t),de.resolve()}Tn(e){this.Li.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Ki=new Kc(t),this.highestTargetId=t),e.sequenceNumber>this.Ui&&(this.Ui=e.sequenceNumber)}addTargetData(e,t){return this.Tn(t),this.targetCount+=1,de.resolve()}updateTargetData(e,t){return this.Tn(t),de.resolve()}removeTargetData(e,t){return this.Li.delete(t.target),this.qi.vi(t.targetId),this.targetCount-=1,de.resolve()}removeTargets(e,t,r){let i=0;const u=[];return this.Li.forEach((c,p)=>{p.sequenceNumber<=t&&null===r.get(p.targetId)&&(this.Li.delete(c),u.push(this.removeMatchingKeysForTargetId(e,p.targetId)),i++)}),de.waitFor(u).next(()=>i)}getTargetCount(e){return de.resolve(this.targetCount)}getTargetData(e,t){const r=this.Li.get(t)||null;return de.resolve(r)}addMatchingKeys(e,t,r){return this.qi.bi(t,r),de.resolve()}removeMatchingKeys(e,t,r){this.qi.Vi(t,r);const i=this.persistence.referenceDelegate,u=[];return i&&t.forEach(c=>{u.push(i.markPotentiallyOrphaned(e,c))}),de.waitFor(u)}removeMatchingKeysForTargetId(e,t){return this.qi.vi(t),de.resolve()}getMatchingKeysForTargetId(e,t){const r=this.qi.Di(t);return de.resolve(r)}containsKey(e,t){return de.resolve(this.qi.containsKey(t))}}class l{constructor(e,t){this.Gi={},this.overlays={},this.es=new vs(0),this.ns=!1,this.ns=!0,this.referenceDelegate=e(this),this.fs=new a(this),this.indexManager=new ZM,this.ds=new s(r=>this.referenceDelegate.Qi(r)),this.M=new DI(t),this._s=new FT(this.M)}start(){return Promise.resolve()}shutdown(){return this.ns=!1,Promise.resolve()}get started(){return this.ns}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new ex,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.Gi[e.toKey()];return r||(r=new tx(t,this.referenceDelegate),this.Gi[e.toKey()]=r),r}getTargetCache(){return this.fs}getRemoteDocumentCache(){return this.ds}getBundleCache(){return this._s}runTransaction(e,t,r){ke("MemoryPersistence","Starting transaction:",e);const i=new d(this.es.next());return this.referenceDelegate.ji(),r(i).next(u=>this.referenceDelegate.Wi(i).next(()=>u)).toPromise().then(u=>(i.raiseOnCommittedEvent(),u))}zi(e,t){return de.or(Object.values(this.Gi).map(r=>()=>r.containsKey(e,t)))}}class d extends ET{constructor(e){super(),this.currentSequenceNumber=e}}class g{constructor(e){this.persistence=e,this.Hi=new zI,this.Ji=null}static Yi(e){return new g(e)}get Xi(){if(this.Ji)return this.Ji;throw it()}addReference(e,t,r){return this.Hi.addReference(r,t),this.Xi.delete(r.toString()),de.resolve()}removeReference(e,t,r){return this.Hi.removeReference(r,t),this.Xi.add(r.toString()),de.resolve()}markPotentiallyOrphaned(e,t){return this.Xi.add(t.toString()),de.resolve()}removeTarget(e,t){this.Hi.vi(t.targetId).forEach(i=>this.Xi.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(u=>this.Xi.add(u.toString()))}).next(()=>r.removeTargetData(e,t))}ji(){this.Ji=new Set}Wi(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return de.forEach(this.Xi,r=>{const i=$e.fromPath(r);return this.Zi(e,i).next(u=>{u||t.removeEntry(i,Tt.min())})}).next(()=>(this.Ji=null,t.apply(e)))}updateLimboDocument(e,t){return this.Zi(e,t).next(r=>{r?this.Xi.delete(t.toString()):this.Xi.add(t.toString())})}Qi(e){return 0}Zi(e,t){return de.or([()=>de.resolve(this.Hi.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.zi(e,t)])}}function v(n,e){return`firestore_clients_${n}_${e}`}function w(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function I(n,e){return`firestore_targets_${n}_${e}`}class S{constructor(e,t,r,i){this.user=e,this.batchId=t,this.state=r,this.error=i}static tr(e,t,r){const i=JSON.parse(r);let u,c="object"==typeof i&&-1!==["pending","acknowledged","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return c&&i.error&&(c="string"==typeof i.error.message&&"string"==typeof i.error.code,c&&(u=new Re(i.error.code,i.error.message))),c?new S(e,t,i.state,u):(cr("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}er(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class x{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static tr(e,t){const r=JSON.parse(t);let i,u="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return u&&r.error&&(u="string"==typeof r.error.message&&"string"==typeof r.error.code,u&&(i=new Re(r.error.code,r.error.message))),u?new x(e,r.state,i):(cr("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}er(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class k{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static tr(e,t){const r=JSON.parse(t);let i="object"==typeof r&&r.activeTargetIds instanceof Array,u=Fp();for(let c=0;i&&c<r.activeTargetIds.length;++c)i=uE(r.activeTargetIds[c]),u=u.add(r.activeTargetIds[c]);return i?new k(e,u):(cr("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class j{constructor(e,t){this.clientId=e,this.onlineState=t}static tr(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new j(t.clientId,t.onlineState):(cr("SharedClientState",`Failed to parse online state: ${e}`),null)}}class Q{constructor(){this.activeTargetIds=Fp()}nr(e){this.activeTargetIds=this.activeTargetIds.add(e)}sr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}er(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class _e{constructor(e,t,r,i,u){this.window=e,this.Yn=t,this.persistenceKey=r,this.ir=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.rr=this.ur.bind(this),this.ar=new nr(Lt),this.started=!1,this.cr=[];const c=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=u,this.hr=v(this.persistenceKey,this.ir),this.lr=`firestore_sequence_number_${this.persistenceKey}`,this.ar=this.ar.insert(this.ir,new Q),this.dr=new RegExp(`^firestore_clients_${c}_([^_]*)$`),this._r=new RegExp(`^firestore_mutations_${c}_(\\d+)(?:_(.*))?$`),this.wr=new RegExp(`^firestore_targets_${c}_(\\d+)$`),this.mr=`firestore_online_state_${this.persistenceKey}`,this.gr=function(p){return`firestore_bundle_loaded_v2_${p}`}(this.persistenceKey),this.window.addEventListener("storage",this.rr)}static vt(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,Ee.Z)(function*(){const t=yield e.syncEngine.Fs();for(const i of t){if(i===e.ir)continue;const u=e.getItem(v(e.persistenceKey,i));if(u){const c=k.tr(i,u);c&&(e.ar=e.ar.insert(c.clientId,c))}}e.yr();const r=e.storage.getItem(e.mr);if(r){const i=e.pr(r);i&&e.Ir(i)}for(const i of e.cr)e.ur(i);e.cr=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.lr,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Tr(this.ar)}isActiveQueryTarget(e){let t=!1;return this.ar.forEach((r,i)=>{i.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.Er(e,"pending")}updateMutationState(e,t,r){this.Er(e,t,r),this.Ar(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const r=this.storage.getItem(I(this.persistenceKey,e));if(r){const i=x.tr(e,r);i&&(t=i.state)}}return this.Rr.nr(e),this.yr(),t}removeLocalQueryTarget(e){this.Rr.sr(e),this.yr()}isLocalQueryTarget(e){return this.Rr.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(I(this.persistenceKey,e))}updateQueryState(e,t,r){this.br(e,t,r)}handleUserChange(e,t,r){t.forEach(i=>{this.Ar(i)}),this.currentUser=e,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.Pr(e)}notifyBundleLoaded(e){this.Vr(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.rr),this.removeItem(this.hr),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return ke("SharedClientState","READ",e,t),t}setItem(e,t){ke("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){ke("SharedClientState","REMOVE",e),this.storage.removeItem(e)}ur(e){var t=this;const r=e;if(r.storageArea===this.storage){if(ke("SharedClientState","EVENT",r.key,r.newValue),r.key===this.hr)return void cr("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Yn.enqueueRetryable((0,Ee.Z)(function*(){if(t.started){if(null!==r.key)if(t.dr.test(r.key)){if(null==r.newValue){const i=t.vr(r.key);return t.Sr(i,null)}{const i=t.Dr(r.key,r.newValue);if(i)return t.Sr(i.clientId,i)}}else if(t._r.test(r.key)){if(null!==r.newValue){const i=t.Cr(r.key,r.newValue);if(i)return t.Nr(i)}}else if(t.wr.test(r.key)){if(null!==r.newValue){const i=t.kr(r.key,r.newValue);if(i)return t.Mr(i)}}else if(r.key===t.mr){if(null!==r.newValue){const i=t.pr(r.newValue);if(i)return t.Ir(i)}}else if(r.key===t.lr){const i=function(u){let c=vs.A;if(null!=u)try{const p=JSON.parse(u);St("number"==typeof p),c=p}catch(p){cr("SharedClientState","Failed to read sequence number from WebStorage",p)}return c}(r.newValue);i!==vs.A&&t.sequenceNumberHandler(i)}else if(r.key===t.gr){const i=t.Or(r.newValue);yield Promise.all(i.map(u=>t.syncEngine.Fr(u)))}}else t.cr.push(r)}))}}get Rr(){return this.ar.get(this.ir)}yr(){this.setItem(this.hr,this.Rr.er())}Er(e,t,r){const i=new S(this.currentUser,e,t,r),u=w(this.persistenceKey,this.currentUser,e);this.setItem(u,i.er())}Ar(e){const t=w(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Pr(e){this.storage.setItem(this.mr,JSON.stringify({clientId:this.ir,onlineState:e}))}br(e,t,r){const i=I(this.persistenceKey,e),u=new x(e,t,r);this.setItem(i,u.er())}Vr(e){const t=JSON.stringify(Array.from(e));this.setItem(this.gr,t)}vr(e){const t=this.dr.exec(e);return t?t[1]:null}Dr(e,t){const r=this.vr(e);return k.tr(r,t)}Cr(e,t){const r=this._r.exec(e),i=Number(r[1]);return S.tr(new Pr(void 0!==r[2]?r[2]:null),i,t)}kr(e,t){const r=this.wr.exec(e),i=Number(r[1]);return x.tr(i,t)}pr(e){return j.tr(e)}Or(e){return JSON.parse(e)}Nr(e){var t=this;return(0,Ee.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.$r(e.batchId,e.state,e.error);ke("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}Mr(e){return this.syncEngine.Br(e.targetId,e.state,e.error)}Sr(e,t){const r=t?this.ar.insert(e,t):this.ar.remove(e),i=this.Tr(this.ar),u=this.Tr(r),c=[],p=[];return u.forEach(y=>{i.has(y)||c.push(y)}),i.forEach(y=>{u.has(y)||p.push(y)}),this.syncEngine.Lr(c,p).then(()=>{this.ar=r})}Ir(e){this.ar.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Tr(e){let t=Fp();return e.forEach((r,i)=>{t=t.unionWith(i.activeTargetIds)}),t}}class Fe{constructor(){this.Ur=new Q,this.qr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e){return this.Ur.nr(e),this.qr[e]||"not-current"}updateQueryState(e,t,r){this.qr[e]=t}removeLocalQueryTarget(e){this.Ur.sr(e)}isLocalQueryTarget(e){return this.Ur.activeTargetIds.has(e)}clearQueryState(e){delete this.qr[e]}getAllActiveQueryTargets(){return this.Ur.activeTargetIds}isActiveQueryTarget(e){return this.Ur.activeTargetIds.has(e)}start(){return this.Ur=new Q,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class Ge{Kr(e){}shutdown(){}}class st{constructor(){this.Gr=()=>this.Qr(),this.jr=()=>this.Wr(),this.zr=[],this.Hr()}Kr(e){this.zr.push(e)}shutdown(){window.removeEventListener("online",this.Gr),window.removeEventListener("offline",this.jr)}Hr(){window.addEventListener("online",this.Gr),window.addEventListener("offline",this.jr)}Qr(){ke("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.zr)e(0)}Wr(){ke("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.zr)e(1)}static vt(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const Me={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"};class mt{constructor(e){this.Jr=e.Jr,this.Yr=e.Yr}Xr(e){this.Zr=e}eo(e){this.no=e}onMessage(e){this.so=e}close(){this.Yr()}send(e){this.Jr(e)}io(){this.Zr()}ro(e){this.no(e)}oo(e){this.so(e)}}class Ht extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.uo=(e.ssl?"https":"http")+"://"+e.host,this.ao="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}co(e,t,r,i,u){const c=this.ho(e,t);ke("RestConnection","Sending: ",c,r);const p={};return this.lo(p,i,u),this.fo(e,c,p,r).then(y=>(ke("RestConnection","Received: ",y),y),y=>{throw mp("RestConnection",`${e} failed with error: `,y,"url: ",c,"request:",r),y})}_o(e,t,r,i,u){return this.co(e,t,r,i,u)}lo(e,t,r){e["X-Goog-Api-Client"]="gl-js/ fire/"+Tc,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((i,u)=>e[u]=i),r&&r.headers.forEach((i,u)=>e[u]=i)}ho(e,t){return`${this.uo}/v1/${t}:${Me[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}fo(e,t,r,i){return new Promise((u,c)=>{const p=new yb;p.listenOnce(Gn.COMPLETE,()=>{try{switch(p.getLastErrorCode()){case bh.NO_ERROR:const b=p.getResponseJson();ke("Connection","XHR received:",JSON.stringify(b)),u(b);break;case bh.TIMEOUT:ke("Connection",'RPC "'+e+'" timed out'),c(new Re(ce.DEADLINE_EXCEEDED,"Request time out"));break;case bh.HTTP_ERROR:const A=p.getStatus();if(ke("Connection",'RPC "'+e+'" failed with status:',A,"response text:",p.getResponseText()),A>0){const M=p.getResponseJson().error;if(M&&M.status&&M.message){const F=function(V){const B=V.toLowerCase().replace(/_/g,"-");return Object.values(ce).indexOf(B)>=0?B:ce.UNKNOWN}(M.status);c(new Re(F,M.message))}else c(new Re(ce.UNKNOWN,"Server responded with status "+p.getStatus()))}else c(new Re(ce.UNAVAILABLE,"Connection failed."));break;default:it()}}finally{ke("Connection",'RPC "'+e+'" completed.')}});const y=JSON.stringify(i);p.send(t,"POST",y,r,15)})}wo(e,t,r){const i=[this.uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],u=qC(),c=ny(),p={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(p.xmlHttpFactory=new zC({})),this.lo(p.initMessageHeaders,t,r),(0,xt.uI)()||(0,xt.b$)()||(0,xt.d)()||(0,xt.w1)()||(0,xt.Mn)()||(0,xt.ru)()||(p.httpHeadersOverwriteParam="$httpHeaders");const y=i.join("");ke("Connection","Creating WebChannel: "+y,p);const b=u.createWebChannel(y,p);let A=!1,M=!1;const F=new mt({Jr:B=>{M?ke("Connection","Not sending because WebChannel is closed:",B):(A||(ke("Connection","Opening WebChannel transport."),b.open(),A=!0),ke("Connection","WebChannel sending:",B),b.send(B))},Yr:()=>b.close()}),V=(B,se,Te)=>{B.listen(se,He=>{try{Te(He)}catch(nt){setTimeout(()=>{throw nt},0)}})};return V(b,ry.EventType.OPEN,()=>{M||ke("Connection","WebChannel transport opened.")}),V(b,ry.EventType.CLOSE,()=>{M||(M=!0,ke("Connection","WebChannel transport closed"),F.ro())}),V(b,ry.EventType.ERROR,B=>{M||(M=!0,mp("Connection","WebChannel transport errored:",B),F.ro(new Re(ce.UNAVAILABLE,"The operation could not be completed")))}),V(b,ry.EventType.MESSAGE,B=>{var se;if(!M){const Te=B.data[0];St(!!Te);const He=Te,nt=He.error||(null===(se=He[0])||void 0===se?void 0:se.error);if(nt){ke("Connection","WebChannel received error:",nt);const tt=nt.status;let qe=function(Rt){const Yt=Wn[Rt];if(void 0!==Yt)return nI(Yt)}(tt),At=nt.message;void 0===qe&&(qe=ce.INTERNAL,At="Unknown error status: "+tt+" with message "+nt.message),M=!0,F.ro(new Re(qe,At)),b.close()}else ke("Connection","WebChannel received:",Te),F.oo(Te)}}),V(c,OM.STAT_EVENT,B=>{B.stat===tE.PROXY?ke("Connection","Detected buffering proxy"):B.stat===tE.NOPROXY&&ke("Connection","Detected no buffering proxy")}),setTimeout(()=>{F.io()},0),F}}function rn(){return"undefined"!=typeof window?window:null}function bi(){return"undefined"!=typeof document?document:null}function No(n){return new ki(n,!0)}class Zp{constructor(e,t,r=1e3,i=1.5,u=6e4){this.Yn=e,this.timerId=t,this.mo=r,this.yo=i,this.po=u,this.Io=0,this.To=null,this.Eo=Date.now(),this.reset()}reset(){this.Io=0}Ao(){this.Io=this.po}Ro(e){this.cancel();const t=Math.floor(this.Io+this.bo()),r=Math.max(0,Date.now()-this.Eo),i=Math.max(0,t-r);i>0&&ke("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Io} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.To=this.Yn.enqueueAfterDelay(this.timerId,i,()=>(this.Eo=Date.now(),e())),this.Io*=this.yo,this.Io<this.mo&&(this.Io=this.mo),this.Io>this.po&&(this.Io=this.po)}Po(){null!==this.To&&(this.To.skipDelay(),this.To=null)}cancel(){null!==this.To&&(this.To.cancel(),this.To=null)}bo(){return(Math.random()-.5)*this.Io}}class Ny{constructor(e,t,r,i,u,c,p,y){this.Yn=e,this.Vo=r,this.vo=i,this.So=u,this.authCredentialsProvider=c,this.appCheckCredentialsProvider=p,this.listener=y,this.state=0,this.Do=0,this.Co=null,this.xo=null,this.stream=null,this.No=new Zp(e,t)}ko(){return 1===this.state||5===this.state||this.Mo()}Mo(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Oo()}stop(){var e=this;return(0,Ee.Z)(function*(){e.ko()&&(yield e.close(0))})()}Fo(){this.state=0,this.No.reset()}$o(){this.Mo()&&null===this.Co&&(this.Co=this.Yn.enqueueAfterDelay(this.Vo,6e4,()=>this.Bo()))}Lo(e){this.Uo(),this.stream.send(e)}Bo(){var e=this;return(0,Ee.Z)(function*(){if(e.Mo())return e.close(0)})()}Uo(){this.Co&&(this.Co.cancel(),this.Co=null)}qo(){this.xo&&(this.xo.cancel(),this.xo=null)}close(e,t){var r=this;return(0,Ee.Z)(function*(){r.Uo(),r.qo(),r.No.cancel(),r.Do++,4!==e?r.No.reset():t&&t.code===ce.RESOURCE_EXHAUSTED?(cr(t.toString()),cr("Using maximum backoff delay to prevent overloading the backend."),r.No.Ao()):t&&t.code===ce.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.Ko(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.eo(t)})()}Ko(){}auth(){this.state=1;const e=this.Go(this.Do),t=this.Do;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Do===t&&this.Qo(r,i)},r=>{e(()=>{const i=new Re(ce.UNKNOWN,"Fetching auth token failed: "+r.message);return this.jo(i)})})}Qo(e,t){const r=this.Go(this.Do);this.stream=this.Wo(e,t),this.stream.Xr(()=>{r(()=>(this.state=2,this.xo=this.Yn.enqueueAfterDelay(this.vo,1e4,()=>(this.Mo()&&(this.state=3),Promise.resolve())),this.listener.Xr()))}),this.stream.eo(i=>{r(()=>this.jo(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}Oo(){var e=this;this.state=5,this.No.Ro((0,Ee.Z)(function*(){e.state=0,e.start()}))}jo(e){return ke("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Go(e){return t=>{this.Yn.enqueueAndForget(()=>this.Do===e?t():(ke("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class JE extends Ny{constructor(e,t,r,i,u,c){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,c),this.M=u}Wo(e,t){return this.So.wo("Listen",e,t)}onMessage(e){this.No.reset();const t=function TE(n,e){let t;if("targetChange"in e){const r="NO_CHANGE"===(y=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===y?1:"REMOVE"===y?2:"CURRENT"===y?3:"RESET"===y?4:it(),i=e.targetChange.targetIds||[],u=function(y,b){return y.N?(St(void 0===b||"string"==typeof b),br.fromBase64String(b||"")):(St(void 0===b||b instanceof Uint8Array),br.fromUint8Array(b||new Uint8Array))}(n,e.targetChange.resumeToken),c=e.targetChange.cause,p=c&&function(y){const b=void 0===y.code?ce.UNKNOWN:nI(y.code);return new Re(b,y.message||"")}(c);t=new bE(r,i,u,p||null)}else if("documentChange"in e){const r=e.documentChange,i=Ta(n,r.document.name),u=Zr(r.document.updateTime),c=new vi({mapValue:{fields:r.document.fields}}),p=mn.newFoundDocument(i,u,c);t=new gy(r.targetIds||[],r.removedTargetIds||[],p.key,p)}else if("documentDelete"in e){const r=e.documentDelete,i=Ta(n,r.document),u=r.readTime?Zr(r.readTime):Tt.min(),c=mn.newNoDocument(i,u);t=new gy([],r.removedTargetIds||[],c.key,c)}else if("documentRemove"in e){const r=e.documentRemove,i=Ta(n,r.document);t=new gy([],r.removedTargetIds||[],i,null)}else{if(!("filter"in e))return it();{const r=e.filter,u=new eI(r.count||0);t=new wE(r.targetId,u)}}var y;return t}(this.M,e),r=function(i){if(!("targetChange"in i))return Tt.min();const u=i.targetChange;return u.targetIds&&u.targetIds.length?Tt.min():u.readTime?Zr(u.readTime):Tt.min()}(e);return this.listener.zo(t,r)}Ho(e){const t={};t.database=Lp(this.M),t.addTarget=function(i,u){let c;const p=u.target;return c=ay(p)?{documents:AE(i,p)}:{query:Vp(i,p)},c.targetId=u.targetId,u.resumeToken.approximateByteSize()>0?c.resumeToken=lI(i,u.resumeToken):u.snapshotVersion.compareTo(Tt.min())>0&&(c.readTime=Ca(i,u.snapshotVersion.toTimestamp())),c}(this.M,e);const r=function pT(n,e){const t=function(r,i){switch(i){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return it()}}(0,e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);r&&(t.labels=r),this.Lo(t)}Jo(e){const t={};t.database=Lp(this.M),t.removeTarget=e,this.Lo(t)}}class XE extends Ny{constructor(e,t,r,i,u,c){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,c),this.M=u,this.Yo=!1}get Xo(){return this.Yo}start(){this.Yo=!1,this.lastStreamToken=void 0,super.start()}Ko(){this.Yo&&this.Zo([])}Wo(e,t){return this.So.wo("Write",e,t)}onMessage(e){if(St(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Yo){this.No.reset();const t=function fT(n,e){return n&&n.length>0?(St(void 0!==e),n.map(t=>function(r,i){let u=Zr(r.updateTime?r.updateTime:i);return u.isEqual(Tt.min())&&(u=Zr(i)),new uT(u,r.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),r=Zr(e.commitTime);return this.listener.tu(r,t)}return St(!e.writeResults||0===e.writeResults.length),this.Yo=!0,this.listener.eu()}nu(){const e={};e.database=Lp(this.M),this.Lo(e)}Zo(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>vy(this.M,r))};this.Lo(t)}}class e0 extends class{}{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.So=r,this.M=i,this.su=!1}iu(){if(this.su)throw new Re(ce.FAILED_PRECONDITION,"The client has already been terminated.")}co(e,t,r){return this.iu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,u])=>this.So.co(e,t,r,i,u)).catch(i=>{throw"FirebaseError"===i.name?(i.code===ce.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new Re(ce.UNKNOWN,i.toString())})}_o(e,t,r){return this.iu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,u])=>this.So._o(e,t,r,i,u)).catch(i=>{throw"FirebaseError"===i.name?(i.code===ce.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new Re(ce.UNKNOWN,i.toString())})}terminate(){this.su=!0}}class t0{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.ru=0,this.ou=null,this.uu=!0}au(){0===this.ru&&(this.cu("Unknown"),this.ou=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.ou=null,this.hu("Backend didn't respond within 10 seconds."),this.cu("Offline"),Promise.resolve())))}lu(e){"Online"===this.state?this.cu("Unknown"):(this.ru++,this.ru>=1&&(this.fu(),this.hu(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.cu("Offline")))}set(e){this.fu(),this.ru=0,"Online"===e&&(this.uu=!1),this.cu(e)}cu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}hu(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.uu?(cr(t),this.uu=!1):ke("OnlineStateTracker",t)}fu(){null!==this.ou&&(this.ou.cancel(),this.ou=null)}}class n0{constructor(e,t,r,i,u){var c=this;this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.du=[],this._u=new Map,this.wu=new Set,this.mu=[],this.gu=u,this.gu.Kr(p=>{r.enqueueAndForget((0,Ee.Z)(function*(){var y;Zh(c)&&(ke("RemoteStore","Restarting streams for network reachability change."),yield(y=(0,Ee.Z)(function*(b){const A=Ze(b);A.wu.add(4),yield Oy(A),A.yu.set("Unknown"),A.wu.delete(4),yield Jc(A)}),function(b){return y.apply(this,arguments)})(c))}))}),this.yu=new t0(r,i)}}function Jc(n){return Yp.apply(this,arguments)}function Yp(){return Yp=(0,Ee.Z)(function*(n){if(Zh(n))for(const e of n.mu)yield e(!0)}),Yp.apply(this,arguments)}function Oy(n){return LT.apply(this,arguments)}function LT(){return LT=(0,Ee.Z)(function*(n){for(const e of n.mu)yield e(!1)}),LT.apply(this,arguments)}function WI(n,e){const t=Ze(n);t._u.has(e.targetId)||(t._u.set(e.targetId,e),BT(t)?UT(t):Fy(t).Mo()&&VT(t,e))}function r0(n,e){const t=Ze(n),r=Fy(t);t._u.delete(e),r.Mo()&&nx(t,e),0===t._u.size&&(r.Mo()?r.$o():Zh(t)&&t.yu.set("Unknown"))}function VT(n,e){n.pu.Z(e.targetId),Fy(n).Ho(e)}function nx(n,e){n.pu.Z(e),Fy(n).Jo(e)}function UT(n){n.pu=new sI({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>n._u.get(e)||null}),Fy(n).start(),n.yu.au()}function BT(n){return Zh(n)&&!Fy(n).ko()&&n._u.size>0}function Zh(n){return 0===Ze(n).wu.size}function rx(n){n.pu=void 0}function eO(n){return jT.apply(this,arguments)}function jT(){return jT=(0,Ee.Z)(function*(n){n._u.forEach((e,t)=>{VT(n,e)})}),jT.apply(this,arguments)}function tO(n,e){return HT.apply(this,arguments)}function HT(){return HT=(0,Ee.Z)(function*(n,e){rx(n),BT(n)?(n.yu.lu(e),UT(n)):n.yu.set("Unknown")}),HT.apply(this,arguments)}function nO(n,e,t){return $T.apply(this,arguments)}function $T(){return $T=(0,Ee.Z)(function*(n,e,t){if(n.yu.set("Online"),e instanceof bE&&2===e.state&&e.cause)try{yield(r=(0,Ee.Z)(function*(i,u){const c=u.cause;for(const p of u.targetIds)i._u.has(p)&&(yield i.remoteSyncer.rejectListen(p,c),i._u.delete(p),i.pu.removeTarget(p))}),function(i,u){return r.apply(this,arguments)})(n,e)}catch(r){ke("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield KI(n,r)}else if(e instanceof gy?n.pu.ut(e):e instanceof wE?n.pu._t(e):n.pu.ht(e),!t.isEqual(Tt.min()))try{const r=yield Py(n.localStore);t.compareTo(r)>=0&&(yield function(i,u){const c=i.pu.yt(u);return c.targetChanges.forEach((p,y)=>{if(p.resumeToken.approximateByteSize()>0){const b=i._u.get(y);b&&i._u.set(y,b.withResumeToken(p.resumeToken,u))}}),c.targetMismatches.forEach(p=>{const y=i._u.get(p);if(!y)return;i._u.set(p,y.withResumeToken(br.EMPTY_BYTE_STRING,y.snapshotVersion)),nx(i,p);const b=new $c(y.target,p,1,y.sequenceNumber);VT(i,b)}),i.remoteSyncer.applyRemoteEvent(c)}(n,t))}catch(r){ke("RemoteStore","Failed to raise snapshot:",r),yield KI(n,r)}var r}),$T.apply(this,arguments)}function KI(n,e,t){return GT.apply(this,arguments)}function GT(){return GT=(0,Ee.Z)(function*(n,e,t){if(!Hc(e))throw e;n.wu.add(1),yield Oy(n),n.yu.set("Offline"),t||(t=()=>Py(n.localStore)),n.asyncQueue.enqueueRetryable((0,Ee.Z)(function*(){ke("RemoteStore","Retrying IndexedDB access"),yield t(),n.wu.delete(1),yield Jc(n)}))}),GT.apply(this,arguments)}function ix(n,e){return e().catch(t=>KI(n,t,e))}function ky(n){return qT.apply(this,arguments)}function qT(){return qT=(0,Ee.Z)(function*(n){const e=Ze(n),t=Yh(e);let r=e.du.length>0?e.du[e.du.length-1].batchId:-1;for(;rO(e);)try{const i=yield YE(e.localStore,r);if(null===i){0===e.du.length&&t.$o();break}r=i.batchId,iO(e,i)}catch(i){yield KI(e,i)}sx(e)&&ox(e)}),qT.apply(this,arguments)}function rO(n){return Zh(n)&&n.du.length<10}function iO(n,e){n.du.push(e);const t=Yh(n);t.Mo()&&t.Xo&&t.Zo(e.mutations)}function sx(n){return Zh(n)&&!Yh(n).ko()&&n.du.length>0}function ox(n){Yh(n).start()}function sO(n){return zT.apply(this,arguments)}function zT(){return zT=(0,Ee.Z)(function*(n){Yh(n).nu()}),zT.apply(this,arguments)}function oO(n){return WT.apply(this,arguments)}function WT(){return WT=(0,Ee.Z)(function*(n){const e=Yh(n);for(const t of n.du)e.Zo(t.mutations)}),WT.apply(this,arguments)}function aO(n,e,t){return KT.apply(this,arguments)}function KT(){return KT=(0,Ee.Z)(function*(n,e,t){const r=n.du.shift(),i=OE.from(r,e,t);yield ix(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield ky(n)}),KT.apply(this,arguments)}function uO(n,e){return ZT.apply(this,arguments)}function ZT(){return ZT=(0,Ee.Z)(function*(n,e){var t;e&&Yh(n).Xo&&(yield(t=(0,Ee.Z)(function*(r,i){if(tI(u=i.code)&&u!==ce.ABORTED){const c=r.du.shift();Yh(r).Fo(),yield ix(r,()=>r.remoteSyncer.rejectFailedWrite(c.batchId,i)),yield ky(r)}var u}),function(r,i){return t.apply(this,arguments)})(n,e)),sx(n)&&ox(n)}),ZT.apply(this,arguments)}function ax(n,e){return YT.apply(this,arguments)}function YT(){return YT=(0,Ee.Z)(function*(n,e){const t=Ze(n);t.asyncQueue.verifyOperationInProgress(),ke("RemoteStore","RemoteStore received new credentials");const r=Zh(t);t.wu.add(3),yield Oy(t),r&&t.yu.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.wu.delete(3),yield Jc(t)}),YT.apply(this,arguments)}function QT(n,e){return JT.apply(this,arguments)}function JT(){return JT=(0,Ee.Z)(function*(n,e){const t=Ze(n);e?(t.wu.delete(2),yield Jc(t)):e||(t.wu.add(2),yield Oy(t),t.yu.set("Unknown"))}),JT.apply(this,arguments)}function Fy(n){return n.Iu||(n.Iu=function(e,t,r){const i=Ze(e);return i.iu(),new JE(t,i.So,i.authCredentials,i.appCheckCredentials,i.M,r)}(n.datastore,n.asyncQueue,{Xr:eO.bind(null,n),eo:tO.bind(null,n),zo:nO.bind(null,n)}),n.mu.push(function(){var e=(0,Ee.Z)(function*(t){t?(n.Iu.Fo(),BT(n)?UT(n):n.yu.set("Unknown")):(yield n.Iu.stop(),rx(n))});return function(t){return e.apply(this,arguments)}}())),n.Iu}function Yh(n){return n.Tu||(n.Tu=function(e,t,r){const i=Ze(e);return i.iu(),new XE(t,i.So,i.authCredentials,i.appCheckCredentials,i.M,r)}(n.datastore,n.asyncQueue,{Xr:sO.bind(null,n),eo:uO.bind(null,n),eu:oO.bind(null,n),tu:aO.bind(null,n)}),n.mu.push(function(){var e=(0,Ee.Z)(function*(t){t?(n.Tu.Fo(),yield ky(n)):(yield n.Tu.stop(),n.du.length>0&&(ke("RemoteStore",`Stopping write stream with ${n.du.length} pending writes`),n.du=[]))});return function(t){return e.apply(this,arguments)}}())),n.Tu}class XT{constructor(e,t,r,i,u){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=u,this.deferred=new qn,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(c=>{})}static createAndSchedule(e,t,r,i,u){const c=Date.now()+r,p=new XT(e,t,c,i,u);return p.start(r),p}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Re(ce.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Ly(n,e){if(cr("AsyncQueue",`${e}: ${n}`),Hc(n))return new Re(ce.UNAVAILABLE,`${e}: ${n}`);throw n}class Vy{constructor(e){this.comparator=e?(t,r)=>e(t,r)||$e.comparator(t.key,r.key):(t,r)=>$e.comparator(t.key,r.key),this.keyedMap=kp(),this.sortedSet=new nr(this.comparator)}static emptySet(e){return new Vy(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Vy)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const i=t.getNext().key,u=r.getNext().key;if(!i.isEqual(u))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const r=new Vy;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class ux{constructor(){this.Eu=new nr($e.comparator)}track(e){const t=e.doc.key,r=this.Eu.get(t);r?0!==e.type&&3===r.type?this.Eu=this.Eu.insert(t,e):3===e.type&&1!==r.type?this.Eu=this.Eu.insert(t,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.Eu=this.Eu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.Eu=this.Eu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.Eu=this.Eu.remove(t):1===e.type&&2===r.type?this.Eu=this.Eu.insert(t,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.Eu=this.Eu.insert(t,{type:2,doc:e.doc}):it():this.Eu=this.Eu.insert(t,e)}Au(){const e=[];return this.Eu.inorderTraversal((t,r)=>{e.push(r)}),e}}class Uy{constructor(e,t,r,i,u,c,p,y){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=u,this.fromCache=c,this.syncStateChanged=p,this.excludesMetadataChanges=y}static fromInitialDocuments(e,t,r,i){const u=[];return t.forEach(c=>{u.push({type:0,doc:c})}),new Uy(e,t,Vy.emptySet(t),u,r,i,!0,!1)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Nh(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}}class lO{constructor(){this.Ru=void 0,this.listeners=[]}}class cO{constructor(){this.queries=new Lc(e=>dy(e),Nh),this.onlineState="Unknown",this.bu=new Set}}function eA(n,e){return tA.apply(this,arguments)}function tA(){return tA=(0,Ee.Z)(function*(n,e){const t=Ze(n),r=e.query;let i=!1,u=t.queries.get(r);if(u||(i=!0,u=new lO),i)try{u.Ru=yield t.onListen(r)}catch(c){const p=Ly(c,`Initialization of query '${pE(e.query)}' failed`);return void e.onError(p)}t.queries.set(r,u),u.listeners.push(e),e.Pu(t.onlineState),u.Ru&&e.Vu(u.Ru)&&iA(t)}),tA.apply(this,arguments)}function nA(n,e){return rA.apply(this,arguments)}function rA(){return rA=(0,Ee.Z)(function*(n,e){const t=Ze(n),r=e.query;let i=!1;const u=t.queries.get(r);if(u){const c=u.listeners.indexOf(e);c>=0&&(u.listeners.splice(c,1),i=0===u.listeners.length)}if(i)return t.queries.delete(r),t.onUnlisten(r)}),rA.apply(this,arguments)}function dO(n,e){const t=Ze(n);let r=!1;for(const i of e){const c=t.queries.get(i.query);if(c){for(const p of c.listeners)p.Vu(i)&&(r=!0);c.Ru=i}}r&&iA(t)}function hO(n,e,t){const r=Ze(n),i=r.queries.get(e);if(i)for(const u of i.listeners)u.onError(t);r.queries.delete(e)}function iA(n){n.bu.forEach(e=>{e.next()})}class sA{constructor(e,t,r){this.query=e,this.vu=t,this.Su=!1,this.Du=null,this.onlineState="Unknown",this.options=r||{}}Vu(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)3!==i.type&&r.push(i);e=new Uy(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0)}let t=!1;return this.Su?this.Cu(e)&&(this.vu.next(e),t=!0):this.xu(e,this.onlineState)&&(this.Nu(e),t=!0),this.Du=e,t}onError(e){this.vu.error(e)}Pu(e){this.onlineState=e;let t=!1;return this.Du&&!this.Su&&this.xu(this.Du,e)&&(this.Nu(this.Du),t=!0),t}xu(e,t){return!e.fromCache||!(this.options.ku&&"Offline"!==t||e.docs.isEmpty()&&"Offline"!==t)}Cu(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Du&&this.Du.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}Nu(e){e=Uy.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache),this.Su=!0,this.vu.next(e)}}class fO{constructor(e,t){this.payload=e,this.byteLength=t}Mu(){return"metadata"in this.payload}}class lx{constructor(e){this.M=e}wi(e){return Ta(this.M,e)}mi(e){return e.metadata.exists?CE(this.M,e.document,!1):mn.newNoDocument(this.wi(e.metadata.name),this.gi(e.metadata.readTime))}gi(e){return Zr(e)}}class pO{constructor(e,t,r){this.Ou=e,this.localStore=t,this.M=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=cx(e)}Fu(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.payload.namedQuery)this.queries.push(e.payload.namedQuery);else if(e.payload.documentMetadata){this.documents.push({metadata:e.payload.documentMetadata}),e.payload.documentMetadata.exists||++t;const r=Kt.fromString(e.payload.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.payload.document&&(this.documents[this.documents.length-1].document=e.payload.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}$u(e){const t=new Map,r=new lx(this.M);for(const i of e)if(i.metadata.queries){const u=r.wi(i.metadata.name);for(const c of i.metadata.queries){const p=(t.get(c)||un()).add(u);t.set(c,p)}}return t}complete(){var e=this;return(0,Ee.Z)(function*(){const t=yield function JM(n,e,t,r){return GI.apply(this,arguments)}(e.localStore,new lx(e.M),e.documents,e.Ou.id),r=e.$u(e.documents);for(const i of e.queries)yield XM(e.localStore,i,r.get(i.name));return e.progress.taskState="Success",{progress:e.progress,Bu:e.collectionGroups,Lu:t}})()}}function cx(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class dx{constructor(e){this.key=e}}class hx{constructor(e){this.key=e}}class fx{constructor(e,t){this.query=e,this.Uu=t,this.qu=null,this.current=!1,this.Ku=un(),this.mutatedKeys=un(),this.Gu=qb(e),this.Qu=new Vy(this.Gu)}get ju(){return this.Uu}Wu(e,t){const r=t?t.zu:new ux,i=t?t.Qu:this.Qu;let u=t?t.mutatedKeys:this.mutatedKeys,c=i,p=!1;const y="F"===this.query.limitType&&i.size===this.query.limit?i.last():null,b="L"===this.query.limitType&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((A,M)=>{const F=i.get(A),V=gE(this.query,M)?M:null,B=!!F&&this.mutatedKeys.has(F.key),se=!!V&&(V.hasLocalMutations||this.mutatedKeys.has(V.key)&&V.hasCommittedMutations);let Te=!1;F&&V?F.data.isEqual(V.data)?B!==se&&(r.track({type:3,doc:V}),Te=!0):this.Hu(F,V)||(r.track({type:2,doc:V}),Te=!0,(y&&this.Gu(V,y)>0||b&&this.Gu(V,b)<0)&&(p=!0)):!F&&V?(r.track({type:0,doc:V}),Te=!0):F&&!V&&(r.track({type:1,doc:F}),Te=!0,(y||b)&&(p=!0)),Te&&(V?(c=c.add(V),u=se?u.add(A):u.delete(A)):(c=c.delete(A),u=u.delete(A)))}),null!==this.query.limit)for(;c.size>this.query.limit;){const A="F"===this.query.limitType?c.last():c.first();c=c.delete(A.key),u=u.delete(A.key),r.track({type:1,doc:A})}return{Qu:c,zu:r,ii:p,mutatedKeys:u}}Hu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r){const i=this.Qu;this.Qu=e.Qu,this.mutatedKeys=e.mutatedKeys;const u=e.zu.Au();u.sort((b,A)=>function(M,F){const V=B=>{switch(B){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return it()}};return V(M)-V(F)}(b.type,A.type)||this.Gu(b.doc,A.doc)),this.Ju(r);const c=t?this.Yu():[],p=0===this.Ku.size&&this.current?1:0,y=p!==this.qu;return this.qu=p,0!==u.length||y?{snapshot:new Uy(this.query,e.Qu,i,u,e.mutatedKeys,0===p,y,!1),Xu:c}:{Xu:c}}Pu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Qu:this.Qu,zu:new ux,mutatedKeys:this.mutatedKeys,ii:!1},!1)):{Xu:[]}}Zu(e){return!this.Uu.has(e)&&!!this.Qu.has(e)&&!this.Qu.get(e).hasLocalMutations}Ju(e){e&&(e.addedDocuments.forEach(t=>this.Uu=this.Uu.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Uu=this.Uu.delete(t)),this.current=e.current)}Yu(){if(!this.current)return[];const e=this.Ku;this.Ku=un(),this.Qu.forEach(r=>{this.Zu(r.key)&&(this.Ku=this.Ku.add(r.key))});const t=[];return e.forEach(r=>{this.Ku.has(r)||t.push(new hx(r))}),this.Ku.forEach(r=>{e.has(r)||t.push(new dx(r))}),t}ta(e){this.Uu=e._i,this.Ku=un();const t=this.Wu(e.documents);return this.applyChanges(t,!0)}ea(){return Uy.fromInitialDocuments(this.query,this.Qu,this.mutatedKeys,0===this.qu)}}class gO{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class mO{constructor(e){this.key=e,this.na=!1}}class yO{constructor(e,t,r,i,u,c){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=u,this.maxConcurrentLimboResolutions=c,this.sa={},this.ia=new Lc(p=>dy(p),Nh),this.ra=new Map,this.oa=new Set,this.ua=new nr($e.comparator),this.aa=new Map,this.ca=new zI,this.ha={},this.la=new Map,this.fa=Kc.yn(),this.onlineState="Unknown",this.da=void 0}get isPrimaryClient(){return!0===this.da}}function _O(n,e){return oA.apply(this,arguments)}function oA(){return oA=(0,Ee.Z)(function*(n,e){const t=MA(n);let r,i;const u=t.ia.get(e);if(u)r=u.targetId,t.sharedClientState.addLocalQueryTarget(r),i=u.view.ea();else{const c=yield Wh(t.localStore,ws(e));t.isPrimaryClient&&WI(t.remoteStore,c);const p=t.sharedClientState.addLocalQueryTarget(c.targetId);r=c.targetId,i=yield aA(t,e,r,"current"===p)}return i}),oA.apply(this,arguments)}function aA(n,e,t,r){return uA.apply(this,arguments)}function uA(){return uA=(0,Ee.Z)(function*(n,e,t,r){n._a=(A,M,F)=>{return(V=(0,Ee.Z)(function*(B,se,Te,He){let nt=se.view.Wu(Te);nt.ii&&(nt=yield QE(B.localStore,se.query,!1).then(({documents:At})=>se.view.Wu(At,nt)));const tt=He&&He.targetChanges.get(se.targetId),qe=se.view.applyChanges(nt,B.isPrimaryClient,tt);return _A(B,se.targetId,qe.Xu),qe.snapshot}),function(B,se,Te,He){return V.apply(this,arguments)})(n,A,M,F);var V};const i=yield QE(n.localStore,e,!0),u=new fx(e,i._i),c=u.Wu(i.documents),p=Lh.createSynthesizedTargetChangeForCurrentChange(t,r&&"Offline"!==n.onlineState),y=u.applyChanges(c,n.isPrimaryClient,p);_A(n,t,y.Xu);const b=new gO(e,t,u);return n.ia.set(e,b),n.ra.has(t)?n.ra.get(t).push(e):n.ra.set(t,[e]),y.snapshot}),uA.apply(this,arguments)}function vO(n,e){return lA.apply(this,arguments)}function lA(){return lA=(0,Ee.Z)(function*(n,e){const t=Ze(n),r=t.ia.get(e),i=t.ra.get(r.targetId);if(i.length>1)return t.ra.set(r.targetId,i.filter(u=>!Nh(u,e))),void t.ia.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(r.targetId),t.sharedClientState.isActiveQueryTarget(r.targetId)||(yield Kh(t.localStore,r.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(r.targetId),r0(t.remoteStore,r.targetId),By(t,r.targetId)}).catch(qh))):(By(t,r.targetId),yield Kh(t.localStore,r.targetId,!0))}),lA.apply(this,arguments)}function cA(){return cA=(0,Ee.Z)(function*(n,e,t){const r=xA(n);try{const i=yield function(u,c){const p=Ze(u),y=On.now(),b=c.reduce((M,F)=>M.add(F.key),un());let A;return p.persistence.runTransaction("Locally write mutations","readwrite",M=>p.fi.Ks(M,b).next(F=>{A=F;const V=[];for(const B of c){const se=vE(B,A.get(B.key));null!=se&&V.push(new Fc(B.key,se,sy(se.value.mapValue),kn.exists(!0)))}return p.Bs.addMutationBatch(M,y,V,c)})).then(M=>(M.applyToLocalDocumentSet(A),{batchId:M.batchId,changes:A}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(u,c,p){let y=u.ha[u.currentUser.toKey()];y||(y=new nr(Lt)),y=y.insert(c,p),u.ha[u.currentUser.toKey()]=y}(r,i.batchId,t),yield Xc(r,i.changes),yield ky(r.remoteStore)}catch(i){const u=Ly(i,"Failed to persist write");t.reject(u)}}),cA.apply(this,arguments)}function px(n,e){return dA.apply(this,arguments)}function dA(){return dA=(0,Ee.Z)(function*(n,e){const t=Ze(n);try{const r=yield QM(t.localStore,e);e.targetChanges.forEach((i,u)=>{const c=t.aa.get(u);c&&(St(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?c.na=!0:i.modifiedDocuments.size>0?St(c.na):i.removedDocuments.size>0&&(St(c.na),c.na=!1))}),yield Xc(t,r,e)}catch(r){yield qh(r)}}),dA.apply(this,arguments)}function gx(n,e,t){const r=Ze(n);if(r.isPrimaryClient&&0===t||!r.isPrimaryClient&&1===t){const i=[];r.ia.forEach((u,c)=>{const p=c.view.Pu(e);p.snapshot&&i.push(p.snapshot)}),function(u,c){const p=Ze(u);p.onlineState=c;let y=!1;p.queries.forEach((b,A)=>{for(const M of A.listeners)M.Pu(c)&&(y=!0)}),y&&iA(p)}(r.eventManager,e),i.length&&r.sa.zo(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function wO(n,e,t){return hA.apply(this,arguments)}function hA(){return hA=(0,Ee.Z)(function*(n,e,t){const r=Ze(n);r.sharedClientState.updateQueryState(e,"rejected",t);const i=r.aa.get(e),u=i&&i.key;if(u){let c=new nr($e.comparator);c=c.insert(u,mn.newNoDocument(u,Tt.min()));const p=un().add(u),y=new Uc(Tt.min(),new Map,new vn(Lt),c,p);yield px(r,y),r.ua=r.ua.remove(u),r.aa.delete(e),vA(r)}else yield Kh(r.localStore,e,!1).then(()=>By(r,e,t)).catch(qh)}),hA.apply(this,arguments)}function bO(n,e){return fA.apply(this,arguments)}function fA(){return fA=(0,Ee.Z)(function*(n,e){const t=Ze(n),r=e.batch.batchId;try{const i=yield BI(t.localStore,e);yA(t,r,null),mA(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield Xc(t,i)}catch(i){yield qh(i)}}),fA.apply(this,arguments)}function IO(n,e,t){return pA.apply(this,arguments)}function pA(){return pA=(0,Ee.Z)(function*(n,e,t){const r=Ze(n);try{const i=yield function(u,c){const p=Ze(u);return p.persistence.runTransaction("Reject batch","readwrite-primary",y=>{let b;return p.Bs.lookupMutationBatch(y,c).next(A=>(St(null!==A),b=A.keys(),p.Bs.removeMutationBatch(y,A))).next(()=>p.Bs.performConsistencyCheck(y)).next(()=>p.fi.Ks(y,b))})}(r.localStore,e);yA(r,e,t),mA(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield Xc(r,i)}catch(i){yield qh(i)}}),pA.apply(this,arguments)}function gA(){return gA=(0,Ee.Z)(function*(n,e){const t=Ze(n);Zh(t.remoteStore)||ke("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=yield function(u){const c=Ze(u);return c.persistence.runTransaction("Get highest unacknowledged batch id","readonly",p=>c.Bs.getHighestUnacknowledgedBatchId(p))}(t.localStore);if(-1===r)return void e.resolve();const i=t.la.get(r)||[];i.push(e),t.la.set(r,i)}catch(r){const i=Ly(r,"Initialization of waitForPendingWrites() operation failed");e.reject(i)}}),gA.apply(this,arguments)}function mA(n,e){(n.la.get(e)||[]).forEach(t=>{t.resolve()}),n.la.delete(e)}function yA(n,e,t){const r=Ze(n);let i=r.ha[r.currentUser.toKey()];if(i){const u=i.get(e);u&&(t?u.reject(t):u.resolve(),i=i.remove(e)),r.ha[r.currentUser.toKey()]=i}}function By(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.ra.get(e))n.ia.delete(r),t&&n.sa.wa(r,t);n.ra.delete(e),n.isPrimaryClient&&n.ca.vi(e).forEach(r=>{n.ca.containsKey(r)||mx(n,r)})}function mx(n,e){n.oa.delete(e.path.canonicalString());const t=n.ua.get(e);null!==t&&(r0(n.remoteStore,t),n.ua=n.ua.remove(e),n.aa.delete(t),vA(n))}function _A(n,e,t){for(const r of t)r instanceof dx?(n.ca.addReference(r.key,e),CO(n,r)):r instanceof hx?(ke("SyncEngine","Document no longer in limbo: "+r.key),n.ca.removeReference(r.key,e),n.ca.containsKey(r.key)||mx(n,r.key)):it()}function CO(n,e){const t=e.key,r=t.path.canonicalString();n.ua.get(t)||n.oa.has(r)||(ke("SyncEngine","New document in limbo: "+t),n.oa.add(r),vA(n))}function vA(n){for(;n.oa.size>0&&n.ua.size<n.maxConcurrentLimboResolutions;){const e=n.oa.values().next().value;n.oa.delete(e);const t=new $e(Kt.fromString(e)),r=n.fa.next();n.aa.set(r,new mO(t)),n.ua=n.ua.insert(t,r),WI(n.remoteStore,new $c(ws(Oc(t.path)),r,2,vs.A))}}function Xc(n,e,t){return EA.apply(this,arguments)}function EA(){return EA=(0,Ee.Z)(function*(n,e,t){const r=Ze(n),i=[],u=[],c=[];var p;r.ia.isEmpty()||(r.ia.forEach((p,y)=>{c.push(r._a(y,e,t).then(b=>{if(b){r.isPrimaryClient&&r.sharedClientState.updateQueryState(y.targetId,b.fromCache?"not-current":"current"),i.push(b);const A=qE.Ys(y.targetId,b);u.push(A)}}))}),yield Promise.all(c),r.sa.zo(i),yield(p=(0,Ee.Z)(function*(y,b){const A=Ze(y);try{yield A.persistence.runTransaction("notifyLocalViewChanges","readwrite",M=>de.forEach(b,F=>de.forEach(F.Hs,V=>A.persistence.referenceDelegate.addReference(M,F.targetId,V)).next(()=>de.forEach(F.Js,V=>A.persistence.referenceDelegate.removeReference(M,F.targetId,V)))))}catch(M){if(!Hc(M))throw M;ke("LocalStore","Failed to update sequence numbers: "+M)}for(const M of b){const F=M.targetId;if(!M.fromCache){const V=A.ui.get(F),se=V.withLastLimboFreeSnapshotVersion(V.snapshotVersion);A.ui=A.ui.insert(F,se)}}}),function(y,b){return p.apply(this,arguments)})(r.localStore,u))}),EA.apply(this,arguments)}function TO(n,e){return wA.apply(this,arguments)}function wA(){return wA=(0,Ee.Z)(function*(n,e){const t=Ze(n);if(!t.currentUser.isEqual(e)){ke("SyncEngine","User change. New user:",e.toKey());const r=yield UI(t.localStore,e);t.currentUser=e,(i=t).la.forEach(c=>{c.forEach(p=>{p.reject(new Re(ce.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),i.la.clear(),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield Xc(t,r.di)}var i}),wA.apply(this,arguments)}function AO(n,e){const t=Ze(n),r=t.aa.get(e);if(r&&r.na)return un().add(r.key);{let i=un();const u=t.ra.get(e);if(!u)return i;for(const c of u){const p=t.ia.get(c);i=i.unionWith(p.view.ju)}return i}}function SO(n,e){return bA.apply(this,arguments)}function bA(){return bA=(0,Ee.Z)(function*(n,e){const t=Ze(n),r=yield QE(t.localStore,e.query,!0),i=e.view.ta(r);return t.isPrimaryClient&&_A(t,e.targetId,i.Xu),i}),bA.apply(this,arguments)}function MO(n,e){return IA.apply(this,arguments)}function IA(){return IA=(0,Ee.Z)(function*(n,e){const t=Ze(n);return $I(t.localStore,e).then(r=>Xc(t,r))}),IA.apply(this,arguments)}function xO(n,e,t,r){return DA.apply(this,arguments)}function DA(){return DA=(0,Ee.Z)(function*(n,e,t,r){const i=Ze(n),u=yield function(c,p){const y=Ze(c),b=Ze(y.Bs);return y.persistence.runTransaction("Lookup mutation documents","readonly",A=>b.fn(A,p).next(M=>M?y.fi.Ks(A,M):de.resolve(null)))}(i.localStore,e);var p;null!==u?("pending"===t?yield ky(i.remoteStore):"acknowledged"===t||"rejected"===t?(yA(i,e,r||null),mA(i,e),p=e,Ze(Ze(i.localStore).Bs)._n(p)):it(),yield Xc(i,u)):ke("SyncEngine","Cannot apply mutation batch with id: "+e)}),DA.apply(this,arguments)}function CA(){return CA=(0,Ee.Z)(function*(n,e){const t=Ze(n);if(MA(t),xA(t),!0===e&&!0!==t.da){const r=t.sharedClientState.getAllActiveQueryTargets(),i=yield yx(t,r.toArray());t.da=!0,yield QT(t.remoteStore,!0);for(const u of i)WI(t.remoteStore,u)}else if(!1===e&&!1!==t.da){const r=[];let i=Promise.resolve();t.ra.forEach((u,c)=>{t.sharedClientState.isLocalQueryTarget(c)?r.push(c):i=i.then(()=>(By(t,c),Kh(t.localStore,c,!0))),r0(t.remoteStore,c)}),yield i,yield yx(t,r),function(u){const c=Ze(u);c.aa.forEach((p,y)=>{r0(c.remoteStore,y)}),c.ca.Si(),c.aa=new Map,c.ua=new nr($e.comparator)}(t),t.da=!1,yield QT(t.remoteStore,!1)}}),CA.apply(this,arguments)}function yx(n,e,t){return TA.apply(this,arguments)}function TA(){return TA=(0,Ee.Z)(function*(n,e,t){const r=Ze(n),i=[],u=[];for(const c of e){let p;const y=r.ra.get(c);if(y&&0!==y.length){p=yield Wh(r.localStore,ws(y[0]));for(const b of y){const A=r.ia.get(b),M=yield SO(r,A);M.snapshot&&u.push(M.snapshot)}}else{const b=yield HI(r.localStore,c);p=yield Wh(r.localStore,b),yield aA(r,_x(b),c,!1)}i.push(p)}return r.sa.zo(u),i}),TA.apply(this,arguments)}function _x(n){return Nc(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function PO(n){const e=Ze(n);return Ze(Ze(e.localStore).persistence).Fs()}function NO(n,e,t,r){return AA.apply(this,arguments)}function AA(){return AA=(0,Ee.Z)(function*(n,e,t,r){const i=Ze(n);if(i.da)return void ke("SyncEngine","Ignoring unexpected query state notification.");const u=i.ra.get(e);if(u&&u.length>0)switch(t){case"current":case"not-current":{const c=yield $I(i.localStore,Gb(u[0])),p=Uc.createSynthesizedRemoteEventForCurrentChange(e,"current"===t);yield Xc(i,c,p);break}case"rejected":yield Kh(i.localStore,e,!0),By(i,e,r);break;default:it()}}),AA.apply(this,arguments)}function OO(n,e,t){return SA.apply(this,arguments)}function SA(){return SA=(0,Ee.Z)(function*(n,e,t){const r=MA(n);if(r.da){for(const i of e){if(r.ra.has(i)){ke("SyncEngine","Adding an already active target "+i);continue}const u=yield HI(r.localStore,i),c=yield Wh(r.localStore,u);yield aA(r,_x(u),c.targetId,!1),WI(r.remoteStore,c)}for(const i of t)r.ra.has(i)&&(yield Kh(r.localStore,i,!1).then(()=>{r0(r.remoteStore,i),By(r,i)}).catch(qh))}}),SA.apply(this,arguments)}function MA(n){const e=Ze(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=px.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=AO.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=wO.bind(null,e),e.sa.zo=dO.bind(null,e.eventManager),e.sa.wa=hO.bind(null,e.eventManager),e}function xA(n){const e=Ze(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=bO.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=IO.bind(null,e),e}class vx{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,Ee.Z)(function*(){t.M=No(e.databaseInfo.databaseId),t.sharedClientState=t.ga(e),t.persistence=t.ya(e),yield t.persistence.start(),t.gcScheduler=t.pa(e),t.localStore=t.Ia(e)})()}pa(e){return null}Ia(e){return WE(this.persistence,new zE,e.initialUser,this.M)}ya(e){return new l(g.Yi,this.M)}ga(e){return new Fe}terminate(){var e=this;return(0,Ee.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class Ex extends vx{constructor(e,t,r){super(),this.Ta=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,r=this;return(0,Ee.Z)(function*(){yield t().call(r,e),yield r.Ta.initialize(r,e),yield xA(r.Ta.syncEngine),yield ky(r.Ta.remoteStore),yield r.persistence.Ts(()=>(r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(r.localStore),Promise.resolve()))})()}Ia(e){return WE(this.persistence,new zE,e.initialUser,this.M)}pa(e){return new Sy(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue)}ya(e){const t=GE(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=void 0!==this.cacheSizeBytes?ns.withCacheSize(this.cacheSizeBytes):ns.DEFAULT;return new LI(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,rn(),bi(),this.M,this.sharedClientState,!!this.forceOwnership)}ga(e){return new Fe}}class FO extends Ex{constructor(e,t){super(e,t,!1),this.Ta=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,r=this;return(0,Ee.Z)(function*(){yield t().call(r,e);const i=r.Ta.syncEngine;r.sharedClientState instanceof _e&&(r.sharedClientState.syncEngine={$r:xO.bind(null,i),Br:NO.bind(null,i),Lr:OO.bind(null,i),Fs:PO.bind(null,i),Fr:MO.bind(null,i)},yield r.sharedClientState.start()),yield r.persistence.Ts(function(){var u=(0,Ee.Z)(function*(c){yield function RO(n,e){return CA.apply(this,arguments)}(r.Ta.syncEngine,c),r.gcScheduler&&(c&&!r.gcScheduler.started?r.gcScheduler.start(r.localStore):c||r.gcScheduler.stop())});return function(c){return u.apply(this,arguments)}}())})()}ga(e){const t=rn();if(!_e.vt(t))throw new Re(ce.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=GE(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new _e(t,e.asyncQueue,r,e.clientId,e.initialUser)}}class RA{initialize(e,t){var r=this;return(0,Ee.Z)(function*(){r.localStore||(r.localStore=e.localStore,r.sharedClientState=e.sharedClientState,r.datastore=r.createDatastore(t),r.remoteStore=r.createRemoteStore(t),r.eventManager=r.createEventManager(t),r.syncEngine=r.createSyncEngine(t,!e.synchronizeTabs),r.sharedClientState.onlineStateHandler=i=>gx(r.syncEngine,i,1),r.remoteStore.remoteSyncer.handleCredentialChange=TO.bind(null,r.syncEngine),yield QT(r.remoteStore,r.syncEngine.isPrimaryClient))})()}createEventManager(e){return new cO}createDatastore(e){const t=No(e.databaseInfo.databaseId),r=new Ht(e.databaseInfo);return new e0(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return t=this.localStore,r=this.datastore,i=e.asyncQueue,u=p=>gx(this.syncEngine,p,0),c=st.vt()?new st:new Ge,new n0(t,r,i,u,c);var t,r,i,u,c}createSyncEngine(e,t){return function(r,i,u,c,p,y,b){const A=new yO(r,i,u,c,p,y);return b&&(A.da=!0),A}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,Ee.Z)(function*(t){const r=Ze(t);ke("RemoteStore","RemoteStore shutting down."),r.wu.add(5),yield Oy(r),r.gu.shutdown(),r.yu.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function wx(n,e=10240){let t=0;return{read:()=>(0,Ee.Z)(function*(){if(t<n.byteLength){const r={value:n.slice(t,t+e),done:!1};return t+=e,r}return{done:!0}})(),cancel:()=>(0,Ee.Z)(function*(){})(),releaseLock(){},closed:Promise.reject("unimplemented")}}class ZI{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Ea(this.observer.next,e)}error(e){this.observer.error?this.Ea(this.observer.error,e):console.error("Uncaught Error in snapshot listener:",e)}Aa(){this.muted=!0}Ea(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class LO{constructor(e,t){this.Ra=e,this.M=t,this.metadata=new qn,this.buffer=new Uint8Array,this.ba=new TextDecoder("utf-8"),this.Pa().then(r=>{r&&r.Mu()?this.metadata.resolve(r.payload.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(null==r?void 0:r.payload)}`))},r=>this.metadata.reject(r))}close(){return this.Ra.cancel()}getMetadata(){var e=this;return(0,Ee.Z)(function*(){return e.metadata.promise})()}ma(){var e=this;return(0,Ee.Z)(function*(){return yield e.getMetadata(),e.Pa()})()}Pa(){var e=this;return(0,Ee.Z)(function*(){const t=yield e.Va();if(null===t)return null;const r=e.ba.decode(t),i=Number(r);isNaN(i)&&e.va(`length string (${r}) is not valid number`);const u=yield e.Sa(i);return new fO(JSON.parse(u),t.length+i)})()}Da(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}Va(){var e=this;return(0,Ee.Z)(function*(){for(;e.Da()<0&&!(yield e.Ca()););if(0===e.buffer.length)return null;const t=e.Da();t<0&&e.va("Reached the end of bundle when a length string is expected.");const r=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),r})()}Sa(e){var t=this;return(0,Ee.Z)(function*(){for(;t.buffer.length<e;)(yield t.Ca())&&t.va("Reached the end of bundle when more is expected.");const r=t.ba.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),r})()}va(e){throw this.Ra.cancel(),new Error(`Invalid bundle format: ${e}`)}Ca(){var e=this;return(0,Ee.Z)(function*(){const t=yield e.Ra.read();if(!t.done){const r=new Uint8Array(e.buffer.length+t.value.length);r.set(e.buffer),r.set(t.value,e.buffer.length),e.buffer=r}return t.done})()}}class VO{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,Ee.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new Re(ce.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const r=yield(i=(0,Ee.Z)(function*(u,c){const p=Ze(u),y=Lp(p.M)+"/documents",b={documents:c.map(V=>jc(p.M,V))},A=yield p._o("BatchGetDocuments",y,b),M=new Map;A.forEach(V=>{const B=function _y(n,e){return"found"in e?function(t,r){St(!!r.found);const i=Ta(t,r.found.name),u=Zr(r.found.updateTime),c=new vi({mapValue:{fields:r.found.fields}});return mn.newFoundDocument(i,u,c)}(n,e):"missing"in e?function(t,r){St(!!r.missing),St(!!r.readTime);const i=Ta(t,r.missing),u=Zr(r.readTime);return mn.newNoDocument(i,u)}(n,e):it()}(p.M,V);M.set(B.key.toString(),B)});const F=[];return c.forEach(V=>{const B=M.get(V.toString());St(!!B),F.push(B)}),F}),function(u,c){return i.apply(this,arguments)})(t.datastore,e);var i;return r.forEach(i=>t.recordVersion(i)),r})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastWriteError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new Op(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,Ee.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var r;e.mutations.forEach(r=>{t.delete(r.key.toString())}),t.forEach((r,i)=>{const u=$e.fromPath(i);e.mutations.push(new py(u,e.precondition(u)))}),yield(r=(0,Ee.Z)(function*(i,u){const c=Ze(i),p=Lp(c.M)+"/documents",y={writes:u.map(b=>vy(c.M,b))};yield c.co("Commit",p,y)}),function(i,u){return r.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw it();t=Tt.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new Re(ce.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?kn.updateTime(t):kn.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(Tt.min()))throw new Re(ce.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return kn.updateTime(t)}return kn.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class UO{constructor(e,t,r,i,u){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=i,this.deferred=u,this.xa=r.maxAttempts,this.No=new Zp(this.asyncQueue,"transaction_retry")}run(){this.xa-=1,this.Na()}Na(){var e=this;this.No.Ro((0,Ee.Z)(function*(){const t=new VO(e.datastore),r=e.ka(t);r&&r.then(i=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(i)}).catch(u=>{e.Ma(u)}))}).catch(i=>{e.Ma(i)})}))}ka(e){try{const t=this.updateFunction(e);return!Ac(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Ma(e){this.xa>0&&this.Oa(e)?(this.xa-=1,this.asyncQueue.enqueueAndForget(()=>(this.Na(),Promise.resolve()))):this.deferred.reject(e)}Oa(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||!tI(t)}return!1}}class BO{constructor(e,t,r,i){var u=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=Pr.UNAUTHENTICATED,this.clientId=YC.R(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,function(){var c=(0,Ee.Z)(function*(p){ke("FirestoreClient","Received user=",p.uid),yield u.authCredentialListener(p),u.user=p});return function(p){return c.apply(this,arguments)}}()),this.appCheckCredentials.start(r,c=>(ke("FirestoreClient","Received new app check token=",c),this.appCheckCredentialListener(c,this.user)))}getConfiguration(){var e=this;return(0,Ee.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Re(ce.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new qn;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,Ee.Z)(function*(){try{e.onlineComponents&&(yield e.onlineComponents.terminate()),e.offlineComponents&&(yield e.offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(r){const i=Ly(r,"Failed to shutdown persistence");t.reject(i)}})),t.promise}}function bx(n,e){return PA.apply(this,arguments)}function PA(){return PA=(0,Ee.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress(),ke("FirestoreClient","Initializing OfflineComponentProvider");const t=yield n.getConfiguration();yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(function(){var i=(0,Ee.Z)(function*(u){r.isEqual(u)||(yield UI(e.localStore,u),r=u)});return function(u){return i.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n.offlineComponents=e}),PA.apply(this,arguments)}function Ix(n,e){return NA.apply(this,arguments)}function NA(){return NA=(0,Ee.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield OA(n);ke("FirestoreClient","Initializing OnlineComponentProvider");const r=yield n.getConfiguration();yield e.initialize(t,r),n.setCredentialChangeListener(i=>ax(e.remoteStore,i)),n.setAppCheckTokenChangeListener((i,u)=>ax(e.remoteStore,u)),n.onlineComponents=e}),NA.apply(this,arguments)}function OA(n){return kA.apply(this,arguments)}function kA(){return kA=(0,Ee.Z)(function*(n){return n.offlineComponents||(ke("FirestoreClient","Using default OfflineComponentProvider"),yield bx(n,new vx)),n.offlineComponents}),kA.apply(this,arguments)}function YI(n){return FA.apply(this,arguments)}function FA(){return FA=(0,Ee.Z)(function*(n){return n.onlineComponents||(ke("FirestoreClient","Using default OnlineComponentProvider"),yield Ix(n,new RA)),n.onlineComponents}),FA.apply(this,arguments)}function Dx(n){return OA(n).then(e=>e.persistence)}function LA(n){return OA(n).then(e=>e.localStore)}function Cx(n){return YI(n).then(e=>e.remoteStore)}function VA(n){return YI(n).then(e=>e.syncEngine)}function jy(n){return UA.apply(this,arguments)}function UA(){return UA=(0,Ee.Z)(function*(n){const e=yield YI(n),t=e.eventManager;return t.onListen=_O.bind(null,e.syncEngine),t.onUnlisten=vO.bind(null,e.syncEngine),t}),UA.apply(this,arguments)}function Tx(n,e,t={}){const r=new qn;return n.asyncQueue.enqueueAndForget((0,Ee.Z)(function*(){return function(i,u,c,p,y){const b=new ZI({next:M=>{u.enqueueAndForget(()=>nA(i,A));const F=M.docs.has(c);!F&&M.fromCache?y.reject(new Re(ce.UNAVAILABLE,"Failed to get document because the client is offline.")):F&&M.fromCache&&p&&"server"===p.source?y.reject(new Re(ce.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):y.resolve(M)},error:M=>y.reject(M)}),A=new sA(Oc(c.path),b,{includeMetadataChanges:!0,ku:!0});return eA(i,A)}(yield jy(n),n.asyncQueue,e,t,r)})),r.promise}function Ax(n,e,t={}){const r=new qn;return n.asyncQueue.enqueueAndForget((0,Ee.Z)(function*(){return function(i,u,c,p,y){const b=new ZI({next:M=>{u.enqueueAndForget(()=>nA(i,A)),M.fromCache&&"server"===p.source?y.reject(new Re(ce.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):y.resolve(M)},error:M=>y.reject(M)}),A=new sA(c,b,{includeMetadataChanges:!0,ku:!0});return eA(i,A)}(yield jy(n),n.asyncQueue,e,t,r)})),r.promise}const Sx=new Map;function BA(n,e,t){if(!t)throw new Re(ce.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function Mx(n,e,t,r){if(!0===e&&!0===r)throw new Re(ce.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function xx(n){if(!$e.isDocumentKey(n))throw new Re(ce.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function Rx(n){if($e.isDocumentKey(n))throw new Re(ce.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function QI(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(t=n).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof n?"a function":it()}function Xt(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new Re(ce.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=QI(n);throw new Re(ce.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function Px(n,e){if(e<=0)throw new Re(ce.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}class Nx{constructor(e){var t;if(void 0===e.host){if(void 0!==e.ssl)throw new Re(ce.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new Re(ce.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,Mx("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class s0{constructor(e,t,r){this._authCredentials=t,this._appCheckCredentials=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Nx({}),this._settingsFrozen=!1,e instanceof vu?this._databaseId=e:(this._app=e,this._databaseId=function(i){if(!Object.prototype.hasOwnProperty.apply(i.options,["projectId"]))throw new Re(ce.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new vu(i.options.projectId)}(e))}get app(){if(!this._app)throw new Re(ce.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Re(ce.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Nx(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new KC;switch(t.type){case"gapi":const r=t.client;return St(!("object"!=typeof r||null===r||!r.auth||!r.auth.getAuthHeaderValueForFirstParty)),new bb(r,t.sessionIndex||"0",t.iamToken||null);case"provider":return t.client;default:throw new Re(ce.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=Sx.get(e);t&&(ke("ComponentProvider","Removing Datastore"),Sx.delete(e),t.terminate())}(this),Promise.resolve()}}class Un{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Sl(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Un(this.firestore,e,this._key)}}class rs{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new rs(this.firestore,e,this._query)}}class Sl extends rs{constructor(e,t,r){super(e,t,Oc(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Un(this.firestore,null,new $e(e))}withConverter(e){return new Sl(this.firestore,e,this._path)}}function Ox(n,e,...t){if(n=(0,xt.m9)(n),BA("collection","path",e),n instanceof s0){const r=Kt.fromString(e,...t);return Rx(r),new Sl(n,null,r)}{if(!(n instanceof Un||n instanceof Sl))throw new Re(ce.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Kt.fromString(e,...t));return Rx(r),new Sl(n.firestore,null,r)}}function JI(n,e,...t){if(n=(0,xt.m9)(n),1===arguments.length&&(e=YC.R()),BA("doc","path",e),n instanceof s0){const r=Kt.fromString(e,...t);return xx(r),new Un(n,null,new $e(r))}{if(!(n instanceof Un||n instanceof Sl))throw new Re(ce.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Kt.fromString(e,...t));return xx(r),new Un(n.firestore,n instanceof Sl?n.converter:null,new $e(r))}}function kx(n,e){return n=(0,xt.m9)(n),e=(0,xt.m9)(e),(n instanceof Un||n instanceof Sl)&&(e instanceof Un||e instanceof Sl)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function Fx(n,e){return n=(0,xt.m9)(n),e=(0,xt.m9)(e),n instanceof rs&&e instanceof rs&&n.firestore===e.firestore&&Nh(n._query,e._query)&&n.converter===e.converter}class QO{constructor(){this.Fa=Promise.resolve(),this.$a=[],this.Ba=!1,this.La=[],this.Ua=null,this.qa=!1,this.Ka=!1,this.Ga=[],this.No=new Zp(this,"async_queue_retry"),this.Qa=()=>{const t=bi();t&&ke("AsyncQueue","Visibility state changed to "+t.visibilityState),this.No.Po()};const e=bi();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Qa)}get isShuttingDown(){return this.Ba}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.ja(),this.Wa(e)}enterRestrictedMode(e){if(!this.Ba){this.Ba=!0,this.Ka=e||!1;const t=bi();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Qa)}}enqueue(e){if(this.ja(),this.Ba)return new Promise(()=>{});const t=new qn;return this.Wa(()=>this.Ba&&this.Ka?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.$a.push(e),this.za()))}za(){var e=this;return(0,Ee.Z)(function*(){if(0!==e.$a.length){try{yield e.$a[0](),e.$a.shift(),e.No.reset()}catch(t){if(!Hc(t))throw t;ke("AsyncQueue","Operation failed with retryable error: "+t)}e.$a.length>0&&e.No.Ro(()=>e.za())}})()}Wa(e){const t=this.Fa.then(()=>(this.qa=!0,e().catch(r=>{throw this.Ua=r,this.qa=!1,cr("INTERNAL UNHANDLED ERROR: ",function(u){let c=u.message||"";return u.stack&&(c=u.stack.includes(u.message)?u.stack:u.message+"\n"+u.stack),c}(r)),r}).then(r=>(this.qa=!1,r))));return this.Fa=t,t}enqueueAfterDelay(e,t,r){this.ja(),this.Ga.indexOf(e)>-1&&(t=0);const i=XT.createAndSchedule(this,e,t,r,u=>this.Ha(u));return this.La.push(i),i}ja(){this.Ua&&it()}verifyOperationInProgress(){}Ja(){var e=this;return(0,Ee.Z)(function*(){let t;do{t=e.Fa,yield t}while(t!==e.Fa)})()}Ya(e){for(const t of this.La)if(t.timerId===e)return!0;return!1}Xa(e){return this.Ja().then(()=>{this.La.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.La)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.Ja()})}Za(e){this.Ga.push(e)}Ha(e){const t=this.La.indexOf(e);this.La.splice(t,1)}}function jA(n){return function(e,t){if("object"!=typeof e||null===e)return!1;const r=e;for(const i of["next","error","complete"])if(i in r&&"function"==typeof r[i])return!0;return!1}(n)}class JO{constructor(){this._progressObserver={},this._taskCompletionResolver=new qn,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class Kn extends s0{constructor(e,t,r){super(e,t,r),this.type="firestore",this._queue=new QO,this._persistenceKey="name"in e?e.name:"[DEFAULT]"}_terminate(){return this._firestoreClient||Lx(this),this._firestoreClient.terminate()}}function Or(n){return n._firestoreClient||Lx(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function Lx(n){var e;const t=n._freezeSettings(),r=(u=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new Ab(n._databaseId,u,n._persistenceKey,(p=t).host,p.ssl,p.experimentalForceLongPolling,p.experimentalAutoDetectLongPolling,p.useFetchStreams));var u,p;n._firestoreClient=new BO(n._authCredentials,n._appCheckCredentials,n._queue,r)}function Vx(n,e,t){const r=new qn;return n.asyncQueue.enqueue((0,Ee.Z)(function*(){try{yield bx(n,t),yield Ix(n,e),r.resolve()}catch(i){if(!("FirebaseError"===(u=i).name?u.code===ce.FAILED_PRECONDITION||u.code===ce.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&u instanceof DOMException)||22===u.code||20===u.code||11===u.code))throw i;console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+i),r.reject(i)}var u})).then(()=>r.promise)}function Ux(n){if(n._initialized||n._terminated)throw new Re(ce.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class ed{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new Re(ce.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new wr(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Ml{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Ml(br.fromBase64String(e))}catch(t){throw new Re(ce.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Ml(br.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class Qp{constructor(e){this._methodName=e}}class XI{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Re(ce.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Re(ce.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Lt(this._lat,e._lat)||Lt(this._long,e._long)}}const uk=/^__.*__$/;class lk{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return null!==this.fieldMask?new Fc(e,this.data,this.fieldMask,t,this.fieldTransforms):new Rp(e,this.data,t,this.fieldTransforms)}}class Bx{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new Fc(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function jx(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw it()}}class eD{constructor(e,t,r,i,u,c){this.settings=e,this.databaseId=t,this.M=r,this.ignoreUndefinedProperties=i,void 0===u&&this.tc(),this.fieldTransforms=u||[],this.fieldMask=c||[]}get path(){return this.settings.path}get ec(){return this.settings.ec}nc(e){return new eD(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.M,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}sc(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.nc({path:r,ic:!1});return i.rc(e),i}oc(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.nc({path:r,ic:!1});return i.tc(),i}uc(e){return this.nc({path:void 0,ic:!0})}ac(e){return rD(e,this.settings.methodName,this.settings.cc||!1,this.path,this.settings.hc)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}tc(){if(this.path)for(let e=0;e<this.path.length;e++)this.rc(this.path.get(e))}rc(e){if(0===e.length)throw this.ac("Document fields must not be empty");if(jx(this.ec)&&uk.test(e))throw this.ac('Document fields cannot begin and end with "__"')}}class ck{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.M=r||No(e)}lc(e,t,r,i=!1){return new eD({ec:e,methodName:t,hc:r,path:wr.emptyPath(),ic:!1,cc:i},this.databaseId,this.M,this.ignoreUndefinedProperties)}}function Jp(n){const e=n._freezeSettings(),t=No(n._databaseId);return new ck(n._databaseId,!!e.ignoreUndefinedProperties,t)}function tD(n,e,t,r,i,u={}){const c=n.lc(u.merge||u.mergeFields?2:0,e,t,i);qA("Data must be an object, but it was:",c,r);const p=Gx(r,c);let y,b;if(u.merge)y=new Dh(c.fieldMask),b=c.fieldTransforms;else if(u.mergeFields){const A=[];for(const M of u.mergeFields){const F=zA(e,M,t);if(!c.contains(F))throw new Re(ce.INVALID_ARGUMENT,`Field '${F}' is specified in your field mask but missing from your input data.`);zx(A,F)||A.push(F)}y=new Dh(A),b=c.fieldTransforms.filter(M=>y.covers(M.field))}else y=null,b=c.fieldTransforms;return new lk(new vi(p),y,b)}class o0 extends Qp{_toFieldTransform(e){if(2!==e.ec)throw e.ac(1===e.ec?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof o0}}function Hx(n,e,t){return new eD({ec:3,hc:e.settings.hc,methodName:n._methodName,ic:t},e.databaseId,e.M,e.ignoreUndefinedProperties)}class HA extends Qp{_toFieldTransform(e){return new xp(e.path,new kc)}isEqual(e){return e instanceof HA}}class dk extends Qp{constructor(e,t){super(e),this.fc=t}_toFieldTransform(e){const t=Hx(this,e,!0),r=this.fc.map(u=>Xp(u,t)),i=new Dl(r);return new xp(e.path,i)}isEqual(e){return this===e}}class hk extends Qp{constructor(e,t){super(e),this.fc=t}_toFieldTransform(e){const t=Hx(this,e,!0),r=this.fc.map(u=>Xp(u,t)),i=new Cl(r);return new xp(e.path,i)}isEqual(e){return this===e}}class fk extends Qp{constructor(e,t){super(e),this.dc=t}_toFieldTransform(e){const t=new Oh(e.M,Kb(e.M,this.dc));return new xp(e.path,t)}isEqual(e){return this===e}}function $A(n,e,t,r){const i=n.lc(1,e,t);qA("Data must be an object, but it was:",i,r);const u=[],c=vi.empty();vl(r,(y,b)=>{const A=nD(e,y,t);b=(0,xt.m9)(b);const M=i.oc(A);if(b instanceof o0)u.push(A);else{const F=Xp(b,M);null!=F&&(u.push(A),c.set(A,F))}});const p=new Dh(u);return new Bx(c,p,i.fieldTransforms)}function GA(n,e,t,r,i,u){const c=n.lc(1,e,t),p=[zA(e,r,t)],y=[i];if(u.length%2!=0)throw new Re(ce.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let F=0;F<u.length;F+=2)p.push(zA(e,u[F])),y.push(u[F+1]);const b=[],A=vi.empty();for(let F=p.length-1;F>=0;--F)if(!zx(b,p[F])){const V=p[F];let B=y[F];B=(0,xt.m9)(B);const se=c.oc(V);if(B instanceof o0)b.push(V);else{const Te=Xp(B,se);null!=Te&&(b.push(V),A.set(V,Te))}}const M=new Dh(b);return new Bx(A,M,c.fieldTransforms)}function $x(n,e,t,r=!1){return Xp(t,n.lc(r?4:3,e))}function Xp(n,e){if(qx(n=(0,xt.m9)(n)))return qA("Unsupported field value:",e,n),Gx(n,e);if(n instanceof Qp)return function(t,r){if(!jx(r.ec))throw r.ac(`${t._methodName}() can only be used with update() and set()`);if(!r.path)throw r.ac(`${t._methodName}() is not currently supported inside arrays`);const i=t._toFieldTransform(r);i&&r.fieldTransforms.push(i)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.ic&&4!==e.ec)throw e.ac("Nested arrays are not supported");return function(t,r){const i=[];let u=0;for(const c of t){let p=Xp(c,r.uc(u));null==p&&(p={nullValue:"NULL_VALUE"}),i.push(p),u++}return{arrayValue:{values:i}}}(n,e)}return function(t,r){if(null===(t=(0,xt.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return Kb(r.M,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const i=On.fromDate(t);return{timestampValue:Ca(r.M,i)}}if(t instanceof On){const i=new On(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:Ca(r.M,i)}}if(t instanceof XI)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof Ml)return{bytesValue:lI(r.M,t._byteString)};if(t instanceof Un){const i=r.databaseId,u=t.firestore._databaseId;if(!u.isEqual(i))throw r.ac(`Document reference is for database ${u.projectId}/${u.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:Bc(t.firestore._databaseId||r.databaseId,t._key.path)}}throw r.ac(`Unsupported field value: ${QI(t)}`)}(n,e)}function Gx(n,e){const t={};return Ih(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):vl(n,(r,i)=>{const u=Xp(i,e.sc(r));null!=u&&(t[r]=u)}),{mapValue:{fields:t}}}function qx(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof On||n instanceof XI||n instanceof Ml||n instanceof Un||n instanceof Qp)}function qA(n,e,t){if(!qx(t)||"object"!=typeof(r=t)||null===r||Object.getPrototypeOf(r)!==Object.prototype&&null!==Object.getPrototypeOf(r)){const r=QI(t);throw e.ac("an object"===r?n+" a custom object":n+" "+r)}var r}function zA(n,e,t){if((e=(0,xt.m9)(e))instanceof ed)return e._internalPath;if("string"==typeof e)return nD(n,e);throw rD("Field path arguments must be of type string or ",n,!1,void 0,t)}const pk=new RegExp("[~\\*/\\[\\]]");function nD(n,e,t){if(e.search(pk)>=0)throw rD(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new ed(...e.split("."))._internalPath}catch(r){throw rD(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function rD(n,e,t,r,i){const u=r&&!r.isEmpty(),c=void 0!==i;let p=`Function ${e}() called with invalid data`;t&&(p+=" (via `toFirestore()`)"),p+=". ";let y="";return(u||c)&&(y+=" (found",u&&(y+=` in field ${r}`),c&&(y+=` in document ${i}`),y+=")"),new Re(ce.INVALID_ARGUMENT,p+n+y)}function zx(n,e){return n.some(t=>t.isEqual(e))}class a0{constructor(e,t,r,i,u){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=u}get id(){return this._key.path.lastSegment()}get ref(){return new Un(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new gk(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(iD("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class gk extends a0{data(){return super.data()}}function iD(n,e){return"string"==typeof e?nD(n,e):e instanceof ed?e._internalPath:e._delegate._internalPath}class eg{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class td extends a0{constructor(e,t,r,i,u,c){super(e,t,r,i,c),this._firestore=e,this._firestoreImpl=e,this.metadata=u}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new u0(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(iD("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class u0 extends td{data(e={}){return super.data(e)}}class Qh{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new eg(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new u0(this._firestore,this._userDataWriter,r.key,r,new eg(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Re(ce.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(r,i){if(r._snapshot.oldDocs.isEmpty()){let u=0;return r._snapshot.docChanges.map(c=>({type:"added",doc:new u0(r._firestore,r._userDataWriter,c.doc.key,c.doc,new eg(r._snapshot.mutatedKeys.has(c.doc.key),r._snapshot.fromCache),r.query.converter),oldIndex:-1,newIndex:u++}))}{let u=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(c=>i||3!==c.type).map(c=>{const p=new u0(r._firestore,r._userDataWriter,c.doc.key,c.doc,new eg(r._snapshot.mutatedKeys.has(c.doc.key),r._snapshot.fromCache),r.query.converter);let y=-1,b=-1;return 0!==c.type&&(y=u.indexOf(c.doc.key),u=u.delete(c.doc.key)),1!==c.type&&(u=u.add(c.doc),b=u.indexOf(c.doc.key)),{type:mk(c.type),doc:p,oldIndex:y,newIndex:b}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function mk(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return it()}}function Wx(n,e){return n instanceof td&&e instanceof td?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(null===n._document?null===e._document:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof Qh&&e instanceof Qh&&n._firestore===e._firestore&&Fx(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}function Kx(n){if("L"===n.limitType&&0===n.explicitOrderBy.length)throw new Re(ce.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class l0{}function Jh(n,...e){for(const t of e)n=t._apply(n);return n}class yk extends l0{constructor(e,t,r){super(),this._c=e,this.wc=t,this.mc=r,this.type="where"}_apply(e){const t=Jp(e.firestore),r=function(i,u,c,p,y,b,A){let M;if(y.isKeyField()){if("array-contains"===b||"array-contains-any"===b)throw new Re(ce.INVALID_ARGUMENT,`Invalid Query. You can't perform '${b}' queries on documentId().`);if("in"===b||"not-in"===b){eR(A,b);const V=[];for(const B of A)V.push(Xx(p,i,B));M={arrayValue:{values:V}}}else M=Xx(p,i,A)}else"in"!==b&&"not-in"!==b&&"array-contains-any"!==b||eR(A,b),M=$x(c,"where",A,"in"===b||"not-in"===b);const F=Nr.create(y,b,M);return function(V,B){if(B.S()){const Te=cy(V);if(null!==Te&&!Te.isEqual(B.field))throw new Re(ce.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${Te.toString()}' and '${B.field.toString()}'`);const He=$b(V);null!==He&&tR(0,B.field,He)}const se=function(Te,He){for(const nt of Te.filters)if(He.indexOf(nt.op)>=0)return nt.op;return null}(V,function(Te){switch(Te){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(B.op));if(null!==se)throw new Re(ce.INVALID_ARGUMENT,se===B.op?`Invalid query. You cannot use more than one '${B.op.toString()}' filter.`:`Invalid query. You cannot use '${B.op.toString()}' filters with '${se.toString()}' filters.`)}(i,F),F}(e._query,0,t,e.firestore._databaseId,this._c,this.wc,this.mc);return new rs(e.firestore,e.converter,function(i,u){const c=i.filters.concat([u]);return new wu(i.path,i.collectionGroup,i.explicitOrderBy.slice(),c,i.limit,i.limitType,i.startAt,i.endAt)}(e._query,r))}}class vk extends l0{constructor(e,t){super(),this._c=e,this.gc=t,this.type="orderBy"}_apply(e){const t=function(r,i,u){if(null!==r.startAt)throw new Re(ce.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==r.endAt)throw new Re(ce.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const c=new Il(i,u);return function(p,y){if(null===$b(p)){const b=cy(p);null!==b&&tR(0,b,y.field)}}(r,c),c}(e._query,this._c,this.gc);return new rs(e.firestore,e.converter,function(r,i){const u=r.explicitOrderBy.concat([i]);return new wu(r.path,r.collectionGroup,u,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,t))}}class Zx extends l0{constructor(e,t,r){super(),this.type=e,this.yc=t,this.Ic=r}_apply(e){return new rs(e.firestore,e.converter,iT(e._query,this.yc,this.Ic))}}class Yx extends l0{constructor(e,t,r){super(),this.type=e,this.Tc=t,this.Ec=r}_apply(e){const t=Jx(e,this.type,this.Tc,this.Ec);return new rs(e.firestore,e.converter,(i=t,new wu((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,i,r.endAt)));var r,i}}class Qx extends l0{constructor(e,t,r){super(),this.type=e,this.Tc=t,this.Ec=r}_apply(e){const t=Jx(e,this.type,this.Tc,this.Ec);return new rs(e.firestore,e.converter,(i=t,new wu((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,r.startAt,i)));var r,i}}function Jx(n,e,t,r){if(t[0]=(0,xt.m9)(t[0]),t[0]instanceof a0)return function(i,u,c,p,y){if(!p)throw new Re(ce.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${c}().`);const b=[];for(const A of Sp(i))if(A.field.isKeyField())b.push(Mc(u,p.key));else{const M=p.data.field(A.field);if(oE(M))throw new Re(ce.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+A.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===M){const F=A.field.canonicalString();throw new Re(ce.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${F}' (used as the orderBy) does not exist.`)}b.push(M)}return new bl(b,y)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{const i=Jp(n.firestore);return function(u,c,p,y,b,A){const M=u.explicitOrderBy;if(b.length>M.length)throw new Re(ce.INVALID_ARGUMENT,`Too many arguments provided to ${y}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const F=[];for(let V=0;V<b.length;V++){const B=b[V];if(M[V].field.isKeyField()){if("string"!=typeof B)throw new Re(ce.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${y}(), but got a ${typeof B}`);if(!fE(u)&&-1!==B.indexOf("/"))throw new Re(ce.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${y}() must be a plain document ID, but '${B}' contains a slash.`);const se=u.path.child(Kt.fromString(B));if(!$e.isDocumentKey(se))throw new Re(ce.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${y}() must result in a valid document path, but '${se}' is not because it contains an odd number of segments.`);const Te=new $e(se);F.push(Mc(c,Te))}else{const se=$x(p,y,B);F.push(se)}}return new bl(F,A)}(n._query,n.firestore._databaseId,i,e,t,r)}}function Xx(n,e,t){if("string"==typeof(t=(0,xt.m9)(t))){if(""===t)throw new Re(ce.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!fE(e)&&-1!==t.indexOf("/"))throw new Re(ce.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(Kt.fromString(t));if(!$e.isDocumentKey(r))throw new Re(ce.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Mc(n,new $e(r))}if(t instanceof Un)return Mc(n,t._key);throw new Re(ce.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${QI(t)}.`)}function eR(n,e){if(!Array.isArray(n)||0===n.length)throw new Re(ce.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`);if(n.length>10)throw new Re(ce.INVALID_ARGUMENT,`Invalid Query. '${e.toString()}' filters support a maximum of 10 elements in the value array.`)}function tR(n,e,t){if(!t.isEqual(e))throw new Re(ce.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}const Ak={maxAttempts:5};class WA{convertValue(e,t="none"){switch(Sc(e)){case 0:return null;case 1:return e.booleanValue;case 2:return zn(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(El(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw it()}}convertObject(e,t){const r={};return vl(e.fields,(i,u)=>{r[i]=this.convertValue(u,t)}),r}convertGeoPoint(e){return new XI(zn(e.latitude),zn(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=aE(e);return null==r?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(vp(e));default:return null}}convertTimestamp(e){const t=Es(e);return new On(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=Kt.fromString(e);St(xE(r));const i=new vu(r.get(1),r.get(3)),u=new $e(r.popFirst(5));return i.isEqual(t)||cr(`Document ${u} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),u}}function sD(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class Sk extends WA{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ml(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Un(this.firestore,null,t)}}class nR{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=Jp(e)}set(e,t,r){this._verifyNotCommitted();const i=Xh(e,this._firestore),u=sD(i.converter,t,r),c=tD(this._dataReader,"WriteBatch.set",i._key,u,null!==i.converter,r);return this._mutations.push(c.toMutation(i._key,kn.none())),this}update(e,t,r,...i){this._verifyNotCommitted();const u=Xh(e,this._firestore);let c;return c="string"==typeof(t=(0,xt.m9)(t))||t instanceof ed?GA(this._dataReader,"WriteBatch.update",u._key,t,r,i):$A(this._dataReader,"WriteBatch.update",u._key,t),this._mutations.push(c.toMutation(u._key,kn.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=Xh(e,this._firestore);return this._mutations=this._mutations.concat(new Op(t._key,kn.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Re(ce.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Xh(n,e){if((n=(0,xt.m9)(n)).firestore!==e)throw new Re(ce.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class tg extends WA{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ml(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Un(this.firestore,null,t)}}function rR(n,e,t){n=Xt(n,Un);const r=Xt(n.firestore,Kn),i=sD(n.converter,e,t);return Hy(r,[tD(Jp(r),"setDoc",n._key,i,null!==n.converter,t).toMutation(n._key,kn.none())])}function iR(n,e,t,...r){n=Xt(n,Un);const i=Xt(n.firestore,Kn),u=Jp(i);let c;return c="string"==typeof(e=(0,xt.m9)(e))||e instanceof ed?GA(u,"updateDoc",n._key,e,t,r):$A(u,"updateDoc",n._key,e),Hy(i,[c.toMutation(n._key,kn.exists(!0))])}function sR(n,...e){var t,r,i;n=(0,xt.m9)(n);let u={includeMetadataChanges:!1},c=0;"object"!=typeof e[c]||jA(e[c])||(u=e[c],c++);const p={includeMetadataChanges:u.includeMetadataChanges};if(jA(e[c])){const M=e[c];e[c]=null===(t=M.next)||void 0===t?void 0:t.bind(M),e[c+1]=null===(r=M.error)||void 0===r?void 0:r.bind(M),e[c+2]=null===(i=M.complete)||void 0===i?void 0:i.bind(M)}let y,b,A;if(n instanceof Un)b=Xt(n.firestore,Kn),A=Oc(n._key.path),y={next:M=>{e[c]&&e[c](KA(b,n,M))},error:e[c+1],complete:e[c+2]};else{const M=Xt(n,rs);b=Xt(M.firestore,Kn),A=M._query;const F=new tg(b);y={next:V=>{e[c]&&e[c](new Qh(b,F,M,V))},error:e[c+1],complete:e[c+2]},Kx(n._query)}return function(M,F,V,B){const se=new ZI(B),Te=new sA(F,se,V);return M.asyncQueue.enqueueAndForget((0,Ee.Z)(function*(){return eA(yield jy(M),Te)})),()=>{se.Aa(),M.asyncQueue.enqueueAndForget((0,Ee.Z)(function*(){return nA(yield jy(M),Te)}))}}(Or(b),A,p,y)}function Hy(n,e){return function(t,r){const i=new qn;return t.asyncQueue.enqueueAndForget((0,Ee.Z)(function*(){return function EO(n,e,t){return cA.apply(this,arguments)}(yield VA(t),r,i)})),i.promise}(Or(n),e)}function KA(n,e,t){const r=t.docs.get(e._key),i=new tg(n);return new td(n,i,e._key,r,new eg(t.hasPendingWrites,t.fromCache),e.converter)}class Vk extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=Jp(e)}get(e){const t=Xh(e,this._firestore),r=new Sk(this._firestore);return this._transaction.lookup([t._key]).then(i=>{if(!i||1!==i.length)return it();const u=i[0];if(u.isFoundDocument())return new a0(this._firestore,r,u.key,u,t.converter);if(u.isNoDocument())return new a0(this._firestore,r,t._key,null,t.converter);throw it()})}set(e,t,r){const i=Xh(e,this._firestore),u=sD(i.converter,t,r),c=tD(this._dataReader,"Transaction.set",i._key,u,null!==i.converter,r);return this._transaction.set(i._key,c),this}update(e,t,r,...i){const u=Xh(e,this._firestore);let c;return c="string"==typeof(t=(0,xt.m9)(t))||t instanceof ed?GA(this._dataReader,"Transaction.update",u._key,t,r,i):$A(this._dataReader,"Transaction.update",u._key,t),this._transaction.update(u._key,c),this}delete(e){const t=Xh(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=Xh(e,this._firestore),r=new tg(this._firestore);return super.get(e).then(i=>new td(this._firestore,r,t._key,i._document,new eg(!1,!1),t.converter))}}function ZA(n,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new Re("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function aR(){if("undefined"==typeof Uint8Array)throw new Re("unimplemented","Uint8Arrays are not available in this environment.")}function uR(){if(!function Tb(){return"undefined"!=typeof atob}())throw new Re("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(n,e=!0){Tc=Ks.SDK_VERSION,(0,Ks._registerComponent)(new rh.wA("firestore",(t,{options:r})=>{const i=t.getProvider("app").getImmediate(),u=new Kn(i,new Eb(t.getProvider("auth-internal")),new Db(t.getProvider("app-check-internal")));return r=Object.assign({useFetchStreams:e},r),u._setSettings(r),u},"PUBLIC")),(0,Ks.registerVersion)(nE,"3.4.9",n),(0,Ks.registerVersion)(nE,"3.4.9","esm2017")}();class c0{constructor(e){this._delegate=e}static fromBase64String(e){return uR(),new c0(Ml.fromBase64String(e))}static fromUint8Array(e){return aR(),new c0(Ml.fromUint8Array(e))}toBase64(){return uR(),this._delegate.toBase64()}toUint8Array(){return aR(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function YA(n){return function Wk(n,e){if("object"!=typeof n||null===n)return!1;const t=n;for(const r of e)if(r in t&&"function"==typeof t[r])return!0;return!1}(n,["next","error","complete"])}class Kk{enableIndexedDbPersistence(e,t){return function ek(n,e){Ux(n=Xt(n,Kn));const t=Or(n),r=n._freezeSettings(),i=new RA;return Vx(t,i,new Ex(i,r.cacheSizeBytes,null==e?void 0:e.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function tk(n){Ux(n=Xt(n,Kn));const e=Or(n),t=n._freezeSettings(),r=new RA;return Vx(e,r,new FO(r,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function nk(n){if(n._initialized&&!n._terminated)throw new Re(ce.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new qn;return n._queue.enqueueAndForgetEvenWhileRestricted((0,Ee.Z)(function*(){try{yield(t=(0,Ee.Z)(function*(r){if(!Po.vt())return Promise.resolve();const i=r+"main";yield Po.delete(i)}),function(r){return t.apply(this,arguments)})(GE(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class lR{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof vu||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&mp("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,r={}){!function ZO(n,e,t,r={}){var i;const u=(n=Xt(n,s0))._getSettings();if("firestore.googleapis.com"!==u.host&&u.host!==e&&mp("Host has been set in both settings() and useEmulator(), emulator host will be used"),n._setSettings(Object.assign(Object.assign({},u),{host:`${e}:${t}`,ssl:!1})),r.mockUserToken){let c,p;if("string"==typeof r.mockUserToken)c=r.mockUserToken,p=Pr.MOCK_USER;else{c=(0,xt.Sg)(r.mockUserToken,null===(i=n._app)||void 0===i?void 0:i.options.projectId);const y=r.mockUserToken.sub||r.mockUserToken.user_id;if(!y)throw new Re(ce.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");p=new Pr(y)}n._authCredentials=new ZC(new vb(c,p))}}(this._delegate,e,t,r)}enableNetwork(){return function ik(n){return function jO(n){return n.asyncQueue.enqueue((0,Ee.Z)(function*(){const e=yield Dx(n),t=yield Cx(n);return e.setNetworkEnabled(!0),function(r){const i=Ze(r);return i.wu.delete(0),Jc(i)}(t)}))}(Or(n=Xt(n,Kn)))}(this._delegate)}disableNetwork(){return function sk(n){return function HO(n){return n.asyncQueue.enqueue((0,Ee.Z)(function*(){const e=yield Dx(n),t=yield Cx(n);return e.setNetworkEnabled(!1),(r=(0,Ee.Z)(function*(i){const u=Ze(i);u.wu.add(0),yield Oy(u),u.yu.set("Offline")}),function(i){return r.apply(this,arguments)})(t);var r}))}(Or(n=Xt(n,Kn)))}(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,Mx("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function rk(n){return function(e){const t=new qn;return e.asyncQueue.enqueueAndForget((0,Ee.Z)(function*(){return function DO(n,e){return gA.apply(this,arguments)}(yield VA(e),t)})),t.promise}(Or(n=Xt(n,Kn)))}(this._delegate)}onSnapshotsInSync(e){return function Lk(n,e){return function qO(n,e){const t=new ZI(e);return n.asyncQueue.enqueueAndForget((0,Ee.Z)(function*(){return r=yield jy(n),i=t,Ze(r).bu.add(i),void i.next();var r,i})),()=>{t.Aa(),n.asyncQueue.enqueueAndForget((0,Ee.Z)(function*(){return r=yield jy(n),i=t,void Ze(r).bu.delete(i);var r,i}))}}(Or(n=Xt(n,Kn)),jA(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new Re("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new $y(this,Ox(this._delegate,e))}catch(t){throw Is(t,"collection()","Firestore.collection()")}}doc(e){try{return new Aa(this,JI(this._delegate,e))}catch(t){throw Is(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new Ds(this,function YO(n,e){if(n=Xt(n,s0),BA("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new Re(ce.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new rs(n,null,(t=e,new wu(Kt.emptyPath(),t)));var t}(this._delegate,e))}catch(t){throw Is(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function Uk(n,e,t){n=Xt(n,Kn);const r=Object.assign(Object.assign({},Ak),t);return function(i){if(i.maxAttempts<1)throw new Re(ce.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function zO(n,e,t){const r=new qn;return n.asyncQueue.enqueueAndForget((0,Ee.Z)(function*(){const i=yield(u=n,YI(u).then(c=>c.datastore));var u;new UO(n.asyncQueue,i,t,e,r).run()})),r.promise}(Or(n),i=>e(new Vk(n,i)),r)}(this._delegate,t=>e(new cR(this,t)))}batch(){return Or(this._delegate),new dR(new nR(this._delegate,e=>Hy(this._delegate,e)))}loadBundle(e){return function ok(n,e){const t=Or(n=Xt(n,Kn)),r=new JO;return function WO(n,e,t,r){const i=function(u,c){let p;return p="string"==typeof u?(new TextEncoder).encode(u):u,y=function(y,b){if(y instanceof Uint8Array)return wx(y,b);if(y instanceof ArrayBuffer)return wx(new Uint8Array(y),b);if(y instanceof ReadableStream)return y.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(p),new LO(y,c);var y}(t,No(e));n.asyncQueue.enqueueAndForget((0,Ee.Z)(function*(){!function kO(n,e,t){const r=Ze(n);var i;(i=(0,Ee.Z)(function*(u,c,p){try{const y=yield c.getMetadata();if(yield function(F,V){const B=Ze(F),se=Zr(V.createTime);return B.persistence.runTransaction("hasNewerBundle","readonly",Te=>B._s.getBundleMetadata(Te,V.id)).then(Te=>!!Te&&Te.createTime.compareTo(se)>=0)}(u.localStore,y))return yield c.close(),p._completeWith({taskState:"Success",documentsLoaded:(F=y).totalDocuments,bytesLoaded:F.totalBytes,totalDocuments:F.totalDocuments,totalBytes:F.totalBytes}),Promise.resolve(new Set);p._updateProgress(cx(y));const b=new pO(y,u.localStore,c.M);let A=yield c.ma();for(;A;){const F=yield b.Fu(A);F&&p._updateProgress(F),A=yield c.ma()}const M=yield b.complete();return yield Xc(u,M.Lu,void 0),yield function(F,V){const B=Ze(F);return B.persistence.runTransaction("Save bundle","readwrite",se=>B._s.saveBundleMetadata(se,V))}(u.localStore,y),p._completeWith(M.progress),Promise.resolve(M.Bu)}catch(y){return mp("SyncEngine",`Loading bundle failed with ${y}`),p._failWith(y),Promise.resolve(new Set)}var F}),function(u,c,p){return i.apply(this,arguments)})(r,e,t).then(i=>{r.sharedClientState.notifyBundleLoaded(i)})}(yield VA(n),i,r)}))}(t,n._databaseId,e,r),r}(this._delegate,e)}namedQuery(e){return function ak(n,e){return function KO(n,e){return n.asyncQueue.enqueue((0,Ee.Z)(function*(){return function(t,r){const i=Ze(t);return i.persistence.runTransaction("Get named query","readonly",u=>i._s.getNamedQuery(u,r))}(yield LA(n),e)}))}(Or(n=Xt(n,Kn)),e).then(t=>t?new rs(n,null,t.query):null)}(this._delegate,e).then(t=>t?new Ds(this,t):null)}}class oD extends WA{constructor(e){super(),this.firestore=e}convertBytes(e){return new c0(new Ml(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return Aa.forKey(t,this.firestore,null)}}class cR{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new oD(e)}get(e){const t=rg(e);return this._delegate.get(t).then(r=>new d0(this._firestore,new td(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){const i=rg(e);return r?(ZA("Transaction.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const u=rg(e);return 2===arguments.length?this._delegate.update(u,t):this._delegate.update(u,t,r,...i),this}delete(e){const t=rg(e);return this._delegate.delete(t),this}}class dR{constructor(e){this._delegate=e}set(e,t,r){const i=rg(e);return r?(ZA("WriteBatch.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const u=rg(e);return 2===arguments.length?this._delegate.update(u,t):this._delegate.update(u,t,r,...i),this}delete(e){const t=rg(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class ng{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){const r=new u0(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new h0(this._firestore,r),null!=t?t:{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const r=ng.INSTANCES;let i=r.get(e);i||(i=new WeakMap,r.set(e,i));let u=i.get(t);return u||(u=new ng(e,new oD(e),t),i.set(t,u)),u}}ng.INSTANCES=new WeakMap;class Aa{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new oD(e)}static forPath(e,t,r){if(e.length%2!=0)throw new Re("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new Aa(t,new Un(t._delegate,r,new $e(e)))}static forKey(e,t,r){return new Aa(t,new Un(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new $y(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new $y(this.firestore,Ox(this._delegate,e))}catch(t){throw Is(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,xt.m9)(e))instanceof Un&&kx(this._delegate,e)}set(e,t){t=ZA("DocumentReference.set",t);try{return t?rR(this._delegate,e,t):rR(this._delegate,e)}catch(r){throw Is(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return 1===arguments.length?iR(this._delegate,e):iR(this._delegate,e,t,...r)}catch(i){throw Is(i,"updateDoc()","DocumentReference.update()")}}delete(){return function kk(n){return Hy(Xt(n.firestore,Kn),[new Op(n._key,kn.none())])}(this._delegate)}onSnapshot(...e){const t=hR(e),r=fR(e,i=>new d0(this.firestore,new td(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)));return sR(this._delegate,t,r)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function xk(n){n=Xt(n,Un);const e=Xt(n.firestore,Kn),t=Or(e),r=new tg(e);return function $O(n,e){const t=new qn;return n.asyncQueue.enqueueAndForget((0,Ee.Z)(function*(){return(r=(0,Ee.Z)(function*(i,u,c){try{const p=yield function(y,b){const A=Ze(y);return A.persistence.runTransaction("read document","readonly",M=>A.fi.Ls(M,b))}(i,u);p.isFoundDocument()?c.resolve(p):p.isNoDocument()?c.resolve(null):c.reject(new Re(ce.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(p){const y=Ly(p,`Failed to get document '${u} from cache`);c.reject(y)}}),function(i,u,c){return r.apply(this,arguments)})(yield LA(n),e,t);var r})),t.promise}(t,n._key).then(i=>new td(e,r,n._key,i,new eg(null!==i&&i.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===(null==e?void 0:e.source)?function Rk(n){n=Xt(n,Un);const e=Xt(n.firestore,Kn);return Tx(Or(e),n._key,{source:"server"}).then(t=>KA(e,n,t))}(this._delegate):function Mk(n){n=Xt(n,Un);const e=Xt(n.firestore,Kn);return Tx(Or(e),n._key).then(t=>KA(e,n,t))}(this._delegate),t.then(r=>new d0(this.firestore,new td(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new Aa(this.firestore,this._delegate.withConverter(e?ng.getInstance(this.firestore,e):null))}}function Is(n,e,t){return n.message=n.message.replace(e,t),n}function hR(n){for(const e of n)if("object"==typeof e&&!YA(e))return e;return{}}function fR(n,e){var t,r;let i;return i=YA(n[0])?n[0]:YA(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:u=>{i.next&&i.next(e(u))},error:null===(t=i.error)||void 0===t?void 0:t.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}class d0{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new Aa(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return Wx(this._delegate,e._delegate)}}class h0 extends d0{data(e){const t=this._delegate.data(e);return function _b(n,e){n||it()}(void 0!==t),t}}class Ds{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new oD(e)}where(e,t,r){try{return new Ds(this.firestore,Jh(this._delegate,function _k(n,e,t){const r=e,i=iD("where",n);return new yk(i,r,t)}(e,t,r)))}catch(i){throw Is(i,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new Ds(this.firestore,Jh(this._delegate,function Ek(n,e="asc"){const t=e,r=iD("orderBy",n);return new vk(r,t)}(e,t)))}catch(r){throw Is(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new Ds(this.firestore,Jh(this._delegate,function wk(n){return Px("limit",n),new Zx("limit",n,"F")}(e)))}catch(t){throw Is(t,"limit()","Query.limit()")}}limitToLast(e){try{return new Ds(this.firestore,Jh(this._delegate,function bk(n){return Px("limitToLast",n),new Zx("limitToLast",n,"L")}(e)))}catch(t){throw Is(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new Ds(this.firestore,Jh(this._delegate,function Ik(...n){return new Yx("startAt",n,!0)}(...e)))}catch(t){throw Is(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new Ds(this.firestore,Jh(this._delegate,function Dk(...n){return new Yx("startAfter",n,!1)}(...e)))}catch(t){throw Is(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new Ds(this.firestore,Jh(this._delegate,function Ck(...n){return new Qx("endBefore",n,!1)}(...e)))}catch(t){throw Is(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new Ds(this.firestore,Jh(this._delegate,function Tk(...n){return new Qx("endAt",n,!0)}(...e)))}catch(t){throw Is(t,"endAt()","Query.endAt()")}}isEqual(e){return Fx(this._delegate,e._delegate)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function Nk(n){n=Xt(n,rs);const e=Xt(n.firestore,Kn),t=Or(e),r=new tg(e);return function GO(n,e){const t=new qn;return n.asyncQueue.enqueueAndForget((0,Ee.Z)(function*(){return(r=(0,Ee.Z)(function*(i,u,c){try{const p=yield QE(i,u,!0),y=new fx(u,p._i),b=y.Wu(p.documents),A=y.applyChanges(b,!1);c.resolve(A.snapshot)}catch(p){const y=Ly(p,`Failed to execute query '${u} against cache`);c.reject(y)}}),function(i,u,c){return r.apply(this,arguments)})(yield LA(n),e,t);var r})),t.promise}(t,n._query).then(i=>new Qh(e,r,n,i))}(this._delegate):"server"===(null==e?void 0:e.source)?function Ok(n){n=Xt(n,rs);const e=Xt(n.firestore,Kn),t=Or(e),r=new tg(e);return Ax(t,n._query,{source:"server"}).then(i=>new Qh(e,r,n,i))}(this._delegate):function Pk(n){n=Xt(n,rs);const e=Xt(n.firestore,Kn),t=Or(e),r=new tg(e);return Kx(n._query),Ax(t,n._query).then(i=>new Qh(e,r,n,i))}(this._delegate),t.then(r=>new QA(this.firestore,new Qh(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const t=hR(e),r=fR(e,i=>new QA(this.firestore,new Qh(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)));return sR(this._delegate,t,r)}withConverter(e){return new Ds(this.firestore,this._delegate.withConverter(e?ng.getInstance(this.firestore,e):null))}}class Yk{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new h0(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class QA{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new Ds(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new h0(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new Yk(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new h0(this._firestore,r))})}isEqual(e){return Wx(this._delegate,e._delegate)}}class $y extends Ds{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new Aa(this.firestore,e):null}doc(e){try{return new Aa(this.firestore,void 0===e?JI(this._delegate):JI(this._delegate,e))}catch(t){throw Is(t,"doc()","CollectionReference.doc()")}}add(e){return function Fk(n,e){const t=Xt(n.firestore,Kn),r=JI(n),i=sD(n.converter,e);return Hy(t,[tD(Jp(n.firestore),"addDoc",r._key,i,null!==n.converter,{}).toMutation(r._key,kn.exists(!1))]).then(()=>r)}(this._delegate,e).then(t=>new Aa(this.firestore,t))}isEqual(e){return kx(this._delegate,e._delegate)}withConverter(e){return new $y(this.firestore,this._delegate.withConverter(e?ng.getInstance(this.firestore,e):null))}}function rg(n){return Xt(n,Un)}class JA{constructor(...e){this._delegate=new ed(...e)}static documentId(){return new JA(wr.keyField().canonicalString())}isEqual(e){return(e=(0,xt.m9)(e))instanceof ed&&this._delegate._internalPath.isEqual(e._internalPath)}}class ig{constructor(e){this._delegate=e}static serverTimestamp(){const e=function jk(){return new HA("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new ig(e)}static delete(){const e=function Bk(){return new o0("deleteField")}();return e._methodName="FieldValue.delete",new ig(e)}static arrayUnion(...e){const t=function Hk(...n){return new dk("arrayUnion",n)}(...e);return t._methodName="FieldValue.arrayUnion",new ig(t)}static arrayRemove(...e){const t=function $k(...n){return new hk("arrayRemove",n)}(...e);return t._methodName="FieldValue.arrayRemove",new ig(t)}static increment(e){const t=function Gk(n){return new fk("increment",n)}(e);return t._methodName="FieldValue.increment",new ig(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const Qk={Firestore:lR,GeoPoint:XI,Timestamp:On,Blob:c0,Transaction:cR,WriteBatch:dR,DocumentReference:Aa,DocumentSnapshot:d0,Query:Ds,QueryDocumentSnapshot:h0,QuerySnapshot:QA,CollectionReference:$y,FieldPath:JA,FieldValue:ig,setLogLevel:function Zk(n){!function WC(n){_l.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};!function Xk(n){(function Jk(n,e){n.INTERNAL.registerComponent(new rh.wA("firestore-compat",t=>{const r=t.getProvider("app-compat").getImmediate(),i=t.getProvider("firestore").getImmediate();return e(r,i)},"PUBLIC").setServiceProps(Object.assign({},Qk)))})(n,(e,t)=>new lR(e,t,new Kk)),n.registerVersion("@firebase/firestore-compat","0.1.18")}(_v.Z);var e1=N(6451),aD=N(5363),t1=N(6063);class n1 extends si.x{constructor(e=1/0,t=1/0,r=t1.l){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){const{isStopped:t,_buffer:r,_infiniteTimeWindow:i,_timestampProvider:u,_windowTime:c}=this;t||(r.push(e),!i&&r.push(u.now()+c)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:i}=this,u=i.slice();for(let c=0;c<u.length&&!e.closed;c+=r?1:2)e.next(u[c]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){const{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:i}=this,u=(i?1:2)*e;if(e<1/0&&u<r.length&&r.splice(0,r.length-u),!i){const c=t.now();let p=0;for(let y=1;y<r.length&&r[y]<=c;y+=2)p=y;p&&r.splice(0,p+1)}}}var r1=N(3099);function pR(n,e,t){let r,i=!1;return n&&"object"==typeof n?({bufferSize:r=1/0,windowTime:e=1/0,refCount:i=!1,scheduler:t}=n):r=null!=n?n:1/0,(0,r1.B)({connector:()=>new n1(r,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:i})}function gR(n,e){return(0,$u.m)(e)?Dn(()=>n,e):Dn(()=>n)}var XA=N(9468);N(5867);const yR=new Map,u1={activated:!1,tokenObservers:[]},l1={initialized:!1,enabled:!1};function Ii(n){return yR.get(n)||u1}function Du(n,e){yR.set(n,e)}function lD(){return l1}class p1{constructor(e,t,r,i,u){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=u,this.pending=null,this.nextErrorWaitInterval=i,i>u)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){var t=this;return(0,Ee.Z)(function*(){t.stop();try{t.pending=new xt.BH,yield function g1(n){return new Promise(e=>{setTimeout(e,n)})}(t.getNextRun(e)),t.pending.resolve(),yield t.pending.promise,t.pending=new xt.BH,yield t.operation(),t.pending.resolve(),yield t.pending.promise,t.process(!0).catch(()=>{})}catch(r){t.retryPolicy(r)?t.process(!1).catch(()=>{}):t.stop()}})()}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}}const Cs=new xt.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function vR(n){if(!Ii(n).activated)throw Cs.create("use-before-activation",{appName:n.name})}function rS(n,e){return iS.apply(this,arguments)}function iS(){return iS=(0,Ee.Z)(function*({url:n,body:e},t){const r={"Content-Type":"application/json"},i=t.getImmediate({optional:!0});if(i){const M=yield i.getHeartbeatsHeader();M&&(r["X-Firebase-Client"]=M)}const u={method:"POST",body:JSON.stringify(e),headers:r};let c,p;try{c=yield fetch(n,u)}catch(M){throw Cs.create("fetch-network-error",{originalErrorMessage:M.message})}if(200!==c.status)throw Cs.create("fetch-status-error",{httpStatus:c.status});try{p=yield c.json()}catch(M){throw Cs.create("fetch-parse-error",{originalErrorMessage:M.message})}const y=p.ttl.match(/^([\d.]+)(s)$/);if(!y||!y[2]||isNaN(Number(y[1])))throw Cs.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${p.ttl}`});const b=1e3*Number(y[1]),A=Date.now();return{token:p.token,expireTimeMillis:A+b,issuedAtTimeMillis:A}}),iS.apply(this,arguments)}function E1(n,e){const{projectId:t,appId:r,apiKey:i}=n.options;return{url:`https://content-firebaseappcheck.googleapis.com/v1/projects/${t}/apps/${r}:exchangeDebugToken?key=${i}`,body:{debug_token:e}}}const f0="firebase-app-check-store";let hD=null;function wR(){return hD||(hD=new Promise((n,e)=>{try{const t=indexedDB.open("firebase-app-check-database",1);t.onsuccess=r=>{n(r.target.result)},t.onerror=r=>{var i;e(Cs.create("storage-open",{originalErrorMessage:null===(i=r.target.error)||void 0===i?void 0:i.message}))},t.onupgradeneeded=r=>{0===r.oldVersion&&r.target.result.createObjectStore(f0,{keyPath:"compositeKey"})}}catch(t){e(Cs.create("storage-open",{originalErrorMessage:t.message}))}}),hD)}function sS(){return sS=(0,Ee.Z)(function*(n,e){const r=(yield wR()).transaction(f0,"readwrite"),u=r.objectStore(f0).put({compositeKey:n,value:e});return new Promise((c,p)=>{u.onsuccess=y=>{c()},r.onerror=y=>{var b;p(Cs.create("storage-set",{originalErrorMessage:null===(b=y.target.error)||void 0===b?void 0:b.message}))}})}),sS.apply(this,arguments)}const p0=new cl.Yd("@firebase/app-check");function CR(n,e){return(0,xt.hl)()?function D1(n,e){return function bR(n,e){return sS.apply(this,arguments)}(function DR(n){return`${n.options.appId}-${n.name}`}(n),e)}(n,e).catch(t=>{p0.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function TR(){return lD().enabled}function AR(){return lS.apply(this,arguments)}function lS(){return lS=(0,Ee.Z)(function*(){const n=lD();if(n.enabled&&n.token)return n.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")}),lS.apply(this,arguments)}const x1={error:"UNKNOWN_ERROR"};function R1(n){return xt.US.encodeString(JSON.stringify(n),!1)}function fD(n){return cS.apply(this,arguments)}function cS(){return cS=(0,Ee.Z)(function*(n,e=!1){const t=n.app;vR(t);const r=Ii(t);let u,i=r.token;if(!i){const y=yield r.cachedTokenPromise;y&&pD(y)&&(i=y)}if(!e&&i&&pD(i))return{token:i.token};let p,c=!1;if(TR()){r.exchangeTokenPromise||(r.exchangeTokenPromise=rS(E1(t,yield AR()),n.heartbeatServiceProvider).then(b=>(r.exchangeTokenPromise=void 0,b)),c=!0);const y=yield r.exchangeTokenPromise;return yield CR(t,y),Du(t,Object.assign(Object.assign({},r),{token:y})),{token:y.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().then(y=>(r.exchangeTokenPromise=void 0,y)),c=!0),i=yield r.exchangeTokenPromise}catch(y){"appCheck/throttled"===y.code?p0.warn(y.message):p0.error(y),u=y}return i?(p={token:i.token},Du(t,Object.assign(Object.assign({},r),{token:i})),yield CR(t,i)):p=N1(u),c&&MR(t,p),p}),cS.apply(this,arguments)}function hS(n,e){const t=Ii(n),r=t.tokenObservers.filter(i=>i.next!==e);0===r.length&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),Du(n,Object.assign(Object.assign({},t),{tokenObservers:r}))}function SR(n){const{app:e}=n,t=Ii(e);let r=t.tokenRefresher;r||(r=function P1(n){const{app:e}=n;return new p1((0,Ee.Z)(function*(){let r;if(r=Ii(e).token?yield fD(n,!0):yield fD(n),r.error)throw r.error}),()=>!0,()=>{const t=Ii(e);if(t.token){let r=t.token.issuedAtTimeMillis+.5*(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)+3e5;return r=Math.min(r,t.token.expireTimeMillis-3e5),Math.max(0,r-Date.now())}return 0},3e4,96e4)}(n),Du(e,Object.assign(Object.assign({},t),{tokenRefresher:r}))),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function MR(n,e){const t=Ii(n).tokenObservers;for(const r of t)try{"EXTERNAL"===r.type&&null!=e.error?r.error(e.error):r.next(e)}catch(i){}}function pD(n){return n.expireTimeMillis-Date.now()>0}function N1(n){return{token:R1(x1),error:n}}class O1{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){const{tokenObservers:e}=Ii(this.app);for(const t of e)hS(this.app,t.next);return Promise.resolve()}}const LR="app-check-internal";!function K1(){(0,Ks._registerComponent)(new rh.wA("app-check",n=>function k1(n,e){return new O1(n,e)}(n.getProvider("app").getImmediate(),n.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(LR).initialize()})),(0,Ks._registerComponent)(new rh.wA(LR,n=>function F1(n){return{getToken:e=>fD(n,e),addTokenListener:e=>function dS(n,e,t,r){const{app:i}=n,u=Ii(i),c={next:t,error:r,type:e};if(Du(i,Object.assign(Object.assign({},u),{tokenObservers:[...u.tokenObservers,c]})),u.token&&pD(u.token)){const p=u.token;Promise.resolve().then(()=>{t({token:p.token}),SR(n)}).catch(()=>{})}u.cachedTokenPromise.then(()=>SR(n))}(n,"INTERNAL",e),removeTokenListener:e=>hS(n.app,e)}}(n.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,Ks.registerVersion)("@firebase/app-check","0.5.8")}();class mD{constructor(){return(0,An.vb)("app-check")}}"undefined"!=typeof window&&window;var yS=N(127);const UR=new h.OlP("angularfire2.auth.use-emulator"),BR=new h.OlP("angularfire2.auth.settings"),jR=new h.OlP("angularfire2.auth.tenant-id"),HR=new h.OlP("angularfire2.auth.langugage-code"),$R=new h.OlP("angularfire2.auth.use-device-language"),GR=new h.OlP("angularfire.auth.persistence"),qR=(n,e,t,r,i,u,c,p)=>(0,Pi.cc)(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const y=e.runOutsideAngular(()=>n.auth());if(t&&y.useEmulator(...t),r&&(y.tenantId=r),y.languageCode=i,u&&y.useDeviceLanguage(),c)for(const[b,A]of Object.entries(c))y.settings[b]=A;return p&&y.setPersistence(p),y},[t,r,i,u,c,p]);let _S=(()=>{class n{constructor(t,r,i,u,c,p,y,b,A,M,F,V){const B=new si.x,se=rt(void 0).pipe((0,aD.Q)(c.outsideAngular),Dn(()=>u.runOutsideAngular(()=>Promise.resolve().then(N.bind(N,7092)))),(0,Dt.U)(()=>(0,Pi.on)(t,u,r)),(0,Dt.U)(Te=>qR(Te,u,p,b,A,M,y,F)),pR({bufferSize:1,refCount:!1}));if(qo(i))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=rt(null);else{se.pipe(ua()).subscribe();const He=se.pipe(Dn(qe=>qe.getRedirectResult().then(At=>At,()=>null)),An.iC,pR({bufferSize:1,refCount:!1})),nt=se.pipe(Dn(qe=>new bn.y(At=>({unsubscribe:u.runOutsideAngular(()=>qe.onAuthStateChanged(Rt=>At.next(Rt),Rt=>At.error(Rt),()=>At.complete()))})))),tt=se.pipe(Dn(qe=>new bn.y(At=>({unsubscribe:u.runOutsideAngular(()=>qe.onIdTokenChanged(Rt=>At.next(Rt),Rt=>At.error(Rt),()=>At.complete()))}))));this.authState=He.pipe(gR(nt),(0,XA.R)(c.outsideAngular),(0,aD.Q)(c.insideAngular)),this.user=He.pipe(gR(tt),(0,XA.R)(c.outsideAngular),(0,aD.Q)(c.insideAngular)),this.idToken=this.user.pipe(Dn(qe=>qe?(0,ln.D)(qe.getIdToken()):rt(null))),this.idTokenResult=this.user.pipe(Dn(qe=>qe?(0,ln.D)(qe.getIdTokenResult()):rt(null))),this.credential=(0,e1.T)(He,B,this.authState.pipe(Br(qe=>!qe))).pipe((0,Dt.U)(qe=>(null==qe?void 0:qe.user)?qe:null),(0,XA.R)(c.outsideAngular),(0,aD.Q)(c.insideAngular))}return(0,Pi.pX)(this,se,u,{spy:{apply:(Te,He,nt)=>{(Te.startsWith("signIn")||Te.startsWith("createUser"))&&nt.then(tt=>B.next(tt))}}})}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(Pi.Dh),h.LFG(Pi.xv,8),h.LFG(h.Lbi),h.LFG(h.R0b),h.LFG(An.HU),h.LFG(UR,8),h.LFG(BR,8),h.LFG(jR,8),h.LFG(HR,8),h.LFG($R,8),h.LFG(GR,8),h.LFG(mD,8))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),eF=(()=>{class n{constructor(){yS.Z.registerVersion("angularfire",An.q4.full,"auth-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({providers:[_S]}),n})();function zR(n,e){return function tF(n,e=yv.z){return new bn.y(t=>{let r;return null!=e?e.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},t)}):r=n.onSnapshot({includeMetadataChanges:!0},t),()=>{null!=r&&r()}})}(n,e)}function vS(n,e){return zR(n,e).pipe((0,Dt.U)(t=>({payload:t,type:"query"})))}function yD(n,e){return vS(n,e).pipe(Yi(void 0),vm(),(0,Dt.U)(([t,r])=>{const i=r.payload.docChanges(),u=i.map(c=>({type:c.type,payload:c}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(r.payload.metadata)&&r.payload.docs.forEach((c,p)=>{const y=i.find(A=>A.doc.ref.isEqual(c.ref)),b=null==t?void 0:t.payload.docs.find(A=>A.ref.isEqual(c.ref));y&&JSON.stringify(y.doc.metadata)===JSON.stringify(c.metadata)||!y&&b&&JSON.stringify(b.metadata)===JSON.stringify(c.metadata)||u.push({type:"modified",payload:{oldIndex:p,newIndex:p,type:"modified",doc:c}})}),u}))}function WR(n,e,t){return yD(n,t).pipe(Qi((r,i)=>function rF(n,e,t){return e.forEach(r=>{t.indexOf(r.type)>-1&&(n=function iF(n,e){switch(e.type){case"added":if(!n[e.newIndex]||!n[e.newIndex].doc.ref.isEqual(e.doc.ref))return ES(n,e.newIndex,0,e);break;case"modified":if(null==n[e.oldIndex]||n[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return ES(n,e.newIndex,1,e)}break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return ES(n,e.oldIndex,1)}return n}(n,r))}),n}(r,i.map(u=>u.payload),e),[]),function wC(n,e=Mi.y){return n=null!=n?n:bC,(0,Jn.e)((t,r)=>{let i,u=!0;t.subscribe((0,In.x)(r,c=>{const p=e(c);(u||!n(i,p))&&(u=!1,i=p,r.next(c))}))})}(),(0,Dt.U)(r=>r.map(i=>({type:i.type,payload:i}))))}function ES(n,e,t,...r){const i=n.slice();return i.splice(e,t,...r),i}function KR(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}class ZR{constructor(e,t,r){this.ref=e,this.query=t,this.afs=r}stateChanges(e){let t=yD(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,Dt.U)(r=>r.filter(i=>e.indexOf(i.type)>-1)))),t.pipe(Yi(void 0),vm(),Br(([r,i])=>i.length>0||!r),(0,Dt.U)(([r,i])=>i),An.iC)}auditTrail(e){return this.stateChanges(e).pipe(Qi((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=KR(e);return WR(this.query,t,this.afs.schedulers.outsideAngular).pipe(An.iC)}valueChanges(e={}){return vS(this.query,this.afs.schedulers.outsideAngular).pipe((0,Dt.U)(t=>t.payload.docs.map(r=>e.idField?Object.assign(Object.assign({},r.data()),{[e.idField]:r.id}):r.data())),An.iC)}get(e){return(0,ln.D)(this.query.get(e)).pipe(An.iC)}add(e){return this.ref.add(e)}doc(e){return new YR(this.ref.doc(e),this.afs)}}class YR{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const r=this.ref.collection(e),{ref:i,query:u}=XR(r,t);return new ZR(i,u,this.afs)}snapshotChanges(){return function nF(n,e){return zR(n,e).pipe(Yi(void 0),vm(),(0,Dt.U)(([t,r])=>r.exists?(null==t?void 0:t.exists)?{payload:r,type:"modified"}:{payload:r,type:"added"}:{payload:r,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(An.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,Dt.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,ln.D)(this.ref.get(e)).pipe(An.iC)}}class sF{constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?yD(this.query,this.afs.schedulers.outsideAngular).pipe((0,Dt.U)(t=>t.filter(r=>e.indexOf(r.type)>-1)),Br(t=>t.length>0),An.iC):yD(this.query,this.afs.schedulers.outsideAngular).pipe(An.iC)}auditTrail(e){return this.stateChanges(e).pipe(Qi((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=KR(e);return WR(this.query,t,this.afs.schedulers.outsideAngular).pipe(An.iC)}valueChanges(e={}){return vS(this.query,this.afs.schedulers.outsideAngular).pipe((0,Dt.U)(r=>r.payload.docs.map(i=>e.idField?Object.assign({[e.idField]:i.id},i.data()):i.data())),An.iC)}get(e){return(0,ln.D)(this.query.get(e)).pipe(An.iC)}}const QR=new h.OlP("angularfire2.enableFirestorePersistence"),JR=new h.OlP("angularfire2.firestore.persistenceSettings"),oF=new h.OlP("angularfire2.firestore.settings"),aF=new h.OlP("angularfire2.firestore.use-emulator");function XR(n,e=(t=>t)){return{query:e(n),ref:n}}let wS=(()=>{class n{constructor(t,r,i,u,c,p,y,b,A,M,F,V,B,se,Te,He,nt){this.schedulers=y;const tt=(0,Pi.on)(t,p,r),qe=A;M&&qR(tt,p,F,B,se,Te,V,He),[this.firestore,this.persistenceEnabled$]=(0,Pi.cc)(`${tt.name}.firestore`,"AngularFirestore",tt.name,()=>{const At=p.runOutsideAngular(()=>tt.firestore());if(u&&At.settings(u),qe&&At.useEmulator(...qe),i&&!qo(c)){const Rt=()=>{try{return(0,ln.D)(At.enablePersistence(b||void 0).then(()=>!0,()=>!1))}catch(Yt){return"undefined"!=typeof console&&console.warn(Yt),rt(!1)}};return[At,p.runOutsideAngular(Rt)]}return[At,rt(!1)]},[u,qe,i])}collection(t,r){let i;i="string"==typeof t?this.firestore.collection(t):t;const{ref:u,query:c}=XR(i,r),p=this.schedulers.ngZone.run(()=>u);return new ZR(p,c,this)}collectionGroup(t,r){const i=r||(c=>c),u=this.firestore.collectionGroup(t);return new sF(i(u),this)}doc(t){let r;r="string"==typeof t?this.firestore.doc(t):t;const i=this.schedulers.ngZone.run(()=>r);return new YR(i,this)}createId(){return this.firestore.collection("_").doc().id}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(Pi.Dh),h.LFG(Pi.xv,8),h.LFG(QR,8),h.LFG(oF,8),h.LFG(h.Lbi),h.LFG(h.R0b),h.LFG(An.HU),h.LFG(JR,8),h.LFG(aF,8),h.LFG(_S,8),h.LFG(UR,8),h.LFG(BR,8),h.LFG(jR,8),h.LFG(HR,8),h.LFG($R,8),h.LFG(GR,8),h.LFG(mD,8))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),uF=(()=>{class n{constructor(){yS.Z.registerVersion("angularfire",An.q4.full,"fst-compat")}static enablePersistence(t){return{ngModule:n,providers:[{provide:QR,useValue:!0},{provide:JR,useValue:t}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({providers:[wS]}),n})(),eP=(()=>{class n{constructor(t){this.db=t,this.actoresRef=this.db.collection("actores")}crearActor(t){return this.actoresRef.add(Object.assign({},t))}obtenerActor(){return this.actoresRef.valueChanges()}update(t,r){return this.actoresRef.doc(t).update(r)}delete(t){return this.actoresRef.doc(t).delete()}obtenerColeccionActores(){return this.actoresRef.snapshotChanges().pipe((0,Dt.U)(t=>t.map(r=>{const i=r.payload.doc.data();return Object.assign({id:r.payload.doc.id},i)})))}cambiarValidado(t,r){return 1==r?this.actoresRef.doc(t).update({validado:!1}):this.actoresRef.doc(t).update({validado:!0})}obtenerSnapshot(){return this.actoresRef.snapshotChanges()}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(wS))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class tP{}class nP{}class nd{constructor(e){this.normalizedNames=new Map,this.lazyUpdate=null,e?this.lazyInit="string"==typeof e?()=>{this.headers=new Map,e.split("\n").forEach(t=>{const r=t.indexOf(":");if(r>0){const i=t.slice(0,r),u=i.toLowerCase(),c=t.slice(r+1).trim();this.maybeSetNormalizedName(i,u),this.headers.has(u)?this.headers.get(u).push(c):this.headers.set(u,[c])}})}:()=>{this.headers=new Map,Object.keys(e).forEach(t=>{let r=e[t];const i=t.toLowerCase();"string"==typeof r&&(r=[r]),r.length>0&&(this.headers.set(i,r),this.maybeSetNormalizedName(t,i))})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();const t=this.headers.get(e.toLowerCase());return t&&t.length>0?t[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,t){return this.clone({name:e,value:t,op:"a"})}set(e,t){return this.clone({name:e,value:t,op:"s"})}delete(e,t){return this.clone({name:e,value:t,op:"d"})}maybeSetNormalizedName(e,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,e)}init(){this.lazyInit&&(this.lazyInit instanceof nd?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(t=>{this.headers.set(t,e.headers.get(t)),this.normalizedNames.set(t,e.normalizedNames.get(t))})}clone(e){const t=new nd;return t.lazyInit=this.lazyInit&&this.lazyInit instanceof nd?this.lazyInit:this,t.lazyUpdate=(this.lazyUpdate||[]).concat([e]),t}applyUpdate(e){const t=e.name.toLowerCase();switch(e.op){case"a":case"s":let r=e.value;if("string"==typeof r&&(r=[r]),0===r.length)return;this.maybeSetNormalizedName(e.name,t);const i=("a"===e.op?this.headers.get(t):void 0)||[];i.push(...r),this.headers.set(t,i);break;case"d":const u=e.value;if(u){let c=this.headers.get(t);if(!c)return;c=c.filter(p=>-1===u.indexOf(p)),0===c.length?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,c)}else this.headers.delete(t),this.normalizedNames.delete(t)}}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(t=>e(this.normalizedNames.get(t),this.headers.get(t)))}}class lF{encodeKey(e){return rP(e)}encodeValue(e){return rP(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}}const dF=/%(\d[a-f0-9])/gi,hF={40:"@","3A":":",24:"$","2C":",","3B":";","2B":"+","3D":"=","3F":"?","2F":"/"};function rP(n){return encodeURIComponent(n).replace(dF,(e,t)=>{var r;return null!==(r=hF[t])&&void 0!==r?r:e})}function iP(n){return`${n}`}class ef{constructor(e={}){if(this.updates=null,this.cloneFrom=null,this.encoder=e.encoder||new lF,e.fromString){if(e.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function cF(n,e){const t=new Map;return n.length>0&&n.replace(/^\?/,"").split("&").forEach(i=>{const u=i.indexOf("="),[c,p]=-1==u?[e.decodeKey(i),""]:[e.decodeKey(i.slice(0,u)),e.decodeValue(i.slice(u+1))],y=t.get(c)||[];y.push(p),t.set(c,y)}),t}(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(t=>{const r=e.fromObject[t];this.map.set(t,Array.isArray(r)?r:[r])})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();const t=this.map.get(e);return t?t[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,t){return this.clone({param:e,value:t,op:"a"})}appendAll(e){const t=[];return Object.keys(e).forEach(r=>{const i=e[r];Array.isArray(i)?i.forEach(u=>{t.push({param:r,value:u,op:"a"})}):t.push({param:r,value:i,op:"a"})}),this.clone(t)}set(e,t){return this.clone({param:e,value:t,op:"s"})}delete(e,t){return this.clone({param:e,value:t,op:"d"})}toString(){return this.init(),this.keys().map(e=>{const t=this.encoder.encodeKey(e);return this.map.get(e).map(r=>t+"="+this.encoder.encodeValue(r)).join("&")}).filter(e=>""!==e).join("&")}clone(e){const t=new ef({encoder:this.encoder});return t.cloneFrom=this.cloneFrom||this,t.updates=(this.updates||[]).concat(e),t}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":const t=("a"===e.op?this.map.get(e.param):void 0)||[];t.push(iP(e.value)),this.map.set(e.param,t);break;case"d":if(void 0===e.value){this.map.delete(e.param);break}{let r=this.map.get(e.param)||[];const i=r.indexOf(iP(e.value));-1!==i&&r.splice(i,1),r.length>0?this.map.set(e.param,r):this.map.delete(e.param)}}}),this.cloneFrom=this.updates=null)}}class fF{constructor(){this.map=new Map}set(e,t){return this.map.set(e,t),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}has(e){return this.map.has(e)}keys(){return this.map.keys()}}function sP(n){return"undefined"!=typeof ArrayBuffer&&n instanceof ArrayBuffer}function oP(n){return"undefined"!=typeof Blob&&n instanceof Blob}function aP(n){return"undefined"!=typeof FormData&&n instanceof FormData}class g0{constructor(e,t,r,i){let u;if(this.url=t,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=e.toUpperCase(),function pF(n){switch(n){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||i?(this.body=void 0!==r?r:null,u=i):u=r,u&&(this.reportProgress=!!u.reportProgress,this.withCredentials=!!u.withCredentials,u.responseType&&(this.responseType=u.responseType),u.headers&&(this.headers=u.headers),u.context&&(this.context=u.context),u.params&&(this.params=u.params)),this.headers||(this.headers=new nd),this.context||(this.context=new fF),this.params){const c=this.params.toString();if(0===c.length)this.urlWithParams=t;else{const p=t.indexOf("?");this.urlWithParams=t+(-1===p?"?":p<t.length-1?"&":"")+c}}else this.params=new ef,this.urlWithParams=t}serializeBody(){return null===this.body?null:sP(this.body)||oP(this.body)||aP(this.body)||function gF(n){return"undefined"!=typeof URLSearchParams&&n instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof ef?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||aP(this.body)?null:oP(this.body)?this.body.type||null:sP(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof ef?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(e={}){var t;const r=e.method||this.method,i=e.url||this.url,u=e.responseType||this.responseType,c=void 0!==e.body?e.body:this.body,p=void 0!==e.withCredentials?e.withCredentials:this.withCredentials,y=void 0!==e.reportProgress?e.reportProgress:this.reportProgress;let b=e.headers||this.headers,A=e.params||this.params;const M=null!==(t=e.context)&&void 0!==t?t:this.context;return void 0!==e.setHeaders&&(b=Object.keys(e.setHeaders).reduce((F,V)=>F.set(V,e.setHeaders[V]),b)),e.setParams&&(A=Object.keys(e.setParams).reduce((F,V)=>F.set(V,e.setParams[V]),A)),new g0(r,i,c,{params:A,headers:b,context:M,reportProgress:y,responseType:u,withCredentials:p})}}var kr=(()=>((kr=kr||{})[kr.Sent=0]="Sent",kr[kr.UploadProgress=1]="UploadProgress",kr[kr.ResponseHeader=2]="ResponseHeader",kr[kr.DownloadProgress=3]="DownloadProgress",kr[kr.Response=4]="Response",kr[kr.User=5]="User",kr))();class bS{constructor(e,t=200,r="OK"){this.headers=e.headers||new nd,this.status=void 0!==e.status?e.status:t,this.statusText=e.statusText||r,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}}class IS extends bS{constructor(e={}){super(e),this.type=kr.ResponseHeader}clone(e={}){return new IS({headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class _D extends bS{constructor(e={}){super(e),this.type=kr.Response,this.body=void 0!==e.body?e.body:null}clone(e={}){return new _D({body:void 0!==e.body?e.body:this.body,headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class uP extends bS{constructor(e){super(e,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${e.url||"(unknown url)"}`:`Http failure response for ${e.url||"(unknown url)"}: ${e.status} ${e.statusText}`,this.error=e.error||null}}function DS(n,e){return{body:e,headers:n.headers,context:n.context,observe:n.observe,params:n.params,reportProgress:n.reportProgress,responseType:n.responseType,withCredentials:n.withCredentials}}let lP=(()=>{class n{constructor(t){this.handler=t}request(t,r,i={}){let u;if(t instanceof g0)u=t;else{let y,b;y=i.headers instanceof nd?i.headers:new nd(i.headers),i.params&&(b=i.params instanceof ef?i.params:new ef({fromObject:i.params})),u=new g0(t,r,void 0!==i.body?i.body:null,{headers:y,context:i.context,params:b,reportProgress:i.reportProgress,responseType:i.responseType||"json",withCredentials:i.withCredentials})}const c=rt(u).pipe(Ya(y=>this.handler.handle(y)));if(t instanceof g0||"events"===i.observe)return c;const p=c.pipe(Br(y=>y instanceof _D));switch(i.observe||"body"){case"body":switch(u.responseType){case"arraybuffer":return p.pipe((0,Dt.U)(y=>{if(null!==y.body&&!(y.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return y.body}));case"blob":return p.pipe((0,Dt.U)(y=>{if(null!==y.body&&!(y.body instanceof Blob))throw new Error("Response is not a Blob.");return y.body}));case"text":return p.pipe((0,Dt.U)(y=>{if(null!==y.body&&"string"!=typeof y.body)throw new Error("Response is not a string.");return y.body}));default:return p.pipe((0,Dt.U)(y=>y.body))}case"response":return p;default:throw new Error(`Unreachable: unhandled observe type ${i.observe}}`)}}delete(t,r={}){return this.request("DELETE",t,r)}get(t,r={}){return this.request("GET",t,r)}head(t,r={}){return this.request("HEAD",t,r)}jsonp(t,r){return this.request("JSONP",t,{params:(new ef).append(r,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(t,r={}){return this.request("OPTIONS",t,r)}patch(t,r,i={}){return this.request("PATCH",t,DS(i,r))}post(t,r,i={}){return this.request("POST",t,DS(i,r))}put(t,r,i={}){return this.request("PUT",t,DS(i,r))}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(tP))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();class cP{constructor(e,t){this.next=e,this.interceptor=t}handle(e){return this.interceptor.intercept(e,this.next)}}const dP=new h.OlP("HTTP_INTERCEPTORS");let mF=(()=>{class n{intercept(t,r){return r.handle(t)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();const yF=/^\)\]\}',?\n/;let hP=(()=>{class n{constructor(t){this.xhrFactory=t}handle(t){if("JSONP"===t.method)throw new Error("Attempted to construct Jsonp request without HttpClientJsonpModule installed.");return new bn.y(r=>{const i=this.xhrFactory.build();if(i.open(t.method,t.urlWithParams),t.withCredentials&&(i.withCredentials=!0),t.headers.forEach((V,B)=>i.setRequestHeader(V,B.join(","))),t.headers.has("Accept")||i.setRequestHeader("Accept","application/json, text/plain, */*"),!t.headers.has("Content-Type")){const V=t.detectContentTypeHeader();null!==V&&i.setRequestHeader("Content-Type",V)}if(t.responseType){const V=t.responseType.toLowerCase();i.responseType="json"!==V?V:"text"}const u=t.serializeBody();let c=null;const p=()=>{if(null!==c)return c;const V=i.statusText||"OK",B=new nd(i.getAllResponseHeaders()),se=function _F(n){return"responseURL"in n&&n.responseURL?n.responseURL:/^X-Request-URL:/m.test(n.getAllResponseHeaders())?n.getResponseHeader("X-Request-URL"):null}(i)||t.url;return c=new IS({headers:B,status:i.status,statusText:V,url:se}),c},y=()=>{let{headers:V,status:B,statusText:se,url:Te}=p(),He=null;204!==B&&(He=void 0===i.response?i.responseText:i.response),0===B&&(B=He?200:0);let nt=B>=200&&B<300;if("json"===t.responseType&&"string"==typeof He){const tt=He;He=He.replace(yF,"");try{He=""!==He?JSON.parse(He):null}catch(qe){He=tt,nt&&(nt=!1,He={error:qe,text:He})}}nt?(r.next(new _D({body:He,headers:V,status:B,statusText:se,url:Te||void 0})),r.complete()):r.error(new uP({error:He,headers:V,status:B,statusText:se,url:Te||void 0}))},b=V=>{const{url:B}=p(),se=new uP({error:V,status:i.status||0,statusText:i.statusText||"Unknown Error",url:B||void 0});r.error(se)};let A=!1;const M=V=>{A||(r.next(p()),A=!0);let B={type:kr.DownloadProgress,loaded:V.loaded};V.lengthComputable&&(B.total=V.total),"text"===t.responseType&&!!i.responseText&&(B.partialText=i.responseText),r.next(B)},F=V=>{let B={type:kr.UploadProgress,loaded:V.loaded};V.lengthComputable&&(B.total=V.total),r.next(B)};return i.addEventListener("load",y),i.addEventListener("error",b),i.addEventListener("timeout",b),i.addEventListener("abort",b),t.reportProgress&&(i.addEventListener("progress",M),null!==u&&i.upload&&i.upload.addEventListener("progress",F)),i.send(u),r.next({type:kr.Sent}),()=>{i.removeEventListener("error",b),i.removeEventListener("abort",b),i.removeEventListener("load",y),i.removeEventListener("timeout",b),t.reportProgress&&(i.removeEventListener("progress",M),null!==u&&i.upload&&i.upload.removeEventListener("progress",F)),i.readyState!==i.DONE&&i.abort()}})}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(nn))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();const CS=new h.OlP("XSRF_COOKIE_NAME"),TS=new h.OlP("XSRF_HEADER_NAME");class fP{}let vF=(()=>{class n{constructor(t,r,i){this.doc=t,this.platform=r,this.cookieName=i,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const t=this.doc.cookie||"";return t!==this.lastCookieString&&(this.parseCount++,this.lastToken=jo(t,this.cookieName),this.lastCookieString=t),this.lastToken}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(ue),h.LFG(h.Lbi),h.LFG(CS))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})(),AS=(()=>{class n{constructor(t,r){this.tokenService=t,this.headerName=r}intercept(t,r){const i=t.url.toLowerCase();if("GET"===t.method||"HEAD"===t.method||i.startsWith("http://")||i.startsWith("https://"))return r.handle(t);const u=this.tokenService.getToken();return null!==u&&!t.headers.has(this.headerName)&&(t=t.clone({headers:t.headers.set(this.headerName,u)})),r.handle(t)}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(fP),h.LFG(TS))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})(),EF=(()=>{class n{constructor(t,r){this.backend=t,this.injector=r,this.chain=null}handle(t){if(null===this.chain){const r=this.injector.get(dP,[]);this.chain=r.reduceRight((i,u)=>new cP(i,u),this.backend)}return this.chain.handle(t)}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(nP),h.LFG(h.zs3))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})(),wF=(()=>{class n{static disable(){return{ngModule:n,providers:[{provide:AS,useClass:mF}]}}static withOptions(t={}){return{ngModule:n,providers:[t.cookieName?{provide:CS,useValue:t.cookieName}:[],t.headerName?{provide:TS,useValue:t.headerName}:[]]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({providers:[AS,{provide:dP,useExisting:AS,multi:!0},{provide:fP,useClass:vF},{provide:CS,useValue:"XSRF-TOKEN"},{provide:TS,useValue:"X-XSRF-TOKEN"}]}),n})(),bF=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({providers:[lP,{provide:tP,useClass:EF},hP,{provide:nP,useExisting:hP}],imports:[[wF.withOptions({cookieName:"XSRF-TOKEN",headerName:"X-XSRF-TOKEN"})]]}),n})(),IF=(()=>{class n{constructor(t){this.http=t}ObtenerGitHub(){return this.http.get("https://api.github.com/users/EzequielArchilla")}ObtenerPaises(){return this.http.get("https://restcountries.com/v3.1/all")}ObtenerPais(t){return this.http.get("https://restcountries.com/v3.1/name/"+t+"?fullText=true")}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(lP))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function DF(n,e){if(1&n){const t=h.EpF();h.TgZ(0,"div",4)(1,"input",5),h.NdJ("ngModelChange",function(i){return h.CHM(t),h.oxw().paisSeleccionado=i})("ngModelChange",function(){return h.CHM(t),h.oxw().valueChange()}),h.qZA(),h.TgZ(2,"h6",6),h._uU(3),h.qZA(),h._UZ(4,"img",7),h.qZA()}if(2&n){const t=e.$implicit,r=h.oxw();h.xp6(1),h.Q6J("ngModel",r.paisSeleccionado)("value",t.name.common),h.xp6(2),h.Oqu(t.name.common),h.xp6(1),h.Q6J("src",t.flags.png,h.LSH)}}let CF=(()=>{class n{constructor(t){this.apiService=t,this.paisOut=new h.vpe,this.paisSeleccionado=""}ngOnInit(){this.apiService.ObtenerPaises().subscribe(t=>{this.paises=t.filter(r=>"Argentina"==r.name.common||"Uruguay"==r.name.common||"Chile"==r.name.common)})}valueChange(){this.paisOut.emit(this.paisSeleccionado)}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(IF))},n.\u0275cmp=h.Xpm({type:n,selectors:[["app-tabla-paises"]],outputs:{paisOut:"paisOut"},decls:5,vars:1,consts:[[1,"d-flex","justify-content-between","align-items-center","mb-3"],[1,"text-primary"],[1,"list-group","mb-3"],["class","list-group-item d-flex justify-content-between lh-sm",4,"ngFor","ngForOf"],[1,"list-group-item","d-flex","justify-content-between","lh-sm"],["type","radio","name","radioPaises",3,"ngModel","value","ngModelChange"],[1,"my-0"],["width","80","height","50",3,"src"]],template:function(t,r){1&t&&(h.TgZ(0,"h4",0)(1,"span",1),h._uU(2,"Pais"),h.qZA()(),h.TgZ(3,"div",2),h.YNc(4,DF,5,4,"div",3),h.qZA()),2&t&&(h.xp6(4),h.Q6J("ngForOf",r.paises))},directives:[Vn,ev,Zd,om,J_],styles:[""]}),n})();function TF(n,e){1&n&&(h.TgZ(0,"div",18),h._uU(1," El nombre es requerido "),h.qZA())}function AF(n,e){1&n&&(h.TgZ(0,"div",18),h._uU(1," El apellido es requerido "),h.qZA())}let SF=(()=>{class n{constructor(t,r){this.actorFire=t,this.fb=r,this.paisSeleccionado="",this.nuevoActor=new Ew,this.actorForm=r.group({nombre:["",[Xi.required]],apellido:["",Xi.required],email:["",[Xi.required,Xi.min(18),Xi.max(99)]],direccion:["",Xi.required],telefono:["",[Xi.required]]}),console.log()}ngOnInit(){}asignarPaisSeleccionado(t){this.paisSeleccionado=t}crearActor(){this.nuevoActor.nombre=this.actorForm.controls.nombre.value,this.nuevoActor.apellido=this.actorForm.controls.apellido.value,this.nuevoActor.email=this.actorForm.controls.email.value,this.nuevoActor.direccion=this.actorForm.controls.direccion.value,this.nuevoActor.telefono=this.actorForm.controls.telefono.value,this.actorFire.crearActor(this.nuevoActor)}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(eP),h.Y36(Co))},n.\u0275cmp=h.Xpm({type:n,selectors:[["app-actor-alta"]],decls:45,vars:4,consts:[[1,"bg-light"],[1,"container"],[1,"py-5","mb-4","text-center","bg-lightBlue"],[1,"row"],[1,"col-md-4","order-md-2","mb-4"],[3,"paisOut"],[1,"col-md-8","order-md-1"],[1,"mb-3","text-primary"],[1,"needs-validation",3,"formGroup","ngSubmit"],[1,"col-md-6","mb-3"],["for","firstName"],["type","text","id","firstName","placeholder","","value","","formControlName","nombre",1,"form-control"],["class","invalid-feedback",4,"ngIf"],["for","lastName"],["type","text","id","lastName","placeholder","","value","","formControlName","apellido",1,"form-control"],[1,"mb-3"],["for","email"],["type","email","id","email","placeholder","you@example.com","formControlName","email",1,"form-control"],[1,"invalid-feedback"],["for","address"],["type","text","id","address","placeholder","1234 Main St","formControlName","direccion",1,"form-control"],["for","address2"],["type","tel","id","address2","placeholder","+54","formControlName","telefono",1,"form-control"],["type","submit",1,"btn","btn-primary","btn-block",3,"disabled"],[1,"my-5","pt-5","text-muted","text-center","text-small"],[1,"mb-1"]],template:function(t,r){1&t&&(h.TgZ(0,"body",0)(1,"div",1)(2,"div",2)(3,"h2"),h._uU(4,"Complete los datos del actor"),h.qZA()(),h.TgZ(5,"div",3)(6,"div",4)(7,"app-tabla-paises",5),h.NdJ("paisOut",function(u){return r.asignarPaisSeleccionado(u)}),h.qZA()(),h.TgZ(8,"div",6)(9,"h4",7),h._uU(10,"Informacion basica"),h.qZA(),h.TgZ(11,"form",8),h.NdJ("ngSubmit",function(){return r.crearActor()}),h.TgZ(12,"div",3)(13,"div",9)(14,"label",10),h._uU(15,"Nombre"),h.qZA(),h._UZ(16,"input",11),h.YNc(17,TF,2,0,"div",12),h.qZA(),h.TgZ(18,"div",9)(19,"label",13),h._uU(20,"Apellido"),h.qZA(),h._UZ(21,"input",14),h.YNc(22,AF,2,0,"div",12),h.qZA()(),h.TgZ(23,"div",15)(24,"label",16),h._uU(25,"Email"),h.qZA(),h._UZ(26,"input",17),h.TgZ(27,"div",18),h._uU(28," Please enter a valid email address for shipping updates. "),h.qZA()(),h.TgZ(29,"div",15)(30,"label",19),h._uU(31,"Direccion"),h.qZA(),h._UZ(32,"input",20),h.TgZ(33,"div",18),h._uU(34," Please enter your shipping address. "),h.qZA()(),h.TgZ(35,"div",15)(36,"label",21),h._uU(37,"Telefono"),h.qZA(),h._UZ(38,"input",22),h.qZA(),h._UZ(39,"br"),h.TgZ(40,"button",23),h._uU(41," Aceptar "),h.qZA()()()(),h.TgZ(42,"footer",24)(43,"p",25),h._uU(44,"\xa9 Ezequiel Archilla 2022"),h.qZA()()()()),2&t&&(h.xp6(11),h.Q6J("formGroup",r.actorForm),h.xp6(6),h.Q6J("ngIf",(null==r.actorForm.controls.nombre.errors?null:r.actorForm.controls.nombre.errors.required)&&r.actorForm.controls.nombre.touched),h.xp6(5),h.Q6J("ngIf",(null==r.actorForm.controls.apellido.errors?null:r.actorForm.controls.apellido.errors.required)&&r.actorForm.controls.apellido.touched),h.xp6(18),h.Q6J("disabled",r.actorForm.invalid))},directives:[CF,X_,L_,Kf,Zd,om,Zf,$n],styles:[".container[_ngcontent-%COMP%]{max-width:960px}.lh-condensed[_ngcontent-%COMP%]{line-height:1.25}.bg-lightBlue[_ngcontent-%COMP%]{background-color:#afdee6}"]}),n})(),MF=(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=h.Xpm({type:n,selectors:[["app-actor-listado"]],decls:2,vars:0,template:function(t,r){1&t&&(h.TgZ(0,"p"),h._uU(1,"actor-listado works!"),h.qZA())},styles:[""]}),n})(),xF=(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=h.Xpm({type:n,selectors:[["app-bienvenido"]],decls:0,vars:0,template:function(t,r){},styles:["body[_ngcontent-%COMP%]{padding-top:3.5rem}"]}),n})();class SS{constructor(){this.id=0,this.nombre="",this.tipo=vD.otros,this.fechaDeEstreno=new Date,this.cantidadDePublico=0,this.fotoDePelicula="",this.actores=[]}}var vD=(()=>(function(n){n[n.terror=0]="terror",n[n.comedia=1]="comedia",n[n.amor=2]="amor",n[n.otros=3]="otros"}(vD||(vD={})),vD))();let pP=(()=>{class n{constructor(t){this.db=t,this.peliculasRef=this.db.collection("peliculas")}crearPelicula(t){return this.peliculasRef.add(Object.assign({},t))}obtenerPelicula(){return this.peliculasRef.valueChanges()}update(t,r){return this.peliculasRef.doc(t).update(r)}delete(t){return this.peliculasRef.doc(t).delete()}obtenerColeccionPeliculas(){return this.peliculasRef.snapshotChanges().pipe((0,Dt.U)(t=>t.map(r=>{const i=r.payload.doc.data();return Object.assign({id1:r.payload.doc.id},i)})))}cambiarValidado(t,r){return 1==r?this.peliculasRef.doc(t).update({validado:!1}):this.peliculasRef.doc(t).update({validado:!0})}obtenerSnapshot(){return this.peliculasRef.snapshotChanges()}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(wS))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function RF(n,e){if(1&n){const t=h.EpF();h.TgZ(0,"tr")(1,"th",3),h._uU(2),h.qZA(),h.TgZ(3,"td"),h._UZ(4,"img",4),h.qZA(),h.TgZ(5,"td")(6,"button",5),h.NdJ("click",function(){const u=h.CHM(t).$implicit;return h.oxw().verDetalle(u)}),h._uU(7,"Detalle"),h.qZA()()()}if(2&n){const t=e.$implicit;h.xp6(2),h.Oqu(t.nombre),h.xp6(2),h.Q6J("src",t.fotoDePelicula,h.LSH)}}let PF=(()=>{class n{constructor(t){this.peliculaFire=t,this.detallePelicula=new h.vpe,this.listaPeliculas=[],this.peliculaFire.obtenerPelicula().subscribe(r=>{this.listaPeliculas=r})}ngOnInit(){}verDetalle(t){this.detallePelicula.emit(t)}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(pP))},n.\u0275cmp=h.Xpm({type:n,selectors:[["app-tabla-pelicula"]],outputs:{detallePelicula:"detallePelicula"},decls:9,vars:1,consts:[[1,"table"],["scope","col"],[4,"ngFor","ngForOf"],["scope","row"],["alt","","height","60px",3,"src"],[1,"btn-info",3,"click"]],template:function(t,r){1&t&&(h.TgZ(0,"table",0)(1,"thead")(2,"tr")(3,"th",1),h._uU(4,"Nombre"),h.qZA(),h.TgZ(5,"th",1),h._uU(6,"Imagen"),h.qZA()()(),h.TgZ(7,"tbody"),h.YNc(8,RF,8,2,"tr",2),h.qZA()()),2&t&&(h.xp6(8),h.Q6J("ngForOf",r.listaPeliculas))},directives:[Vn],styles:[""]}),n})();function NF(n,e){if(1&n&&(h.TgZ(0,"div")(1,"div",2)(2,"div",3)(3,"h4",4),h._uU(4),h.qZA(),h.TgZ(5,"p",5),h._uU(6),h.qZA(),h.TgZ(7,"p",5),h._uU(8),h.qZA(),h.TgZ(9,"p",5),h._uU(10),h.qZA()()()()),2&n){const t=h.oxw();h.xp6(4),h.Oqu(t.detallePelicula.nombre),h.xp6(2),h.hij("Nombre: ",t.detallePelicula.nombre,""),h.xp6(2),h.hij("Publico: ",t.detallePelicula.cantidadDePublico,""),h.xp6(2),h.hij("Estreno: ",t.detallePelicula.fechaDeEstreno,"")}}function OF(n,e){1&n&&(h.TgZ(0,"div",6)(1,"div",3)(2,"h4",4),h._uU(3,"Sin peliculas seleccionadas"),h.qZA()()())}let kF=(()=>{class n{constructor(){this.detallePelicula=new SS}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=h.Xpm({type:n,selectors:[["app-detalle-pelicula"]],inputs:{detallePelicula:"detallePelicula"},decls:3,vars:2,consts:[[4,"ngIf","ngIfElse"],["sinDatos",""],[1,"card",2,"width","fit-content"],[1,"card-body"],[1,"card-title"],[1,"card-text"],[1,"card",2,"width","200px"]],template:function(t,r){if(1&t&&(h.YNc(0,NF,11,4,"div",0),h.YNc(1,OF,4,0,"ng-template",null,1,h.W1O)),2&t){const i=h.MAs(2);h.Q6J("ngIf",0!=r.detallePelicula.id)("ngIfElse",i)}},directives:[$n],styles:[""]}),n})(),FF=(()=>{class n{constructor(){this.peliculaSeleccionada=new SS}ngOnInit(){}mostrarDetallePelicula(t){this.peliculaSeleccionada=t}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=h.Xpm({type:n,selectors:[["app-busqueda"]],decls:30,vars:1,consts:[[1,"navbar","navbar-expand-md","navbar-dark","fixed-top","bg-dark"],["href","#",1,"navbar-brand"],["type","button","data-toggle","collapse","data-target","#navbarsExampleDefault","aria-controls","navbarsExampleDefault","aria-expanded","false","aria-label","Toggle navigation",1,"navbar-toggler"],[1,"navbar-toggler-icon"],["id","navbarsExampleDefault",1,"collapse","navbar-collapse"],[1,"navbar-nav","mr-auto"],[1,"nav-item"],["routerLink","/actor/alta","routerLinkActive","router-link-active",1,"nav-link"],[1,"sr-only"],["routerLink","/peliculas/alta","routerLinkActive","router-link-active",1,"nav-link"],["role","main"],[1,"jumbotron"],[1,"container"],[3,"detallePelicula"],[1,"row"],[2,"width","100%"]],template:function(t,r){1&t&&(h.TgZ(0,"body")(1,"nav",0)(2,"a",1),h._uU(3,"Simulacro Parcial"),h.qZA(),h.TgZ(4,"button",2),h._UZ(5,"span",3),h.qZA(),h.TgZ(6,"div",4)(7,"ul",5)(8,"li",6)(9,"a",7),h._uU(10,"Alta actor "),h.TgZ(11,"span",8),h._uU(12,"(current)"),h.qZA()()(),h.TgZ(13,"li",6)(14,"a",9),h._uU(15,"Alta pelicula "),h.TgZ(16,"span",8),h._uU(17,"(current)"),h.qZA()()()()()(),h.TgZ(18,"main",10)(19,"div",11)(20,"div",12)(21,"app-tabla-pelicula",13),h.NdJ("detallePelicula",function(u){return r.mostrarDetallePelicula(u)}),h.qZA()()(),h.TgZ(22,"div",12)(23,"div",14)(24,"div",15),h._UZ(25,"app-detalle-pelicula",13),h.qZA()(),h._UZ(26,"hr"),h.qZA()(),h.TgZ(27,"footer",12)(28,"p"),h._uU(29,"\xa9 Ezequiel Archilla 2022"),h.qZA()()()),2&t&&(h.xp6(25),h.Q6J("detallePelicula",r.peliculaSeleccionada))},directives:[sl,v_,PF,kF],styles:["body[_ngcontent-%COMP%]{padding-top:3.5rem}"]}),n})();const gP="firebasestorage.googleapis.com",mP="storageBucket";class dr extends xt.ZR{constructor(e,t){super(MS(e),`Firebase Storage: ${t} (${MS(e)})`),this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,dr.prototype)}_codeEquals(e){return MS(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.message=this.customData.serverResponse?`${this._baseMessage}\n${this.customData.serverResponse}`:this._baseMessage}}function MS(n){return"storage/"+n}function xS(){return new dr("unknown","An unknown error occurred, please check the error payload for server response.")}function yP(){return new dr("canceled","User canceled the upload/download.")}function _P(){return new dr("cannot-slice-blob","Cannot slice blob for upload. Please retry the upload.")}function Gy(n){return new dr("invalid-argument",n)}function vP(){return new dr("app-deleted","The Firebase app was deleted.")}function EP(n){return new dr("invalid-root-operation","The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function m0(n,e){return new dr("invalid-format","String does not match format '"+n+"': "+e)}function y0(n){throw new dr("internal-error","Internal error: "+n)}class is{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let r;try{r=is.makeFromUrl(e,t)}catch(i){return new is(e,"")}if(""===r.path)return r;throw function WF(n){return new dr("invalid-default-bucket","Invalid default bucket '"+n+"'.")}(e)}static makeFromUrl(e,t){let r=null;const i="([A-Za-z0-9.\\-_]+)",p=new RegExp("^gs://"+i+"(/(.*))?$","i");function b(qe){qe.path_=decodeURIComponent(qe.path)}const M=t.replace(/[.]/g,"\\."),tt=[{regex:p,indices:{bucket:1,path:3},postModify:function u(qe){"/"===qe.path.charAt(qe.path.length-1)&&(qe.path_=qe.path_.slice(0,-1))}},{regex:new RegExp(`^https?://${M}/v[A-Za-z0-9_]+/b/${i}/o(/([^?#]*).*)?$`,"i"),indices:{bucket:1,path:3},postModify:b},{regex:new RegExp(`^https?://${t===gP?"(?:storage.googleapis.com|storage.cloud.google.com)":t}/${i}/([^?#]*)`,"i"),indices:{bucket:1,path:2},postModify:b}];for(let qe=0;qe<tt.length;qe++){const At=tt[qe],Rt=At.regex.exec(e);if(Rt){let Ir=Rt[At.indices.path];Ir||(Ir=""),r=new is(Rt[At.indices.bucket],Ir),At.postModify(r);break}}if(null==r)throw function zF(n){return new dr("invalid-url","Invalid URL '"+n+"'.")}(e);return r}}class QF{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}function ED(n){return"string"==typeof n||n instanceof String}function wP(n){return RS()&&n instanceof Blob}function RS(){return"undefined"!=typeof Blob}function PS(n,e,t,r){if(r<e)throw Gy(`Invalid value for '${n}'. Expected ${e} or greater.`);if(r>t)throw Gy(`Invalid value for '${n}'. Expected ${t} or less.`)}function rd(n,e,t){let r=e;return null==t&&(r=`https://${e}`),`${t}://${r}/v0${n}`}function bP(n){const e=encodeURIComponent;let t="?";for(const r in n)n.hasOwnProperty(r)&&(t=t+(e(r)+"=")+e(n[r])+"&");return t=t.slice(0,-1),t}var tf=(()=>(function(n){n[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT"}(tf||(tf={})),tf))();class rL{constructor(e,t,r,i,u,c,p,y,b,A,M){this.url_=e,this.method_=t,this.headers_=r,this.body_=i,this.successCodes_=u,this.additionalRetryCodes_=c,this.callback_=p,this.errorCallback_=y,this.timeout_=b,this.progressCallback_=A,this.connectionFactory_=M,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((F,V)=>{this.resolve_=F,this.reject_=V,this.start_()})}start_(){const t=(r,i)=>{const u=this.resolve_,c=this.reject_,p=i.connection;if(i.wasSuccessCode)try{const y=this.callback_(p,p.getResponse());!function eL(n){return void 0!==n}(y)?u():u(y)}catch(y){c(y)}else if(null!==p){const y=xS();y.serverResponse=p.getErrorText(),c(this.errorCallback_?this.errorCallback_(p,y):y)}else c(i.canceled?this.appDelete_?vP():yP():function qF(){return new dr("retry-limit-exceeded","Max retry time for operation exceeded, please try again.")}())};this.canceled_?t(0,new wD(!1,null,!0)):this.backoffId_=function JF(n,e,t){let r=1,i=null,u=null,c=!1,p=0;function y(){return 2===p}let b=!1;function A(...Te){b||(b=!0,e.apply(null,Te))}function M(Te){i=setTimeout(()=>{i=null,n(V,y())},Te)}function F(){u&&clearTimeout(u)}function V(Te,...He){if(b)return void F();if(Te)return F(),void A.call(null,Te,...He);if(y()||c)return F(),void A.call(null,Te,...He);let tt;r<64&&(r*=2),1===p?(p=2,tt=0):tt=1e3*(r+Math.random()),M(tt)}let B=!1;function se(Te){B||(B=!0,F(),!b&&(null!==i?(Te||(p=2),clearTimeout(i),M(0)):Te||(p=1)))}return M(0),u=setTimeout(()=>{c=!0,se(!0)},t),se}((r,i)=>{if(i)return void r(!1,new wD(!1,null,!0));const u=this.connectionFactory_();this.pendingConnection_=u;const c=p=>{null!==this.progressCallback_&&this.progressCallback_(p.loaded,p.lengthComputable?p.total:-1)};null!==this.progressCallback_&&u.addUploadProgressListener(c),u.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{null!==this.progressCallback_&&u.removeUploadProgressListener(c),this.pendingConnection_=null;const p=u.getErrorCode()===tf.NO_ERROR,y=u.getStatus();if(!p||this.isRetryStatusCode_(y)){const A=u.getErrorCode()===tf.ABORT;return void r(!1,new wD(!1,null,A))}const b=-1!==this.successCodes_.indexOf(y);r(!0,new wD(b,u))})},t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&function XF(n){n(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}isRetryStatusCode_(e){const t=e>=500&&e<600,i=-1!==[408,429].indexOf(e),u=-1!==this.additionalRetryCodes_.indexOf(e);return t||i||u}}class wD{constructor(e,t,r){this.wasSuccessCode=e,this.connection=t,this.canceled=!!r}}function cL(...n){const e=function lL(){return"undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0}();if(void 0!==e){const t=new e;for(let r=0;r<n.length;r++)t.append(n[r]);return t.getBlob()}if(RS())return new Blob(n);throw new dr("unsupported-environment","This browser doesn't seem to support creating Blobs")}const Oo={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class NS{constructor(e,t){this.data=e,this.contentType=t||null}}function OS(n,e){switch(n){case Oo.RAW:return new NS(IP(e));case Oo.BASE64:case Oo.BASE64URL:return new NS(DP(n,e));case Oo.DATA_URL:return new NS(function pL(n){const e=new CP(n);return e.base64?DP(Oo.BASE64,e.rest):function fL(n){let e;try{e=decodeURIComponent(n)}catch(t){throw m0(Oo.DATA_URL,"Malformed data URL.")}return IP(e)}(e.rest)}(e),function gL(n){return new CP(n).contentType}(e))}throw xS()}function IP(n){const e=[];for(let t=0;t<n.length;t++){let r=n.charCodeAt(t);r<=127?e.push(r):r<=2047?e.push(192|r>>6,128|63&r):55296==(64512&r)?t<n.length-1&&56320==(64512&n.charCodeAt(t+1))?(r=65536|(1023&r)<<10|1023&n.charCodeAt(++t),e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r)):e.push(239,191,189):56320==(64512&r)?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(e)}function DP(n,e){switch(n){case Oo.BASE64:{const i=-1!==e.indexOf("-"),u=-1!==e.indexOf("_");if(i||u)throw m0(n,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case Oo.BASE64URL:{const i=-1!==e.indexOf("+"),u=-1!==e.indexOf("/");if(i||u)throw m0(n,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let t;try{t=function hL(n){return atob(n)}(e)}catch(i){throw m0(n,"Invalid character found")}const r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}class CP{constructor(e){this.base64=!1,this.contentType=null;const t=e.match(/^data:([^,]+)?,/);if(null===t)throw m0(Oo.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=t[1]||null;null!=r&&(this.base64=function mL(n,e){return n.length>=e.length&&n.substring(n.length-e.length)===e}(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}class xl{constructor(e,t){let r=0,i="";wP(e)?(this.data_=e,r=e.size,i=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=i}size(){return this.size_}type(){return this.type_}slice(e,t){if(wP(this.data_)){const i=function dL(n,e,t){return n.webkitSlice?n.webkitSlice(e,t):n.mozSlice?n.mozSlice(e,t):n.slice?n.slice(e,t):null}(this.data_,e,t);return null===i?null:new xl(i)}{const r=new Uint8Array(this.data_.buffer,e,t-e);return new xl(r,!0)}}static getBlob(...e){if(RS()){const t=e.map(r=>r instanceof xl?r.data_:r);return new xl(cL.apply(null,t))}{const t=e.map(c=>ED(c)?OS(Oo.RAW,c).data:c.data_);let r=0;t.forEach(c=>{r+=c.byteLength});const i=new Uint8Array(r);let u=0;return t.forEach(c=>{for(let p=0;p<c.length;p++)i[u++]=c[p]}),new xl(i,!0)}}uploadData(){return this.data_}}function kS(n){let e;try{e=JSON.parse(n)}catch(t){return null}return function nL(n){return"object"==typeof n&&!Array.isArray(n)}(e)?e:null}function TP(n){const e=n.lastIndexOf("/",n.length-2);return-1===e?n:n.slice(e+1)}function vL(n,e){return e}class Ts{constructor(e,t,r,i){this.server=e,this.local=t||e,this.writable=!!r,this.xform=i||vL}}let bD=null;function _0(){if(bD)return bD;const n=[];n.push(new Ts("bucket")),n.push(new Ts("generation")),n.push(new Ts("metageneration")),n.push(new Ts("name","fullPath",!0));const t=new Ts("name");t.xform=function e(u,c){return function EL(n){return!ED(n)||n.length<2?n:TP(n)}(c)},n.push(t);const i=new Ts("size");return i.xform=function r(u,c){return void 0!==c?Number(c):c},n.push(i),n.push(new Ts("timeCreated")),n.push(new Ts("updated")),n.push(new Ts("md5Hash",null,!0)),n.push(new Ts("cacheControl",null,!0)),n.push(new Ts("contentDisposition",null,!0)),n.push(new Ts("contentEncoding",null,!0)),n.push(new Ts("contentLanguage",null,!0)),n.push(new Ts("contentType",null,!0)),n.push(new Ts("metadata","customMetadata",!0)),bD=n,bD}function AP(n,e,t){const r=kS(e);return null===r?null:function bL(n,e,t){const r={type:"file"},i=t.length;for(let u=0;u<i;u++){const c=t[u];r[c.local]=c.xform(r,e[c.server])}return function wL(n,e){Object.defineProperty(n,"ref",{get:function t(){const u=new is(n.bucket,n.fullPath);return e._makeStorageReference(u)}})}(r,n),r}(n,r,t)}function FS(n,e){const t={},r=e.length;for(let i=0;i<r;i++){const u=e[i];u.writable&&(t[u.server]=n[u.local])}return JSON.stringify(t)}const SP="prefixes";class Rl{constructor(e,t,r,i){this.url=e,this.method=t,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function Pl(n){if(!n)throw xS()}function ID(n,e){return function t(r,i){const u=AP(n,i,e);return Pl(null!==u),u}}function qy(n){return function e(t,r){let i;return i=401===t.getStatus()?t.getErrorText().includes("Firebase App Check token is invalid")?function $F(){return new dr("unauthorized-app","This app does not have permission to access Firebase Storage on this project.")}():function HF(){return new dr("unauthenticated","User is not authenticated, please authenticate using Firebase Authentication and try again.")}():402===t.getStatus()?function jF(n){return new dr("quota-exceeded","Quota for bucket '"+n+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}(n.bucket):403===t.getStatus()?function GF(n){return new dr("unauthorized","User does not have permission to access '"+n+"'.")}(n.path):r,i.serverResponse=r.serverResponse,i}}function v0(n){const e=qy(n);return function t(r,i){let u=e(r,i);return 404===r.getStatus()&&(u=function BF(n){return new dr("object-not-found","Object '"+n+"' does not exist.")}(n.path)),u.serverResponse=i.serverResponse,u}}function xP(n,e,t){const i=rd(e.fullServerUrl(),n.host,n._protocol),c=n.maxOperationRetryTime,p=new Rl(i,"GET",ID(n,t),c);return p.errorHandler=v0(e),p}function SL(n,e,t,r,i){const u={};u.prefix=e.isRoot?"":e.path+"/",t&&t.length>0&&(u.delimiter=t),r&&(u.pageToken=r),i&&(u.maxResults=i);const p=rd(e.bucketOnlyServerUrl(),n.host,n._protocol),b=n.maxOperationRetryTime,A=new Rl(p,"GET",function TL(n,e){return function t(r,i){const u=function CL(n,e,t){const r=kS(t);return null===r?null:function DL(n,e,t){const r={prefixes:[],items:[],nextPageToken:t.nextPageToken};if(t[SP])for(const i of t[SP]){const u=i.replace(/\/$/,""),c=n._makeStorageReference(new is(e,u));r.prefixes.push(c)}if(t.items)for(const i of t.items){const u=n._makeStorageReference(new is(e,i.name));r.items.push(u)}return r}(n,e,r)}(n,e,i);return Pl(null!==u),u}}(n,e.bucket),b);return A.urlParams=u,A.errorHandler=qy(e),A}function PP(n,e,t){const r=Object.assign({},t);return r.fullPath=n.path,r.size=e.size(),r.contentType||(r.contentType=function PL(n,e){return n&&n.contentType||e&&e.type()||"application/octet-stream"}(null,e)),r}class DD{constructor(e,t,r,i){this.current=e,this.total=t,this.finalized=!!r,this.metadata=i||null}}function LS(n,e){let t=null;try{t=n.getResponseHeader("X-Goog-Upload-Status")}catch(i){Pl(!1)}return Pl(!!t&&-1!==(e||["active"]).indexOf(t)),t}const FL={STATE_CHANGED:"state_changed"},As={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function VS(n){switch(n){case"running":case"pausing":case"canceling":return As.RUNNING;case"paused":return As.PAUSED;case"success":return As.SUCCESS;case"canceled":return As.CANCELED;default:return As.ERROR}}class LL{constructor(e,t,r){if(function tL(n){return"function"==typeof n}(e)||null!=t||null!=r)this.next=e,this.error=null!=t?t:void 0,this.complete=null!=r?r:void 0;else{const u=e;this.next=u.next,this.error=u.error,this.complete=u.complete}}}function zy(n){return(...e)=>{Promise.resolve().then(()=>n(...e))}}class UL extends class VL{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=tf.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=tf.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=tf.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,t,r,i){if(this.sent_)throw y0("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(t,e,!0),void 0!==i)for(const u in i)i.hasOwnProperty(u)&&this.xhr_.setRequestHeader(u,i[u].toString());return void 0!==r?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw y0("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw y0("cannot .getStatus() before sending");try{return this.xhr_.status}catch(e){return-1}}getResponse(){if(!this.sent_)throw y0("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw y0("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",e)}}{initXhr(){this.xhr_.responseType="text"}}function Cu(){return new UL}class FP{constructor(e,t,r=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=e,this._blob=t,this._metadata=r,this._mappings=_0(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=i=>{this._request=void 0,this._chunkMultiplier=1,i._codeEquals("canceled")?(this._needToFetchStatus=!0,this.completeTransitions_()):(this._error=i,this._transition("error"))},this._metadataErrorHandler=i=>{this._request=void 0,i._codeEquals("canceled")?this.completeTransitions_():(this._error=i,this._transition("error"))},this._promise=new Promise((i,u)=>{this._resolve=i,this._reject=u,this._start()}),this._promise.then(null,()=>{})}_makeProgressCallback(){const e=this._transferred;return t=>this._updateProgress(e+t)}_shouldDoResumable(e){return e.size()>262144}_start(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this._continueUpload():this._oneShotUpload())}_resolveToken(e){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([t,r])=>{switch(this._state){case"running":e(t,r);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused")}})}_createResumable(){this._resolveToken((e,t)=>{const r=function NL(n,e,t,r,i){const u=e.bucketOnlyServerUrl(),c=PP(e,r,i),p={name:c.fullPath},y=rd(u,n.host,n._protocol),A={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${r.size()}`,"X-Goog-Upload-Header-Content-Type":c.contentType,"Content-Type":"application/json; charset=utf-8"},M=FS(c,t),B=new Rl(y,"POST",function V(se){let Te;LS(se);try{Te=se.getResponseHeader("X-Goog-Upload-URL")}catch(He){Pl(!1)}return Pl(ED(Te)),Te},n.maxUploadRetryTime);return B.urlParams=p,B.headers=A,B.body=M,B.errorHandler=qy(e),B}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(r,Cu,e,t);this._request=i,i.getPromise().then(u=>{this._request=void 0,this._uploadUrl=u,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const e=this._uploadUrl;this._resolveToken((t,r)=>{const i=function OL(n,e,t,r){const y=new Rl(t,"POST",function u(b){const A=LS(b,["active","final"]);let M=null;try{M=b.getResponseHeader("X-Goog-Upload-Size-Received")}catch(V){Pl(!1)}M||Pl(!1);const F=Number(M);return Pl(!isNaN(F)),new DD(F,r.size(),"final"===A)},n.maxUploadRetryTime);return y.headers={"X-Goog-Upload-Command":"query"},y.errorHandler=qy(e),y}(this._ref.storage,this._ref._location,e,this._blob),u=this._ref.storage._makeRequest(i,Cu,t,r);this._request=u,u.getPromise().then(c=>{c=c,this._request=void 0,this._updateProgress(c.current),this._needToFetchStatus=!1,c.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const e=262144*this._chunkMultiplier,t=new DD(this._transferred,this._blob.size()),r=this._uploadUrl;this._resolveToken((i,u)=>{let c;try{c=function kL(n,e,t,r,i,u,c,p){const y=new DD(0,0);if(c?(y.current=c.current,y.total=c.total):(y.current=0,y.total=r.size()),r.size()!==y.total)throw function ZF(){return new dr("server-file-wrong-size","Server recorded incorrect upload file size, please retry the upload.")}();const b=y.total-y.current;let A=b;i>0&&(A=Math.min(A,i));const M=y.current,B={"X-Goog-Upload-Command":A===b?"upload, finalize":"upload","X-Goog-Upload-Offset":`${y.current}`},se=r.slice(M,M+A);if(null===se)throw _P();const tt=new Rl(t,"POST",function Te(qe,At){const Rt=LS(qe,["active","final"]),Yt=y.current+A,Ir=r.size();let Lo;return Lo="final"===Rt?ID(e,u)(qe,At):null,new DD(Yt,Ir,"final"===Rt,Lo)},e.maxUploadRetryTime);return tt.headers=B,tt.body=se.uploadData(),tt.progressCallback=p||null,tt.errorHandler=qy(n),tt}(this._ref._location,this._ref.storage,r,this._blob,e,this._mappings,t,this._makeProgressCallback())}catch(y){return this._error=y,void this._transition("error")}const p=this._ref.storage._makeRequest(c,Cu,i,u);this._request=p,p.getPromise().then(y=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(y.current),y.finalized?(this._metadata=y.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){262144*this._chunkMultiplier<33554432&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((e,t)=>{const r=xP(this._ref.storage,this._ref._location,this._mappings),i=this._ref.storage._makeRequest(r,Cu,e,t);this._request=i,i.getPromise().then(u=>{this._request=void 0,this._metadata=u,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((e,t)=>{const r=function NP(n,e,t,r,i){const u=e.bucketOnlyServerUrl(),c={"X-Goog-Upload-Protocol":"multipart"},y=function p(){let tt="";for(let qe=0;qe<2;qe++)tt+=Math.random().toString().slice(2);return tt}();c["Content-Type"]="multipart/related; boundary="+y;const b=PP(e,r,i),A=FS(b,t),V=xl.getBlob("--"+y+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+A+"\r\n--"+y+"\r\nContent-Type: "+b.contentType+"\r\n\r\n",r,"\r\n--"+y+"--");if(null===V)throw _P();const B={name:b.fullPath},se=rd(u,n.host,n._protocol),He=n.maxUploadRetryTime,nt=new Rl(se,"POST",ID(n,t),He);return nt.urlParams=B,nt.headers=c,nt.body=V.uploadData(),nt.errorHandler=qy(e),nt}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(r,Cu,e,t);this._request=i,i.getPromise().then(u=>{this._request=void 0,this._metadata=u,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(e){const t=this._transferred;this._transferred=e,this._transferred!==t&&this._notifyObservers()}_transition(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,void 0!==this._request&&this._request.cancel();break;case"running":const t="paused"===this._state;this._state=e,t&&(this._notifyObservers(),this._start());break;case"paused":case"error":case"success":this._state=e,this._notifyObservers();break;case"canceled":this._error=yP(),this._state=e,this._notifyObservers()}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}}get snapshot(){const e=VS(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}on(e,t,r,i){const u=new LL(t||void 0,r||void 0,i||void 0);return this._addObserver(u),()=>{this._removeObserver(u)}}then(e,t){return this._promise.then(e,t)}catch(e){return this.then(null,e)}_addObserver(e){this._observers.push(e),this._notifyObserver(e)}_removeObserver(e){const t=this._observers.indexOf(e);-1!==t&&this._observers.splice(t,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(t=>{this._notifyObserver(t)})}_finishPromise(){if(void 0!==this._resolve){let e=!0;switch(VS(this._state)){case As.SUCCESS:zy(this._resolve.bind(null,this.snapshot))();break;case As.CANCELED:case As.ERROR:zy(this._reject.bind(null,this._error))();break;default:e=!1}e&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(e){switch(VS(this._state)){case As.RUNNING:case As.PAUSED:e.next&&zy(e.next.bind(e,this.snapshot))();break;case As.SUCCESS:e.complete&&zy(e.complete.bind(e))();break;default:e.error&&zy(e.error.bind(e,this._error))()}}resume(){const e="paused"===this._state||"pausing"===this._state;return e&&this._transition("running"),e}pause(){const e="running"===this._state;return e&&this._transition("pausing"),e}cancel(){const e="running"===this._state||"pausing"===this._state;return e&&this._transition("canceling"),e}}class sg{constructor(e,t){this._service=e,this._location=t instanceof is?t:is.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new sg(e,t)}get root(){const e=new is(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return TP(this._location.path)}get storage(){return this._service}get parent(){const e=function yL(n){if(0===n.length)return null;const e=n.lastIndexOf("/");return-1===e?"":n.slice(0,e)}(this._location.path);if(null===e)return null;const t=new is(this._location.bucket,e);return new sg(this._service,t)}_throwIfRoot(e){if(""===this._location.path)throw EP(e)}}function VP(n,e,t){return US.apply(this,arguments)}function US(){return US=(0,Ee.Z)(function*(n,e,t){const i=yield UP(n,{pageToken:t});e.prefixes.push(...i.prefixes),e.items.push(...i.items),null!=i.nextPageToken&&(yield VP(n,e,i.nextPageToken))}),US.apply(this,arguments)}function UP(n,e){null!=e&&"number"==typeof e.maxResults&&PS("options.maxResults",1,1e3,e.maxResults);const t=e||{},r=SL(n.storage,n._location,"/",t.pageToken,t.maxResults);return n.storage.makeRequestWithTokens(r,Cu)}function QL(n){n._throwIfRoot("getDownloadURL");const e=function ML(n,e,t){const i=rd(e.fullServerUrl(),n.host,n._protocol),c=n.maxOperationRetryTime,p=new Rl(i,"GET",function AL(n,e){return function t(r,i){const u=AP(n,i,e);return Pl(null!==u),function IL(n,e,t,r){const i=kS(e);if(null===i||!ED(i.downloadTokens))return null;const u=i.downloadTokens;if(0===u.length)return null;const c=encodeURIComponent;return u.split(",").map(b=>{const M=n.fullPath;return rd("/b/"+c(n.bucket)+"/o/"+c(M),t,r)+bP({alt:"media",token:b})})[0]}(u,i,n.host,n._protocol)}}(n,t),c);return p.errorHandler=v0(e),p}(n.storage,n._location,_0());return n.storage.makeRequestWithTokens(e,Cu).then(t=>{if(null===t)throw function YF(){return new dr("no-download-url","The given file does not have any download URLs.")}();return t})}function BP(n,e){const t=function _L(n,e){const t=e.split("/").filter(r=>r.length>0).join("/");return 0===n.length?t:n+"/"+t}(n._location.path,e),r=new is(n._location.bucket,t);return new sg(n.storage,r)}function jP(n,e){if(n instanceof BS){const t=n;if(null==t._bucket)throw function KF(){return new dr("no-default-bucket","No default bucket found. Did you set the '"+mP+"' property when initializing the app?")}();const r=new sg(t,t._bucket);return null!=e?jP(r,e):r}return void 0!==e?BP(n,e):n}function tV(n,e){if(e&&function XL(n){return/^[A-Za-z]+:\/\//.test(n)}(e)){if(n instanceof BS)return function eV(n,e){return new sg(n,e)}(n,e);throw Gy("To use ref(service, url), the first argument must be a Storage instance.")}return jP(n,e)}function HP(n,e){const t=null==e?void 0:e[mP];return null==t?null:is.makeFromBucketSpec(t,n)}class BS{constructor(e,t,r,i,u){this.app=e,this._authProvider=t,this._appCheckProvider=r,this._url=i,this._firebaseVersion=u,this._bucket=null,this._host=gP,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=i?is.makeFromBucketSpec(i,this._host):HP(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._bucket=null!=this._url?is.makeFromBucketSpec(this._url,e):HP(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){PS("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){PS("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}_getAuthToken(){var e=this;return(0,Ee.Z)(function*(){if(e._overrideAuthToken)return e._overrideAuthToken;const t=e._authProvider.getImmediate({optional:!0});if(t){const r=yield t.getToken();if(null!==r)return r.accessToken}return null})()}_getAppCheckToken(){var e=this;return(0,Ee.Z)(function*(){const t=e._appCheckProvider.getImmediate({optional:!0});return t?(yield t.getToken()).token:null})()}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new sg(this,e)}_makeRequest(e,t,r,i){if(this._deleted)return new QF(vP());{const u=function uL(n,e,t,r,i,u){const c=bP(n.urlParams),p=n.url+c,y=Object.assign({},n.headers);return function oL(n,e){e&&(n["X-Firebase-GMPID"]=e)}(y,e),function iL(n,e){null!==e&&e.length>0&&(n.Authorization="Firebase "+e)}(y,t),function sL(n,e){n["X-Firebase-Storage-Version"]="webjs/"+(null!=e?e:"AppManager")}(y,u),function aL(n,e){null!==e&&(n["X-Firebase-AppCheck"]=e)}(y,r),new rL(p,n.method,y,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,i)}(e,this._appId,r,i,t,this._firebaseVersion);return this._requests.add(u),u.getPromise().then(()=>this._requests.delete(u),()=>this._requests.delete(u)),u}}makeRequestWithTokens(e,t){var r=this;return(0,Ee.Z)(function*(){const[i,u]=yield Promise.all([r._getAuthToken(),r._getAppCheckToken()]);return r._makeRequest(e,t,i,u).getPromise()})()}}const $P="@firebase/storage";function zP(n,e){return tV(n=(0,xt.m9)(n),e)}function hV(n,{instanceIdentifier:e}){const t=n.getProvider("app").getImmediate(),r=n.getProvider("auth-internal"),i=n.getProvider("app-check-internal");return new BS(t,r,i,e,Ks.SDK_VERSION)}!function fV(){(0,Ks._registerComponent)(new rh.wA("storage",hV,"PUBLIC").setMultipleInstances(!0)),(0,Ks.registerVersion)($P,"0.9.6",""),(0,Ks.registerVersion)($P,"0.9.6","esm2017")}();class CD{constructor(e,t,r){this._delegate=e,this.task=t,this.ref=r}get bytesTransferred(){return this._delegate.bytesTransferred}get metadata(){return this._delegate.metadata}get state(){return this._delegate.state}get totalBytes(){return this._delegate.totalBytes}}class WP{constructor(e,t){this._delegate=e,this._ref=t,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}get snapshot(){return new CD(this._delegate.snapshot,this,this._ref)}then(e,t){return this._delegate.then(r=>{if(e)return e(new CD(r,this,this._ref))},t)}on(e,t,r,i){let u;return t&&(u="function"==typeof t?c=>t(new CD(c,this,this._ref)):{next:t.next?c=>t.next(new CD(c,this,this._ref)):void 0,complete:t.complete||void 0,error:t.error||void 0}),this._delegate.on(e,u,r||void 0,i||void 0)}}class KP{constructor(e,t){this._delegate=e,this._service=t}get prefixes(){return this._delegate.prefixes.map(e=>new id(e,this._service))}get items(){return this._delegate.items.map(e=>new id(e,this._service))}get nextPageToken(){return this._delegate.nextPageToken||null}}class id{constructor(e,t){this._delegate=e,this.storage=t}get name(){return this._delegate.name}get bucket(){return this._delegate.bucket}get fullPath(){return this._delegate.fullPath}toString(){return this._delegate.toString()}child(e){const t=function cV(n,e){return BP(n,e)}(this._delegate,e);return new id(t,this.storage)}get root(){return new id(this._delegate.root,this.storage)}get parent(){const e=this._delegate.parent;return null==e?null:new id(e,this.storage)}put(e,t){return this._throwIfRoot("put"),new WP(function rV(n,e,t){return function zL(n,e,t){return n._throwIfRoot("uploadBytesResumable"),new FP(n,new xl(e),t)}(n=(0,xt.m9)(n),e,t)}(this._delegate,e,t),this)}putString(e,t=Oo.RAW,r){this._throwIfRoot("putString");const i=OS(t,e),u=Object.assign({},r);return null==u.contentType&&null!=i.contentType&&(u.contentType=i.contentType),new WP(new FP(this._delegate,new xl(i.data,!0),u),this)}listAll(){return function aV(n){return function KL(n){const e={prefixes:[],items:[]};return VP(n,e).then(()=>e)}(n=(0,xt.m9)(n))}(this._delegate).then(e=>new KP(e,this.storage))}list(e){return function oV(n,e){return UP(n=(0,xt.m9)(n),e)}(this._delegate,e||void 0).then(t=>new KP(t,this.storage))}getMetadata(){return function iV(n){return function ZL(n){n._throwIfRoot("getMetadata");const e=xP(n.storage,n._location,_0());return n.storage.makeRequestWithTokens(e,Cu)}(n=(0,xt.m9)(n))}(this._delegate)}updateMetadata(e){return function sV(n,e){return function YL(n,e){n._throwIfRoot("updateMetadata");const t=function xL(n,e,t,r){const u=rd(e.fullServerUrl(),n.host,n._protocol),p=FS(t,r),b=n.maxOperationRetryTime,A=new Rl(u,"PATCH",ID(n,r),b);return A.headers={"Content-Type":"application/json; charset=utf-8"},A.body=p,A.errorHandler=v0(e),A}(n.storage,n._location,e,_0());return n.storage.makeRequestWithTokens(t,Cu)}(n=(0,xt.m9)(n),e)}(this._delegate,e)}getDownloadURL(){return function uV(n){return QL(n=(0,xt.m9)(n))}(this._delegate)}delete(){return this._throwIfRoot("delete"),function lV(n){return function JL(n){n._throwIfRoot("deleteObject");const e=function RL(n,e){const r=rd(e.fullServerUrl(),n.host,n._protocol),p=new Rl(r,"DELETE",function c(y,b){},n.maxOperationRetryTime);return p.successCodes=[200,204],p.errorHandler=v0(e),p}(n.storage,n._location);return n.storage.makeRequestWithTokens(e,Cu)}(n=(0,xt.m9)(n))}(this._delegate)}_throwIfRoot(e){if(""===this._delegate._location.path)throw EP(e)}}class ZP{constructor(e,t){this.app=e,this._delegate=t}get maxOperationRetryTime(){return this._delegate.maxOperationRetryTime}get maxUploadRetryTime(){return this._delegate.maxUploadRetryTime}ref(e){if(YP(e))throw Gy("ref() expected a child path but got a URL, use refFromURL instead.");return new id(zP(this._delegate,e),this)}refFromURL(e){if(!YP(e))throw Gy("refFromURL() expected a full URL but got a child path, use ref() instead.");try{is.makeFromUrl(e,this._delegate.host)}catch(t){throw Gy("refFromUrl() expected a valid full URL but got an invalid one.")}return new id(zP(this._delegate,e),this)}setMaxUploadRetryTime(e){this._delegate.maxUploadRetryTime=e}setMaxOperationRetryTime(e){this._delegate.maxOperationRetryTime=e}useEmulator(e,t,r={}){!function dV(n,e,t,r={}){!function nV(n,e,t,r={}){n.host=`${e}:${t}`,n._protocol="http";const{mockUserToken:i}=r;i&&(n._overrideAuthToken="string"==typeof i?i:(0,xt.Sg)(i,n.app.options.projectId))}(n,e,t,r)}(this._delegate,e,t,r)}}function YP(n){return/^[A-Za-z]+:\/\//.test(n)}function yV(n,{instanceIdentifier:e}){const t=n.getProvider("app-compat").getImmediate(),r=n.getProvider("storage").getImmediate({identifier:e});return new ZP(t,r)}function QP(n){const e=function vV(n){return new bn.y(e=>{const t=c=>e.next(c);t(n.snapshot);const u=n.on("state_changed",t);return n.then(c=>{t(c),e.complete()},c=>{t(n.snapshot),(c=>{e.error(c)})(c)}),function(){u()}}).pipe(function LF(n,e=yv.z){return(0,Jn.e)((t,r)=>{let i=null,u=null,c=null;const p=()=>{if(i){i.unsubscribe(),i=null;const b=u;u=null,r.next(b)}};function y(){const b=c+n,A=e.now();if(A<b)return i=this.schedule(void 0,b-A),void r.add(i);p()}t.subscribe((0,In.x)(r,b=>{u=b,c=e.now(),i||(i=e.schedule(y,n),r.add(i))},()=>{p(),r.complete()},void 0,()=>{u=i=null}))})}(0))}(n);return{task:n,then:n.then.bind(n),catch:n.catch.bind(n),pause:n.pause.bind(n),cancel:n.cancel.bind(n),resume:n.resume.bind(n),snapshotChanges:()=>e,percentageChanges:()=>e.pipe((0,Dt.U)(t=>t.bytesTransferred/t.totalBytes*100))}}function TD(n){return{getDownloadURL:()=>rt(void 0).pipe(An.fc,Dn(()=>n.getDownloadURL()),An.iC),getMetadata:()=>rt(void 0).pipe(An.fc,Dn(()=>n.getMetadata()),An.iC),delete:()=>(0,ln.D)(n.delete()),child:e=>TD(n.child(e)),updateMetadata:e=>(0,ln.D)(n.updateMetadata(e)),put:(e,t)=>QP(n.put(e,t)),putString:(e,t,r)=>QP(n.putString(e,t,r)),list:e=>(0,ln.D)(n.list(e)),listAll:()=>(0,ln.D)(n.listAll())}}!function _V(n){const e={TaskState:As,TaskEvent:FL,StringFormat:Oo,Storage:ZP,Reference:id};n.INTERNAL.registerComponent(new rh.wA("storage-compat",yV,"PUBLIC").setServiceProps(e).setMultipleInstances(!0)),n.registerVersion("@firebase/storage-compat","0.1.14")}(_v.Z);const EV=new h.OlP("angularfire2.storageBucket"),wV=new h.OlP("angularfire2.storage.maxUploadRetryTime"),bV=new h.OlP("angularfire2.storage.maxOperationRetryTime"),IV=new h.OlP("angularfire2.storage.use-emulator");let JP=(()=>{class n{constructor(t,r,i,u,c,p,y,b,A,M){const F=(0,Pi.on)(t,c,r);this.storage=(0,Pi.cc)(`${F.name}.storage.${i}`,"AngularFireStorage",F.name,()=>{const V=c.runOutsideAngular(()=>F.storage(i||void 0)),B=A;return B&&V.useEmulator(...B),y&&V.setMaxUploadRetryTime(y),b&&V.setMaxOperationRetryTime(b),V},[y,b])}ref(t){return TD(this.storage.ref(t))}refFromURL(t){return TD(this.storage.refFromURL(t))}upload(t,r,i){return TD(this.storage.ref(t)).put(r,i)}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(Pi.Dh),h.LFG(Pi.xv,8),h.LFG(EV,8),h.LFG(h.Lbi),h.LFG(h.R0b),h.LFG(An.HU),h.LFG(wV,8),h.LFG(bV,8),h.LFG(IV,8),h.LFG(mD,8))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),DV=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({}),n})(),CV=(()=>{class n{constructor(){yS.Z.registerVersion("angularfire",An.q4.full,"gcs-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({providers:[JP],imports:[DV]}),n})(),TV=(()=>{class n{constructor(t){this.fireStorage=t}subirArchivo(t){return this.fireStorage.upload("/portadas/"+t.name,t)}obtenerReferencia(t){return this.fireStorage.ref("/portadas/"+t)}getAllFiles(){return this.fireStorage.ref("/portadas/").listAll()}get(t){return this.fireStorage.ref(t).getDownloadURL()}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(JP))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function AV(n,e){if(1&n){const t=h.EpF();h.TgZ(0,"div",4)(1,"h6",5),h._uU(2),h.qZA(),h.TgZ(3,"input",6),h.NdJ("click",function(){const u=h.CHM(t).$implicit;return h.oxw().emitirActor(u)}),h.qZA()()}if(2&n){const t=e.$implicit;h.xp6(2),h.AsE("",t.nombre," ",t.apellido,"")}}let SV=(()=>{class n{constructor(t){this.actorFire=t,this.actorSeleccionado=new h.vpe,this.listaActores=[],t.obtenerActor().subscribe(r=>{this.listaActores=r,console.log(this.listaActores)})}ngOnInit(){}emitirActor(t){this.actorSeleccionado.emit(t)}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(eP))},n.\u0275cmp=h.Xpm({type:n,selectors:[["app-tabla-actor"]],outputs:{actorSeleccionado:"actorSeleccionado"},decls:5,vars:1,consts:[[1,"d-flex","justify-content-between","align-items-center","mb-3"],[1,"text-primary"],[1,"list-group","mb-3"],["class","list-group-item d-flex justify-content-between lh-sm",4,"ngFor","ngForOf"],[1,"list-group-item","d-flex","justify-content-between","lh-sm"],[1,"my-0"],["type","button","name","checkActor","value","X",3,"click"]],template:function(t,r){1&t&&(h.TgZ(0,"h4",0)(1,"span",1),h._uU(2,"Actor"),h.qZA()(),h.TgZ(3,"div",2),h.YNc(4,AV,4,2,"div",3),h.qZA()),2&t&&(h.xp6(4),h.Q6J("ngForOf",r.listaActores))},directives:[Vn],styles:[""]}),n})();function MV(n,e){1&n&&(h.TgZ(0,"div",18),h._uU(1," El titulo es requerido "),h.qZA())}function xV(n,e){1&n&&(h.TgZ(0,"div",18),h._uU(1," La fecha de estreno es requerida "),h.qZA())}const RV=[{path:"",redirectTo:"busqueda",pathMatch:"full"},{path:"bienvenido",component:xF},{path:"busqueda",component:FF},{path:"peliculas/alta",component:(()=>{class n{constructor(t,r,i,u){this.peliculaFire=t,this.fb=r,this.imagenFire=i,this.router=u,this.actoresSeleccionados=[],this.nuevaPelicula=new SS,this.peliculaForm=r.group({nombre:["",[Xi.required]],fechaDeEstreno:["",Xi.required],cantidadDePublico:["",[Xi.required,Xi.min(10),Xi.max(1e3)]],fotoDePelicula:["",Xi.required]}),console.log()}ngOnInit(){}asignarActor(t){this.actoresSeleccionados.push(t)}asignarParametrosPelicula(){this.nuevaPelicula.id=Math.floor(1e4*Math.random()+1),this.nuevaPelicula.nombre=this.peliculaForm.controls.nombre.value,this.nuevaPelicula.fechaDeEstreno=this.peliculaForm.controls.fechaDeEstreno.value,this.nuevaPelicula.cantidadDePublico=this.peliculaForm.controls.cantidadDePublico.value,this.nuevaPelicula.actores=this.actoresSeleccionados,this.peliculaFire.crearPelicula(this.nuevaPelicula).then(()=>{this.router.navigate(["busqueda"])}).catch(()=>{console.log("NOT IMPLEMENTED")})}subirArchivo(t){t&&this.imagenFire.subirArchivo(t).then(()=>{this.imagenFire.get("/portadas/"+t.name).subscribe(i=>{this.nuevaPelicula.fotoDePelicula=i,console.log(i)})})}onChange(t){this.portada=t.target.files[0],this.subirArchivo(this.portada)}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(pP),h.Y36(Co),h.Y36(TV),h.Y36(Gr))},n.\u0275cmp=h.Xpm({type:n,selectors:[["app-pelicula-alta"]],decls:41,vars:4,consts:[[1,"bg-light"],[1,"container"],[1,"py-5","mb-4","text-center","bg-lightBlue"],[1,"row"],[1,"col-md-4","order-md-2","mb-4"],[3,"actorSeleccionado"],[1,"col-md-8","order-md-1"],[1,"mb-3","text-primary"],[1,"needs-validation",3,"formGroup","ngSubmit"],[1,"col-md-6","mb-3"],["for","nombre"],["type","text","id","nombre","formControlName","nombre",1,"form-control"],["class","invalid-feedback",4,"ngIf"],["for","fechaDeEstreno"],["type","date","id","fechaDeEstreno","formControlName","fechaDeEstreno",1,"form-control"],[1,"mb-3"],["for","cantidadDePublico"],["type","number","id","cantidadDePublico","formControlName","cantidadDePublico",1,"form-control"],[1,"invalid-feedback"],["for","fotoDePelicula"],["type","file","id","fotoDePelicula","formControlName","fotoDePelicula","accept","*.png.jpg",1,"form-control",3,"change"],["type","submit",1,"btn","btn-primary","btn-block",3,"disabled"],[1,"my-5","pt-5","text-muted","text-center","text-small"],[1,"mb-1"]],template:function(t,r){1&t&&(h.TgZ(0,"body",0)(1,"div",1)(2,"div",2)(3,"h2"),h._uU(4,"Complete los datos de la Pelicula"),h.qZA()(),h.TgZ(5,"div",3)(6,"div",4)(7,"app-tabla-actor",5),h.NdJ("actorSeleccionado",function(u){return r.asignarActor(u)}),h.qZA()(),h.TgZ(8,"div",6)(9,"h4",7),h._uU(10,"Informacion basica"),h.qZA(),h.TgZ(11,"form",8),h.NdJ("ngSubmit",function(){return r.asignarParametrosPelicula()}),h.TgZ(12,"div",3)(13,"div",9)(14,"label",10),h._uU(15,"Nombre"),h.qZA(),h._UZ(16,"input",11),h.YNc(17,MV,2,0,"div",12),h.qZA(),h.TgZ(18,"div",9)(19,"label",13),h._uU(20,"Fecha de estreno"),h.qZA(),h._UZ(21,"input",14),h.YNc(22,xV,2,0,"div",12),h.qZA()(),h.TgZ(23,"div",15)(24,"label",16),h._uU(25,"Cantidad de publico"),h.qZA(),h._UZ(26,"input",17),h.TgZ(27,"div",18),h._uU(28," Ingrese una cantidad de publico valida "),h.qZA()(),h.TgZ(29,"div",15)(30,"label",19),h._uU(31,"Imagen de la pelicula"),h.qZA(),h.TgZ(32,"input",20),h.NdJ("change",function(u){return r.onChange(u)}),h.qZA(),h.TgZ(33,"div",18),h._uU(34," Please enter your shipping address. "),h.qZA()(),h._UZ(35,"br"),h.TgZ(36,"button",21),h._uU(37," Aceptar "),h.qZA()()()(),h.TgZ(38,"footer",22)(39,"p",23),h._uU(40,"\xa9 Ezequiel Archilla 2022"),h.qZA()()()()),2&t&&(h.xp6(11),h.Q6J("formGroup",r.peliculaForm),h.xp6(6),h.Q6J("ngIf",(null==r.peliculaForm.controls.nombre.errors?null:r.peliculaForm.controls.nombre.errors.required)&&r.peliculaForm.controls.nombre.touched),h.xp6(5),h.Q6J("ngIf",(null==r.peliculaForm.controls.fechaDeEstreno.errors?null:r.peliculaForm.controls.fechaDeEstreno.errors.required)&&r.peliculaForm.controls.fechaDeEstreno.touched),h.xp6(14),h.Q6J("disabled",r.peliculaForm.invalid||""==r.nuevaPelicula.fotoDePelicula))},directives:[SV,X_,L_,Kf,Zd,om,Zf,$n,pm],styles:[".container[_ngcontent-%COMP%]{max-width:960px}.lh-condensed[_ngcontent-%COMP%]{line-height:1.25}.bg-lightBlue[_ngcontent-%COMP%]{background-color:#afdee6}"]}),n})()},{path:"actor/alta",component:SF},{path:"actor/listado",component:MF},{path:"peliculas/listado",component:(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=h.Xpm({type:n,selectors:[["app-pelicula-listado"]],decls:2,vars:0,template:function(t,r){1&t&&(h.TgZ(0,"p"),h._uU(1,"pelicula-listado works!"),h.qZA())},styles:[""]}),n})()}];let PV=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({imports:[[Ff.forRoot(RV)],Ff]}),n})(),NV=(()=>{class n{constructor(){this.title="SimulacroParcial"}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=h.Xpm({type:n,selectors:[["app-root"]],decls:1,vars:0,template:function(t,r){1&t&&h._UZ(0,"router-outlet")},directives:[oc],styles:[""]}),n})();const XP_firebaseConfig={apiKey:"AIzaSyCVSQhNuJJLWFzOnzRkO7tsasubP09Vx30",authDomain:"simulacropparchilla.firebaseapp.com",projectId:"simulacropparchilla",storageBucket:"simulacropparchilla.appspot.com",messagingSenderId:"783968897364",appId:"1:783968897364:web:09fa6620f1bda5bbfa20c1"};let OV=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({imports:[[Pi.hO.initializeApp(XP_firebaseConfig),eF,uF,CV]]}),n})();class eN{}const sd="*";function tN(n,e=null){return{type:2,steps:n,options:e}}function nN(n){return{type:6,styles:n,offset:null}}function rN(n){Promise.resolve(null).then(n)}class E0{constructor(e=0,t=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=e+t}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}onStart(e){this._onStartFns.push(e)}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){rN(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(e=>e()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this._started=!1}setPosition(e){this._position=this.totalTime?e*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}}class iN{constructor(e){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=e;let t=0,r=0,i=0;const u=this.players.length;0==u?rN(()=>this._onFinish()):this.players.forEach(c=>{c.onDone(()=>{++t==u&&this._onFinish()}),c.onDestroy(()=>{++r==u&&this._onDestroy()}),c.onStart(()=>{++i==u&&this._onStart()})}),this.totalTime=this.players.reduce((c,p)=>Math.max(c,p.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this.players.forEach(e=>e.init())}onStart(e){this._onStartFns.push(e)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(e=>e()),this._onStartFns=[])}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(e=>e.play())}pause(){this.players.forEach(e=>e.pause())}restart(){this.players.forEach(e=>e.restart())}finish(){this._onFinish(),this.players.forEach(e=>e.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(e=>e.destroy()),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this.players.forEach(e=>e.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(e){const t=e*this.totalTime;this.players.forEach(r=>{const i=r.totalTime?Math.min(1,t/r.totalTime):1;r.setPosition(i)})}getPosition(){const e=this.players.reduce((t,r)=>null===t||r.totalTime>t.totalTime?r:t,null);return null!=e?e.getPosition():0}beforeDestroy(){this.players.forEach(e=>{e.beforeDestroy&&e.beforeDestroy()})}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}}const Zt=!1;function sN(n){return new h.vHH(3e3,Zt)}function gU(){return"undefined"!=typeof window&&void 0!==window.document}function HS(){return"undefined"!=typeof process&&"[object process]"==={}.toString.call(process)}function nf(n){switch(n.length){case 0:return new E0;case 1:return n[0];default:return new iN(n)}}function oN(n,e,t,r,i={},u={}){const c=[],p=[];let y=-1,b=null;if(r.forEach(A=>{const M=A.offset,F=M==y,V=F&&b||{};Object.keys(A).forEach(B=>{let se=B,Te=A[B];if("offset"!==B)switch(se=e.normalizePropertyName(se,c),Te){case"!":Te=i[B];break;case sd:Te=u[B];break;default:Te=e.normalizeStyleValue(B,se,Te,c)}V[se]=Te}),F||p.push(V),b=V,y=M}),c.length)throw function iU(n){return new h.vHH(3502,Zt)}();return p}function $S(n,e,t,r){switch(e){case"start":n.onStart(()=>r(t&&GS(t,"start",n)));break;case"done":n.onDone(()=>r(t&&GS(t,"done",n)));break;case"destroy":n.onDestroy(()=>r(t&&GS(t,"destroy",n)))}}function GS(n,e,t){const r=t.totalTime,u=qS(n.element,n.triggerName,n.fromState,n.toState,e||n.phaseName,null==r?n.totalTime:r,!!t.disabled),c=n._data;return null!=c&&(u._data=c),u}function qS(n,e,t,r,i="",u=0,c){return{element:n,triggerName:e,fromState:t,toState:r,phaseName:i,totalTime:u,disabled:!!c}}function ko(n,e,t){let r;return n instanceof Map?(r=n.get(e),r||n.set(e,r=t)):(r=n[e],r||(r=n[e]=t)),r}function aN(n){const e=n.indexOf(":");return[n.substring(1,e),n.substr(e+1)]}let zS=(n,e)=>!1,uN=(n,e,t)=>[],lN=null;function WS(n){const e=n.parentNode||n.host;return e===lN?null:e}(HS()||"undefined"!=typeof Element)&&(gU()?(lN=(()=>document.documentElement)(),zS=(n,e)=>{for(;e;){if(e===n)return!0;e=WS(e)}return!1}):zS=(n,e)=>n.contains(e),uN=(n,e,t)=>{if(t)return Array.from(n.querySelectorAll(e));const r=n.querySelector(e);return r?[r]:[]});let og=null,cN=!1;function dN(n){og||(og=function yU(){return"undefined"!=typeof document?document.body:null}()||{},cN=!!og.style&&"WebkitAppearance"in og.style);let e=!0;return og.style&&!function mU(n){return"ebkit"==n.substring(1,6)}(n)&&(e=n in og.style,!e&&cN&&(e="Webkit"+n.charAt(0).toUpperCase()+n.substr(1)in og.style)),e}const hN=zS,fN=uN;let pN=(()=>{class n{validateStyleProperty(t){return dN(t)}matchesElement(t,r){return!1}containsElement(t,r){return hN(t,r)}getParentElement(t){return WS(t)}query(t,r,i){return fN(t,r,i)}computeStyle(t,r,i){return i||""}animate(t,r,i,u,c,p=[],y){return new E0(i,u)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})(),KS=(()=>{class n{}return n.NOOP=new pN,n})();const ZS="ng-enter",SD="ng-leave",MD="ng-trigger",xD=".ng-trigger",mN="ng-animating",YS=".ng-animating";function ag(n){if("number"==typeof n)return n;const e=n.match(/^(-?[\.\d]+)(m?s)/);return!e||e.length<2?0:QS(parseFloat(e[1]),e[2])}function QS(n,e){return"s"===e?1e3*n:n}function RD(n,e,t){return n.hasOwnProperty("duration")?n:function EU(n,e,t){let i,u=0,c="";if("string"==typeof n){const p=n.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===p)return e.push(sN()),{duration:0,delay:0,easing:""};i=QS(parseFloat(p[1]),p[2]);const y=p[3];null!=y&&(u=QS(parseFloat(y),p[4]));const b=p[5];b&&(c=b)}else i=n;if(!t){let p=!1,y=e.length;i<0&&(e.push(function FV(){return new h.vHH(3100,Zt)}()),p=!0),u<0&&(e.push(function LV(){return new h.vHH(3101,Zt)}()),p=!0),p&&e.splice(y,0,sN())}return{duration:i,delay:u,easing:c}}(n,e,t)}function Wy(n,e={}){return Object.keys(n).forEach(t=>{e[t]=n[t]}),e}function rf(n,e,t={}){if(e)for(let r in n)t[r]=n[r];else Wy(n,t);return t}function _N(n,e,t){return t?e+":"+t+";":""}function vN(n){let e="";for(let t=0;t<n.style.length;t++){const r=n.style.item(t);e+=_N(0,r,n.style.getPropertyValue(r))}for(const t in n.style)n.style.hasOwnProperty(t)&&!t.startsWith("_")&&(e+=_N(0,IU(t),n.style[t]));n.setAttribute("style",e)}function Nl(n,e,t){n.style&&(Object.keys(e).forEach(r=>{const i=XS(r);t&&!t.hasOwnProperty(r)&&(t[r]=n.style[i]),n.style[i]=e[r]}),HS()&&vN(n))}function ug(n,e){n.style&&(Object.keys(e).forEach(t=>{const r=XS(t);n.style[r]=""}),HS()&&vN(n))}function w0(n){return Array.isArray(n)?1==n.length?n[0]:tN(n):n}const JS=new RegExp("{{\\s*(.+?)\\s*}}","g");function EN(n){let e=[];if("string"==typeof n){let t;for(;t=JS.exec(n);)e.push(t[1]);JS.lastIndex=0}return e}function PD(n,e,t){const r=n.toString(),i=r.replace(JS,(u,c)=>{let p=e[c];return e.hasOwnProperty(c)||(t.push(function UV(n){return new h.vHH(3003,Zt)}()),p=""),p.toString()});return i==r?n:i}function ND(n){const e=[];let t=n.next();for(;!t.done;)e.push(t.value),t=n.next();return e}const bU=/-+([a-z0-9])/g;function XS(n){return n.replace(bU,(...e)=>e[1].toUpperCase())}function IU(n){return n.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function Fo(n,e,t){switch(e.type){case 7:return n.visitTrigger(e,t);case 0:return n.visitState(e,t);case 1:return n.visitTransition(e,t);case 2:return n.visitSequence(e,t);case 3:return n.visitGroup(e,t);case 4:return n.visitAnimate(e,t);case 5:return n.visitKeyframes(e,t);case 6:return n.visitStyle(e,t);case 8:return n.visitReference(e,t);case 9:return n.visitAnimateChild(e,t);case 10:return n.visitAnimateRef(e,t);case 11:return n.visitQuery(e,t);case 12:return n.visitStagger(e,t);default:throw function BV(n){return new h.vHH(3004,Zt)}()}}function wN(n,e){return window.getComputedStyle(n)[e]}function MU(n,e){const t=[];return"string"==typeof n?n.split(/\s*,\s*/).forEach(r=>function xU(n,e,t){if(":"==n[0]){const y=function RU(n,e){switch(n){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(t,r)=>parseFloat(r)>parseFloat(t);case":decrement":return(t,r)=>parseFloat(r)<parseFloat(t);default:return e.push(function eU(n){return new h.vHH(3016,Zt)}()),"* => *"}}(n,t);if("function"==typeof y)return void e.push(y);n=y}const r=n.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==r||r.length<4)return t.push(function XV(n){return new h.vHH(3015,Zt)}()),e;const i=r[1],u=r[2],c=r[3];e.push(bN(i,c));"<"==u[0]&&!("*"==i&&"*"==c)&&e.push(bN(c,i))}(r,t,e)):t.push(n),t}const LD=new Set(["true","1"]),VD=new Set(["false","0"]);function bN(n,e){const t=LD.has(n)||VD.has(n),r=LD.has(e)||VD.has(e);return(i,u)=>{let c="*"==n||n==i,p="*"==e||e==u;return!c&&t&&"boolean"==typeof i&&(c=i?LD.has(n):VD.has(n)),!p&&r&&"boolean"==typeof u&&(p=u?LD.has(e):VD.has(e)),c&&p}}const PU=new RegExp("s*:selfs*,?","g");function eM(n,e,t,r){return new NU(n).build(e,t,r)}class NU{constructor(e){this._driver=e}build(e,t,r){const i=new FU(t);this._resetContextStyleTimingState(i);const u=Fo(this,w0(e),i);return i.unsupportedCSSPropertiesFound.size&&i.unsupportedCSSPropertiesFound.keys(),u}_resetContextStyleTimingState(e){e.currentQuerySelector="",e.collectedStyles={},e.collectedStyles[""]={},e.currentTime=0}visitTrigger(e,t){let r=t.queryCount=0,i=t.depCount=0;const u=[],c=[];return"@"==e.name.charAt(0)&&t.errors.push(function HV(){return new h.vHH(3006,Zt)}()),e.definitions.forEach(p=>{if(this._resetContextStyleTimingState(t),0==p.type){const y=p,b=y.name;b.toString().split(/\s*,\s*/).forEach(A=>{y.name=A,u.push(this.visitState(y,t))}),y.name=b}else if(1==p.type){const y=this.visitTransition(p,t);r+=y.queryCount,i+=y.depCount,c.push(y)}else t.errors.push(function $V(){return new h.vHH(3007,Zt)}())}),{type:7,name:e.name,states:u,transitions:c,queryCount:r,depCount:i,options:null}}visitState(e,t){const r=this.visitStyle(e.styles,t),i=e.options&&e.options.params||null;if(r.containsDynamicStyles){const u=new Set,c=i||{};r.styles.forEach(p=>{if(UD(p)){const y=p;Object.keys(y).forEach(b=>{EN(y[b]).forEach(A=>{c.hasOwnProperty(A)||u.add(A)})})}}),u.size&&(ND(u.values()),t.errors.push(function GV(n,e){return new h.vHH(3008,Zt)}()))}return{type:0,name:e.name,style:r,options:i?{params:i}:null}}visitTransition(e,t){t.queryCount=0,t.depCount=0;const r=Fo(this,w0(e.animation),t);return{type:1,matchers:MU(e.expr,t.errors),animation:r,queryCount:t.queryCount,depCount:t.depCount,options:lg(e.options)}}visitSequence(e,t){return{type:2,steps:e.steps.map(r=>Fo(this,r,t)),options:lg(e.options)}}visitGroup(e,t){const r=t.currentTime;let i=0;const u=e.steps.map(c=>{t.currentTime=r;const p=Fo(this,c,t);return i=Math.max(i,t.currentTime),p});return t.currentTime=i,{type:3,steps:u,options:lg(e.options)}}visitAnimate(e,t){const r=function VU(n,e){if(n.hasOwnProperty("duration"))return n;if("number"==typeof n)return tM(RD(n,e).duration,0,"");const t=n;if(t.split(/\s+/).some(u=>"{"==u.charAt(0)&&"{"==u.charAt(1))){const u=tM(0,0,"");return u.dynamic=!0,u.strValue=t,u}const i=RD(t,e);return tM(i.duration,i.delay,i.easing)}(e.timings,t.errors);t.currentAnimateTimings=r;let i,u=e.styles?e.styles:nN({});if(5==u.type)i=this.visitKeyframes(u,t);else{let c=e.styles,p=!1;if(!c){p=!0;const b={};r.easing&&(b.easing=r.easing),c=nN(b)}t.currentTime+=r.duration+r.delay;const y=this.visitStyle(c,t);y.isEmptyStep=p,i=y}return t.currentAnimateTimings=null,{type:4,timings:r,style:i,options:null}}visitStyle(e,t){const r=this._makeStyleAst(e,t);return this._validateStyleAst(r,t),r}_makeStyleAst(e,t){const r=[];Array.isArray(e.styles)?e.styles.forEach(c=>{"string"==typeof c?c==sd?r.push(c):t.errors.push(function qV(n){return new h.vHH(3002,Zt)}()):r.push(c)}):r.push(e.styles);let i=!1,u=null;return r.forEach(c=>{if(UD(c)){const p=c,y=p.easing;if(y&&(u=y,delete p.easing),!i)for(let b in p)if(p[b].toString().indexOf("{{")>=0){i=!0;break}}}),{type:6,styles:r,easing:u,offset:e.offset,containsDynamicStyles:i,options:null}}_validateStyleAst(e,t){const r=t.currentAnimateTimings;let i=t.currentTime,u=t.currentTime;r&&u>0&&(u-=r.duration+r.delay),e.styles.forEach(c=>{"string"!=typeof c&&Object.keys(c).forEach(p=>{if(!this._driver.validateStyleProperty(p))return delete c[p],void t.unsupportedCSSPropertiesFound.add(p);const y=t.collectedStyles[t.currentQuerySelector],b=y[p];let A=!0;b&&(u!=i&&u>=b.startTime&&i<=b.endTime&&(t.errors.push(function zV(n,e,t,r,i){return new h.vHH(3010,Zt)}()),A=!1),u=b.startTime),A&&(y[p]={startTime:u,endTime:i}),t.options&&function wU(n,e,t){const r=e.params||{},i=EN(n);i.length&&i.forEach(u=>{r.hasOwnProperty(u)||t.push(function VV(n){return new h.vHH(3001,Zt)}())})}(c[p],t.options,t.errors)})})}visitKeyframes(e,t){const r={type:5,styles:[],options:null};if(!t.currentAnimateTimings)return t.errors.push(function WV(){return new h.vHH(3011,Zt)}()),r;let u=0;const c=[];let p=!1,y=!1,b=0;const A=e.steps.map(He=>{const nt=this._makeStyleAst(He,t);let tt=null!=nt.offset?nt.offset:function LU(n){if("string"==typeof n)return null;let e=null;if(Array.isArray(n))n.forEach(t=>{if(UD(t)&&t.hasOwnProperty("offset")){const r=t;e=parseFloat(r.offset),delete r.offset}});else if(UD(n)&&n.hasOwnProperty("offset")){const t=n;e=parseFloat(t.offset),delete t.offset}return e}(nt.styles),qe=0;return null!=tt&&(u++,qe=nt.offset=tt),y=y||qe<0||qe>1,p=p||qe<b,b=qe,c.push(qe),nt});y&&t.errors.push(function KV(){return new h.vHH(3012,Zt)}()),p&&t.errors.push(function ZV(){return new h.vHH(3200,Zt)}());const M=e.steps.length;let F=0;u>0&&u<M?t.errors.push(function YV(){return new h.vHH(3202,Zt)}()):0==u&&(F=1/(M-1));const V=M-1,B=t.currentTime,se=t.currentAnimateTimings,Te=se.duration;return A.forEach((He,nt)=>{const tt=F>0?nt==V?1:F*nt:c[nt],qe=tt*Te;t.currentTime=B+se.delay+qe,se.duration=qe,this._validateStyleAst(He,t),He.offset=tt,r.styles.push(He)}),r}visitReference(e,t){return{type:8,animation:Fo(this,w0(e.animation),t),options:lg(e.options)}}visitAnimateChild(e,t){return t.depCount++,{type:9,options:lg(e.options)}}visitAnimateRef(e,t){return{type:10,animation:this.visitReference(e.animation,t),options:lg(e.options)}}visitQuery(e,t){const r=t.currentQuerySelector,i=e.options||{};t.queryCount++,t.currentQuery=e;const[u,c]=function OU(n){const e=!!n.split(/\s*,\s*/).find(t=>":self"==t);return e&&(n=n.replace(PU,"")),n=n.replace(/@\*/g,xD).replace(/@\w+/g,t=>xD+"-"+t.substr(1)).replace(/:animating/g,YS),[n,e]}(e.selector);t.currentQuerySelector=r.length?r+" "+u:u,ko(t.collectedStyles,t.currentQuerySelector,{});const p=Fo(this,w0(e.animation),t);return t.currentQuery=null,t.currentQuerySelector=r,{type:11,selector:u,limit:i.limit||0,optional:!!i.optional,includeSelf:c,animation:p,originalSelector:e.selector,options:lg(e.options)}}visitStagger(e,t){t.currentQuery||t.errors.push(function QV(){return new h.vHH(3013,Zt)}());const r="full"===e.timings?{duration:0,delay:0,easing:"full"}:RD(e.timings,t.errors,!0);return{type:12,animation:Fo(this,w0(e.animation),t),timings:r,options:null}}}class FU{constructor(e){this.errors=e,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles={},this.options=null,this.unsupportedCSSPropertiesFound=new Set}}function UD(n){return!Array.isArray(n)&&"object"==typeof n}function lg(n){return n?(n=Wy(n)).params&&(n.params=function kU(n){return n?Wy(n):null}(n.params)):n={},n}function tM(n,e,t){return{duration:n,delay:e,easing:t}}function nM(n,e,t,r,i,u,c=null,p=!1){return{type:1,element:n,keyframes:e,preStyleProps:t,postStyleProps:r,duration:i,delay:u,totalTime:i+u,easing:c,subTimeline:p}}class BD{constructor(){this._map=new Map}get(e){return this._map.get(e)||[]}append(e,t){let r=this._map.get(e);r||this._map.set(e,r=[]),r.push(...t)}has(e){return this._map.has(e)}clear(){this._map.clear()}}const jU=new RegExp(":enter","g"),$U=new RegExp(":leave","g");function rM(n,e,t,r,i,u={},c={},p,y,b=[]){return(new GU).buildKeyframes(n,e,t,r,i,u,c,p,y,b)}class GU{buildKeyframes(e,t,r,i,u,c,p,y,b,A=[]){b=b||new BD;const M=new iM(e,t,b,i,u,A,[]);M.options=y,M.currentTimeline.setStyles([c],null,M.errors,y),Fo(this,r,M);const F=M.timelines.filter(V=>V.containsAnimation());if(Object.keys(p).length){let V;for(let B=F.length-1;B>=0;B--){const se=F[B];if(se.element===t){V=se;break}}V&&!V.allowOnlyTimelineStyles()&&V.setStyles([p],null,M.errors,y)}return F.length?F.map(V=>V.buildKeyframes()):[nM(t,[],[],[],0,0,"",!1)]}visitTrigger(e,t){}visitState(e,t){}visitTransition(e,t){}visitAnimateChild(e,t){const r=t.subInstructions.get(t.element);if(r){const i=t.createSubContext(e.options),u=t.currentTimeline.currentTime,c=this._visitSubInstructions(r,i,i.options);u!=c&&t.transformIntoNewTimeline(c)}t.previousNode=e}visitAnimateRef(e,t){const r=t.createSubContext(e.options);r.transformIntoNewTimeline(),this.visitReference(e.animation,r),t.transformIntoNewTimeline(r.currentTimeline.currentTime),t.previousNode=e}_visitSubInstructions(e,t,r){let u=t.currentTimeline.currentTime;const c=null!=r.duration?ag(r.duration):null,p=null!=r.delay?ag(r.delay):null;return 0!==c&&e.forEach(y=>{const b=t.appendInstructionToTimeline(y,c,p);u=Math.max(u,b.duration+b.delay)}),u}visitReference(e,t){t.updateOptions(e.options,!0),Fo(this,e.animation,t),t.previousNode=e}visitSequence(e,t){const r=t.subContextCount;let i=t;const u=e.options;if(u&&(u.params||u.delay)&&(i=t.createSubContext(u),i.transformIntoNewTimeline(),null!=u.delay)){6==i.previousNode.type&&(i.currentTimeline.snapshotCurrentStyles(),i.previousNode=jD);const c=ag(u.delay);i.delayNextStep(c)}e.steps.length&&(e.steps.forEach(c=>Fo(this,c,i)),i.currentTimeline.applyStylesToKeyframe(),i.subContextCount>r&&i.transformIntoNewTimeline()),t.previousNode=e}visitGroup(e,t){const r=[];let i=t.currentTimeline.currentTime;const u=e.options&&e.options.delay?ag(e.options.delay):0;e.steps.forEach(c=>{const p=t.createSubContext(e.options);u&&p.delayNextStep(u),Fo(this,c,p),i=Math.max(i,p.currentTimeline.currentTime),r.push(p.currentTimeline)}),r.forEach(c=>t.currentTimeline.mergeTimelineCollectedStyles(c)),t.transformIntoNewTimeline(i),t.previousNode=e}_visitTiming(e,t){if(e.dynamic){const r=e.strValue;return RD(t.params?PD(r,t.params,t.errors):r,t.errors)}return{duration:e.duration,delay:e.delay,easing:e.easing}}visitAnimate(e,t){const r=t.currentAnimateTimings=this._visitTiming(e.timings,t),i=t.currentTimeline;r.delay&&(t.incrementTime(r.delay),i.snapshotCurrentStyles());const u=e.style;5==u.type?this.visitKeyframes(u,t):(t.incrementTime(r.duration),this.visitStyle(u,t),i.applyStylesToKeyframe()),t.currentAnimateTimings=null,t.previousNode=e}visitStyle(e,t){const r=t.currentTimeline,i=t.currentAnimateTimings;!i&&r.getCurrentStyleProperties().length&&r.forwardFrame();const u=i&&i.easing||e.easing;e.isEmptyStep?r.applyEmptyStep(u):r.setStyles(e.styles,u,t.errors,t.options),t.previousNode=e}visitKeyframes(e,t){const r=t.currentAnimateTimings,i=t.currentTimeline.duration,u=r.duration,p=t.createSubContext().currentTimeline;p.easing=r.easing,e.styles.forEach(y=>{p.forwardTime((y.offset||0)*u),p.setStyles(y.styles,y.easing,t.errors,t.options),p.applyStylesToKeyframe()}),t.currentTimeline.mergeTimelineCollectedStyles(p),t.transformIntoNewTimeline(i+u),t.previousNode=e}visitQuery(e,t){const r=t.currentTimeline.currentTime,i=e.options||{},u=i.delay?ag(i.delay):0;u&&(6===t.previousNode.type||0==r&&t.currentTimeline.getCurrentStyleProperties().length)&&(t.currentTimeline.snapshotCurrentStyles(),t.previousNode=jD);let c=r;const p=t.invokeQuery(e.selector,e.originalSelector,e.limit,e.includeSelf,!!i.optional,t.errors);t.currentQueryTotal=p.length;let y=null;p.forEach((b,A)=>{t.currentQueryIndex=A;const M=t.createSubContext(e.options,b);u&&M.delayNextStep(u),b===t.element&&(y=M.currentTimeline),Fo(this,e.animation,M),M.currentTimeline.applyStylesToKeyframe(),c=Math.max(c,M.currentTimeline.currentTime)}),t.currentQueryIndex=0,t.currentQueryTotal=0,t.transformIntoNewTimeline(c),y&&(t.currentTimeline.mergeTimelineCollectedStyles(y),t.currentTimeline.snapshotCurrentStyles()),t.previousNode=e}visitStagger(e,t){const r=t.parentContext,i=t.currentTimeline,u=e.timings,c=Math.abs(u.duration),p=c*(t.currentQueryTotal-1);let y=c*t.currentQueryIndex;switch(u.duration<0?"reverse":u.easing){case"reverse":y=p-y;break;case"full":y=r.currentStaggerTime}const A=t.currentTimeline;y&&A.delayNextStep(y);const M=A.currentTime;Fo(this,e.animation,t),t.previousNode=e,r.currentStaggerTime=i.currentTime-M+(i.startTime-r.currentTimeline.startTime)}}const jD={};class iM{constructor(e,t,r,i,u,c,p,y){this._driver=e,this.element=t,this.subInstructions=r,this._enterClassName=i,this._leaveClassName=u,this.errors=c,this.timelines=p,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=jD,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=y||new HD(this._driver,t,0),p.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(e,t){if(!e)return;const r=e;let i=this.options;null!=r.duration&&(i.duration=ag(r.duration)),null!=r.delay&&(i.delay=ag(r.delay));const u=r.params;if(u){let c=i.params;c||(c=this.options.params={}),Object.keys(u).forEach(p=>{(!t||!c.hasOwnProperty(p))&&(c[p]=PD(u[p],c,this.errors))})}}_copyOptions(){const e={};if(this.options){const t=this.options.params;if(t){const r=e.params={};Object.keys(t).forEach(i=>{r[i]=t[i]})}}return e}createSubContext(e=null,t,r){const i=t||this.element,u=new iM(this._driver,i,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(i,r||0));return u.previousNode=this.previousNode,u.currentAnimateTimings=this.currentAnimateTimings,u.options=this._copyOptions(),u.updateOptions(e),u.currentQueryIndex=this.currentQueryIndex,u.currentQueryTotal=this.currentQueryTotal,u.parentContext=this,this.subContextCount++,u}transformIntoNewTimeline(e){return this.previousNode=jD,this.currentTimeline=this.currentTimeline.fork(this.element,e),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(e,t,r){const i={duration:null!=t?t:e.duration,delay:this.currentTimeline.currentTime+(null!=r?r:0)+e.delay,easing:""},u=new qU(this._driver,e.element,e.keyframes,e.preStyleProps,e.postStyleProps,i,e.stretchStartingKeyframe);return this.timelines.push(u),i}incrementTime(e){this.currentTimeline.forwardTime(this.currentTimeline.duration+e)}delayNextStep(e){e>0&&this.currentTimeline.delayNextStep(e)}invokeQuery(e,t,r,i,u,c){let p=[];if(i&&p.push(this.element),e.length>0){e=(e=e.replace(jU,"."+this._enterClassName)).replace($U,"."+this._leaveClassName);let b=this._driver.query(this.element,e,1!=r);0!==r&&(b=r<0?b.slice(b.length+r,b.length):b.slice(0,r)),p.push(...b)}return!u&&0==p.length&&c.push(function JV(n){return new h.vHH(3014,Zt)}()),p}}class HD{constructor(e,t,r,i){this._driver=e,this.element=t,this.startTime=r,this._elementTimelineStylesLookup=i,this.duration=0,this._previousKeyframe={},this._currentKeyframe={},this._keyframes=new Map,this._styleSummary={},this._pendingStyles={},this._backFill={},this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._localTimelineStyles=Object.create(this._backFill,{}),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(t),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(t,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.getCurrentStyleProperties().length>0;default:return!0}}getCurrentStyleProperties(){return Object.keys(this._currentKeyframe)}get currentTime(){return this.startTime+this.duration}delayNextStep(e){const t=1==this._keyframes.size&&Object.keys(this._pendingStyles).length;this.duration||t?(this.forwardTime(this.currentTime+e),t&&this.snapshotCurrentStyles()):this.startTime+=e}fork(e,t){return this.applyStylesToKeyframe(),new HD(this._driver,e,t||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=Object.create(this._backFill,{}),this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(e){this.applyStylesToKeyframe(),this.duration=e,this._loadKeyframe()}_updateStyle(e,t){this._localTimelineStyles[e]=t,this._globalTimelineStyles[e]=t,this._styleSummary[e]={time:this.currentTime,value:t}}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(e){e&&(this._previousKeyframe.easing=e),Object.keys(this._globalTimelineStyles).forEach(t=>{this._backFill[t]=this._globalTimelineStyles[t]||sd,this._currentKeyframe[t]=sd}),this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(e,t,r,i){t&&(this._previousKeyframe.easing=t);const u=i&&i.params||{},c=function zU(n,e){const t={};let r;return n.forEach(i=>{"*"===i?(r=r||Object.keys(e),r.forEach(u=>{t[u]=sd})):rf(i,!1,t)}),t}(e,this._globalTimelineStyles);Object.keys(c).forEach(p=>{const y=PD(c[p],u,r);this._pendingStyles[p]=y,this._localTimelineStyles.hasOwnProperty(p)||(this._backFill[p]=this._globalTimelineStyles.hasOwnProperty(p)?this._globalTimelineStyles[p]:sd),this._updateStyle(p,y)})}applyStylesToKeyframe(){const e=this._pendingStyles,t=Object.keys(e);0!=t.length&&(this._pendingStyles={},t.forEach(r=>{this._currentKeyframe[r]=e[r]}),Object.keys(this._localTimelineStyles).forEach(r=>{this._currentKeyframe.hasOwnProperty(r)||(this._currentKeyframe[r]=this._localTimelineStyles[r])}))}snapshotCurrentStyles(){Object.keys(this._localTimelineStyles).forEach(e=>{const t=this._localTimelineStyles[e];this._pendingStyles[e]=t,this._updateStyle(e,t)})}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const e=[];for(let t in this._currentKeyframe)e.push(t);return e}mergeTimelineCollectedStyles(e){Object.keys(e._styleSummary).forEach(t=>{const r=this._styleSummary[t],i=e._styleSummary[t];(!r||i.time>r.time)&&this._updateStyle(t,i.value)})}buildKeyframes(){this.applyStylesToKeyframe();const e=new Set,t=new Set,r=1===this._keyframes.size&&0===this.duration;let i=[];this._keyframes.forEach((p,y)=>{const b=rf(p,!0);Object.keys(b).forEach(A=>{const M=b[A];"!"==M?e.add(A):M==sd&&t.add(A)}),r||(b.offset=y/this.duration),i.push(b)});const u=e.size?ND(e.values()):[],c=t.size?ND(t.values()):[];if(r){const p=i[0],y=Wy(p);p.offset=0,y.offset=1,i=[p,y]}return nM(this.element,i,u,c,this.duration,this.startTime,this.easing,!1)}}class qU extends HD{constructor(e,t,r,i,u,c,p=!1){super(e,t,c.delay),this.keyframes=r,this.preStyleProps=i,this.postStyleProps=u,this._stretchStartingKeyframe=p,this.timings={duration:c.duration,delay:c.delay,easing:c.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let e=this.keyframes,{delay:t,duration:r,easing:i}=this.timings;if(this._stretchStartingKeyframe&&t){const u=[],c=r+t,p=t/c,y=rf(e[0],!1);y.offset=0,u.push(y);const b=rf(e[0],!1);b.offset=CN(p),u.push(b);const A=e.length-1;for(let M=1;M<=A;M++){let F=rf(e[M],!1);F.offset=CN((t+F.offset*r)/c),u.push(F)}r=c,t=0,i="",e=u}return nM(this.element,e,this.preStyleProps,this.postStyleProps,r,t,i,!0)}}function CN(n,e=3){const t=Math.pow(10,e-1);return Math.round(n*t)/t}class sM{}class WU extends sM{normalizePropertyName(e,t){return XS(e)}normalizeStyleValue(e,t,r,i){let u="";const c=r.toString().trim();if(KU[t]&&0!==r&&"0"!==r)if("number"==typeof r)u="px";else{const p=r.match(/^[+-]?[\d\.]+([a-z]*)$/);p&&0==p[1].length&&i.push(function jV(n,e){return new h.vHH(3005,Zt)}())}return c+u}}const KU=(()=>function ZU(n){const e={};return n.forEach(t=>e[t]=!0),e}("width,height,minWidth,minHeight,maxWidth,maxHeight,left,top,bottom,right,fontSize,outlineWidth,outlineOffset,paddingTop,paddingLeft,paddingBottom,paddingRight,marginTop,marginLeft,marginBottom,marginRight,borderRadius,borderWidth,borderTopWidth,borderLeftWidth,borderRightWidth,borderBottomWidth,textIndent,perspective".split(",")))();function TN(n,e,t,r,i,u,c,p,y,b,A,M,F){return{type:0,element:n,triggerName:e,isRemovalTransition:i,fromState:t,fromStyles:u,toState:r,toStyles:c,timelines:p,queriedElements:y,preStyleProps:b,postStyleProps:A,totalTime:M,errors:F}}const oM={};class AN{constructor(e,t,r){this._triggerName=e,this.ast=t,this._stateStyles=r}match(e,t,r,i){return function YU(n,e,t,r,i){return n.some(u=>u(e,t,r,i))}(this.ast.matchers,e,t,r,i)}buildStyles(e,t,r){const i=this._stateStyles["*"],u=this._stateStyles[e],c=i?i.buildStyles(t,r):{};return u?u.buildStyles(t,r):c}build(e,t,r,i,u,c,p,y,b,A){const M=[],F=this.ast.options&&this.ast.options.params||oM,B=this.buildStyles(r,p&&p.params||oM,M),se=y&&y.params||oM,Te=this.buildStyles(i,se,M),He=new Set,nt=new Map,tt=new Map,qe="void"===i,At={params:Object.assign(Object.assign({},F),se)},Rt=A?[]:rM(e,t,this.ast.animation,u,c,B,Te,At,b,M);let Yt=0;if(Rt.forEach(Lo=>{Yt=Math.max(Lo.duration+Lo.delay,Yt)}),M.length)return TN(t,this._triggerName,r,i,qe,B,Te,[],[],nt,tt,Yt,M);Rt.forEach(Lo=>{const od=Lo.element,$N=ko(nt,od,{});Lo.preStyleProps.forEach(cg=>$N[cg]=!0);const I0=ko(tt,od,{});Lo.postStyleProps.forEach(cg=>I0[cg]=!0),od!==t&&He.add(od)});const Ir=ND(He.values());return TN(t,this._triggerName,r,i,qe,B,Te,Rt,Ir,nt,tt,Yt)}}class QU{constructor(e,t,r){this.styles=e,this.defaultParams=t,this.normalizer=r}buildStyles(e,t){const r={},i=Wy(this.defaultParams);return Object.keys(e).forEach(u=>{const c=e[u];null!=c&&(i[u]=c)}),this.styles.styles.forEach(u=>{if("string"!=typeof u){const c=u;Object.keys(c).forEach(p=>{let y=c[p];y.length>1&&(y=PD(y,i,t));const b=this.normalizer.normalizePropertyName(p,t);y=this.normalizer.normalizeStyleValue(p,b,y,t),r[b]=y})}}),r}}class XU{constructor(e,t,r){this.name=e,this.ast=t,this._normalizer=r,this.transitionFactories=[],this.states={},t.states.forEach(i=>{this.states[i.name]=new QU(i.style,i.options&&i.options.params||{},r)}),SN(this.states,"true","1"),SN(this.states,"false","0"),t.transitions.forEach(i=>{this.transitionFactories.push(new AN(e,i,this.states))}),this.fallbackTransition=function eB(n,e,t){return new AN(n,{type:1,animation:{type:2,steps:[],options:null},matchers:[(c,p)=>!0],options:null,queryCount:0,depCount:0},e)}(e,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(e,t,r,i){return this.transitionFactories.find(c=>c.match(e,t,r,i))||null}matchStyles(e,t,r){return this.fallbackTransition.buildStyles(e,t,r)}}function SN(n,e,t){n.hasOwnProperty(e)?n.hasOwnProperty(t)||(n[t]=n[e]):n.hasOwnProperty(t)&&(n[e]=n[t])}const tB=new BD;class nB{constructor(e,t,r){this.bodyNode=e,this._driver=t,this._normalizer=r,this._animations={},this._playersById={},this.players=[]}register(e,t){const r=[],u=eM(this._driver,t,r,[]);if(r.length)throw function sU(n){return new h.vHH(3503,Zt)}();this._animations[e]=u}_buildPlayer(e,t,r){const i=e.element,u=oN(0,this._normalizer,0,e.keyframes,t,r);return this._driver.animate(i,u,e.duration,e.delay,e.easing,[],!0)}create(e,t,r={}){const i=[],u=this._animations[e];let c;const p=new Map;if(u?(c=rM(this._driver,t,u,ZS,SD,{},{},r,tB,i),c.forEach(A=>{const M=ko(p,A.element,{});A.postStyleProps.forEach(F=>M[F]=null)})):(i.push(function oU(){return new h.vHH(3300,Zt)}()),c=[]),i.length)throw function aU(n){return new h.vHH(3504,Zt)}();p.forEach((A,M)=>{Object.keys(A).forEach(F=>{A[F]=this._driver.computeStyle(M,F,sd)})});const b=nf(c.map(A=>{const M=p.get(A.element);return this._buildPlayer(A,{},M)}));return this._playersById[e]=b,b.onDestroy(()=>this.destroy(e)),this.players.push(b),b}destroy(e){const t=this._getPlayer(e);t.destroy(),delete this._playersById[e];const r=this.players.indexOf(t);r>=0&&this.players.splice(r,1)}_getPlayer(e){const t=this._playersById[e];if(!t)throw function uU(n){return new h.vHH(3301,Zt)}();return t}listen(e,t,r,i){const u=qS(t,"","","");return $S(this._getPlayer(e),r,u,i),()=>{}}command(e,t,r,i){if("register"==r)return void this.register(e,i[0]);if("create"==r)return void this.create(e,t,i[0]||{});const u=this._getPlayer(e);switch(r){case"play":u.play();break;case"pause":u.pause();break;case"reset":u.reset();break;case"restart":u.restart();break;case"finish":u.finish();break;case"init":u.init();break;case"setPosition":u.setPosition(parseFloat(i[0]));break;case"destroy":this.destroy(e)}}}const MN="ng-animate-queued",aM="ng-animate-disabled",aB=[],xN={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},uB={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},Sa="__ng_removed";class uM{constructor(e,t=""){this.namespaceId=t;const r=e&&e.hasOwnProperty("value");if(this.value=function hB(n){return null!=n?n:null}(r?e.value:e),r){const u=Wy(e);delete u.value,this.options=u}else this.options={};this.options.params||(this.options.params={})}get params(){return this.options.params}absorbOptions(e){const t=e.params;if(t){const r=this.options.params;Object.keys(t).forEach(i=>{null==r[i]&&(r[i]=t[i])})}}}const b0="void",lM=new uM(b0);class lB{constructor(e,t,r){this.id=e,this.hostElement=t,this._engine=r,this.players=[],this._triggers={},this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+e,Ma(t,this._hostClassName)}listen(e,t,r,i){if(!this._triggers.hasOwnProperty(t))throw function lU(n,e){return new h.vHH(3302,Zt)}();if(null==r||0==r.length)throw function cU(n){return new h.vHH(3303,Zt)}();if(!function fB(n){return"start"==n||"done"==n}(r))throw function dU(n,e){return new h.vHH(3400,Zt)}();const u=ko(this._elementListeners,e,[]),c={name:t,phase:r,callback:i};u.push(c);const p=ko(this._engine.statesByElement,e,{});return p.hasOwnProperty(t)||(Ma(e,MD),Ma(e,MD+"-"+t),p[t]=lM),()=>{this._engine.afterFlush(()=>{const y=u.indexOf(c);y>=0&&u.splice(y,1),this._triggers[t]||delete p[t]})}}register(e,t){return!this._triggers[e]&&(this._triggers[e]=t,!0)}_getTrigger(e){const t=this._triggers[e];if(!t)throw function hU(n){return new h.vHH(3401,Zt)}();return t}trigger(e,t,r,i=!0){const u=this._getTrigger(t),c=new cM(this.id,t,e);let p=this._engine.statesByElement.get(e);p||(Ma(e,MD),Ma(e,MD+"-"+t),this._engine.statesByElement.set(e,p={}));let y=p[t];const b=new uM(r,this.id);if(!(r&&r.hasOwnProperty("value"))&&y&&b.absorbOptions(y.options),p[t]=b,y||(y=lM),b.value!==b0&&y.value===b.value){if(!function mB(n,e){const t=Object.keys(n),r=Object.keys(e);if(t.length!=r.length)return!1;for(let i=0;i<t.length;i++){const u=t[i];if(!e.hasOwnProperty(u)||n[u]!==e[u])return!1}return!0}(y.params,b.params)){const se=[],Te=u.matchStyles(y.value,y.params,se),He=u.matchStyles(b.value,b.params,se);se.length?this._engine.reportError(se):this._engine.afterFlush(()=>{ug(e,Te),Nl(e,He)})}return}const F=ko(this._engine.playersByElement,e,[]);F.forEach(se=>{se.namespaceId==this.id&&se.triggerName==t&&se.queued&&se.destroy()});let V=u.matchTransition(y.value,b.value,e,b.params),B=!1;if(!V){if(!i)return;V=u.fallbackTransition,B=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:t,transition:V,fromState:y,toState:b,player:c,isFallbackTransition:B}),B||(Ma(e,MN),c.onStart(()=>{Ky(e,MN)})),c.onDone(()=>{let se=this.players.indexOf(c);se>=0&&this.players.splice(se,1);const Te=this._engine.playersByElement.get(e);if(Te){let He=Te.indexOf(c);He>=0&&Te.splice(He,1)}}),this.players.push(c),F.push(c),c}deregister(e){delete this._triggers[e],this._engine.statesByElement.forEach((t,r)=>{delete t[e]}),this._elementListeners.forEach((t,r)=>{this._elementListeners.set(r,t.filter(i=>i.name!=e))})}clearElementCache(e){this._engine.statesByElement.delete(e),this._elementListeners.delete(e);const t=this._engine.playersByElement.get(e);t&&(t.forEach(r=>r.destroy()),this._engine.playersByElement.delete(e))}_signalRemovalForInnerTriggers(e,t){const r=this._engine.driver.query(e,xD,!0);r.forEach(i=>{if(i[Sa])return;const u=this._engine.fetchNamespacesByElement(i);u.size?u.forEach(c=>c.triggerLeaveAnimation(i,t,!1,!0)):this.clearElementCache(i)}),this._engine.afterFlushAnimationsDone(()=>r.forEach(i=>this.clearElementCache(i)))}triggerLeaveAnimation(e,t,r,i){const u=this._engine.statesByElement.get(e),c=new Map;if(u){const p=[];if(Object.keys(u).forEach(y=>{if(c.set(y,u[y].value),this._triggers[y]){const b=this.trigger(e,y,b0,i);b&&p.push(b)}}),p.length)return this._engine.markElementAsRemoved(this.id,e,!0,t,c),r&&nf(p).onDone(()=>this._engine.processLeaveNode(e)),!0}return!1}prepareLeaveAnimationListeners(e){const t=this._elementListeners.get(e),r=this._engine.statesByElement.get(e);if(t&&r){const i=new Set;t.forEach(u=>{const c=u.name;if(i.has(c))return;i.add(c);const y=this._triggers[c].fallbackTransition,b=r[c]||lM,A=new uM(b0),M=new cM(this.id,c,e);this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:c,transition:y,fromState:b,toState:A,player:M,isFallbackTransition:!0})})}}removeNode(e,t){const r=this._engine;if(e.childElementCount&&this._signalRemovalForInnerTriggers(e,t),this.triggerLeaveAnimation(e,t,!0))return;let i=!1;if(r.totalAnimations){const u=r.players.length?r.playersByQueriedElement.get(e):[];if(u&&u.length)i=!0;else{let c=e;for(;c=c.parentNode;)if(r.statesByElement.get(c)){i=!0;break}}}if(this.prepareLeaveAnimationListeners(e),i)r.markElementAsRemoved(this.id,e,!1,t);else{const u=e[Sa];(!u||u===xN)&&(r.afterFlush(()=>this.clearElementCache(e)),r.destroyInnerAnimations(e),r._onRemovalComplete(e,t))}}insertNode(e,t){Ma(e,this._hostClassName)}drainQueuedTransitions(e){const t=[];return this._queue.forEach(r=>{const i=r.player;if(i.destroyed)return;const u=r.element,c=this._elementListeners.get(u);c&&c.forEach(p=>{if(p.name==r.triggerName){const y=qS(u,r.triggerName,r.fromState.value,r.toState.value);y._data=e,$S(r.player,p.phase,y,p.callback)}}),i.markedForDestroy?this._engine.afterFlush(()=>{i.destroy()}):t.push(r)}),this._queue=[],t.sort((r,i)=>{const u=r.transition.ast.depCount,c=i.transition.ast.depCount;return 0==u||0==c?u-c:this._engine.driver.containsElement(r.element,i.element)?1:-1})}destroy(e){this.players.forEach(t=>t.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,e)}elementContainsData(e){let t=!1;return this._elementListeners.has(e)&&(t=!0),t=!!this._queue.find(r=>r.element===e)||t,t}}class cB{constructor(e,t,r){this.bodyNode=e,this.driver=t,this._normalizer=r,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(i,u)=>{}}_onRemovalComplete(e,t){this.onRemovalComplete(e,t)}get queuedPlayers(){const e=[];return this._namespaceList.forEach(t=>{t.players.forEach(r=>{r.queued&&e.push(r)})}),e}createNamespace(e,t){const r=new lB(e,t,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,t)?this._balanceNamespaceList(r,t):(this.newHostElements.set(t,r),this.collectEnterElement(t)),this._namespaceLookup[e]=r}_balanceNamespaceList(e,t){const r=this._namespaceList,i=this.namespacesByHostElement,u=r.length-1;if(u>=0){let c=!1;if(void 0!==this.driver.getParentElement){let p=this.driver.getParentElement(t);for(;p;){const y=i.get(p);if(y){const b=r.indexOf(y);r.splice(b+1,0,e),c=!0;break}p=this.driver.getParentElement(p)}}else for(let p=u;p>=0;p--)if(this.driver.containsElement(r[p].hostElement,t)){r.splice(p+1,0,e),c=!0;break}c||r.unshift(e)}else r.push(e);return i.set(t,e),e}register(e,t){let r=this._namespaceLookup[e];return r||(r=this.createNamespace(e,t)),r}registerTrigger(e,t,r){let i=this._namespaceLookup[e];i&&i.register(t,r)&&this.totalAnimations++}destroy(e,t){if(!e)return;const r=this._fetchNamespace(e);this.afterFlush(()=>{this.namespacesByHostElement.delete(r.hostElement),delete this._namespaceLookup[e];const i=this._namespaceList.indexOf(r);i>=0&&this._namespaceList.splice(i,1)}),this.afterFlushAnimationsDone(()=>r.destroy(t))}_fetchNamespace(e){return this._namespaceLookup[e]}fetchNamespacesByElement(e){const t=new Set,r=this.statesByElement.get(e);if(r){const i=Object.keys(r);for(let u=0;u<i.length;u++){const c=r[i[u]].namespaceId;if(c){const p=this._fetchNamespace(c);p&&t.add(p)}}}return t}trigger(e,t,r,i){if($D(t)){const u=this._fetchNamespace(e);if(u)return u.trigger(t,r,i),!0}return!1}insertNode(e,t,r,i){if(!$D(t))return;const u=t[Sa];if(u&&u.setForRemoval){u.setForRemoval=!1,u.setForMove=!0;const c=this.collectedLeaveElements.indexOf(t);c>=0&&this.collectedLeaveElements.splice(c,1)}if(e){const c=this._fetchNamespace(e);c&&c.insertNode(t,r)}i&&this.collectEnterElement(t)}collectEnterElement(e){this.collectedEnterElements.push(e)}markElementAsDisabled(e,t){t?this.disabledNodes.has(e)||(this.disabledNodes.add(e),Ma(e,aM)):this.disabledNodes.has(e)&&(this.disabledNodes.delete(e),Ky(e,aM))}removeNode(e,t,r,i){if($D(t)){const u=e?this._fetchNamespace(e):null;if(u?u.removeNode(t,i):this.markElementAsRemoved(e,t,!1,i),r){const c=this.namespacesByHostElement.get(t);c&&c.id!==e&&c.removeNode(t,i)}}else this._onRemovalComplete(t,i)}markElementAsRemoved(e,t,r,i,u){this.collectedLeaveElements.push(t),t[Sa]={namespaceId:e,setForRemoval:i,hasAnimation:r,removedBeforeQueried:!1,previousTriggersValues:u}}listen(e,t,r,i,u){return $D(t)?this._fetchNamespace(e).listen(t,r,i,u):()=>{}}_buildInstruction(e,t,r,i,u){return e.transition.build(this.driver,e.element,e.fromState.value,e.toState.value,r,i,e.fromState.options,e.toState.options,t,u)}destroyInnerAnimations(e){let t=this.driver.query(e,xD,!0);t.forEach(r=>this.destroyActiveAnimationsForElement(r)),0!=this.playersByQueriedElement.size&&(t=this.driver.query(e,YS,!0),t.forEach(r=>this.finishActiveQueriedAnimationOnElement(r)))}destroyActiveAnimationsForElement(e){const t=this.playersByElement.get(e);t&&t.forEach(r=>{r.queued?r.markedForDestroy=!0:r.destroy()})}finishActiveQueriedAnimationOnElement(e){const t=this.playersByQueriedElement.get(e);t&&t.forEach(r=>r.finish())}whenRenderingDone(){return new Promise(e=>{if(this.players.length)return nf(this.players).onDone(()=>e());e()})}processLeaveNode(e){var t;const r=e[Sa];if(r&&r.setForRemoval){if(e[Sa]=xN,r.namespaceId){this.destroyInnerAnimations(e);const i=this._fetchNamespace(r.namespaceId);i&&i.clearElementCache(e)}this._onRemovalComplete(e,r.setForRemoval)}(null===(t=e.classList)||void 0===t?void 0:t.contains(aM))&&this.markElementAsDisabled(e,!1),this.driver.query(e,".ng-animate-disabled",!0).forEach(i=>{this.markElementAsDisabled(i,!1)})}flush(e=-1){let t=[];if(this.newHostElements.size&&(this.newHostElements.forEach((r,i)=>this._balanceNamespaceList(r,i)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let r=0;r<this.collectedEnterElements.length;r++)Ma(this.collectedEnterElements[r],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const r=[];try{t=this._flushAnimations(r,e)}finally{for(let i=0;i<r.length;i++)r[i]()}}else for(let r=0;r<this.collectedLeaveElements.length;r++)this.processLeaveNode(this.collectedLeaveElements[r]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(r=>r()),this._flushFns=[],this._whenQuietFns.length){const r=this._whenQuietFns;this._whenQuietFns=[],t.length?nf(t).onDone(()=>{r.forEach(i=>i())}):r.forEach(i=>i())}}reportError(e){throw function fU(n){return new h.vHH(3402,Zt)}()}_flushAnimations(e,t){const r=new BD,i=[],u=new Map,c=[],p=new Map,y=new Map,b=new Map,A=new Set;this.disabledNodes.forEach(ut=>{A.add(ut);const bt=this.driver.query(ut,".ng-animate-queued",!0);for(let Ot=0;Ot<bt.length;Ot++)A.add(bt[Ot])});const M=this.bodyNode,F=Array.from(this.statesByElement.keys()),V=NN(F,this.collectedEnterElements),B=new Map;let se=0;V.forEach((ut,bt)=>{const Ot=ZS+se++;B.set(bt,Ot),ut.forEach(sn=>Ma(sn,Ot))});const Te=[],He=new Set,nt=new Set;for(let ut=0;ut<this.collectedLeaveElements.length;ut++){const bt=this.collectedLeaveElements[ut],Ot=bt[Sa];Ot&&Ot.setForRemoval&&(Te.push(bt),He.add(bt),Ot.hasAnimation?this.driver.query(bt,".ng-star-inserted",!0).forEach(sn=>He.add(sn)):nt.add(bt))}const tt=new Map,qe=NN(F,Array.from(He));qe.forEach((ut,bt)=>{const Ot=SD+se++;tt.set(bt,Ot),ut.forEach(sn=>Ma(sn,Ot))}),e.push(()=>{V.forEach((ut,bt)=>{const Ot=B.get(bt);ut.forEach(sn=>Ky(sn,Ot))}),qe.forEach((ut,bt)=>{const Ot=tt.get(bt);ut.forEach(sn=>Ky(sn,Ot))}),Te.forEach(ut=>{this.processLeaveNode(ut)})});const At=[],Rt=[];for(let ut=this._namespaceList.length-1;ut>=0;ut--)this._namespaceList[ut].drainQueuedTransitions(t).forEach(Ot=>{const sn=Ot.player,Di=Ot.element;if(At.push(sn),this.collectedEnterElements.length){const Ss=Di[Sa];if(Ss&&Ss.setForMove){if(Ss.previousTriggersValues&&Ss.previousTriggersValues.has(Ot.triggerName)){const dg=Ss.previousTriggersValues.get(Ot.triggerName),af=this.statesByElement.get(Ot.element);af&&af[Ot.triggerName]&&(af[Ot.triggerName].value=dg)}return void sn.destroy()}}const Ol=!M||!this.driver.containsElement(M,Di),Vo=tt.get(Di),sf=B.get(Di),rr=this._buildInstruction(Ot,r,sf,Vo,Ol);if(rr.errors&&rr.errors.length)return void Rt.push(rr);if(Ol)return sn.onStart(()=>ug(Di,rr.fromStyles)),sn.onDestroy(()=>Nl(Di,rr.toStyles)),void i.push(sn);if(Ot.isFallbackTransition)return sn.onStart(()=>ug(Di,rr.fromStyles)),sn.onDestroy(()=>Nl(Di,rr.toStyles)),void i.push(sn);const zN=[];rr.timelines.forEach(Ss=>{Ss.stretchStartingKeyframe=!0,this.disabledNodes.has(Ss.element)||zN.push(Ss)}),rr.timelines=zN,r.append(Di,rr.timelines),c.push({instruction:rr,player:sn,element:Di}),rr.queriedElements.forEach(Ss=>ko(p,Ss,[]).push(sn)),rr.preStyleProps.forEach((Ss,dg)=>{const af=Object.keys(Ss);if(af.length){let hg=y.get(dg);hg||y.set(dg,hg=new Set),af.forEach(hM=>hg.add(hM))}}),rr.postStyleProps.forEach((Ss,dg)=>{const af=Object.keys(Ss);let hg=b.get(dg);hg||b.set(dg,hg=new Set),af.forEach(hM=>hg.add(hM))})});if(Rt.length){const ut=[];Rt.forEach(bt=>{ut.push(function pU(n,e){return new h.vHH(3505,Zt)}())}),At.forEach(bt=>bt.destroy()),this.reportError(ut)}const Yt=new Map,Ir=new Map;c.forEach(ut=>{const bt=ut.element;r.has(bt)&&(Ir.set(bt,bt),this._beforeAnimationBuild(ut.player.namespaceId,ut.instruction,Yt))}),i.forEach(ut=>{const bt=ut.element;this._getPreviousPlayers(bt,!1,ut.namespaceId,ut.triggerName,null).forEach(sn=>{ko(Yt,bt,[]).push(sn),sn.destroy()})});const Lo=Te.filter(ut=>kN(ut,y,b)),od=new Map;PN(od,this.driver,nt,b,sd).forEach(ut=>{kN(ut,y,b)&&Lo.push(ut)});const I0=new Map;V.forEach((ut,bt)=>{PN(I0,this.driver,new Set(ut),y,"!")}),Lo.forEach(ut=>{const bt=od.get(ut),Ot=I0.get(ut);od.set(ut,Object.assign(Object.assign({},bt),Ot))});const cg=[],GN=[],qN={};c.forEach(ut=>{const{element:bt,player:Ot,instruction:sn}=ut;if(r.has(bt)){if(A.has(bt))return Ot.onDestroy(()=>Nl(bt,sn.toStyles)),Ot.disabled=!0,Ot.overrideTotalTime(sn.totalTime),void i.push(Ot);let Di=qN;if(Ir.size>1){let Vo=bt;const sf=[];for(;Vo=Vo.parentNode;){const rr=Ir.get(Vo);if(rr){Di=rr;break}sf.push(Vo)}sf.forEach(rr=>Ir.set(rr,Di))}const Ol=this._buildAnimation(Ot.namespaceId,sn,Yt,u,I0,od);if(Ot.setRealPlayer(Ol),Di===qN)cg.push(Ot);else{const Vo=this.playersByElement.get(Di);Vo&&Vo.length&&(Ot.parentPlayer=nf(Vo)),i.push(Ot)}}else ug(bt,sn.fromStyles),Ot.onDestroy(()=>Nl(bt,sn.toStyles)),GN.push(Ot),A.has(bt)&&i.push(Ot)}),GN.forEach(ut=>{const bt=u.get(ut.element);if(bt&&bt.length){const Ot=nf(bt);ut.setRealPlayer(Ot)}}),i.forEach(ut=>{ut.parentPlayer?ut.syncPlayerEvents(ut.parentPlayer):ut.destroy()});for(let ut=0;ut<Te.length;ut++){const bt=Te[ut],Ot=bt[Sa];if(Ky(bt,SD),Ot&&Ot.hasAnimation)continue;let sn=[];if(p.size){let Ol=p.get(bt);Ol&&Ol.length&&sn.push(...Ol);let Vo=this.driver.query(bt,YS,!0);for(let sf=0;sf<Vo.length;sf++){let rr=p.get(Vo[sf]);rr&&rr.length&&sn.push(...rr)}}const Di=sn.filter(Ol=>!Ol.destroyed);Di.length?pB(this,bt,Di):this.processLeaveNode(bt)}return Te.length=0,cg.forEach(ut=>{this.players.push(ut),ut.onDone(()=>{ut.destroy();const bt=this.players.indexOf(ut);this.players.splice(bt,1)}),ut.play()}),cg}elementContainsData(e,t){let r=!1;const i=t[Sa];return i&&i.setForRemoval&&(r=!0),this.playersByElement.has(t)&&(r=!0),this.playersByQueriedElement.has(t)&&(r=!0),this.statesByElement.has(t)&&(r=!0),this._fetchNamespace(e).elementContainsData(t)||r}afterFlush(e){this._flushFns.push(e)}afterFlushAnimationsDone(e){this._whenQuietFns.push(e)}_getPreviousPlayers(e,t,r,i,u){let c=[];if(t){const p=this.playersByQueriedElement.get(e);p&&(c=p)}else{const p=this.playersByElement.get(e);if(p){const y=!u||u==b0;p.forEach(b=>{b.queued||!y&&b.triggerName!=i||c.push(b)})}}return(r||i)&&(c=c.filter(p=>!(r&&r!=p.namespaceId||i&&i!=p.triggerName))),c}_beforeAnimationBuild(e,t,r){const u=t.element,c=t.isRemovalTransition?void 0:e,p=t.isRemovalTransition?void 0:t.triggerName;for(const y of t.timelines){const b=y.element,A=b!==u,M=ko(r,b,[]);this._getPreviousPlayers(b,A,c,p,t.toState).forEach(V=>{const B=V.getRealPlayer();B.beforeDestroy&&B.beforeDestroy(),V.destroy(),M.push(V)})}ug(u,t.fromStyles)}_buildAnimation(e,t,r,i,u,c){const p=t.triggerName,y=t.element,b=[],A=new Set,M=new Set,F=t.timelines.map(B=>{const se=B.element;A.add(se);const Te=se[Sa];if(Te&&Te.removedBeforeQueried)return new E0(B.duration,B.delay);const He=se!==y,nt=function gB(n){const e=[];return ON(n,e),e}((r.get(se)||aB).map(Yt=>Yt.getRealPlayer())).filter(Yt=>!!Yt.element&&Yt.element===se),tt=u.get(se),qe=c.get(se),At=oN(0,this._normalizer,0,B.keyframes,tt,qe),Rt=this._buildPlayer(B,At,nt);if(B.subTimeline&&i&&M.add(se),He){const Yt=new cM(e,p,se);Yt.setRealPlayer(Rt),b.push(Yt)}return Rt});b.forEach(B=>{ko(this.playersByQueriedElement,B.element,[]).push(B),B.onDone(()=>function dB(n,e,t){let r;if(n instanceof Map){if(r=n.get(e),r){if(r.length){const i=r.indexOf(t);r.splice(i,1)}0==r.length&&n.delete(e)}}else if(r=n[e],r){if(r.length){const i=r.indexOf(t);r.splice(i,1)}0==r.length&&delete n[e]}return r}(this.playersByQueriedElement,B.element,B))}),A.forEach(B=>Ma(B,mN));const V=nf(F);return V.onDestroy(()=>{A.forEach(B=>Ky(B,mN)),Nl(y,t.toStyles)}),M.forEach(B=>{ko(i,B,[]).push(V)}),V}_buildPlayer(e,t,r){return t.length>0?this.driver.animate(e.element,t,e.duration,e.delay,e.easing,r):new E0(e.duration,e.delay)}}class cM{constructor(e,t,r){this.namespaceId=e,this.triggerName=t,this.element=r,this._player=new E0,this._containsRealPlayer=!1,this._queuedCallbacks={},this.destroyed=!1,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(e){this._containsRealPlayer||(this._player=e,Object.keys(this._queuedCallbacks).forEach(t=>{this._queuedCallbacks[t].forEach(r=>$S(e,t,void 0,r))}),this._queuedCallbacks={},this._containsRealPlayer=!0,this.overrideTotalTime(e.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(e){this.totalTime=e}syncPlayerEvents(e){const t=this._player;t.triggerCallback&&e.onStart(()=>t.triggerCallback("start")),e.onDone(()=>this.finish()),e.onDestroy(()=>this.destroy())}_queueEvent(e,t){ko(this._queuedCallbacks,e,[]).push(t)}onDone(e){this.queued&&this._queueEvent("done",e),this._player.onDone(e)}onStart(e){this.queued&&this._queueEvent("start",e),this._player.onStart(e)}onDestroy(e){this.queued&&this._queueEvent("destroy",e),this._player.onDestroy(e)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(e){this.queued||this._player.setPosition(e)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(e){const t=this._player;t.triggerCallback&&t.triggerCallback(e)}}function $D(n){return n&&1===n.nodeType}function RN(n,e){const t=n.style.display;return n.style.display=null!=e?e:"none",t}function PN(n,e,t,r,i){const u=[];t.forEach(y=>u.push(RN(y)));const c=[];r.forEach((y,b)=>{const A={};y.forEach(M=>{const F=A[M]=e.computeStyle(b,M,i);(!F||0==F.length)&&(b[Sa]=uB,c.push(b))}),n.set(b,A)});let p=0;return t.forEach(y=>RN(y,u[p++])),c}function NN(n,e){const t=new Map;if(n.forEach(p=>t.set(p,[])),0==e.length)return t;const i=new Set(e),u=new Map;function c(p){if(!p)return 1;let y=u.get(p);if(y)return y;const b=p.parentNode;return y=t.has(b)?b:i.has(b)?1:c(b),u.set(p,y),y}return e.forEach(p=>{const y=c(p);1!==y&&t.get(y).push(p)}),t}function Ma(n,e){var t;null===(t=n.classList)||void 0===t||t.add(e)}function Ky(n,e){var t;null===(t=n.classList)||void 0===t||t.remove(e)}function pB(n,e,t){nf(t).onDone(()=>n.processLeaveNode(e))}function ON(n,e){for(let t=0;t<n.length;t++){const r=n[t];r instanceof iN?ON(r.players,e):e.push(r)}}function kN(n,e,t){const r=t.get(n);if(!r)return!1;let i=e.get(n);return i?r.forEach(u=>i.add(u)):e.set(n,r),t.delete(n),!0}class GD{constructor(e,t,r){this.bodyNode=e,this._driver=t,this._normalizer=r,this._triggerCache={},this.onRemovalComplete=(i,u)=>{},this._transitionEngine=new cB(e,t,r),this._timelineEngine=new nB(e,t,r),this._transitionEngine.onRemovalComplete=(i,u)=>this.onRemovalComplete(i,u)}registerTrigger(e,t,r,i,u){const c=e+"-"+i;let p=this._triggerCache[c];if(!p){const y=[],A=eM(this._driver,u,y,[]);if(y.length)throw function rU(n,e){return new h.vHH(3404,Zt)}();p=function JU(n,e,t){return new XU(n,e,t)}(i,A,this._normalizer),this._triggerCache[c]=p}this._transitionEngine.registerTrigger(t,i,p)}register(e,t){this._transitionEngine.register(e,t)}destroy(e,t){this._transitionEngine.destroy(e,t)}onInsert(e,t,r,i){this._transitionEngine.insertNode(e,t,r,i)}onRemove(e,t,r,i){this._transitionEngine.removeNode(e,t,i||!1,r)}disableAnimations(e,t){this._transitionEngine.markElementAsDisabled(e,t)}process(e,t,r,i){if("@"==r.charAt(0)){const[u,c]=aN(r);this._timelineEngine.command(u,t,c,i)}else this._transitionEngine.trigger(e,t,r,i)}listen(e,t,r,i,u){if("@"==r.charAt(0)){const[c,p]=aN(r);return this._timelineEngine.listen(c,t,p,u)}return this._transitionEngine.listen(e,t,r,i,u)}flush(e=-1){this._transitionEngine.flush(e)}get players(){return this._transitionEngine.players.concat(this._timelineEngine.players)}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}}let _B=(()=>{class n{constructor(t,r,i){this._element=t,this._startStyles=r,this._endStyles=i,this._state=0;let u=n.initialStylesByElement.get(t);u||n.initialStylesByElement.set(t,u={}),this._initialStyles=u}start(){this._state<1&&(this._startStyles&&Nl(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(Nl(this._element,this._initialStyles),this._endStyles&&(Nl(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(n.initialStylesByElement.delete(this._element),this._startStyles&&(ug(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(ug(this._element,this._endStyles),this._endStyles=null),Nl(this._element,this._initialStyles),this._state=3)}}return n.initialStylesByElement=new WeakMap,n})();function dM(n){let e=null;const t=Object.keys(n);for(let r=0;r<t.length;r++){const i=t[r];vB(i)&&(e=e||{},e[i]=n[i])}return e}function vB(n){return"display"===n||"position"===n}class FN{constructor(e,t,r,i){this.element=e,this.keyframes=t,this.options=r,this._specialStyles=i,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this.time=0,this.parentPlayer=null,this.currentSnapshot={},this._duration=r.duration,this._delay=r.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const e=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,e,this.options),this._finalKeyframe=e.length?e[e.length-1]:{},this.domPlayer.addEventListener("finish",()=>this._onFinish())}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_triggerWebAnimation(e,t,r){return e.animate(t,r)}onStart(e){this._onStartFns.push(e)}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(e=>e()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}setPosition(e){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=e*this.time}getPosition(){return this.domPlayer.currentTime/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const e={};if(this.hasStarted()){const t=this._finalKeyframe;Object.keys(t).forEach(r=>{"offset"!=r&&(e[r]=this._finished?t[r]:wN(this.element,r))})}this.currentSnapshot=e}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}}class EB{validateStyleProperty(e){return dN(e)}matchesElement(e,t){return!1}containsElement(e,t){return hN(e,t)}getParentElement(e){return WS(e)}query(e,t,r){return fN(e,t,r)}computeStyle(e,t,r){return window.getComputedStyle(e)[t]}animate(e,t,r,i,u,c=[]){const y={duration:r,delay:i,fill:0==i?"both":"forwards"};u&&(y.easing=u);const b={},A=c.filter(F=>F instanceof FN);(function DU(n,e){return 0===n||0===e})(r,i)&&A.forEach(F=>{let V=F.currentSnapshot;Object.keys(V).forEach(B=>b[B]=V[B])}),t=function CU(n,e,t){const r=Object.keys(t);if(r.length&&e.length){let u=e[0],c=[];if(r.forEach(p=>{u.hasOwnProperty(p)||c.push(p),u[p]=t[p]}),c.length)for(var i=1;i<e.length;i++){let p=e[i];c.forEach(function(y){p[y]=wN(n,y)})}}return e}(e,t=t.map(F=>rf(F,!1)),b);const M=function yB(n,e){let t=null,r=null;return Array.isArray(e)&&e.length?(t=dM(e[0]),e.length>1&&(r=dM(e[e.length-1]))):e&&(t=dM(e)),t||r?new _B(n,t,r):null}(e,t);return new FN(e,t,y,M)}}let wB=(()=>{class n extends eN{constructor(t,r){super(),this._nextAnimationId=0,this._renderer=t.createRenderer(r.body,{id:"0",encapsulation:h.ifc.None,styles:[],data:{animation:[]}})}build(t){const r=this._nextAnimationId.toString();this._nextAnimationId++;const i=Array.isArray(t)?tN(t):t;return LN(this._renderer,null,r,"register",[i]),new bB(r,this._renderer)}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(h.FYo),h.LFG(ue))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();class bB extends class kV{}{constructor(e,t){super(),this._id=e,this._renderer=t}create(e,t){return new IB(this._id,e,t||{},this._renderer)}}class IB{constructor(e,t,r,i){this.id=e,this.element=t,this._renderer=i,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",r)}_listen(e,t){return this._renderer.listen(this.element,`@@${this.id}:${e}`,t)}_command(e,...t){return LN(this._renderer,this.element,this.id,e,t)}onDone(e){this._listen("done",e)}onStart(e){this._listen("start",e)}onDestroy(e){this._listen("destroy",e)}init(){this._command("init")}hasStarted(){return this._started}play(){this._command("play"),this._started=!0}pause(){this._command("pause")}restart(){this._command("restart")}finish(){this._command("finish")}destroy(){this._command("destroy")}reset(){this._command("reset"),this._started=!1}setPosition(e){this._command("setPosition",e)}getPosition(){var e,t;return null!==(t=null===(e=this._renderer.engine.players[+this.id])||void 0===e?void 0:e.getPosition())&&void 0!==t?t:0}}function LN(n,e,t,r,i){return n.setProperty(e,`@@${t}:${r}`,i)}const VN="@.disabled";let DB=(()=>{class n{constructor(t,r,i){this.delegate=t,this.engine=r,this._zone=i,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,this.promise=Promise.resolve(0),r.onRemovalComplete=(u,c)=>{const p=null==c?void 0:c.parentNode(u);p&&c.removeChild(p,u)}}createRenderer(t,r){const u=this.delegate.createRenderer(t,r);if(!(t&&r&&r.data&&r.data.animation)){let A=this._rendererCache.get(u);return A||(A=new UN("",u,this.engine),this._rendererCache.set(u,A)),A}const c=r.id,p=r.id+"-"+this._currentId;this._currentId++,this.engine.register(p,t);const y=A=>{Array.isArray(A)?A.forEach(y):this.engine.registerTrigger(c,p,t,A.name,A)};return r.data.animation.forEach(y),new CB(this,p,u,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){this.promise.then(()=>{this._microtaskId++})}scheduleListenerCallback(t,r,i){t>=0&&t<this._microtaskId?this._zone.run(()=>r(i)):(0==this._animationCallbacksBuffer.length&&Promise.resolve(null).then(()=>{this._zone.run(()=>{this._animationCallbacksBuffer.forEach(u=>{const[c,p]=u;c(p)}),this._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([r,i]))}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(h.FYo),h.LFG(GD),h.LFG(h.R0b))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();class UN{constructor(e,t,r){this.namespaceId=e,this.delegate=t,this.engine=r,this.destroyNode=this.delegate.destroyNode?i=>t.destroyNode(i):null}get data(){return this.delegate.data}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.delegate.destroy()}createElement(e,t){return this.delegate.createElement(e,t)}createComment(e){return this.delegate.createComment(e)}createText(e){return this.delegate.createText(e)}appendChild(e,t){this.delegate.appendChild(e,t),this.engine.onInsert(this.namespaceId,t,e,!1)}insertBefore(e,t,r,i=!0){this.delegate.insertBefore(e,t,r),this.engine.onInsert(this.namespaceId,t,e,i)}removeChild(e,t,r){this.engine.onRemove(this.namespaceId,t,this.delegate,r)}selectRootElement(e,t){return this.delegate.selectRootElement(e,t)}parentNode(e){return this.delegate.parentNode(e)}nextSibling(e){return this.delegate.nextSibling(e)}setAttribute(e,t,r,i){this.delegate.setAttribute(e,t,r,i)}removeAttribute(e,t,r){this.delegate.removeAttribute(e,t,r)}addClass(e,t){this.delegate.addClass(e,t)}removeClass(e,t){this.delegate.removeClass(e,t)}setStyle(e,t,r,i){this.delegate.setStyle(e,t,r,i)}removeStyle(e,t,r){this.delegate.removeStyle(e,t,r)}setProperty(e,t,r){"@"==t.charAt(0)&&t==VN?this.disableAnimations(e,!!r):this.delegate.setProperty(e,t,r)}setValue(e,t){this.delegate.setValue(e,t)}listen(e,t,r){return this.delegate.listen(e,t,r)}disableAnimations(e,t){this.engine.disableAnimations(e,t)}}class CB extends UN{constructor(e,t,r,i){super(t,r,i),this.factory=e,this.namespaceId=t}setProperty(e,t,r){"@"==t.charAt(0)?"."==t.charAt(1)&&t==VN?this.disableAnimations(e,r=void 0===r||!!r):this.engine.process(this.namespaceId,e,t.substr(1),r):this.delegate.setProperty(e,t,r)}listen(e,t,r){if("@"==t.charAt(0)){const i=function TB(n){switch(n){case"body":return document.body;case"document":return document;case"window":return window;default:return n}}(e);let u=t.substr(1),c="";return"@"!=u.charAt(0)&&([u,c]=function AB(n){const e=n.indexOf(".");return[n.substring(0,e),n.substr(e+1)]}(u)),this.engine.listen(this.namespaceId,i,u,c,p=>{this.factory.scheduleListenerCallback(p._data||-1,r,p)})}return this.delegate.listen(e,t,r)}}let SB=(()=>{class n extends GD{constructor(t,r,i){super(t.body,r,i)}ngOnDestroy(){this.flush()}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(ue),h.LFG(KS),h.LFG(sM))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();const BN=new h.OlP("AnimationModuleType"),jN=[{provide:eN,useClass:wB},{provide:sM,useFactory:function MB(){return new WU}},{provide:GD,useClass:SB},{provide:h.FYo,useFactory:function xB(n,e,t){return new DB(n,e,t)},deps:[pn,GD,h.R0b]}],HN=[{provide:KS,useFactory:()=>new EB},{provide:BN,useValue:"BrowserAnimations"},...jN],RB=[{provide:KS,useClass:pN},{provide:BN,useValue:"NoopAnimations"},...jN];let PB=(()=>{class n{static withConfig(t){return{ngModule:n,providers:t.disableAnimations?RB:HN}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({providers:HN,imports:[Yo]}),n})(),NB=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n,bootstrap:[NV]}),n.\u0275inj=h.cJS({providers:[],imports:[[Yo,PV,OV,bF,vC,_w,PB]]}),n})();(0,h.G48)(),Vu().bootstrapModule(NB).catch(n=>console.error(n))},5867:(et,be,N)=>{N.d(be,{C6:()=>h.getApps,Mq:()=>h.getApp});var h=N(9681);(0,h.registerVersion)("firebase","9.8.1","app")},127:(et,be,N)=>{N.d(be,{Z:()=>h.Z});var h=N(3942);h.Z.registerVersion("firebase","9.8.1","app-compat")},7092:(et,be,N)=>{N.r(be);var h=N(5861),X=N(3942),O=N(2090),le=N(9681),re=N(655),ge=N(1877),ue=N(4859);const Ne=function ze(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},Ue=function xe(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},fe=new O.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),We=new ge.Yd("@firebase/auth");function Qe(_,...f){We.logLevel<=ge.in.ERROR&&We.error(`Auth (${le.SDK_VERSION}): ${_}`,...f)}function Ae(_,...f){throw Be(_,...f)}function we(_,...f){return Be(_,...f)}function Ie(_,f,m){const E=Object.assign(Object.assign({},Ue()),{[f]:m});return new O.LL("auth","Firebase",E).create(f,{appName:_.name})}function je(_,f,m){if(!(f instanceof m))throw m.name!==f.constructor.name&&Ae(_,"argument-error"),Ie(_,"argument-error",`Type of ${f.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Be(_,...f){if("string"!=typeof _){const m=f[0],E=[...f.slice(1)];return E[0]&&(E[0].appName=_.name),_._errorFactory.create(m,...E)}return fe.create(_,...f)}function $(_,f,...m){if(!_)throw Be(f,...m)}function ve(_){const f="INTERNAL ASSERTION FAILED: "+_;throw Qe(f),new Error(f)}function Z(_,f){_||ve(f)}const ie=new Map;function ee(_){Z(_ instanceof Function,"Expected a class definition");let f=ie.get(_);return f?(Z(f instanceof _,"Instance stored in cache mismatched with class"),f):(f=new _,ie.set(_,f),f)}function Oe(){var _;return"undefined"!=typeof self&&(null===(_=self.location)||void 0===_?void 0:_.href)||""}function ct(){return"http:"===$t()||"https:"===$t()}function $t(){var _;return"undefined"!=typeof self&&(null===(_=self.location)||void 0===_?void 0:_.protocol)||null}class en{constructor(f,m){this.shortDelay=f,this.longDelay=m,Z(m>f,"Short delay should be less than long delay!"),this.isMobile=(0,O.uI)()||(0,O.b$)()}get(){return function Ut(){return!("undefined"!=typeof navigator&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(ct()||(0,O.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function Mn(_,f){Z(_.emulator,"Emulator should always be set here");const{url:m}=_.emulator;return f?`${m}${f.startsWith("/")?f.slice(1):f}`:m}class on{static initialize(f,m,E){this.fetchImpl=f,m&&(this.headersImpl=m),E&&(this.responseImpl=E)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!=typeof self&&"fetch"in self?self.fetch:void ve("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!=typeof self&&"Headers"in self?self.Headers:void ve("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!=typeof self&&"Response"in self?self.Response:void ve("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const Qt={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},Dr=new en(3e4,6e4);function zt(_,f){return _.tenantId&&!f.tenantId?Object.assign(Object.assign({},f),{tenantId:_.tenantId}):f}function Vt(_,f,m,E){return ss.apply(this,arguments)}function ss(){return(ss=(0,h.Z)(function*(_,f,m,E,T={}){return Jr(_,T,(0,h.Z)(function*(){let P={},K={};E&&("GET"===f?K=E:P={body:JSON.stringify(E)});const pe=(0,O.xO)(Object.assign({key:_.config.apiKey},K)).slice(1),Le=yield _._getAdditionalHeaders();return Le["Content-Type"]="application/json",_.languageCode&&(Le["X-Firebase-Locale"]=_.languageCode),on.fetch()(Ms(_,_.config.apiHost,m,pe),Object.assign({method:f,headers:Le,referrerPolicy:"no-referrer"},P))}))})).apply(this,arguments)}function Jr(_,f,m){return hr.apply(this,arguments)}function hr(){return(hr=(0,h.Z)(function*(_,f,m){_._canInitEmulator=!1;const E=Object.assign(Object.assign({},Qt),f);try{const T=new Xr(_),P=yield Promise.race([m(),T.promise]);T.clearNetworkTimeout();const K=yield P.json();if("needConfirmation"in K)throw Li(_,"account-exists-with-different-credential",K);if(P.ok&&!("errorMessage"in K))return K;{const pe=P.ok?K.errorMessage:K.error.message,[Le,Ye]=pe.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===Le)throw Li(_,"credential-already-in-use",K);if("EMAIL_EXISTS"===Le)throw Li(_,"email-already-in-use",K);const _t=E[Le]||Le.toLowerCase().replace(/[_\s]+/g,"-");if(Ye)throw Ie(_,_t,Ye);Ae(_,_t)}}catch(T){if(T instanceof O.ZR)throw T;Ae(_,"network-request-failed")}})).apply(this,arguments)}function Cr(_,f,m,E){return Fi.apply(this,arguments)}function Fi(){return(Fi=(0,h.Z)(function*(_,f,m,E,T={}){const P=yield Vt(_,f,m,E,T);return"mfaPendingCredential"in P&&Ae(_,"multi-factor-auth-required",{_serverResponse:P}),P})).apply(this,arguments)}function Ms(_,f,m,E){const T=`${f}${m}?${E}`;return _.config.emulator?Mn(_.config,T):`${_.config.apiScheme}://${T}`}class Xr{constructor(f){this.auth=f,this.timer=null,this.promise=new Promise((m,E)=>{this.timer=setTimeout(()=>E(we(this.auth,"network-request-failed")),Dr.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Li(_,f,m){const E={appName:_.name};m.email&&(E.email=m.email),m.phoneNumber&&(E.phoneNumber=m.phoneNumber);const T=we(_,f,E);return T.customData._tokenResponse=m,T}function ei(){return(ei=(0,h.Z)(function*(_,f){return Vt(_,"POST","/v1/accounts:delete",f)})).apply(this,arguments)}function En(_,f){return xn.apply(this,arguments)}function xn(){return(xn=(0,h.Z)(function*(_,f){return Vt(_,"POST","/v1/accounts:update",f)})).apply(this,arguments)}function Js(_,f){return ti.apply(this,arguments)}function ti(){return(ti=(0,h.Z)(function*(_,f){return Vt(_,"POST","/v1/accounts:lookup",f)})).apply(this,arguments)}function Zn(_){if(_)try{const f=new Date(Number(_));if(!isNaN(f.getTime()))return f.toUTCString()}catch(f){}}function Uo(){return(Uo=(0,h.Z)(function*(_,f=!1){const m=(0,O.m9)(_),E=yield m.getIdToken(f),T=at(E);$(T&&T.exp&&T.auth_time&&T.iat,m.auth,"internal-error");const P="object"==typeof T.firebase?T.firebase:void 0,K=null==P?void 0:P.sign_in_provider;return{claims:T,token:E,authTime:Zn(Gt(T.auth_time)),issuedAtTime:Zn(Gt(T.iat)),expirationTime:Zn(Gt(T.exp)),signInProvider:K||null,signInSecondFactor:(null==P?void 0:P.sign_in_second_factor)||null}})).apply(this,arguments)}function Gt(_){return 1e3*Number(_)}function at(_){const[f,m,E]=_.split(".");if(void 0===f||void 0===m||void 0===E)return Qe("JWT malformed, contained fewer than 3 sections"),null;try{const T=(0,O.tV)(m);return T?JSON.parse(T):(Qe("Failed to decode base64 JWT payload"),null)}catch(T){return Qe("Caught error parsing JWT payload as JSON",T),null}}function fr(_,f){return ni.apply(this,arguments)}function ni(){return(ni=(0,h.Z)(function*(_,f,m=!1){if(m)return f;try{return yield f}catch(E){throw E instanceof O.ZR&&Bt(E)&&_.auth.currentUser===_&&(yield _.auth.signOut()),E}})).apply(this,arguments)}function Bt({code:_}){return"auth/user-disabled"===_||"auth/user-token-expired"===_}class Xs{constructor(f){this.user=f,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(f){var m;if(f){const E=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),E}{this.errorBackoff=3e4;const T=(null!==(m=this.user.stsTokenManager.expirationTime)&&void 0!==m?m:0)-Date.now()-3e5;return Math.max(0,T)}}schedule(f=!1){var m=this;if(!this.isRunning)return;const E=this.getInterval(f);this.timerId=setTimeout((0,h.Z)(function*(){yield m.iteration()}),E)}iteration(){var f=this;return(0,h.Z)(function*(){try{yield f.user.getIdToken(!0)}catch(m){return void("auth/network-request-failed"===m.code&&f.schedule(!0))}f.schedule()})()}}class pr{constructor(f,m){this.createdAt=f,this.lastLoginAt=m,this._initializeTime()}_initializeTime(){this.lastSignInTime=Zn(this.lastLoginAt),this.creationTime=Zn(this.createdAt)}_copy(f){this.createdAt=f.createdAt,this.lastLoginAt=f.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function gr(_){return U.apply(this,arguments)}function U(){return(U=(0,h.Z)(function*(_){var f;const m=_.auth,E=yield _.getIdToken(),T=yield fr(_,Js(m,{idToken:E}));$(null==T?void 0:T.users.length,m,"internal-error");const P=T.users[0];_._notifyReloadListener(P);const K=(null===(f=P.providerUserInfo)||void 0===f?void 0:f.length)?q(P.providerUserInfo):[],pe=Ce(_.providerData,K),_t=!!_.isAnonymous&&!(_.email&&P.passwordHash||(null==pe?void 0:pe.length)),dt={uid:P.localId,displayName:P.displayName||null,photoURL:P.photoUrl||null,email:P.email||null,emailVerified:P.emailVerified||!1,phoneNumber:P.phoneNumber||null,tenantId:P.tenantId||null,providerData:pe,metadata:new pr(P.createdAt,P.lastLoginAt),isAnonymous:_t};Object.assign(_,dt)})).apply(this,arguments)}function W(){return(W=(0,h.Z)(function*(_){const f=(0,O.m9)(_);yield gr(f),yield f.auth._persistUserIfCurrent(f),f.auth._notifyListenersIfCurrent(f)})).apply(this,arguments)}function Ce(_,f){return[..._.filter(E=>!f.some(T=>T.providerId===E.providerId)),...f]}function q(_){return _.map(f=>{var{providerId:m}=f,E=(0,re._T)(f,["providerId"]);return{providerId:m,uid:E.rawId||"",displayName:E.displayName||null,email:E.email||null,phoneNumber:E.phoneNumber||null,photoURL:E.photoUrl||null}})}function Pe(){return(Pe=(0,h.Z)(function*(_,f){const m=yield Jr(_,{},(0,h.Z)(function*(){const E=(0,O.xO)({grant_type:"refresh_token",refresh_token:f}).slice(1),{tokenApiHost:T,apiKey:P}=_.config,K=Ms(_,T,"/v1/token",`key=${P}`),pe=yield _._getAdditionalHeaders();return pe["Content-Type"]="application/x-www-form-urlencoded",on.fetch()(K,{method:"POST",headers:pe,body:E})}));return{accessToken:m.access_token,expiresIn:m.expires_in,refreshToken:m.refresh_token}})).apply(this,arguments)}class Xe{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(f){$(f.idToken,"internal-error"),$(void 0!==f.idToken,"internal-error"),$(void 0!==f.refreshToken,"internal-error");const m="expiresIn"in f&&void 0!==f.expiresIn?Number(f.expiresIn):function vt(_){const f=at(_);return $(f,"internal-error"),$(void 0!==f.exp,"internal-error"),$(void 0!==f.iat,"internal-error"),Number(f.exp)-Number(f.iat)}(f.idToken);this.updateTokensAndExpiration(f.idToken,f.refreshToken,m)}getToken(f,m=!1){var E=this;return(0,h.Z)(function*(){return $(!E.accessToken||E.refreshToken,f,"user-token-expired"),m||!E.accessToken||E.isExpired?E.refreshToken?(yield E.refresh(f,E.refreshToken),E.accessToken):null:E.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(f,m){var E=this;return(0,h.Z)(function*(){const{accessToken:T,refreshToken:P,expiresIn:K}=yield function J(_,f){return Pe.apply(this,arguments)}(f,m);E.updateTokensAndExpiration(T,P,Number(K))})()}updateTokensAndExpiration(f,m,E){this.refreshToken=m||null,this.accessToken=f||null,this.expirationTime=Date.now()+1e3*E}static fromJSON(f,m){const{refreshToken:E,accessToken:T,expirationTime:P}=m,K=new Xe;return E&&($("string"==typeof E,"internal-error",{appName:f}),K.refreshToken=E),T&&($("string"==typeof T,"internal-error",{appName:f}),K.accessToken=T),P&&($("number"==typeof P,"internal-error",{appName:f}),K.expirationTime=P),K}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(f){this.accessToken=f.accessToken,this.refreshToken=f.refreshToken,this.expirationTime=f.expirationTime}_clone(){return Object.assign(new Xe,this.toJSON())}_performRefresh(){return ve("not implemented")}}function ft(_,f){$("string"==typeof _||void 0===_,"internal-error",{appName:f})}class It{constructor(f){var{uid:m,auth:E,stsTokenManager:T}=f,P=(0,re._T)(f,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Xs(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=m,this.auth=E,this.stsTokenManager=T,this.accessToken=T.accessToken,this.displayName=P.displayName||null,this.email=P.email||null,this.emailVerified=P.emailVerified||!1,this.phoneNumber=P.phoneNumber||null,this.photoURL=P.photoURL||null,this.isAnonymous=P.isAnonymous||!1,this.tenantId=P.tenantId||null,this.providerData=P.providerData?[...P.providerData]:[],this.metadata=new pr(P.createdAt||void 0,P.lastLoginAt||void 0)}getIdToken(f){var m=this;return(0,h.Z)(function*(){const E=yield fr(m,m.stsTokenManager.getToken(m.auth,f));return $(E,m.auth,"internal-error"),m.accessToken!==E&&(m.accessToken=E,yield m.auth._persistUserIfCurrent(m),m.auth._notifyListenersIfCurrent(m)),E})()}getIdTokenResult(f){return function Ci(_){return Uo.apply(this,arguments)}(this,f)}reload(){return function z(_){return W.apply(this,arguments)}(this)}_assign(f){this!==f&&($(this.uid===f.uid,this.auth,"internal-error"),this.displayName=f.displayName,this.photoURL=f.photoURL,this.email=f.email,this.emailVerified=f.emailVerified,this.phoneNumber=f.phoneNumber,this.isAnonymous=f.isAnonymous,this.tenantId=f.tenantId,this.providerData=f.providerData.map(m=>Object.assign({},m)),this.metadata._copy(f.metadata),this.stsTokenManager._assign(f.stsTokenManager))}_clone(f){return new It(Object.assign(Object.assign({},this),{auth:f,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(f){$(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=f,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(f){this.reloadListener?this.reloadListener(f):this.reloadUserInfo=f}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(f,m=!1){var E=this;return(0,h.Z)(function*(){let T=!1;f.idToken&&f.idToken!==E.stsTokenManager.accessToken&&(E.stsTokenManager.updateFromServerResponse(f),T=!0),m&&(yield gr(E)),yield E.auth._persistUserIfCurrent(E),T&&E.auth._notifyListenersIfCurrent(E)})()}delete(){var f=this;return(0,h.Z)(function*(){const m=yield f.getIdToken();return yield fr(f,function yt(_,f){return ei.apply(this,arguments)}(f.auth,{idToken:m})),f.stsTokenManager.clearRefreshToken(),f.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(f=>Object.assign({},f)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(f,m){var E,T,P,K,pe,Le,Ye,_t;const dt=null!==(E=m.displayName)&&void 0!==E?E:void 0,Tn=null!==(T=m.email)&&void 0!==T?T:void 0,gi=null!==(P=m.phoneNumber)&&void 0!==P?P:void 0,lc=null!==(K=m.photoURL)&&void 0!==K?K:void 0,__=null!==(pe=m.tenantId)&&void 0!==pe?pe:void 0,ma=null!==(Le=m._redirectEventId)&&void 0!==Le?Le:void 0,qd=null!==(Ye=m.createdAt)&&void 0!==Ye?Ye:void 0,zd=null!==(_t=m.lastLoginAt)&&void 0!==_t?_t:void 0,{uid:Pf,emailVerified:Wd,isAnonymous:Gr,providerData:Nf,stsTokenManager:Of}=m;$(Pf&&Of,f,"internal-error");const kf=Xe.fromJSON(this.name,Of);$("string"==typeof Pf,f,"internal-error"),ft(dt,f.name),ft(Tn,f.name),$("boolean"==typeof Wd,f,"internal-error"),$("boolean"==typeof Gr,f,"internal-error"),ft(gi,f.name),ft(lc,f.name),ft(__,f.name),ft(ma,f.name),ft(qd,f.name),ft(zd,f.name);const sl=new It({uid:Pf,auth:f,email:Tn,emailVerified:Wd,displayName:dt,isAnonymous:Gr,photoURL:lc,phoneNumber:gi,tenantId:__,stsTokenManager:kf,createdAt:qd,lastLoginAt:zd});return Nf&&Array.isArray(Nf)&&(sl.providerData=Nf.map(ol=>Object.assign({},ol))),ma&&(sl._redirectEventId=ma),sl}static _fromIdTokenResponse(f,m,E=!1){return(0,h.Z)(function*(){const T=new Xe;T.updateFromServerResponse(m);const P=new It({uid:m.localId,auth:f,stsTokenManager:T,isAnonymous:E});return yield gr(P),P})()}}const Et=(()=>{class _{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,h.Z)(function*(){return!0})()}_set(m,E){var T=this;return(0,h.Z)(function*(){T.storage[m]=E})()}_get(m){var E=this;return(0,h.Z)(function*(){const T=E.storage[m];return void 0===T?null:T})()}_remove(m){var E=this;return(0,h.Z)(function*(){delete E.storage[m]})()}_addListener(m,E){}_removeListener(m,E){}}return _.type="NONE",_})();function Bn(_,f,m){return`firebase:${_}:${f}:${m}`}class Tr{constructor(f,m,E){this.persistence=f,this.auth=m,this.userKey=E;const{config:T,name:P}=this.auth;this.fullUserKey=Bn(this.userKey,T.apiKey,P),this.fullPersistenceKey=Bn("persistence",T.apiKey,P),this.boundEventHandler=m._onStorageEvent.bind(m),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(f){return this.persistence._set(this.fullUserKey,f.toJSON())}getCurrentUser(){var f=this;return(0,h.Z)(function*(){const m=yield f.persistence._get(f.fullUserKey);return m?It._fromJSON(f.auth,m):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(f){var m=this;return(0,h.Z)(function*(){if(m.persistence===f)return;const E=yield m.getCurrentUser();return yield m.removeCurrentUser(),m.persistence=f,E?m.setCurrentUser(E):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(f,m,E="authUser"){return(0,h.Z)(function*(){if(!m.length)return new Tr(ee(Et),f,E);const T=(yield Promise.all(m.map(function(){var Ye=(0,h.Z)(function*(_t){if(yield _t._isAvailable())return _t});return function(_t){return Ye.apply(this,arguments)}}()))).filter(Ye=>Ye);let P=T[0]||ee(Et);const K=Bn(E,f.config.apiKey,f.name);let pe=null;for(const Ye of m)try{const _t=yield Ye._get(K);if(_t){const dt=It._fromJSON(f,_t);Ye!==P&&(pe=dt),P=Ye;break}}catch(_t){}const Le=T.filter(Ye=>Ye._shouldAllowMigration);return P._shouldAllowMigration&&Le.length?(P=Le[0],pe&&(yield P._set(K,pe.toJSON())),yield Promise.all(m.map(function(){var Ye=(0,h.Z)(function*(_t){if(_t!==P)try{yield _t._remove(K)}catch(dt){}});return function(_t){return Ye.apply(this,arguments)}}())),new Tr(P,f,E)):new Tr(P,f,E)})()}}function Tu(_){const f=_.toLowerCase();if(f.includes("opera/")||f.includes("opr/")||f.includes("opios/"))return"Opera";if(jn(f))return"IEMobile";if(f.includes("msie")||f.includes("trident/"))return"IE";if(f.includes("edge/"))return"Edge";if(xa(f))return"Firefox";if(f.includes("silk/"))return"Silk";if(os(f))return"Blackberry";if(Hn(f))return"Webos";if(Au(f))return"Safari";if((f.includes("chrome/")||Ra(f))&&!f.includes("edge/"))return"Chrome";if(Ar(f))return"Android";{const E=_.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===(null==E?void 0:E.length))return E[1]}return"Other"}function xa(_=(0,O.z$)()){return/firefox\//i.test(_)}function Au(_=(0,O.z$)()){const f=_.toLowerCase();return f.includes("safari/")&&!f.includes("chrome/")&&!f.includes("crios/")&&!f.includes("android")}function Ra(_=(0,O.z$)()){return/crios\//i.test(_)}function jn(_=(0,O.z$)()){return/iemobile/i.test(_)}function Ar(_=(0,O.z$)()){return/android/i.test(_)}function os(_=(0,O.z$)()){return/blackberry/i.test(_)}function Hn(_=(0,O.z$)()){return/webos/i.test(_)}function Fr(_=(0,O.z$)()){return/iphone|ipad|ipod/i.test(_)}function xs(_=(0,O.z$)()){return Fr(_)||Ar(_)||Hn(_)||os(_)||/windows phone/i.test(_)||jn(_)}function Bo(_,f=[]){let m;switch(_){case"Browser":m=Tu((0,O.z$)());break;case"Worker":m=`${Tu((0,O.z$)())}-${_}`;break;default:m=_}const E=f.length?f.join(","):"FirebaseCore-web";return`${m}/JsCore/${le.SDK_VERSION}/${E}`}class Lr{constructor(f){this.auth=f,this.queue=[]}pushCallback(f,m){const E=P=>new Promise((K,pe)=>{try{K(f(P))}catch(Le){pe(Le)}});E.onAbort=m,this.queue.push(E);const T=this.queue.length-1;return()=>{this.queue[T]=()=>Promise.resolve()}}runMiddleware(f){var m=this;return(0,h.Z)(function*(){if(m.auth.currentUser===f)return;const E=[];try{for(const T of m.queue)yield T(f),T.onAbort&&E.push(T.onAbort)}catch(T){E.reverse();for(const P of E)try{P()}catch(K){}throw m.auth._errorFactory.create("login-blocked",{originalMessage:T.message})}})()}}class Ke{constructor(f,m,E){this.app=f,this.heartbeatServiceProvider=m,this.config=E,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new tn(this),this.idTokenSubscription=new tn(this),this.beforeStateQueue=new Lr(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=fe,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=f.name,this.clientVersion=E.sdkClientVersion}_initializeWithPersistence(f,m){var E=this;return m&&(this._popupRedirectResolver=ee(m)),this._initializationPromise=this.queue((0,h.Z)(function*(){var T,P;if(!E._deleted&&(E.persistenceManager=yield Tr.create(E,f),!E._deleted)){if(null===(T=E._popupRedirectResolver)||void 0===T?void 0:T._shouldInitProactively)try{yield E._popupRedirectResolver._initialize(E)}catch(K){}yield E.initializeCurrentUser(m),E.lastNotifiedUid=(null===(P=E.currentUser)||void 0===P?void 0:P.uid)||null,!E._deleted&&(E._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var f=this;return(0,h.Z)(function*(){if(f._deleted)return;const m=yield f.assertedPersistence.getCurrentUser();if(f.currentUser||m){if(f.currentUser&&m&&f.currentUser.uid===m.uid)return f._currentUser._assign(m),void(yield f.currentUser.getIdToken());yield f._updateCurrentUser(m,!0)}})()}initializeCurrentUser(f){var m=this;return(0,h.Z)(function*(){var E;const T=yield m.assertedPersistence.getCurrentUser();let P=T,K=!1;if(f&&m.config.authDomain){yield m.getOrInitRedirectPersistenceManager();const pe=null===(E=m.redirectUser)||void 0===E?void 0:E._redirectEventId,Le=null==P?void 0:P._redirectEventId,Ye=yield m.tryRedirectSignIn(f);(!pe||pe===Le)&&(null==Ye?void 0:Ye.user)&&(P=Ye.user,K=!0)}if(!P)return m.directlySetCurrentUser(null);if(!P._redirectEventId){if(K)try{yield m.beforeStateQueue.runMiddleware(P)}catch(pe){P=T,m._popupRedirectResolver._overrideRedirectResult(m,()=>Promise.reject(pe))}return P?m.reloadAndSetCurrentUserOrClear(P):m.directlySetCurrentUser(null)}return $(m._popupRedirectResolver,m,"argument-error"),yield m.getOrInitRedirectPersistenceManager(),m.redirectUser&&m.redirectUser._redirectEventId===P._redirectEventId?m.directlySetCurrentUser(P):m.reloadAndSetCurrentUserOrClear(P)})()}tryRedirectSignIn(f){var m=this;return(0,h.Z)(function*(){let E=null;try{E=yield m._popupRedirectResolver._completeRedirectFn(m,f,!0)}catch(T){yield m._setRedirectUser(null)}return E})()}reloadAndSetCurrentUserOrClear(f){var m=this;return(0,h.Z)(function*(){try{yield gr(f)}catch(E){if("auth/network-request-failed"!==E.code)return m.directlySetCurrentUser(null)}return m.directlySetCurrentUser(f)})()}useDeviceLanguage(){this.languageCode=function Je(){if("undefined"==typeof navigator)return null;const _=navigator;return _.languages&&_.languages[0]||_.language||null}()}_delete(){var f=this;return(0,h.Z)(function*(){f._deleted=!0})()}updateCurrentUser(f){var m=this;return(0,h.Z)(function*(){const E=f?(0,O.m9)(f):null;return E&&$(E.auth.config.apiKey===m.config.apiKey,m,"invalid-user-token"),m._updateCurrentUser(E&&E._clone(m))})()}_updateCurrentUser(f,m=!1){var E=this;return(0,h.Z)(function*(){if(!E._deleted)return f&&$(E.tenantId===f.tenantId,E,"tenant-id-mismatch"),m||(yield E.beforeStateQueue.runMiddleware(f)),E.queue((0,h.Z)(function*(){yield E.directlySetCurrentUser(f),E.notifyAuthListeners()}))})()}signOut(){var f=this;return(0,h.Z)(function*(){return yield f.beforeStateQueue.runMiddleware(null),(f.redirectPersistenceManager||f._popupRedirectResolver)&&(yield f._setRedirectUser(null)),f._updateCurrentUser(null,!0)})()}setPersistence(f){var m=this;return this.queue((0,h.Z)(function*(){yield m.assertedPersistence.setPersistence(ee(f))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(f){this._errorFactory=new O.LL("auth","Firebase",f())}onAuthStateChanged(f,m,E){return this.registerStateListener(this.authStateSubscription,f,m,E)}beforeAuthStateChanged(f,m){return this.beforeStateQueue.pushCallback(f,m)}onIdTokenChanged(f,m,E){return this.registerStateListener(this.idTokenSubscription,f,m,E)}toJSON(){var f;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(f=this._currentUser)||void 0===f?void 0:f.toJSON()}}_setRedirectUser(f,m){var E=this;return(0,h.Z)(function*(){const T=yield E.getOrInitRedirectPersistenceManager(m);return null===f?T.removeCurrentUser():T.setCurrentUser(f)})()}getOrInitRedirectPersistenceManager(f){var m=this;return(0,h.Z)(function*(){if(!m.redirectPersistenceManager){const E=f&&ee(f)||m._popupRedirectResolver;$(E,m,"argument-error"),m.redirectPersistenceManager=yield Tr.create(m,[ee(E._redirectPersistence)],"redirectUser"),m.redirectUser=yield m.redirectPersistenceManager.getCurrentUser()}return m.redirectPersistenceManager})()}_redirectUserForId(f){var m=this;return(0,h.Z)(function*(){var E,T;return m._isInitialized&&(yield m.queue((0,h.Z)(function*(){}))),(null===(E=m._currentUser)||void 0===E?void 0:E._redirectEventId)===f?m._currentUser:(null===(T=m.redirectUser)||void 0===T?void 0:T._redirectEventId)===f?m.redirectUser:null})()}_persistUserIfCurrent(f){var m=this;return(0,h.Z)(function*(){if(f===m.currentUser)return m.queue((0,h.Z)(function*(){return m.directlySetCurrentUser(f)}))})()}_notifyListenersIfCurrent(f){f===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var f,m;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const E=null!==(m=null===(f=this.currentUser)||void 0===f?void 0:f.uid)&&void 0!==m?m:null;this.lastNotifiedUid!==E&&(this.lastNotifiedUid=E,this.authStateSubscription.next(this.currentUser))}registerStateListener(f,m,E,T){if(this._deleted)return()=>{};const P="function"==typeof m?m:m.next.bind(m),K=this._isInitialized?Promise.resolve():this._initializationPromise;return $(K,this,"internal-error"),K.then(()=>P(this.currentUser)),"function"==typeof m?f.addObserver(m,E,T):f.addObserver(m)}directlySetCurrentUser(f){var m=this;return(0,h.Z)(function*(){m.currentUser&&m.currentUser!==f&&(m._currentUser._stopProactiveRefresh(),f&&m.isProactiveRefreshEnabled&&f._startProactiveRefresh()),m.currentUser=f,f?yield m.assertedPersistence.setCurrentUser(f):yield m.assertedPersistence.removeCurrentUser()})()}queue(f){return this.operations=this.operations.then(f,f),this.operations}get assertedPersistence(){return $(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(f){!f||this.frameworks.includes(f)||(this.frameworks.push(f),this.frameworks.sort(),this.clientVersion=Bo(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var f=this;return(0,h.Z)(function*(){var m;const E={"X-Client-Version":f.clientVersion};f.app.options.appId&&(E["X-Firebase-gmpid"]=f.app.options.appId);const T=yield null===(m=f.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===m?void 0:m.getHeartbeatsHeader();return T&&(E["X-Firebase-Client"]=T),E})()}}function lt(_){return(0,O.m9)(_)}class tn{constructor(f){this.auth=f,this.observer=null,this.addObserver=(0,O.ne)(m=>this.observer=m)}get next(){return $(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function Vi(_){const f=_.indexOf(":");return f<0?"":_.substr(0,f+1)}function Ui(_){if(!_)return null;const f=Number(_);return isNaN(f)?null:f}class Ti{constructor(f,m){this.providerId=f,this.signInMethod=m}toJSON(){return ve("not implemented")}_getIdTokenResponse(f){return ve("not implemented")}_linkToIdToken(f,m){return ve("not implemented")}_getReauthenticationResolver(f){return ve("not implemented")}}function Rn(_,f){return Pt.apply(this,arguments)}function Pt(){return(Pt=(0,h.Z)(function*(_,f){return Vt(_,"POST","/v1/accounts:resetPassword",zt(_,f))})).apply(this,arguments)}function jo(_,f){return Rs.apply(this,arguments)}function Rs(){return(Rs=(0,h.Z)(function*(_,f){return Vt(_,"POST","/v1/accounts:update",f)})).apply(this,arguments)}function Su(_,f){return Ps.apply(this,arguments)}function Ps(){return(Ps=(0,h.Z)(function*(_,f){return Vt(_,"POST","/v1/accounts:update",zt(_,f))})).apply(this,arguments)}function to(){return(to=(0,h.Z)(function*(_,f){return Cr(_,"POST","/v1/accounts:signInWithPassword",zt(_,f))})).apply(this,arguments)}function Ns(_,f){return $n.apply(this,arguments)}function $n(){return($n=(0,h.Z)(function*(_,f){return Vt(_,"POST","/v1/accounts:sendOobCode",zt(_,f))})).apply(this,arguments)}function an(_,f){return Mu.apply(this,arguments)}function Mu(){return(Mu=(0,h.Z)(function*(_,f){return Ns(_,f)})).apply(this,arguments)}function Na(_,f){return Ur.apply(this,arguments)}function Ur(){return(Ur=(0,h.Z)(function*(_,f){return Ns(_,f)})).apply(this,arguments)}function Bi(_,f){return xu.apply(this,arguments)}function xu(){return(xu=(0,h.Z)(function*(_,f){return Ns(_,f)})).apply(this,arguments)}function ud(_,f){return ji.apply(this,arguments)}function ji(){return(ji=(0,h.Z)(function*(_,f){return Ns(_,f)})).apply(this,arguments)}function kl(){return(kl=(0,h.Z)(function*(_,f){return Cr(_,"POST","/v1/accounts:signInWithEmailLink",zt(_,f))})).apply(this,arguments)}function ld(){return(ld=(0,h.Z)(function*(_,f){return Cr(_,"POST","/v1/accounts:signInWithEmailLink",zt(_,f))})).apply(this,arguments)}class mr extends Ti{constructor(f,m,E,T=null){super("password",E),this._email=f,this._password=m,this._tenantId=T}static _fromEmailAndPassword(f,m){return new mr(f,m,"password")}static _fromEmailAndCode(f,m,E=null){return new mr(f,m,"emailLink",E)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(f){const m="string"==typeof f?JSON.parse(f):f;if((null==m?void 0:m.email)&&(null==m?void 0:m.password)){if("password"===m.signInMethod)return this._fromEmailAndPassword(m.email,m.password);if("emailLink"===m.signInMethod)return this._fromEmailAndCode(m.email,m.password,m.tenantId)}return null}_getIdTokenResponse(f){var m=this;return(0,h.Z)(function*(){switch(m.signInMethod){case"password":return function Vn(_,f){return to.apply(this,arguments)}(f,{returnSecureToken:!0,email:m._email,password:m._password});case"emailLink":return function Hi(_,f){return kl.apply(this,arguments)}(f,{email:m._email,oobCode:m._password});default:Ae(f,"internal-error")}})()}_linkToIdToken(f,m){var E=this;return(0,h.Z)(function*(){switch(E.signInMethod){case"password":return jo(f,{idToken:m,returnSecureToken:!0,email:E._email,password:E._password});case"emailLink":return function fg(_,f){return ld.apply(this,arguments)}(f,{idToken:m,email:E._email,oobCode:E._password});default:Ae(f,"internal-error")}})()}_getReauthenticationResolver(f){return this._getIdTokenResponse(f)}}function Os(_,f){return cd.apply(this,arguments)}function cd(){return(cd=(0,h.Z)(function*(_,f){return Cr(_,"POST","/v1/accounts:signInWithIdp",zt(_,f))})).apply(this,arguments)}class as extends Ti{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(f){const m=new as(f.providerId,f.signInMethod);return f.idToken||f.accessToken?(f.idToken&&(m.idToken=f.idToken),f.accessToken&&(m.accessToken=f.accessToken),f.nonce&&!f.pendingToken&&(m.nonce=f.nonce),f.pendingToken&&(m.pendingToken=f.pendingToken)):f.oauthToken&&f.oauthTokenSecret?(m.accessToken=f.oauthToken,m.secret=f.oauthTokenSecret):Ae("argument-error"),m}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(f){const m="string"==typeof f?JSON.parse(f):f,{providerId:E,signInMethod:T}=m,P=(0,re._T)(m,["providerId","signInMethod"]);if(!E||!T)return null;const K=new as(E,T);return K.idToken=P.idToken||void 0,K.accessToken=P.accessToken||void 0,K.secret=P.secret,K.nonce=P.nonce,K.pendingToken=P.pendingToken||null,K}_getIdTokenResponse(f){return Os(f,this.buildRequest())}_linkToIdToken(f,m){const E=this.buildRequest();return E.idToken=m,Os(f,E)}_getReauthenticationResolver(f){const m=this.buildRequest();return m.autoCreate=!1,Os(f,m)}buildRequest(){const f={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)f.pendingToken=this.pendingToken;else{const m={};this.idToken&&(m.id_token=this.idToken),this.accessToken&&(m.access_token=this.accessToken),this.secret&&(m.oauth_token_secret=this.secret),m.providerId=this.providerId,this.nonce&&!this.pendingToken&&(m.nonce=this.nonce),f.postBody=(0,O.xO)(m)}return f}}function gg(_,f){return dd.apply(this,arguments)}function dd(){return(dd=(0,h.Z)(function*(_,f){return Vt(_,"POST","/v1/accounts:sendVerificationCode",zt(_,f))})).apply(this,arguments)}function ks(){return(ks=(0,h.Z)(function*(_,f){return Cr(_,"POST","/v1/accounts:signInWithPhoneNumber",zt(_,f))})).apply(this,arguments)}function hd(){return(hd=(0,h.Z)(function*(_,f){const m=yield Cr(_,"POST","/v1/accounts:signInWithPhoneNumber",zt(_,f));if(m.temporaryProof)throw Li(_,"account-exists-with-different-credential",m);return m})).apply(this,arguments)}const yg={USER_NOT_FOUND:"user-not-found"};function fd(){return(fd=(0,h.Z)(function*(_,f){return Cr(_,"POST","/v1/accounts:signInWithPhoneNumber",zt(_,Object.assign(Object.assign({},f),{operation:"REAUTH"})),yg)})).apply(this,arguments)}class Ho extends Ti{constructor(f){super("phone","phone"),this.params=f}static _fromVerification(f,m){return new Ho({verificationId:f,verificationCode:m})}static _fromTokenResponse(f,m){return new Ho({phoneNumber:f,temporaryProof:m})}_getIdTokenResponse(f){return function Fl(_,f){return ks.apply(this,arguments)}(f,this._makeVerificationRequest())}_linkToIdToken(f,m){return function mg(_,f){return hd.apply(this,arguments)}(f,Object.assign({idToken:m},this._makeVerificationRequest()))}_getReauthenticationResolver(f){return function _g(_,f){return fd.apply(this,arguments)}(f,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:f,phoneNumber:m,verificationId:E,verificationCode:T}=this.params;return f&&m?{temporaryProof:f,phoneNumber:m}:{sessionInfo:E,code:T}}toJSON(){const f={providerId:this.providerId};return this.params.phoneNumber&&(f.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(f.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(f.verificationCode=this.params.verificationCode),this.params.verificationId&&(f.verificationId=this.params.verificationId),f}static fromJSON(f){"string"==typeof f&&(f=JSON.parse(f));const{verificationId:m,verificationCode:E,phoneNumber:T,temporaryProof:P}=f;return E||m||T||P?new Ho({verificationId:m,verificationCode:E,phoneNumber:T,temporaryProof:P}):null}}class Ru{constructor(f){var m,E,T,P,K,pe;const Le=(0,O.zd)((0,O.pd)(f)),Ye=null!==(m=Le.apiKey)&&void 0!==m?m:null,_t=null!==(E=Le.oobCode)&&void 0!==E?E:null,dt=function uf(_){switch(_){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(T=Le.mode)&&void 0!==T?T:null);$(Ye&&_t&&dt,"argument-error"),this.apiKey=Ye,this.operation=dt,this.code=_t,this.continueUrl=null!==(P=Le.continueUrl)&&void 0!==P?P:null,this.languageCode=null!==(K=Le.languageCode)&&void 0!==K?K:null,this.tenantId=null!==(pe=Le.tenantId)&&void 0!==pe?pe:null}static parseLink(f){const m=function Oa(_){const f=(0,O.zd)((0,O.pd)(_)).link,m=f?(0,O.zd)((0,O.pd)(f)).deep_link_id:null,E=(0,O.zd)((0,O.pd)(_)).deep_link_id;return(E?(0,O.zd)((0,O.pd)(E)).link:null)||E||m||f||_}(f);try{return new Ru(m)}catch(E){return null}}}let gd=(()=>{class _{constructor(){this.providerId=_.PROVIDER_ID}static credential(m,E){return mr._fromEmailAndPassword(m,E)}static credentialWithLink(m,E){const T=Ru.parseLink(E);return $(T,"argument-error"),mr._fromEmailAndCode(m,T.code,T.tenantId)}}return _.PROVIDER_ID="password",_.EMAIL_PASSWORD_SIGN_IN_METHOD="password",_.EMAIL_LINK_SIGN_IN_METHOD="emailLink",_})();class yr{constructor(f){this.providerId=f,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(f){this.defaultLanguageCode=f}setCustomParameters(f){return this.customParameters=f,this}getCustomParameters(){return this.customParameters}}class no extends yr{constructor(){super(...arguments),this.scopes=[]}addScope(f){return this.scopes.includes(f)||this.scopes.push(f),this}getScopes(){return[...this.scopes]}}class $i extends no{static credentialFromJSON(f){const m="string"==typeof f?JSON.parse(f):f;return $("providerId"in m&&"signInMethod"in m,"argument-error"),as._fromParams(m)}credential(f){return this._credential(Object.assign(Object.assign({},f),{nonce:f.rawNonce}))}_credential(f){return $(f.idToken||f.accessToken,"argument-error"),as._fromParams(Object.assign(Object.assign({},f),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(f){return $i.oauthCredentialFromTaggedObject(f)}static credentialFromError(f){return $i.oauthCredentialFromTaggedObject(f.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:f}){if(!f)return null;const{oauthIdToken:m,oauthAccessToken:E,oauthTokenSecret:T,pendingToken:P,nonce:K,providerId:pe}=f;if(!E&&!T&&!m&&!P||!pe)return null;try{return new $i(pe)._credential({idToken:m,accessToken:E,nonce:K,pendingToken:P})}catch(Le){return null}}}let $o=(()=>{class _ extends no{constructor(){super("facebook.com")}static credential(m){return as._fromParams({providerId:_.PROVIDER_ID,signInMethod:_.FACEBOOK_SIGN_IN_METHOD,accessToken:m})}static credentialFromResult(m){return _.credentialFromTaggedObject(m)}static credentialFromError(m){return _.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m||!("oauthAccessToken"in m)||!m.oauthAccessToken)return null;try{return _.credential(m.oauthAccessToken)}catch(E){return null}}}return _.FACEBOOK_SIGN_IN_METHOD="facebook.com",_.PROVIDER_ID="facebook.com",_})(),md=(()=>{class _ extends no{constructor(){super("google.com"),this.addScope("profile")}static credential(m,E){return as._fromParams({providerId:_.PROVIDER_ID,signInMethod:_.GOOGLE_SIGN_IN_METHOD,idToken:m,accessToken:E})}static credentialFromResult(m){return _.credentialFromTaggedObject(m)}static credentialFromError(m){return _.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m)return null;const{oauthIdToken:E,oauthAccessToken:T}=m;if(!E&&!T)return null;try{return _.credential(E,T)}catch(P){return null}}}return _.GOOGLE_SIGN_IN_METHOD="google.com",_.PROVIDER_ID="google.com",_})(),lf=(()=>{class _ extends no{constructor(){super("github.com")}static credential(m){return as._fromParams({providerId:_.PROVIDER_ID,signInMethod:_.GITHUB_SIGN_IN_METHOD,accessToken:m})}static credentialFromResult(m){return _.credentialFromTaggedObject(m)}static credentialFromError(m){return _.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m||!("oauthAccessToken"in m)||!m.oauthAccessToken)return null;try{return _.credential(m.oauthAccessToken)}catch(E){return null}}}return _.GITHUB_SIGN_IN_METHOD="github.com",_.PROVIDER_ID="github.com",_})();class ro extends Ti{constructor(f,m){super(f,f),this.pendingToken=m}_getIdTokenResponse(f){return Os(f,this.buildRequest())}_linkToIdToken(f,m){const E=this.buildRequest();return E.idToken=m,Os(f,E)}_getReauthenticationResolver(f){const m=this.buildRequest();return m.autoCreate=!1,Os(f,m)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(f){const m="string"==typeof f?JSON.parse(f):f,{providerId:E,signInMethod:T,pendingToken:P}=m;return E&&T&&P&&E===T?new ro(E,P):null}static _create(f,m){return new ro(f,m)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class Sr extends yr{constructor(f){$(f.startsWith("saml."),"argument-error"),super(f)}static credentialFromResult(f){return Sr.samlCredentialFromTaggedObject(f)}static credentialFromError(f){return Sr.samlCredentialFromTaggedObject(f.customData||{})}static credentialFromJSON(f){const m=ro.fromJSON(f);return $(m,"argument-error"),m}static samlCredentialFromTaggedObject({_tokenResponse:f}){if(!f)return null;const{pendingToken:m,providerId:E}=f;if(!m||!E)return null;try{return ro._create(E,m)}catch(T){return null}}}let _d=(()=>{class _ extends no{constructor(){super("twitter.com")}static credential(m,E){return as._fromParams({providerId:_.PROVIDER_ID,signInMethod:_.TWITTER_SIGN_IN_METHOD,oauthToken:m,oauthTokenSecret:E})}static credentialFromResult(m){return _.credentialFromTaggedObject(m)}static credentialFromError(m){return _.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m)return null;const{oauthAccessToken:E,oauthTokenSecret:T}=m;if(!E||!T)return null;try{return _.credential(E,T)}catch(P){return null}}}return _.TWITTER_SIGN_IN_METHOD="twitter.com",_.PROVIDER_ID="twitter.com",_})();function Mr(_,f){return qo.apply(this,arguments)}function qo(){return(qo=(0,h.Z)(function*(_,f){return Cr(_,"POST","/v1/accounts:signUp",zt(_,f))})).apply(this,arguments)}class ri{constructor(f){this.user=f.user,this.providerId=f.providerId,this._tokenResponse=f._tokenResponse,this.operationType=f.operationType}static _fromIdTokenResponse(f,m,E,T=!1){return(0,h.Z)(function*(){const P=yield It._fromIdTokenResponse(f,E,T),K=Ll(E);return new ri({user:P,providerId:K,_tokenResponse:E,operationType:m})})()}static _forOperation(f,m,E){return(0,h.Z)(function*(){yield f._updateTokensIfNecessary(E,!0);const T=Ll(E);return new ri({user:f,providerId:T,_tokenResponse:E,operationType:m})})()}}function Ll(_){return _.providerId?_.providerId:"phoneNumber"in _?"phone":null}function Vl(){return(Vl=(0,h.Z)(function*(_){var f;const m=lt(_);if(yield m._initializationPromise,null===(f=m.currentUser)||void 0===f?void 0:f.isAnonymous)return new ri({user:m.currentUser,providerId:null,operationType:"signIn"});const E=yield Mr(m,{returnSecureToken:!0}),T=yield ri._fromIdTokenResponse(m,"signIn",E,!0);return yield m._updateCurrentUser(T.user),T})).apply(this,arguments)}class zo extends O.ZR{constructor(f,m,E,T){var P;super(m.code,m.message),this.operationType=E,this.user=T,Object.setPrototypeOf(this,zo.prototype),this.customData={appName:f.name,tenantId:null!==(P=f.tenantId)&&void 0!==P?P:void 0,_serverResponse:m.customData._serverResponse,operationType:E}}static _fromErrorAndOperation(f,m,E,T){return new zo(f,m,E,T)}}function Ul(_,f,m,E){return("reauthenticate"===f?m._getReauthenticationResolver(_):m._getIdTokenResponse(_)).catch(P=>{throw"auth/multi-factor-auth-required"===P.code?zo._fromErrorAndOperation(_,P,f,E):P})}function Gi(_){return new Set(_.map(({providerId:f})=>f).filter(f=>!!f))}function nn(){return(nn=(0,h.Z)(function*(_,f){const m=(0,O.m9)(_);yield Jt(!0,m,f);const{providerUserInfo:E}=yield En(m.auth,{idToken:yield m.getIdToken(),deleteProvider:[f]}),T=Gi(E||[]);return m.providerData=m.providerData.filter(P=>T.has(P.providerId)),T.has("phone")||(m.phoneNumber=null),yield m.auth._persistUserIfCurrent(m),m})).apply(this,arguments)}function ka(_,f){return io.apply(this,arguments)}function io(){return(io=(0,h.Z)(function*(_,f,m=!1){const E=yield fr(_,f._linkToIdToken(_.auth,yield _.getIdToken()),m);return ri._forOperation(_,"link",E)})).apply(this,arguments)}function Jt(_,f,m){return Fa.apply(this,arguments)}function Fa(){return(Fa=(0,h.Z)(function*(_,f,m){yield gr(f);const T=!1===_?"provider-already-linked":"no-such-provider";$(Gi(f.providerData).has(m)===_,f.auth,T)})).apply(this,arguments)}function Pu(_,f){return Fs.apply(this,arguments)}function Fs(){return(Fs=(0,h.Z)(function*(_,f,m=!1){const{auth:E}=_,T="reauthenticate";try{const P=yield fr(_,Ul(E,T,f,_),m);$(P.idToken,E,"internal-error");const K=at(P.idToken);$(K,E,"internal-error");const{sub:pe}=K;return $(_.uid===pe,E,"user-mismatch"),ri._forOperation(_,T,P)}catch(P){throw"auth/user-not-found"===(null==P?void 0:P.code)&&Ae(E,"user-mismatch"),P}})).apply(this,arguments)}function sr(_,f){return Bl.apply(this,arguments)}function Bl(){return(Bl=(0,h.Z)(function*(_,f,m=!1){const E="signIn",T=yield Ul(_,E,f),P=yield ri._fromIdTokenResponse(_,E,T);return m||(yield _._updateCurrentUser(P.user)),P})).apply(this,arguments)}function yn(_,f){return qi.apply(this,arguments)}function qi(){return(qi=(0,h.Z)(function*(_,f){return sr(lt(_),f)})).apply(this,arguments)}function or(_,f){return so.apply(this,arguments)}function so(){return(so=(0,h.Z)(function*(_,f){const m=(0,O.m9)(_);return yield Jt(!1,m,f.providerId),ka(m,f)})).apply(this,arguments)}function us(_,f){return La.apply(this,arguments)}function La(){return(La=(0,h.Z)(function*(_,f){return Pu((0,O.m9)(_),f)})).apply(this,arguments)}function Ai(_,f){return zi.apply(this,arguments)}function zi(){return(zi=(0,h.Z)(function*(_,f){return Cr(_,"POST","/v1/accounts:signInWithCustomToken",zt(_,f))})).apply(this,arguments)}function pt(){return(pt=(0,h.Z)(function*(_,f){const m=lt(_),E=yield Ai(m,{token:f,returnSecureToken:!0}),T=yield ri._fromIdTokenResponse(m,"signIn",E);return yield m._updateCurrentUser(T.user),T})).apply(this,arguments)}class Ko{constructor(f,m){this.factorId=f,this.uid=m.mfaEnrollmentId,this.enrollmentTime=new Date(m.enrolledAt).toUTCString(),this.displayName=m.displayName}static _fromServerResponse(f,m){return"phoneInfo"in m?Nu._fromServerResponse(f,m):Ae(f,"internal-error")}}class Nu extends Ko{constructor(f){super("phone",f),this.phoneNumber=f.phoneInfo}static _fromServerResponse(f,m){return new Nu(m)}}function Va(_,f,m){var E;$((null===(E=m.url)||void 0===E?void 0:E.length)>0,_,"invalid-continue-uri"),$(void 0===m.dynamicLinkDomain||m.dynamicLinkDomain.length>0,_,"invalid-dynamic-link-domain"),f.continueUrl=m.url,f.dynamicLinkDomain=m.dynamicLinkDomain,f.canHandleCodeInApp=m.handleCodeInApp,m.iOS&&($(m.iOS.bundleId.length>0,_,"missing-ios-bundle-id"),f.iOSBundleId=m.iOS.bundleId),m.android&&($(m.android.packageName.length>0,_,"missing-android-pkg-name"),f.androidInstallApp=m.android.installApp,f.androidMinimumVersionCode=m.android.minimumVersion,f.androidPackageName=m.android.packageName)}function Ua(){return(Ua=(0,h.Z)(function*(_,f,m){const E=(0,O.m9)(_),T={requestType:"PASSWORD_RESET",email:f};m&&Va(E,T,m),yield Na(E,T)})).apply(this,arguments)}function $l(){return($l=(0,h.Z)(function*(_,f,m){yield Rn((0,O.m9)(_),{oobCode:f,newPassword:m})})).apply(this,arguments)}function Ft(){return(Ft=(0,h.Z)(function*(_,f){yield Su((0,O.m9)(_),{oobCode:f})})).apply(this,arguments)}function Ou(_,f){return pn.apply(this,arguments)}function pn(){return(pn=(0,h.Z)(function*(_,f){const m=(0,O.m9)(_),E=yield Rn(m,{oobCode:f}),T=E.requestType;switch($(T,m,"internal-error"),T){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":$(E.newEmail,m,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":$(E.mfaInfo,m,"internal-error");default:$(E.email,m,"internal-error")}let P=null;return E.mfaInfo&&(P=Ko._fromServerResponse(lt(m),E.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===E.requestType?E.newEmail:E.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===E.requestType?E.email:E.newEmail)||null,multiFactorInfo:P},operation:T}})).apply(this,arguments)}function oo(){return(oo=(0,h.Z)(function*(_,f){const{data:m}=yield Ou((0,O.m9)(_),f);return m.email})).apply(this,arguments)}function Ba(){return(Ba=(0,h.Z)(function*(_,f,m){const E=lt(_),T=yield Mr(E,{returnSecureToken:!0,email:f,password:m}),P=yield ri._fromIdTokenResponse(E,"signIn",T);return yield E._updateCurrentUser(P.user),P})).apply(this,arguments)}function ku(){return(ku=(0,h.Z)(function*(_,f,m){const E=(0,O.m9)(_),T={requestType:"EMAIL_SIGNIN",email:f};$(m.handleCodeInApp,E,"argument-error"),m&&Va(E,T,m),yield Bi(E,T)})).apply(this,arguments)}function Pn(){return(Pn=(0,h.Z)(function*(_,f,m){const E=(0,O.m9)(_),T=gd.credentialWithLink(f,m||Oe());return $(T._tenantId===(E.tenantId||null),E,"tenant-id-mismatch"),yn(E,T)})).apply(this,arguments)}function ls(_,f){return Ha.apply(this,arguments)}function Ha(){return(Ha=(0,h.Z)(function*(_,f){return Vt(_,"POST","/v1/accounts:createAuthUri",zt(_,f))})).apply(this,arguments)}function Si(){return(Si=(0,h.Z)(function*(_,f){const E={identifier:f,continueUri:ct()?Oe():"http://localhost"},{signinMethods:T}=yield ls((0,O.m9)(_),E);return T||[]})).apply(this,arguments)}function Lu(){return(Lu=(0,h.Z)(function*(_,f){const m=(0,O.m9)(_),T={requestType:"VERIFY_EMAIL",idToken:yield _.getIdToken()};f&&Va(m.auth,T,f);const{email:P}=yield an(m.auth,T);P!==_.email&&(yield _.reload())})).apply(this,arguments)}function Vu(){return(Vu=(0,h.Z)(function*(_,f,m){const E=(0,O.m9)(_),P={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield _.getIdToken(),newEmail:f};m&&Va(E.auth,P,m);const{email:K}=yield ud(E.auth,P);K!==_.email&&(yield _.reload())})).apply(this,arguments)}function $a(_,f){return Yo.apply(this,arguments)}function Yo(){return(Yo=(0,h.Z)(function*(_,f){return Vt(_,"POST","/v1/accounts:update",f)})).apply(this,arguments)}function Ga(){return(Ga=(0,h.Z)(function*(_,{displayName:f,photoURL:m}){if(void 0===f&&void 0===m)return;const E=(0,O.m9)(_),P={idToken:yield E.getIdToken(),displayName:f,photoUrl:m,returnSecureToken:!0},K=yield fr(E,$a(E.auth,P));E.displayName=K.displayName||null,E.photoURL=K.photoUrl||null;const pe=E.providerData.find(({providerId:Le})=>"password"===Le);pe&&(pe.displayName=E.displayName,pe.photoURL=E.photoURL),yield E._updateTokensIfNecessary(K)})).apply(this,arguments)}function Qo(_,f,m){return qa.apply(this,arguments)}function qa(){return(qa=(0,h.Z)(function*(_,f,m){const{auth:E}=_,P={idToken:yield _.getIdToken(),returnSecureToken:!0};f&&(P.email=f),m&&(P.password=m);const K=yield fr(_,jo(E,P));yield _._updateTokensIfNecessary(K,!0)})).apply(this,arguments)}class Jo{constructor(f,m,E={}){this.isNewUser=f,this.providerId=m,this.profile=E}}class wd extends Jo{constructor(f,m,E,T){super(f,m,E),this.username=T}}class Xo extends Jo{constructor(f,m){super(f,"facebook.com",m)}}class Wi extends wd{constructor(f,m){super(f,"github.com",m,"string"==typeof(null==m?void 0:m.login)?null==m?void 0:m.login:null)}}class df extends Jo{constructor(f,m){super(f,"google.com",m)}}class Yn extends wd{constructor(f,m,E){super(f,"twitter.com",m,E)}}function Ki(_){const{user:f,_tokenResponse:m}=_;return f.isAnonymous&&!m?{providerId:null,isNewUser:!1,profile:null}:function Ed(_){var f,m;if(!_)return null;const{providerId:E}=_,T=_.rawUserInfo?JSON.parse(_.rawUserInfo):{},P=_.isNewUser||"identitytoolkit#SignupNewUserResponse"===_.kind;if(!E&&(null==_?void 0:_.idToken)){const K=null===(m=null===(f=at(_.idToken))||void 0===f?void 0:f.firebase)||void 0===m?void 0:m.sign_in_provider;if(K)return new Jo(P,"anonymous"!==K&&"custom"!==K?K:null)}if(!E)return null;switch(E){case"facebook.com":return new Xo(P,T);case"github.com":return new Wi(P,T);case"google.com":return new df(P,T);case"twitter.com":return new Yn(P,T,_.screenName||null);case"custom":case"anonymous":return new Jo(P,null);default:return new Jo(P,E,T)}}(m)}class cs{constructor(f,m){this.type=f,this.credential=m}static _fromIdtoken(f){return new cs("enroll",f)}static _fromMfaPendingCredential(f){return new cs("signin",f)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(f){var m,E;if(null==f?void 0:f.multiFactorSession){if(null===(m=f.multiFactorSession)||void 0===m?void 0:m.pendingCredential)return cs._fromMfaPendingCredential(f.multiFactorSession.pendingCredential);if(null===(E=f.multiFactorSession)||void 0===E?void 0:E.idToken)return cs._fromIdtoken(f.multiFactorSession.idToken)}return null}}class ea{constructor(f,m,E){this.session=f,this.hints=m,this.signInResolver=E}static _fromError(f,m){const E=lt(f),T=m.customData._serverResponse,P=(T.mfaInfo||[]).map(pe=>Ko._fromServerResponse(E,pe));$(T.mfaPendingCredential,E,"internal-error");const K=cs._fromMfaPendingCredential(T.mfaPendingCredential);return new ea(K,P,function(){var pe=(0,h.Z)(function*(Le){const Ye=yield Le._process(E,K);delete T.mfaInfo,delete T.mfaPendingCredential;const _t=Object.assign(Object.assign({},T),{idToken:Ye.idToken,refreshToken:Ye.refreshToken});switch(m.operationType){case"signIn":const dt=yield ri._fromIdTokenResponse(E,m.operationType,_t);return yield E._updateCurrentUser(dt.user),dt;case"reauthenticate":return $(m.user,E,"internal-error"),ri._forOperation(m.user,m.operationType,_t);default:Ae(E,"internal-error")}});return function(Le){return pe.apply(this,arguments)}}())}resolveSignIn(f){var m=this;return(0,h.Z)(function*(){return m.signInResolver(f)})()}}function ff(_,f){return Vt(_,"POST","/v2/accounts/mfaEnrollment:start",zt(_,f))}class Dd{constructor(f){this.user=f,this.enrolledFactors=[],f._onReload(m=>{m.mfaInfo&&(this.enrolledFactors=m.mfaInfo.map(E=>Ko._fromServerResponse(f.auth,E)))})}static _fromUser(f){return new Dd(f)}getSession(){var f=this;return(0,h.Z)(function*(){return cs._fromIdtoken(yield f.user.getIdToken())})()}enroll(f,m){var E=this;return(0,h.Z)(function*(){const T=f,P=yield E.getSession(),K=yield fr(E.user,T._process(E.user.auth,P,m));return yield E.user._updateTokensIfNecessary(K),E.user.reload()})()}unenroll(f){var m=this;return(0,h.Z)(function*(){const E="string"==typeof f?f:f.uid,T=yield m.user.getIdToken(),P=yield fr(m.user,function Uu(_,f){return Vt(_,"POST","/v2/accounts/mfaEnrollment:withdraw",zt(_,f))}(m.user.auth,{idToken:T,mfaEnrollmentId:E}));m.enrolledFactors=m.enrolledFactors.filter(({uid:K})=>K!==E),yield m.user._updateTokensIfNecessary(P);try{yield m.user.reload()}catch(K){if("auth/user-token-expired"!==K.code)throw K}})()}}const Bu=new WeakMap,uo="__sak";class Cd{constructor(f,m){this.storageRetriever=f,this.type=m}_isAvailable(){try{return this.storage?(this.storage.setItem(uo,"1"),this.storage.removeItem(uo),Promise.resolve(!0)):Promise.resolve(!1)}catch(f){return Promise.resolve(!1)}}_set(f,m){return this.storage.setItem(f,JSON.stringify(m)),Promise.resolve()}_get(f){const m=this.storage.getItem(f);return Promise.resolve(m?JSON.parse(m):null)}_remove(f){return this.storage.removeItem(f),Promise.resolve()}get storage(){return this.storageRetriever()}}const si=(()=>{class _ extends Cd{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(m,E)=>this.onStorageEvent(m,E),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function bg(){const _=(0,O.z$)();return Au(_)||Fr(_)}()&&function ir(){try{return!(!window||window===window.top)}catch(_){return!1}}(),this.fallbackToPolling=xs(),this._shouldAllowMigration=!0}forAllChangedKeys(m){for(const E of Object.keys(this.listeners)){const T=this.storage.getItem(E),P=this.localCache[E];T!==P&&m(E,P,T)}}onStorageEvent(m,E=!1){if(!m.key)return void this.forAllChangedKeys((pe,Le,Ye)=>{this.notifyListeners(pe,Ye)});const T=m.key;if(E?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const pe=this.storage.getItem(T);if(m.newValue!==pe)null!==m.newValue?this.storage.setItem(T,m.newValue):this.storage.removeItem(T);else if(this.localCache[T]===m.newValue&&!E)return}const P=()=>{const pe=this.storage.getItem(T);!E&&this.localCache[T]===pe||this.notifyListeners(T,pe)},K=this.storage.getItem(T);!function Pa(){return(0,O.w1)()&&10===document.documentMode}()||K===m.newValue||m.newValue===m.oldValue?P():setTimeout(P,10)}notifyListeners(m,E){this.localCache[m]=E;const T=this.listeners[m];if(T)for(const P of Array.from(T))P(E&&JSON.parse(E))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((m,E,T)=>{this.onStorageEvent(new StorageEvent("storage",{key:m,oldValue:E,newValue:T}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(m,E){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[m]||(this.listeners[m]=new Set,this.localCache[m]=this.storage.getItem(m)),this.listeners[m].add(E)}_removeListener(m,E){this.listeners[m]&&(this.listeners[m].delete(E),0===this.listeners[m].size&&delete this.listeners[m]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(m,E){var T=()=>super._set,P=this;return(0,h.Z)(function*(){yield T().call(P,m,E),P.localCache[m]=JSON.stringify(E)})()}_get(m){var E=()=>super._get,T=this;return(0,h.Z)(function*(){const P=yield E().call(T,m);return T.localCache[m]=JSON.stringify(P),P})()}_remove(m){var E=()=>super._remove,T=this;return(0,h.Z)(function*(){yield E().call(T,m),delete T.localCache[m]})()}}return _.type="LOCAL",_})(),bn=(()=>{class _ extends Cd{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(m,E){}_removeListener(m,E){}}return _.type="SESSION",_})();let Td=(()=>{class _{constructor(m){this.eventTarget=m,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(m){const E=this.receivers.find(P=>P.isListeningto(m));if(E)return E;const T=new _(m);return this.receivers.push(T),T}isListeningto(m){return this.eventTarget===m}handleEvent(m){var E=this;return(0,h.Z)(function*(){const T=m,{eventId:P,eventType:K,data:pe}=T.data,Le=E.handlersMap[K];if(!(null==Le?void 0:Le.size))return;T.ports[0].postMessage({status:"ack",eventId:P,eventType:K});const Ye=Array.from(Le).map(function(){var dt=(0,h.Z)(function*(Tn){return Tn(T.origin,pe)});return function(Tn){return dt.apply(this,arguments)}}()),_t=yield function Zl(_){return Promise.all(_.map(function(){var f=(0,h.Z)(function*(m){try{return{fulfilled:!0,value:yield m}}catch(E){return{fulfilled:!1,reason:E}}});return function(m){return f.apply(this,arguments)}}()))}(Ye);T.ports[0].postMessage({status:"done",eventId:P,eventType:K,response:_t})})()}_subscribe(m,E){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[m]||(this.handlersMap[m]=new Set),this.handlersMap[m].add(E)}_unsubscribe(m,E){this.handlersMap[m]&&E&&this.handlersMap[m].delete(E),(!E||0===this.handlersMap[m].size)&&delete this.handlersMap[m],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return _.receivers=[],_})();function Zi(_="",f=10){let m="";for(let E=0;E<f;E++)m+=Math.floor(10*Math.random());return _+m}class Yl{constructor(f){this.target=f,this.handlers=new Set}removeMessageHandler(f){f.messageChannel&&(f.messageChannel.port1.removeEventListener("message",f.onMessage),f.messageChannel.port1.close()),this.handlers.delete(f)}_send(f,m,E=50){var T=this;return(0,h.Z)(function*(){const P="undefined"!=typeof MessageChannel?new MessageChannel:null;if(!P)throw new Error("connection_unavailable");let K,pe;return new Promise((Le,Ye)=>{const _t=Zi("",20);P.port1.start();const dt=setTimeout(()=>{Ye(new Error("unsupported_event"))},E);pe={messageChannel:P,onMessage(Tn){const gi=Tn;if(gi.data.eventId===_t)switch(gi.data.status){case"ack":clearTimeout(dt),K=setTimeout(()=>{Ye(new Error("timeout"))},3e3);break;case"done":clearTimeout(K),Le(gi.data.response);break;default:clearTimeout(dt),clearTimeout(K),Ye(new Error("invalid_response"))}}},T.handlers.add(pe),P.port1.addEventListener("message",pe.onMessage),T.target.postMessage({eventType:f,eventId:_t,data:m},[P.port2])}).finally(()=>{pe&&T.removeMessageHandler(pe)})})()}}function cn(){return window}function Mi(){return void 0!==cn().WorkerGlobalScope&&"function"==typeof cn().importScripts}function Hu(){return(Hu=(0,h.Z)(function*(){if(!(null==navigator?void 0:navigator.serviceWorker))return null;try{return(yield navigator.serviceWorker.ready).active}catch(_){return null}})).apply(this,arguments)}const Ql="firebaseLocalStorageDb",ta="firebaseLocalStorage",na="fbase_key";class Vs{constructor(f){this.request=f}toPromise(){return new Promise((f,m)=>{this.request.addEventListener("success",()=>{f(this.request.result)}),this.request.addEventListener("error",()=>{m(this.request.error)})})}}function ar(_,f){return _.transaction([ta],f?"readwrite":"readonly").objectStore(ta)}function Us(){const _=indexedDB.open(Ql,1);return new Promise((f,m)=>{_.addEventListener("error",()=>{m(_.error)}),_.addEventListener("upgradeneeded",()=>{const E=_.result;try{E.createObjectStore(ta,{keyPath:na})}catch(T){m(T)}}),_.addEventListener("success",(0,h.Z)(function*(){const E=_.result;E.objectStoreNames.contains(ta)?f(E):(E.close(),yield function $u(){const _=indexedDB.deleteDatabase(Ql);return new Vs(_).toPromise()}(),f(yield Us()))}))})}function ra(_,f,m){return Bs.apply(this,arguments)}function Bs(){return(Bs=(0,h.Z)(function*(_,f,m){const E=ar(_,!0).put({[na]:f,value:m});return new Vs(E).toPromise()})).apply(this,arguments)}function lo(){return(lo=(0,h.Z)(function*(_,f){const m=ar(_,!1).get(f),E=yield new Vs(m).toPromise();return void 0===E?null:E.value})).apply(this,arguments)}function sa(_,f){const m=ar(_,!0).delete(f);return new Vs(m).toPromise()}const js=(()=>{class _{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var m=this;return(0,h.Z)(function*(){return m.db||(m.db=yield Us()),m.db})()}_withRetries(m){var E=this;return(0,h.Z)(function*(){let T=0;for(;;)try{const P=yield E._openDb();return yield m(P)}catch(P){if(T++>3)throw P;E.db&&(E.db.close(),E.db=void 0)}})()}initializeServiceWorkerMessaging(){var m=this;return(0,h.Z)(function*(){return Mi()?m.initializeReceiver():m.initializeSender()})()}initializeReceiver(){var m=this;return(0,h.Z)(function*(){m.receiver=Td._getInstance(function Sd(){return Mi()?self:null}()),m.receiver._subscribe("keyChanged",function(){var E=(0,h.Z)(function*(T,P){return{keyProcessed:(yield m._poll()).includes(P.key)}});return function(T,P){return E.apply(this,arguments)}}()),m.receiver._subscribe("ping",function(){var E=(0,h.Z)(function*(T,P){return["keyChanged"]});return function(T,P){return E.apply(this,arguments)}}())})()}initializeSender(){var m=this;return(0,h.Z)(function*(){var E,T;if(m.activeServiceWorker=yield function Dt(){return Hu.apply(this,arguments)}(),!m.activeServiceWorker)return;m.sender=new Yl(m.activeServiceWorker);const P=yield m.sender._send("ping",{},800);!P||(null===(E=P[0])||void 0===E?void 0:E.fulfilled)&&(null===(T=P[0])||void 0===T?void 0:T.value.includes("keyChanged"))&&(m.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(m){var E=this;return(0,h.Z)(function*(){if(E.sender&&E.activeServiceWorker&&function Ad(){var _;return(null===(_=null==navigator?void 0:navigator.serviceWorker)||void 0===_?void 0:_.controller)||null}()===E.activeServiceWorker)try{yield E.sender._send("keyChanged",{key:m},E.serviceWorkerReceiverAvailable?800:50)}catch(T){}})()}_isAvailable(){return(0,h.Z)(function*(){try{if(!indexedDB)return!1;const m=yield Us();return yield ra(m,uo,"1"),yield sa(m,uo),!0}catch(m){}return!1})()}_withPendingWrite(m){var E=this;return(0,h.Z)(function*(){E.pendingWrites++;try{yield m()}finally{E.pendingWrites--}})()}_set(m,E){var T=this;return(0,h.Z)(function*(){return T._withPendingWrite((0,h.Z)(function*(){return yield T._withRetries(P=>ra(P,m,E)),T.localCache[m]=E,T.notifyServiceWorker(m)}))})()}_get(m){var E=this;return(0,h.Z)(function*(){const T=yield E._withRetries(P=>function ia(_,f){return lo.apply(this,arguments)}(P,m));return E.localCache[m]=T,T})()}_remove(m){var E=this;return(0,h.Z)(function*(){return E._withPendingWrite((0,h.Z)(function*(){return yield E._withRetries(T=>sa(T,m)),delete E.localCache[m],E.notifyServiceWorker(m)}))})()}_poll(){var m=this;return(0,h.Z)(function*(){const E=yield m._withRetries(K=>{const pe=ar(K,!1).getAll();return new Vs(pe).toPromise()});if(!E)return[];if(0!==m.pendingWrites)return[];const T=[],P=new Set;for(const{fbase_key:K,value:pe}of E)P.add(K),JSON.stringify(m.localCache[K])!==JSON.stringify(pe)&&(m.notifyListeners(K,pe),T.push(K));for(const K of Object.keys(m.localCache))m.localCache[K]&&!P.has(K)&&(m.notifyListeners(K,null),T.push(K));return T})()}notifyListeners(m,E){this.localCache[m]=E;const T=this.listeners[m];if(T)for(const P of Array.from(T))P(E)}startPolling(){var m=this;this.stopPolling(),this.pollTimer=setInterval((0,h.Z)(function*(){return m._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(m,E){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[m]||(this.listeners[m]=new Set,this._get(m)),this.listeners[m].add(E)}_removeListener(m,E){this.listeners[m]&&(this.listeners[m].delete(E),0===this.listeners[m].size&&delete this.listeners[m]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return _.type="LOCAL",_})();function Jn(_,f){return Vt(_,"POST","/v2/accounts/mfaSignIn:start",zt(_,f))}function Dn(){return(Dn=(0,h.Z)(function*(_){return(yield Vt(_,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function Yi(_){return new Promise((f,m)=>{const E=document.createElement("script");E.setAttribute("src",_),E.onload=f,E.onerror=T=>{const P=we("internal-error");P.customData=T,m(P)},E.type="text/javascript",E.charset="UTF-8",function ho(){var _,f;return null!==(f=null===(_=document.getElementsByTagName("head"))||void 0===_?void 0:_[0])&&void 0!==f?f:document}().appendChild(E)})}function ds(_){return`__${_}${Math.floor(1e6*Math.random())}`}const ai=1e12;class Cn{constructor(f){this.auth=f,this.counter=ai,this._widgets=new Map}render(f,m){const E=this.counter;return this._widgets.set(E,new Ya(f,this.auth.name,m||{})),this.counter++,E}reset(f){var m;const E=f||ai;null===(m=this._widgets.get(E))||void 0===m||m.delete(),this._widgets.delete(E)}getResponse(f){var m;return(null===(m=this._widgets.get(f||ai))||void 0===m?void 0:m.getResponse())||""}execute(f){var m=this;return(0,h.Z)(function*(){var E;return null===(E=m._widgets.get(f||ai))||void 0===E||E.execute(),""})()}}class Ya{constructor(f,m,E){this.params=E,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const T="string"==typeof f?document.getElementById(f):f;$(T,"argument-error",{appName:m}),this.container=T,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function Qa(_){const f=[],m="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let E=0;E<_;E++)f.push(m.charAt(Math.floor(Math.random()*m.length)));return f.join("")}(50);const{callback:f,"expired-callback":m}=this.params;if(f)try{f(this.responseToken)}catch(E){}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,m)try{m()}catch(E){}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const gn=ds("rcb"),Ig=new en(3e4,6e4);class Yy{constructor(){this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!cn().grecaptcha}load(f,m=""){return $(function ua(_){return _.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(_)}(m),f,"argument-error"),this.shouldResolveImmediately(m)?Promise.resolve(cn().grecaptcha):new Promise((E,T)=>{const P=cn().setTimeout(()=>{T(we(f,"network-request-failed"))},Ig.get());cn()[gn]=()=>{cn().clearTimeout(P),delete cn()[gn];const pe=cn().grecaptcha;if(!pe)return void T(we(f,"internal-error"));const Le=pe.render;pe.render=(Ye,_t)=>{const dt=Le(Ye,_t);return this.counter++,dt},this.hostLanguage=m,E(pe)},Yi(`https://www.google.com/recaptcha/api.js??${(0,O.xO)({onload:gn,render:"explicit",hl:m})}`).catch(()=>{clearTimeout(P),T(we(f,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(f){return!!cn().grecaptcha&&(f===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class jr{load(f){return(0,h.Z)(function*(){return new Cn(f)})()}clearedOneInstance(){}}const Md="recaptcha",Hs={theme:"light",type:"image"};class fo{constructor(f,m=Object.assign({},Hs),E){this.parameters=m,this.type=Md,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=lt(E),this.isInvisible="invisible"===this.parameters.size,$("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment");const T="string"==typeof f?document.getElementById(f):f;$(T,this.auth,"argument-error"),this.container=T,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new jr:new Yy,this.validateStartingState()}verify(){var f=this;return(0,h.Z)(function*(){f.assertNotDestroyed();const m=yield f.render(),E=f.getAssertedRecaptcha();return E.getResponse(m)||new Promise(P=>{const K=pe=>{!pe||(f.tokenChangeListeners.delete(K),P(pe))};f.tokenChangeListeners.add(K),f.isInvisible&&E.execute(m)})})()}render(){try{this.assertNotDestroyed()}catch(f){return Promise.reject(f)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(f=>{throw this.renderPromise=null,f})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(f=>{this.container.removeChild(f)})}validateStartingState(){$(!this.parameters.sitekey,this.auth,"argument-error"),$(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),$("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(f){return m=>{if(this.tokenChangeListeners.forEach(E=>E(m)),"function"==typeof f)f(m);else if("string"==typeof f){const E=cn()[f];"function"==typeof E&&E(m)}}}assertNotDestroyed(){$(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var f=this;return(0,h.Z)(function*(){if(yield f.init(),!f.widgetId){let m=f.container;if(!f.isInvisible){const E=document.createElement("div");m.appendChild(E),m=E}f.widgetId=f.getAssertedRecaptcha().render(m,f.parameters)}return f.widgetId})()}init(){var f=this;return(0,h.Z)(function*(){$(ct()&&!Mi(),f.auth,"internal-error"),yield function qu(){let _=null;return new Promise(f=>{"complete"!==document.readyState?(_=()=>f(),window.addEventListener("load",_)):f()}).catch(f=>{throw _&&window.removeEventListener("load",_),f})}(),f.recaptcha=yield f._recaptchaLoader.load(f.auth,f.auth.languageCode||void 0);const m=yield function Gu(_){return Dn.apply(this,arguments)}(f.auth);$(m,f.auth,"internal-error"),f.parameters.sitekey=m})()}getAssertedRecaptcha(){return $(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class _n{constructor(f,m){this.verificationId=f,this.onConfirmation=m}confirm(f){const m=Ho._fromVerification(this.verificationId,f);return this.onConfirmation(m)}}function po(){return(po=(0,h.Z)(function*(_,f,m){const E=lt(_),T=yield la(E,f,(0,O.m9)(m));return new _n(T,P=>yn(E,P))})).apply(this,arguments)}function Xl(){return(Xl=(0,h.Z)(function*(_,f,m){const E=(0,O.m9)(_);yield Jt(!1,E,"phone");const T=yield la(E.auth,f,(0,O.m9)(m));return new _n(T,P=>or(E,P))})).apply(this,arguments)}function Hr(){return(Hr=(0,h.Z)(function*(_,f,m){const E=(0,O.m9)(_),T=yield la(E.auth,f,(0,O.m9)(m));return new _n(T,P=>us(E,P))})).apply(this,arguments)}function la(_,f,m){return go.apply(this,arguments)}function go(){return(go=(0,h.Z)(function*(_,f,m){var E;const T=yield m.verify();try{let P;if($("string"==typeof T,_,"argument-error"),$(m.type===Md,_,"argument-error"),P="string"==typeof f?{phoneNumber:f}:f,"session"in P){const K=P.session;if("phoneNumber"in P)return $("enroll"===K.type,_,"internal-error"),(yield ff(_,{idToken:K.credential,phoneEnrollmentInfo:{phoneNumber:P.phoneNumber,recaptchaToken:T}})).phoneSessionInfo.sessionInfo;{$("signin"===K.type,_,"internal-error");const pe=(null===(E=P.multiFactorHint)||void 0===E?void 0:E.uid)||P.multiFactorUid;return $(pe,_,"missing-multi-factor-info"),(yield Jn(_,{mfaPendingCredential:K.credential,mfaEnrollmentId:pe,phoneSignInInfo:{recaptchaToken:T}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:K}=yield gg(_,{phoneNumber:P.phoneNumber,recaptchaToken:T});return K}}finally{m._reset()}})).apply(this,arguments)}function ca(){return(ca=(0,h.Z)(function*(_,f){yield ka((0,O.m9)(_),f)})).apply(this,arguments)}let yo=(()=>{class _{constructor(m){this.providerId=_.PROVIDER_ID,this.auth=lt(m)}verifyPhoneNumber(m,E){return la(this.auth,m,(0,O.m9)(E))}static credential(m,E){return Ho._fromVerification(m,E)}static credentialFromResult(m){return _.credentialFromTaggedObject(m)}static credentialFromError(m){return _.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m)return null;const{phoneNumber:E,temporaryProof:T}=m;return E&&T?Ho._fromTokenResponse(E,T):null}}return _.PROVIDER_ID="phone",_.PHONE_SIGN_IN_METHOD="phone",_})();function hs(_,f){return f?ee(f):($(_._popupRedirectResolver,_,"argument-error"),_._popupRedirectResolver)}class Ja extends Ti{constructor(f){super("custom","custom"),this.params=f}_getIdTokenResponse(f){return Os(f,this._buildIdpRequest())}_linkToIdToken(f,m){return Os(f,this._buildIdpRequest(m))}_getReauthenticationResolver(f){return Os(f,this._buildIdpRequest())}_buildIdpRequest(f){const m={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return f&&(m.idToken=f),m}}function kt(_){return sr(_.auth,new Ja(_),_.bypassAuthState)}function zu(_){const{auth:f,user:m}=_;return $(m,f,"internal-error"),Pu(m,new Ja(_),_.bypassAuthState)}function Xn(_){return Xa.apply(this,arguments)}function Xa(){return(Xa=(0,h.Z)(function*(_){const{auth:f,user:m}=_;return $(m,f,"internal-error"),ka(m,new Ja(_),_.bypassAuthState)})).apply(this,arguments)}class $s{constructor(f,m,E,T,P=!1){this.auth=f,this.resolver=E,this.user=T,this.bypassAuthState=P,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(m)?m:[m]}execute(){var f=this;return new Promise(function(){var m=(0,h.Z)(function*(E,T){f.pendingPromise={resolve:E,reject:T};try{f.eventManager=yield f.resolver._initialize(f.auth),yield f.onExecution(),f.eventManager.registerConsumer(f)}catch(P){f.reject(P)}});return function(E,T){return m.apply(this,arguments)}}())}onAuthEvent(f){var m=this;return(0,h.Z)(function*(){const{urlResponse:E,sessionId:T,postBody:P,tenantId:K,error:pe,type:Le}=f;if(pe)return void m.reject(pe);const Ye={auth:m.auth,requestUri:E,sessionId:T,tenantId:K||void 0,postBody:P||void 0,user:m.user,bypassAuthState:m.bypassAuthState};try{m.resolve(yield m.getIdpTask(Le)(Ye))}catch(_t){m.reject(_t)}})()}onError(f){this.reject(f)}getIdpTask(f){switch(f){case"signInViaPopup":case"signInViaRedirect":return kt;case"linkViaPopup":case"linkViaRedirect":return Xn;case"reauthViaPopup":case"reauthViaRedirect":return zu;default:Ae(this.auth,"internal-error")}}resolve(f){Z(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(f),this.unregisterAndCleanUp()}reject(f){Z(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(f),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Cg=new en(2e3,1e4);function Gs(){return(Gs=(0,h.Z)(function*(_,f,m){const E=lt(_);je(_,f,yr);const T=hs(E,m);return new ec(E,"signInViaPopup",f,T).executeNotNull()})).apply(this,arguments)}function Wu(){return(Wu=(0,h.Z)(function*(_,f,m){const E=(0,O.m9)(_);je(E.auth,f,yr);const T=hs(E.auth,m);return new ec(E.auth,"reauthViaPopup",f,T,E).executeNotNull()})).apply(this,arguments)}function Ji(){return(Ji=(0,h.Z)(function*(_,f,m){const E=(0,O.m9)(_);je(E.auth,f,yr);const T=hs(E.auth,m);return new ec(E.auth,"linkViaPopup",f,T,E).executeNotNull()})).apply(this,arguments)}let ec=(()=>{class _ extends $s{constructor(m,E,T,P,K){super(m,E,P,K),this.provider=T,this.authWindow=null,this.pollId=null,_.currentPopupAction&&_.currentPopupAction.cancel(),_.currentPopupAction=this}executeNotNull(){var m=this;return(0,h.Z)(function*(){const E=yield m.execute();return $(E,m.auth,"internal-error"),E})()}onExecution(){var m=this;return(0,h.Z)(function*(){Z(1===m.filter.length,"Popup operations only handle one event");const E=Zi();m.authWindow=yield m.resolver._openPopup(m.auth,m.provider,m.filter[0],E),m.authWindow.associatedEvent=E,m.resolver._originValidation(m.auth).catch(T=>{m.reject(T)}),m.resolver._isIframeWebStorageSupported(m.auth,T=>{T||m.reject(we(m.auth,"web-storage-unsupported"))}),m.pollUserCancellation()})()}get eventId(){var m;return(null===(m=this.authWindow)||void 0===m?void 0:m.associatedEvent)||null}cancel(){this.reject(we(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,_.currentPopupAction=null}pollUserCancellation(){const m=()=>{var E,T;this.pollId=(null===(T=null===(E=this.authWindow)||void 0===E?void 0:E.window)||void 0===T?void 0:T.closed)?window.setTimeout(()=>{this.pollId=null,this.reject(we(this.auth,"popup-closed-by-user"))},2e3):window.setTimeout(m,Cg.get())};m()}}return _.currentPopupAction=null,_})();const er=new Map;class Jy extends $s{constructor(f,m,E=!1){super(f,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],m,void 0,E),this.eventId=null}execute(){var f=()=>super.execute,m=this;return(0,h.Z)(function*(){let E=er.get(m.auth._key());if(!E){try{const P=(yield function da(_,f){return ha.apply(this,arguments)}(m.resolver,m.auth))?yield f().call(m):null;E=()=>Promise.resolve(P)}catch(T){E=()=>Promise.reject(T)}er.set(m.auth._key(),E)}return m.bypassAuthState||er.set(m.auth._key(),()=>Promise.resolve(null)),E()})()}onAuthEvent(f){var m=()=>super.onAuthEvent,E=this;return(0,h.Z)(function*(){if("signInViaRedirect"===f.type)return m().call(E,f);if("unknown"!==f.type){if(f.eventId){const T=yield E.auth._redirectUserForId(f.eventId);if(T)return E.user=T,m().call(E,f);E.resolve(null)}}else E.resolve(null)})()}onExecution(){return(0,h.Z)(function*(){})()}cleanUp(){}}function ha(){return(ha=(0,h.Z)(function*(_,f){const m=L(f),E=R(_);if(!(yield E._isAvailable()))return!1;const T="true"===(yield E._get(m));return yield E._remove(m),T})).apply(this,arguments)}function _o(_,f){return Pd.apply(this,arguments)}function Pd(){return(Pd=(0,h.Z)(function*(_,f){return R(_)._set(L(f),"true")})).apply(this,arguments)}function C(_,f){er.set(_._key(),f)}function R(_){return ee(_._redirectPersistence)}function L(_){return Bn("pendingRedirect",_.config.apiKey,_.name)}function me(){return(me=(0,h.Z)(function*(_,f,m){const E=lt(_);je(_,f,yr);const T=hs(E,m);return yield _o(T,E),T._openRedirect(E,f,"signInViaRedirect")})).apply(this,arguments)}function ht(){return(ht=(0,h.Z)(function*(_,f,m){const E=(0,O.m9)(_);je(E.auth,f,yr);const T=hs(E.auth,m);yield _o(T,E.auth);const P=yield ci(E);return T._openRedirect(E.auth,f,"reauthViaRedirect",P)})).apply(this,arguments)}function _r(){return(_r=(0,h.Z)(function*(_,f,m){const E=(0,O.m9)(_);je(E.auth,f,yr);const T=hs(E.auth,m);yield Jt(!1,E,f.providerId),yield _o(T,E.auth);const P=yield ci(E);return T._openRedirect(E.auth,f,"linkViaRedirect",P)})).apply(this,arguments)}function fs(){return(fs=(0,h.Z)(function*(_,f){return yield lt(_)._initializationPromise,$r(_,f,!1)})).apply(this,arguments)}function $r(_,f){return li.apply(this,arguments)}function li(){return(li=(0,h.Z)(function*(_,f,m=!1){const E=lt(_),T=hs(E,f),K=yield new Jy(E,T,m).execute();return K&&!m&&(delete K.user._redirectEventId,yield E._persistUserIfCurrent(K.user),yield E._setRedirectUser(null,f)),K})).apply(this,arguments)}function ci(_){return di.apply(this,arguments)}function di(){return(di=(0,h.Z)(function*(_){const f=Zi(`${_.uid}:::`);return _._redirectEventId=f,yield _.auth._setRedirectUser(_),yield _.auth._persistUserIfCurrent(_),f})).apply(this,arguments)}class Zu{constructor(f){this.auth=f,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(f){this.consumers.add(f),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,f)&&(this.sendToConsumer(this.queuedRedirectEvent,f),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(f){this.consumers.delete(f)}onEvent(f){if(this.hasEventBeenHandled(f))return!1;let m=!1;return this.consumers.forEach(E=>{this.isEventForConsumer(f,E)&&(m=!0,this.sendToConsumer(f,E),this.saveEventToCache(f))}),this.hasHandledPotentialRedirect||!function Tg(_){switch(_.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Yu(_);default:return!1}}(f)||(this.hasHandledPotentialRedirect=!0,m||(this.queuedRedirectEvent=f,m=!0)),m}sendToConsumer(f,m){var E;if(f.error&&!Yu(f)){const T=(null===(E=f.error.code)||void 0===E?void 0:E.split("auth/")[1])||"internal-error";m.onError(we(this.auth,T))}else m.onAuthEvent(f)}isEventForConsumer(f,m){const E=null===m.eventId||!!f.eventId&&f.eventId===m.eventId;return m.filter.includes(f.type)&&E}hasEventBeenHandled(f){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(tc(f))}saveEventToCache(f){this.cachedEventUids.add(tc(f)),this.lastProcessedEventTime=Date.now()}}function tc(_){return[_.type,_.eventId,_.sessionId,_.tenantId].filter(f=>f).join("-")}function Yu({type:_,error:f}){return"unknown"===_&&"auth/no-auth-event"===(null==f?void 0:f.code)}function Ag(_){return pf.apply(this,arguments)}function pf(){return(pf=(0,h.Z)(function*(_,f={}){return Vt(_,"GET","/v1/projects",f)})).apply(this,arguments)}const vo=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,nc=/^https?/;function Sg(){return(Sg=(0,h.Z)(function*(_){if(_.config.emulator)return;const{authorizedDomains:f}=yield Ag(_);for(const m of f)try{if(Mg(m))return}catch(E){}Ae(_,"unauthorized-domain")})).apply(this,arguments)}function Mg(_){const f=Oe(),{protocol:m,hostname:E}=new URL(f);if(_.startsWith("chrome-extension://")){const K=new URL(_);return""===K.hostname&&""===E?"chrome-extension:"===m&&_.replace("chrome-extension://","")===f.replace("chrome-extension://",""):"chrome-extension:"===m&&K.hostname===E}if(!nc.test(m))return!1;if(vo.test(_))return E===_;const T=_.replace(/\./g,"\\.");return new RegExp("^(.+\\."+T+"|"+T+")$","i").test(E)}const e_=new en(3e4,6e4);function xg(){const _=cn().___jsl;if(null==_?void 0:_.H)for(const f of Object.keys(_.H))if(_.H[f].r=_.H[f].r||[],_.H[f].L=_.H[f].L||[],_.H[f].r=[..._.H[f].L],_.CP)for(let m=0;m<_.CP.length;m++)_.CP[m]=null}let Qu=null;function Eo(_){return Qu=Qu||function gf(_){return new Promise((f,m)=>{var E,T,P;function K(){xg(),gapi.load("gapi.iframes",{callback:()=>{f(gapi.iframes.getContext())},ontimeout:()=>{xg(),m(we(_,"network-request-failed"))},timeout:e_.get()})}if(null===(T=null===(E=cn().gapi)||void 0===E?void 0:E.iframes)||void 0===T?void 0:T.Iframe)f(gapi.iframes.getContext());else{if(!(null===(P=cn().gapi)||void 0===P?void 0:P.load)){const pe=ds("iframefcb");return cn()[pe]=()=>{gapi.load?K():m(we(_,"network-request-failed"))},Yi(`https://apis.google.com/js/api.js?onload=${pe}`).catch(Le=>m(Le))}K()}}).catch(f=>{throw Qu=null,f})}(_),Qu}const wo=new en(5e3,15e3),t_={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Ju=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function n_(_){const f=_.config;$(f.authDomain,_,"auth-domain-config-required");const m=f.emulator?Mn(f,"emulator/auth/iframe"):`https://${_.config.authDomain}/__/auth/iframe`,E={apiKey:f.apiKey,appName:_.name,v:le.SDK_VERSION},T=Ju.get(_.config.apiHost);T&&(E.eid=T);const P=_._getFrameworks();return P.length&&(E.fw=P.join(",")),`${m}?${(0,O.xO)(E).slice(1)}`}function fa(){return fa=(0,h.Z)(function*(_){const f=yield Eo(_),m=cn().gapi;return $(m,_,"internal-error"),f.open({where:document.body,url:n_(_),messageHandlersFilter:m.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:t_,dontclear:!0},E=>new Promise(function(){var T=(0,h.Z)(function*(P,K){yield E.restyle({setHideOnLeave:!1});const pe=we(_,"network-request-failed"),Le=cn().setTimeout(()=>{K(pe)},wo.get());function Ye(){cn().clearTimeout(Le),P(E)}E.ping(Ye).then(Ye,()=>{K(pe)})});return function(P,K){return T.apply(this,arguments)}}()))}),fa.apply(this,arguments)}const mf={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class Rg{constructor(f){this.window=f,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(f){}}}function qs(_,f,m,E,T,P){$(_.config.authDomain,_,"auth-domain-config-required"),$(_.config.apiKey,_,"invalid-api-key");const K={apiKey:_.config.apiKey,appName:_.name,authType:m,redirectUrl:E,v:le.SDK_VERSION,eventId:T};if(f instanceof yr){f.setDefaultLanguage(_.languageCode),K.providerId=f.providerId||"",(0,O.xb)(f.getCustomParameters())||(K.customParameters=JSON.stringify(f.getCustomParameters()));for(const[Le,Ye]of Object.entries(P||{}))K[Le]=Ye}if(f instanceof no){const Le=f.getScopes().filter(Ye=>""!==Ye);Le.length>0&&(K.scopes=Le.join(","))}_.tenantId&&(K.tid=_.tenantId);const pe=K;for(const Le of Object.keys(pe))void 0===pe[Le]&&delete pe[Le];return`${function ic({config:_}){return _.emulator?Mn(_,"emulator/auth/handler"):`https://${_.authDomain}/__/auth/handler`}(_)}?${(0,O.xO)(pe).slice(1)}`}const Ld="webStorageSupport";class Vd extends class T0{constructor(f){this.factorId=f}_process(f,m,E){switch(m.type){case"enroll":return this._finalizeEnroll(f,m.credential,E);case"signin":return this._finalizeSignIn(f,m.credential);default:return ve("unexpected MultiFactorSessionType")}}}{constructor(f){super("phone"),this.credential=f}static _fromCredential(f){return new Vd(f)}_finalizeEnroll(f,m,E){return function ao(_,f){return Vt(_,"POST","/v2/accounts/mfaEnrollment:finalize",zt(_,f))}(f,{idToken:m,displayName:E,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(f,m){return function co(_,f){return Vt(_,"POST","/v2/accounts/mfaSignIn:finalize",zt(_,f))}(f,{mfaPendingCredential:m,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let Ng=(()=>{class _{constructor(){}static assertion(m){return Vd._fromCredential(m)}}return _.FACTOR_ID="phone",_})();var Og="@firebase/auth";class Fg{constructor(f){this.auth=f,this.internalListeners=new Map}getUid(){var f;return this.assertAuthConfigured(),(null===(f=this.auth.currentUser)||void 0===f?void 0:f.uid)||null}getToken(f){var m=this;return(0,h.Z)(function*(){return m.assertAuthConfigured(),yield m.auth._initializationPromise,m.auth.currentUser?{accessToken:yield m.auth.currentUser.getIdToken(f)}:null})()}addAuthTokenListener(f){if(this.assertAuthConfigured(),this.internalListeners.has(f))return;const m=this.auth.onIdTokenChanged(E=>{var T;f((null===(T=E)||void 0===T?void 0:T.stsTokenManager.accessToken)||null)});this.internalListeners.set(f,m),this.updateProactiveRefresh()}removeAuthTokenListener(f){this.assertAuthConfigured();const m=this.internalListeners.get(f);!m||(this.internalListeners.delete(f),m(),this.updateProactiveRefresh())}assertAuthConfigured(){$(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function zs(){return window}function tu(){return(tu=(0,h.Z)(function*(_,f,m){var E;const{BuildInfo:T}=zs();Z(f.sessionId,"AuthEvent did not contain a session ID");const P=yield Ef(f.sessionId),K={};return Fr()?K.ibi=T.packageName:Ar()?K.apn=T.packageName:Ae(_,"operation-not-supported-in-this-environment"),T.displayName&&(K.appDisplayName=T.displayName),K.sessionId=P,qs(_,m,f.type,void 0,null!==(E=f.eventId)&&void 0!==E?E:void 0,K)})).apply(this,arguments)}function Bd(){return(Bd=(0,h.Z)(function*(_){const{BuildInfo:f}=zs(),m={};Fr()?m.iosBundleId=f.packageName:Ar()?m.androidPackageName=f.packageName:Ae(_,"operation-not-supported-in-this-environment"),yield Ag(_,m)})).apply(this,arguments)}function Ug(){return(Ug=(0,h.Z)(function*(_,f,m){const{cordova:E}=zs();let T=()=>{};try{yield new Promise((P,K)=>{let pe=null;function Le(){var dt;P();const Tn=null===(dt=E.plugins.browsertab)||void 0===dt?void 0:dt.close;"function"==typeof Tn&&Tn(),"function"==typeof(null==m?void 0:m.close)&&m.close()}function Ye(){pe||(pe=window.setTimeout(()=>{K(we(_,"redirect-cancelled-by-user"))},2e3))}function _t(){"visible"===(null==document?void 0:document.visibilityState)&&Ye()}f.addPassiveListener(Le),document.addEventListener("resume",Ye,!1),Ar()&&document.addEventListener("visibilitychange",_t,!1),T=()=>{f.removePassiveListener(Le),document.removeEventListener("resume",Ye,!1),document.removeEventListener("visibilitychange",_t,!1),pe&&window.clearTimeout(pe)}})}finally{T()}})).apply(this,arguments)}function Ef(_){return sc.apply(this,arguments)}function sc(){return(sc=(0,h.Z)(function*(_){const f=wf(_),m=yield crypto.subtle.digest("SHA-256",f);return Array.from(new Uint8Array(m)).map(T=>T.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}function wf(_){if(Z(/[0-9a-zA-Z]+/.test(_),"Can only convert alpha-numeric strings"),"undefined"!=typeof TextEncoder)return(new TextEncoder).encode(_);const f=new ArrayBuffer(_.length),m=new Uint8Array(f);for(let E=0;E<_.length;E++)m[E]=_.charCodeAt(E);return m}!function A0(_){(0,le._registerComponent)(new ue.wA("auth",(f,{options:m})=>{const E=f.getProvider("app").getImmediate(),T=f.getProvider("heartbeat"),{apiKey:P,authDomain:K}=E.options;return((pe,Le)=>{$(P&&!P.includes(":"),"invalid-api-key",{appName:pe.name}),$(!(null==K?void 0:K.includes(":")),"argument-error",{appName:pe.name});const Ye={apiKey:P,authDomain:K,clientPlatform:_,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Bo(_)},_t=new Ke(pe,Le,Ye);return function ae(_,f){const m=(null==f?void 0:f.persistence)||[],E=(Array.isArray(m)?m:[m]).map(ee);(null==f?void 0:f.errorMap)&&_._updateErrorMap(f.errorMap),_._initializeWithPersistence(E,null==f?void 0:f.popupRedirectResolver)}(_t,m),_t})(E,T)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((f,m,E)=>{f.getProvider("auth-internal").initialize()})),(0,le._registerComponent)(new ue.wA("auth-internal",f=>{const m=lt(f.getProvider("auth").getImmediate());return new Fg(m)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,le.registerVersion)(Og,"0.20.1",function Ud(_){switch(_){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(_)),(0,le.registerVersion)(Og,"0.20.1","esm2017")}("Browser");class Hd extends Zu{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(f=>{this.resolveInialized=f})}addPassiveListener(f){this.passiveListeners.add(f)}removePassiveListener(f){this.passiveListeners.delete(f)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(f){return this.resolveInialized(),this.passiveListeners.forEach(m=>m(f)),super.onEvent(f)}initialized(){var f=this;return(0,h.Z)(function*(){yield f.initPromise})()}}function tl(_){return oc.apply(this,arguments)}function oc(){return(oc=(0,h.Z)(function*(_){const f=yield ru()._get(If(_));return f&&(yield ru()._remove(If(_))),f})).apply(this,arguments)}function bf(){const _=[],f="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let m=0;m<20;m++){const E=Math.floor(Math.random()*f.length);_.push(f.charAt(E))}return _.join("")}function ru(){return ee(si)}function If(_){return Bn("authEvent",_.config.apiKey,_.name)}function qt(_){if(!(null==_?void 0:_.includes("?")))return{};const[f,...m]=_.split("?");return(0,O.zd)(m.join("?"))}function rl(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:we("no-auth-event")}}function iu(){var _;return(null===(_=null==self?void 0:self.location)||void 0===_?void 0:_.protocol)||null}function Hg(_=(0,O.z$)()){return!("file:"!==iu()&&"ionic:"!==iu()||!_.toLowerCase().match(/iphone|ipad|ipod|android/))}function Af(){try{const _=self.localStorage,f=Zi();if(_)return _.setItem(f,"1"),_.removeItem(f),!function Tf(_=(0,O.z$)()){return function xr(){return(0,O.w1)()&&11===(null==document?void 0:document.documentMode)}()||function su(_=(0,O.z$)()){return/Edge\/\d+/.test(_)}(_)}()||(0,O.hl)()}catch(_){return ur()&&(0,O.hl)()}return!1}function ur(){return"undefined"!=typeof global&&"WorkerGlobalScope"in global&&"importScripts"in global}function ou(){return(function h_(){return"http:"===iu()||"https:"===iu()}()||(0,O.ru)()||Hg())&&!function ga(){return(0,O.b$)()||(0,O.UG)()}()&&Af()&&!ur()}function $d(){return Hg()&&"undefined"!=typeof document}function ac(){return(ac=(0,h.Z)(function*(){return!!$d()&&new Promise(_=>{const f=setTimeout(()=>{_(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(f),_(!0)})})})).apply(this,arguments)}const hi={LOCAL:"local",NONE:"none",SESSION:"session"},bo=$,Gg="persistence";function il(_){return Sf.apply(this,arguments)}function Sf(){return(Sf=(0,h.Z)(function*(_){yield _._initializationPromise;const f=zg(),m=Bn(Gg,_.config.apiKey,_.name);f&&f.setItem(m,_._getPersistence())})).apply(this,arguments)}function zg(){var _;try{return(null===(_=function $g(){return"undefined"!=typeof window?window:null}())||void 0===_?void 0:_.sessionStorage)||null}catch(f){return null}}const p_=$;class fi{constructor(){this.browserResolver=ee(class s_{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=bn,this._completeRedirectFn=$r,this._overrideRedirectResult=C}_openPopup(f,m,E,T){var P=this;return(0,h.Z)(function*(){var K;Z(null===(K=P.eventManagers[f._key()])||void 0===K?void 0:K.manager,"_initialize() not called before _openPopup()");const pe=qs(f,m,E,Oe(),T);return function rc(_,f,m,E=500,T=600){const P=Math.max((window.screen.availHeight-T)/2,0).toString(),K=Math.max((window.screen.availWidth-E)/2,0).toString();let pe="";const Le=Object.assign(Object.assign({},mf),{width:E.toString(),height:T.toString(),top:P,left:K}),Ye=(0,O.z$)().toLowerCase();m&&(pe=Ra(Ye)?"_blank":m),xa(Ye)&&(f=f||"http://localhost",Le.scrollbars="yes");const _t=Object.entries(Le).reduce((Tn,[gi,lc])=>`${Tn}${gi}=${lc},`,"");if(function eo(_=(0,O.z$)()){var f;return Fr(_)&&!!(null===(f=window.navigator)||void 0===f?void 0:f.standalone)}(Ye)&&"_self"!==pe)return function r_(_,f){const m=document.createElement("a");m.href=_,m.target=f;const E=document.createEvent("MouseEvent");E.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),m.dispatchEvent(E)}(f||"",pe),new Rg(null);const dt=window.open(f||"",pe,_t);$(dt,_,"popup-blocked");try{dt.focus()}catch(Tn){}return new Rg(dt)}(f,pe,Zi())})()}_openRedirect(f,m,E,T){var P=this;return(0,h.Z)(function*(){return yield P._originValidation(f),function Ka(_){cn().location.href=_}(qs(f,m,E,Oe(),T)),new Promise(()=>{})})()}_initialize(f){const m=f._key();if(this.eventManagers[m]){const{manager:T,promise:P}=this.eventManagers[m];return T?Promise.resolve(T):(Z(P,"If manager is not set, promise should be"),P)}const E=this.initAndGetManager(f);return this.eventManagers[m]={promise:E},E.catch(()=>{delete this.eventManagers[m]}),E}initAndGetManager(f){var m=this;return(0,h.Z)(function*(){const E=yield function Od(_){return fa.apply(this,arguments)}(f),T=new Zu(f);return E.register("authEvent",P=>($(null==P?void 0:P.authEvent,f,"invalid-auth-event"),{status:T.onEvent(P.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),m.eventManagers[f._key()]={manager:T},m.iframes[f._key()]=E,T})()}_isIframeWebStorageSupported(f,m){this.iframes[f._key()].send(Ld,{type:Ld},T=>{var P;const K=null===(P=null==T?void 0:T[0])||void 0===P?void 0:P[Ld];void 0!==K&&m(!!K),Ae(f,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(f){const m=f._key();return this.originValidationPromises[m]||(this.originValidationPromises[m]=function Xy(_){return Sg.apply(this,arguments)}(f)),this.originValidationPromises[m]}get _shouldInitProactively(){return xs()||Au()||Fr()}}),this.cordovaResolver=ee(class jg{constructor(){this._redirectPersistence=bn,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=$r,this._overrideRedirectResult=C}_initialize(f){var m=this;return(0,h.Z)(function*(){const E=f._key();let T=m.eventManagers.get(E);return T||(T=new Hd(f),m.eventManagers.set(E,T),m.attachCallbackListeners(f,T)),T})()}_openPopup(f){Ae(f,"operation-not-supported-in-this-environment")}_openRedirect(f,m,E,T){var P=this;return(0,h.Z)(function*(){!function Xu(_){var f,m,E,T,P,K,pe,Le,Ye,_t;const dt=zs();$("function"==typeof(null===(f=null==dt?void 0:dt.universalLinks)||void 0===f?void 0:f.subscribe),_,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),$(void 0!==(null===(m=null==dt?void 0:dt.BuildInfo)||void 0===m?void 0:m.packageName),_,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),$("function"==typeof(null===(P=null===(T=null===(E=null==dt?void 0:dt.cordova)||void 0===E?void 0:E.plugins)||void 0===T?void 0:T.browsertab)||void 0===P?void 0:P.openUrl),_,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),$("function"==typeof(null===(Le=null===(pe=null===(K=null==dt?void 0:dt.cordova)||void 0===K?void 0:K.plugins)||void 0===pe?void 0:pe.browsertab)||void 0===Le?void 0:Le.isAvailable),_,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),$("function"==typeof(null===(_t=null===(Ye=null==dt?void 0:dt.cordova)||void 0===Ye?void 0:Ye.InAppBrowser)||void 0===_t?void 0:_t.open),_,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(f);const K=yield P._initialize(f);yield K.initialized(),K.resetRedirect(),function D(){er.clear()}(),yield P._originValidation(f);const pe=function el(_,f,m=null){return{type:f,eventId:m,urlResponse:null,sessionId:bf(),postBody:null,tenantId:_.tenantId,error:we(_,"no-auth-event")}}(f,E,T);yield function o_(_,f){return ru()._set(If(_),f)}(f,pe);const Le=yield function ps(_,f,m){return tu.apply(this,arguments)}(f,pe,m),Ye=yield function jd(_){const{cordova:f}=zs();return new Promise(m=>{f.plugins.browsertab.isAvailable(E=>{let T=null;E?f.plugins.browsertab.openUrl(_):T=f.InAppBrowser.open(_,function ad(_=(0,O.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(_)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(_)}()?"_blank":"_system","location=yes"),m(T)})})}(Le);return function nu(_,f,m){return Ug.apply(this,arguments)}(f,K,Ye)})()}_isIframeWebStorageSupported(f,m){throw new Error("Method not implemented.")}_originValidation(f){const m=f._key();return this.originValidationPromises[m]||(this.originValidationPromises[m]=function Vg(_){return Bd.apply(this,arguments)}(f)),this.originValidationPromises[m]}attachCallbackListeners(f,m){const{universalLinks:E,handleOpenURL:T,BuildInfo:P}=zs(),K=setTimeout((0,h.Z)(function*(){yield tl(f),m.onEvent(rl())}),500),pe=function(){var _t=(0,h.Z)(function*(dt){clearTimeout(K);const Tn=yield tl(f);let gi=null;Tn&&(null==dt?void 0:dt.url)&&(gi=function a_(_,f){var m,E;const T=function Cf(_){const f=qt(_),m=f.link?decodeURIComponent(f.link):void 0,E=qt(m).link,T=f.deep_link_id?decodeURIComponent(f.deep_link_id):void 0;return qt(T).link||T||E||m||_}(f);if(T.includes("/__/auth/callback")){const P=qt(T),K=P.firebaseError?function Df(_){try{return JSON.parse(_)}catch(f){return null}}(decodeURIComponent(P.firebaseError)):null,pe=null===(E=null===(m=null==K?void 0:K.code)||void 0===m?void 0:m.split("auth/"))||void 0===E?void 0:E[1],Le=pe?we(pe):null;return Le?{type:_.type,eventId:_.eventId,tenantId:_.tenantId,error:Le,urlResponse:null,sessionId:null,postBody:null}:{type:_.type,eventId:_.eventId,tenantId:_.tenantId,sessionId:_.sessionId,urlResponse:T,postBody:null}}return null}(Tn,dt.url)),m.onEvent(gi||rl())});return function(Tn){return _t.apply(this,arguments)}}();void 0!==E&&"function"==typeof E.subscribe&&E.subscribe(null,pe);const Le=T,Ye=`${P.packageName.toLowerCase()}://`;zs().handleOpenURL=function(){var _t=(0,h.Z)(function*(dt){if(dt.toLowerCase().startsWith(Ye)&&pe({url:dt}),"function"==typeof Le)try{Le(dt)}catch(Tn){console.error(Tn)}});return function(dt){return _t.apply(this,arguments)}}()}}),this.underlyingResolver=null,this._redirectPersistence=bn,this._completeRedirectFn=$r,this._overrideRedirectResult=C}_initialize(f){var m=this;return(0,h.Z)(function*(){return yield m.selectUnderlyingResolver(),m.assertedUnderlyingResolver._initialize(f)})()}_openPopup(f,m,E,T){var P=this;return(0,h.Z)(function*(){return yield P.selectUnderlyingResolver(),P.assertedUnderlyingResolver._openPopup(f,m,E,T)})()}_openRedirect(f,m,E,T){var P=this;return(0,h.Z)(function*(){return yield P.selectUnderlyingResolver(),P.assertedUnderlyingResolver._openRedirect(f,m,E,T)})()}_isIframeWebStorageSupported(f,m){this.assertedUnderlyingResolver._isIframeWebStorageSupported(f,m)}_originValidation(f){return this.assertedUnderlyingResolver._originValidation(f)}get _shouldInitProactively(){return $d()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return p_(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var f=this;return(0,h.Z)(function*(){if(f.underlyingResolver)return;const m=yield function f_(){return ac.apply(this,arguments)}();f.underlyingResolver=m?f.cordovaResolver:f.browserResolver})()}}function Wg(_){return _.unwrap()}function Gd(_){return Kg(_)}function Kg(_){const{_tokenResponse:f}=_ instanceof O.ZR?_.customData:_;if(!f)return null;if(!(_ instanceof O.ZR)&&"temporaryProof"in f&&"phoneNumber"in f)return yo.credentialFromResult(_);const m=f.providerId;if(!m||"password"===m)return null;let E;switch(m){case"google.com":E=md;break;case"facebook.com":E=$o;break;case"github.com":E=lf;break;case"twitter.com":E=_d;break;default:const{oauthIdToken:T,oauthAccessToken:P,oauthTokenSecret:K,pendingToken:pe,nonce:Le}=f;return P||K||T||pe?pe?m.startsWith("saml.")?ro._create(m,pe):as._fromParams({providerId:m,signInMethod:m,pendingToken:pe,idToken:T,accessToken:P}):new $i(m).credential({idToken:T,accessToken:P,rawNonce:Le}):null}return _ instanceof O.ZR?E.credentialFromError(_):E.credentialFromResult(_)}function pi(_,f){return f.catch(m=>{throw m instanceof O.ZR&&function m_(_,f){var m;const E=null===(m=f.customData)||void 0===m?void 0:m._tokenResponse;if("auth/multi-factor-auth-required"===f.code)f.resolver=new Zg(_,function Qn(_,f){var m;const E=(0,O.m9)(_),T=f;return $(f.customData.operationType,E,"argument-error"),$(null===(m=T.customData._serverResponse)||void 0===m?void 0:m.mfaPendingCredential,E,"argument-error"),ea._fromError(E,T)}(_,f));else if(E){const T=Kg(f),P=f;T&&(P.credential=T,P.tenantId=E.tenantId||void 0,P.email=E.email||void 0,P.phoneNumber=E.phoneNumber||void 0)}}(_,m),m}).then(m=>{const T=m.user;return{operationType:m.operationType,credential:Gd(m),additionalUserInfo:Ki(m),user:Ws.getOrCreate(T)}})}function Mf(_,f){return xf.apply(this,arguments)}function xf(){return(xf=(0,h.Z)(function*(_,f){const m=yield f;return{verificationId:m.verificationId,confirm:E=>pi(_,m.confirm(E))}})).apply(this,arguments)}class Zg{constructor(f,m){this.resolver=m,this.auth=function g_(_){return _.wrapped()}(f)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(f){return pi(Wg(this.auth),this.resolver.resolveSignIn(f))}}class Ws{constructor(f){this._delegate=f,this.multiFactor=function ju(_){const f=(0,O.m9)(_);return Bu.has(f)||Bu.set(f,Dd._fromUser(f)),Bu.get(f)}(f)}static getOrCreate(f){return Ws.USER_MAP.has(f)||Ws.USER_MAP.set(f,new Ws(f)),Ws.USER_MAP.get(f)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(f){return this._delegate.getIdTokenResult(f)}getIdToken(f){return this._delegate.getIdToken(f)}linkAndRetrieveDataWithCredential(f){return this.linkWithCredential(f)}linkWithCredential(f){var m=this;return(0,h.Z)(function*(){return pi(m.auth,or(m._delegate,f))})()}linkWithPhoneNumber(f,m){var E=this;return(0,h.Z)(function*(){return Mf(E.auth,function Qy(_,f,m){return Xl.apply(this,arguments)}(E._delegate,f,m))})()}linkWithPopup(f){var m=this;return(0,h.Z)(function*(){return pi(m.auth,function Rd(_,f,m){return Ji.apply(this,arguments)}(m._delegate,f,fi))})()}linkWithRedirect(f){var m=this;return(0,h.Z)(function*(){return yield il(lt(m.auth)),function jt(_,f,m){return function wt(_,f,m){return _r.apply(this,arguments)}(_,f,m)}(m._delegate,f,fi)})()}reauthenticateAndRetrieveDataWithCredential(f){return this.reauthenticateWithCredential(f)}reauthenticateWithCredential(f){var m=this;return(0,h.Z)(function*(){return pi(m.auth,us(m._delegate,f))})()}reauthenticateWithPhoneNumber(f,m){return Mf(this.auth,function ui(_,f,m){return Hr.apply(this,arguments)}(this._delegate,f,m))}reauthenticateWithPopup(f){return pi(this.auth,function xi(_,f,m){return Wu.apply(this,arguments)}(this._delegate,f,fi))}reauthenticateWithRedirect(f){var m=this;return(0,h.Z)(function*(){return yield il(lt(m.auth)),function Ve(_,f,m){return function Ct(_,f,m){return ht.apply(this,arguments)}(_,f,m)}(m._delegate,f,fi)})()}sendEmailVerification(f){return function ql(_,f){return Lu.apply(this,arguments)}(this._delegate,f)}unlink(f){var m=this;return(0,h.Z)(function*(){return yield function cf(_,f){return nn.apply(this,arguments)}(m._delegate,f),m})()}updateEmail(f){return function Eg(_,f){return Qo((0,O.m9)(_),f,null)}(this._delegate,f)}updatePassword(f){return function Kl(_,f){return Qo((0,O.m9)(_),null,f)}(this._delegate,f)}updatePhoneNumber(f){return function mo(_,f){return ca.apply(this,arguments)}(this._delegate,f)}updateProfile(f){return function Wl(_,f){return Ga.apply(this,arguments)}(this._delegate,f)}verifyBeforeUpdateEmail(f,m){return function zl(_,f,m){return Vu.apply(this,arguments)}(this._delegate,f,m)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}Ws.USER_MAP=new WeakMap;const uc=$;let Yg=(()=>{class _{constructor(m,E){if(this.app=m,E.isInitialized())return this._delegate=E.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:T}=m.options;uc(T,"invalid-api-key",{appName:m.name}),uc(T,"invalid-api-key",{appName:m.name});const P="undefined"!=typeof window?fi:void 0;this._delegate=E.initialize({options:{persistence:y_(T,m.name),popupRedirectResolver:P}}),this._delegate._updateErrorMap(Ne),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?Ws.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(m){this._delegate.languageCode=m}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(m){this._delegate.tenantId=m}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(m,E){!function Vr(_,f,m){const E=lt(_);$(E._canInitEmulator,E,"emulator-config-failed"),$(/^https?:\/\//.test(f),E,"invalid-emulator-scheme");const T=!!(null==m?void 0:m.disableWarnings),P=Vi(f),{host:K,port:pe}=function Ln(_){const f=Vi(_),m=/(\/\/)?([^?#/]+)/.exec(_.substr(f.length));if(!m)return{host:"",port:null};const E=m[2].split("@").pop()||"",T=/^(\[[^\]]+\])(:|$)/.exec(E);if(T){const P=T[1];return{host:P,port:Ui(E.substr(P.length+1))}}{const[P,K]=E.split(":");return{host:P,port:Ui(K)}}}(f);E.config.emulator={url:`${P}//${K}${null===pe?"":`:${pe}`}/`},E.settings.appVerificationDisabledForTesting=!0,E.emulatorConfig=Object.freeze({host:K,port:pe,protocol:P.replace(":",""),options:Object.freeze({disableWarnings:T})}),T||function fn(){function _(){const f=document.createElement("p"),m=f.style;f.innerText="Running in emulator mode. Do not use with production credentials.",m.position="fixed",m.width="100%",m.backgroundColor="#ffffff",m.border=".1em solid #000000",m.color="#b50000",m.bottom="0px",m.left="0px",m.margin="0px",m.zIndex="10000",m.textAlign="center",f.classList.add("firebase-emulator-warning"),document.body.appendChild(f)}"undefined"!=typeof console&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),"undefined"!=typeof window&&"undefined"!=typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",_):_())}()}(this._delegate,m,E)}applyActionCode(m){return function Se(_,f){return Ft.apply(this,arguments)}(this._delegate,m)}checkActionCode(m){return Ou(this._delegate,m)}confirmPasswordReset(m,E){return function Hl(_,f,m){return $l.apply(this,arguments)}(this._delegate,m,E)}createUserWithEmailAndPassword(m,E){var T=this;return(0,h.Z)(function*(){return pi(T._delegate,function ii(_,f,m){return Ba.apply(this,arguments)}(T._delegate,m,E))})()}fetchProvidersForEmail(m){return this.fetchSignInMethodsForEmail(m)}fetchSignInMethodsForEmail(m){return function Ls(_,f){return Si.apply(this,arguments)}(this._delegate,m)}isSignInWithEmailLink(m){return function ja(_,f){const m=Ru.parseLink(f);return"EMAIL_SIGNIN"===(null==m?void 0:m.operation)}(0,m)}getRedirectResult(){var m=this;return(0,h.Z)(function*(){uc(ou(),m._delegate,"operation-not-supported-in-this-environment");const E=yield function tr(_,f){return fs.apply(this,arguments)}(m._delegate,fi);return E?pi(m._delegate,Promise.resolve(E)):{credential:null,user:null}})()}addFrameworkForLogging(m){!function u_(_,f){lt(_)._logFramework(f)}(this._delegate,m)}onAuthStateChanged(m,E,T){const{next:P,error:K,complete:pe}=Qg(m,E,T);return this._delegate.onAuthStateChanged(P,K,pe)}onIdTokenChanged(m,E,T){const{next:P,error:K,complete:pe}=Qg(m,E,T);return this._delegate.onIdTokenChanged(P,K,pe)}sendSignInLinkToEmail(m,E){return function vg(_,f,m){return ku.apply(this,arguments)}(this._delegate,m,E)}sendPasswordResetEmail(m,E){return function jl(_,f,m){return Ua.apply(this,arguments)}(this._delegate,m,E||void 0)}setPersistence(m){var E=this;return(0,h.Z)(function*(){let T;switch(function qg(_,f){bo(Object.values(hi).includes(f),_,"invalid-persistence-type"),(0,O.b$)()?bo(f!==hi.SESSION,_,"unsupported-persistence-type"):(0,O.UG)()?bo(f===hi.NONE,_,"unsupported-persistence-type"):ur()?bo(f===hi.NONE||f===hi.LOCAL&&(0,O.hl)(),_,"unsupported-persistence-type"):bo(f===hi.NONE||Af(),_,"unsupported-persistence-type")}(E._delegate,m),m){case hi.SESSION:T=bn;break;case hi.LOCAL:T=(yield ee(js)._isAvailable())?js:si;break;case hi.NONE:T=Et;break;default:return Ae("argument-error",{appName:E._delegate.name})}return E._delegate.setPersistence(T)})()}signInAndRetrieveDataWithCredential(m){return this.signInWithCredential(m)}signInAnonymously(){return pi(this._delegate,function vd(_){return Vl.apply(this,arguments)}(this._delegate))}signInWithCredential(m){return pi(this._delegate,yn(this._delegate,m))}signInWithCustomToken(m){return pi(this._delegate,function Wo(_,f){return pt.apply(this,arguments)}(this._delegate,m))}signInWithEmailAndPassword(m,E){return pi(this._delegate,function Gl(_,f,m){return yn((0,O.m9)(_),gd.credential(f,m))}(this._delegate,m,E))}signInWithEmailLink(m,E){return pi(this._delegate,function Fu(_,f,m){return Pn.apply(this,arguments)}(this._delegate,m,E))}signInWithPhoneNumber(m,E){return Mf(this._delegate,function Jl(_,f,m){return po.apply(this,arguments)}(this._delegate,m,E))}signInWithPopup(m){var E=this;return(0,h.Z)(function*(){return uc(ou(),E._delegate,"operation-not-supported-in-this-environment"),pi(E._delegate,function xd(_,f,m){return Gs.apply(this,arguments)}(E._delegate,m,fi))})()}signInWithRedirect(m){var E=this;return(0,h.Z)(function*(){return uc(ou(),E._delegate,"operation-not-supported-in-this-environment"),yield il(E._delegate),function Y(_,f,m){return function ne(_,f,m){return me.apply(this,arguments)}(_,f,m)}(E._delegate,m,fi)})()}updateCurrentUser(m){return this._delegate.updateCurrentUser(m)}verifyPasswordResetCode(m){return function Zo(_,f){return oo.apply(this,arguments)}(this._delegate,m)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return _.Persistence=hi,_})();function Qg(_,f,m){let E=_;"function"!=typeof _&&({next:E,error:f,complete:m}=_);const T=E;return{next:K=>T(K&&Ws.getOrCreate(K)),error:f,complete:m}}function y_(_,f){const m=function au(_,f){const m=zg();if(!m)return[];const E=Bn(Gg,_,f);switch(m.getItem(E)){case hi.NONE:return[Et];case hi.LOCAL:return[js,bn];case hi.SESSION:return[bn];default:return[]}}(_,f);if("undefined"!=typeof self&&!m.includes(js)&&m.push(js),"undefined"!=typeof window)for(const E of[si,bn])m.includes(E)||m.push(E);return m.includes(Et)||m.push(Et),m}class Rf{constructor(){this.providerId="phone",this._delegate=new yo(Wg(X.Z.auth()))}static credential(f,m){return yo.credential(f,m)}verifyPhoneNumber(f,m){return this._delegate.verifyPhoneNumber(f,m)}unwrap(){return this._delegate}}Rf.PHONE_SIGN_IN_METHOD=yo.PHONE_SIGN_IN_METHOD,Rf.PROVIDER_ID=yo.PROVIDER_ID;const Jg=$;class M0{constructor(f,m,E=X.Z.app()){var T;Jg(null===(T=E.options)||void 0===T?void 0:T.apiKey,"invalid-api-key",{appName:E.name}),this._delegate=new fo(f,m,E.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function gs(_){_.INTERNAL.registerComponent(new ue.wA("auth-compat",f=>{const m=f.getProvider("app-compat").getImmediate(),E=f.getProvider("auth");return new Yg(m,E)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"}},EmailAuthProvider:gd,FacebookAuthProvider:$o,GithubAuthProvider:lf,GoogleAuthProvider:md,OAuthProvider:$i,SAMLAuthProvider:Sr,PhoneAuthProvider:Rf,PhoneMultiFactorGenerator:Ng,RecaptchaVerifier:M0,TwitterAuthProvider:_d,Auth:Yg,AuthCredential:Ti,Error:O.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),_.registerVersion("@firebase/auth-compat","0.2.14")}(X.Z)},8306:(et,be,N)=>{N.d(be,{y:()=>G});var h=N(2961),X=N(727),O=N(8822),le=N(4671);var ue=N(2416),oe=N(576),he=N(2806);let G=(()=>{class xe{constructor(Ue){Ue&&(this._subscribe=Ue)}lift(Ue){const fe=new xe;return fe.source=this,fe.operator=Ue,fe}subscribe(Ue,fe,De){const We=function ze(xe){return xe&&xe instanceof h.Lv||function te(xe){return xe&&(0,oe.m)(xe.next)&&(0,oe.m)(xe.error)&&(0,oe.m)(xe.complete)}(xe)&&(0,X.Nn)(xe)}(Ue)?Ue:new h.Hp(Ue,fe,De);return(0,he.x)(()=>{const{operator:Qe,source:Ae}=this;We.add(Qe?Qe.call(We,Ae):Ae?this._subscribe(We):this._trySubscribe(We))}),We}_trySubscribe(Ue){try{return this._subscribe(Ue)}catch(fe){Ue.error(fe)}}forEach(Ue,fe){return new(fe=H(fe))((De,We)=>{const Qe=new h.Hp({next:Ae=>{try{Ue(Ae)}catch(we){We(we),Qe.unsubscribe()}},error:We,complete:De});this.subscribe(Qe)})}_subscribe(Ue){var fe;return null===(fe=this.source)||void 0===fe?void 0:fe.subscribe(Ue)}[O.L](){return this}pipe(...Ue){return function ge(xe){return 0===xe.length?le.y:1===xe.length?xe[0]:function(Ue){return xe.reduce((fe,De)=>De(fe),Ue)}}(Ue)(this)}toPromise(Ue){return new(Ue=H(Ue))((fe,De)=>{let We;this.subscribe(Qe=>We=Qe,Qe=>De(Qe),()=>fe(We))})}}return xe.create=Ne=>new xe(Ne),xe})();function H(xe){var Ne;return null!==(Ne=null!=xe?xe:ue.v.Promise)&&void 0!==Ne?Ne:Promise}},7579:(et,be,N)=>{N.d(be,{x:()=>ue});var h=N(8306),X=N(727);const le=(0,N(3888).d)(he=>function(){he(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var re=N(8737),ge=N(2806);let ue=(()=>{class he extends h.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(H){const te=new oe(this,this);return te.operator=H,te}_throwIfClosed(){if(this.closed)throw new le}next(H){(0,ge.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const te of this.currentObservers)te.next(H)}})}error(H){(0,ge.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=H;const{observers:te}=this;for(;te.length;)te.shift().error(H)}})}complete(){(0,ge.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:H}=this;for(;H.length;)H.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var H;return(null===(H=this.observers)||void 0===H?void 0:H.length)>0}_trySubscribe(H){return this._throwIfClosed(),super._trySubscribe(H)}_subscribe(H){return this._throwIfClosed(),this._checkFinalizedStatuses(H),this._innerSubscribe(H)}_innerSubscribe(H){const{hasError:te,isStopped:ze,observers:xe}=this;return te||ze?X.Lc:(this.currentObservers=null,xe.push(H),new X.w0(()=>{this.currentObservers=null,(0,re.P)(xe,H)}))}_checkFinalizedStatuses(H){const{hasError:te,thrownError:ze,isStopped:xe}=this;te?H.error(ze):xe&&H.complete()}asObservable(){const H=new h.y;return H.source=this,H}}return he.create=(G,H)=>new oe(G,H),he})();class oe extends ue{constructor(G,H){super(),this.destination=G,this.source=H}next(G){var H,te;null===(te=null===(H=this.destination)||void 0===H?void 0:H.next)||void 0===te||te.call(H,G)}error(G){var H,te;null===(te=null===(H=this.destination)||void 0===H?void 0:H.error)||void 0===te||te.call(H,G)}complete(){var G,H;null===(H=null===(G=this.destination)||void 0===G?void 0:G.complete)||void 0===H||H.call(G)}_subscribe(G){var H,te;return null!==(te=null===(H=this.source)||void 0===H?void 0:H.subscribe(G))&&void 0!==te?te:X.Lc}}},2961:(et,be,N)=>{N.d(be,{Hp:()=>Ue,Lv:()=>te});var h=N(576),X=N(727),O=N(2416),le=N(7849);function re(){}const ge=he("C",void 0,void 0);function he(Ae,we,Ie){return{kind:Ae,value:we,error:Ie}}var G=N(3410),H=N(2806);class te extends X.w0{constructor(we){super(),this.isStopped=!1,we?(this.destination=we,(0,X.Nn)(we)&&we.add(this)):this.destination=Qe}static create(we,Ie,je){return new Ue(we,Ie,je)}next(we){this.isStopped?We(function oe(Ae){return he("N",Ae,void 0)}(we),this):this._next(we)}error(we){this.isStopped?We(function ue(Ae){return he("E",void 0,Ae)}(we),this):(this.isStopped=!0,this._error(we))}complete(){this.isStopped?We(ge,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(we){this.destination.next(we)}_error(we){try{this.destination.error(we)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const ze=Function.prototype.bind;function xe(Ae,we){return ze.call(Ae,we)}class Ne{constructor(we){this.partialObserver=we}next(we){const{partialObserver:Ie}=this;if(Ie.next)try{Ie.next(we)}catch(je){fe(je)}}error(we){const{partialObserver:Ie}=this;if(Ie.error)try{Ie.error(we)}catch(je){fe(je)}else fe(we)}complete(){const{partialObserver:we}=this;if(we.complete)try{we.complete()}catch(Ie){fe(Ie)}}}class Ue extends te{constructor(we,Ie,je){let Be;if(super(),(0,h.m)(we)||!we)Be={next:null!=we?we:void 0,error:null!=Ie?Ie:void 0,complete:null!=je?je:void 0};else{let $;this&&O.v.useDeprecatedNextContext?($=Object.create(we),$.unsubscribe=()=>this.unsubscribe(),Be={next:we.next&&xe(we.next,$),error:we.error&&xe(we.error,$),complete:we.complete&&xe(we.complete,$)}):Be=we}this.destination=new Ne(Be)}}function fe(Ae){O.v.useDeprecatedSynchronousErrorHandling?(0,H.O)(Ae):(0,le.h)(Ae)}function We(Ae,we){const{onStoppedNotification:Ie}=O.v;Ie&&G.z.setTimeout(()=>Ie(Ae,we))}const Qe={closed:!0,next:re,error:function De(Ae){throw Ae},complete:re}},727:(et,be,N)=>{N.d(be,{Lc:()=>ge,w0:()=>re,Nn:()=>ue});var h=N(576);const O=(0,N(3888).d)(he=>function(H){he(this),this.message=H?`${H.length} errors occurred during unsubscription:\n${H.map((te,ze)=>`${ze+1}) ${te.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=H});var le=N(8737);class re{constructor(G){this.initialTeardown=G,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let G;if(!this.closed){this.closed=!0;const{_parentage:H}=this;if(H)if(this._parentage=null,Array.isArray(H))for(const xe of H)xe.remove(this);else H.remove(this);const{initialTeardown:te}=this;if((0,h.m)(te))try{te()}catch(xe){G=xe instanceof O?xe.errors:[xe]}const{_finalizers:ze}=this;if(ze){this._finalizers=null;for(const xe of ze)try{oe(xe)}catch(Ne){G=null!=G?G:[],Ne instanceof O?G=[...G,...Ne.errors]:G.push(Ne)}}if(G)throw new O(G)}}add(G){var H;if(G&&G!==this)if(this.closed)oe(G);else{if(G instanceof re){if(G.closed||G._hasParent(this))return;G._addParent(this)}(this._finalizers=null!==(H=this._finalizers)&&void 0!==H?H:[]).push(G)}}_hasParent(G){const{_parentage:H}=this;return H===G||Array.isArray(H)&&H.includes(G)}_addParent(G){const{_parentage:H}=this;this._parentage=Array.isArray(H)?(H.push(G),H):H?[H,G]:G}_removeParent(G){const{_parentage:H}=this;H===G?this._parentage=null:Array.isArray(H)&&(0,le.P)(H,G)}remove(G){const{_finalizers:H}=this;H&&(0,le.P)(H,G),G instanceof re&&G._removeParent(this)}}re.EMPTY=(()=>{const he=new re;return he.closed=!0,he})();const ge=re.EMPTY;function ue(he){return he instanceof re||he&&"closed"in he&&(0,h.m)(he.remove)&&(0,h.m)(he.add)&&(0,h.m)(he.unsubscribe)}function oe(he){(0,h.m)(he)?he():he.unsubscribe()}},2416:(et,be,N)=>{N.d(be,{v:()=>h});const h={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},515:(et,be,N)=>{N.d(be,{E:()=>X});const X=new(N(8306).y)(re=>re.complete())},8996:(et,be,N)=>{N.d(be,{D:()=>we});var h=N(8421),X=N(5363),O=N(9468),ge=N(8306),oe=N(2202),he=N(576),G=N(9672);function te(Ie,je){if(!Ie)throw new Error("Iterable cannot be null");return new ge.y(Be=>{(0,G.f)(Be,je,()=>{const $=Ie[Symbol.asyncIterator]();(0,G.f)(Be,je,()=>{$.next().then(ve=>{ve.done?Be.complete():Be.next(ve.value)})},0,!0)})})}var ze=N(3670),xe=N(8239),Ne=N(1144),Ue=N(6495),fe=N(2206),De=N(4532),We=N(3260);function we(Ie,je){return je?function Ae(Ie,je){if(null!=Ie){if((0,ze.c)(Ie))return function le(Ie,je){return(0,h.Xf)(Ie).pipe((0,O.R)(je),(0,X.Q)(je))}(Ie,je);if((0,Ne.z)(Ie))return function ue(Ie,je){return new ge.y(Be=>{let $=0;return je.schedule(function(){$===Ie.length?Be.complete():(Be.next(Ie[$++]),Be.closed||this.schedule())})})}(Ie,je);if((0,xe.t)(Ie))return function re(Ie,je){return(0,h.Xf)(Ie).pipe((0,O.R)(je),(0,X.Q)(je))}(Ie,je);if((0,fe.D)(Ie))return te(Ie,je);if((0,Ue.T)(Ie))return function H(Ie,je){return new ge.y(Be=>{let $;return(0,G.f)(Be,je,()=>{$=Ie[oe.h](),(0,G.f)(Be,je,()=>{let ve,Z;try{({value:ve,done:Z}=$.next())}catch(ie){return void Be.error(ie)}Z?Be.complete():Be.next(ve)},0,!0)}),()=>(0,he.m)(null==$?void 0:$.return)&&$.return()})}(Ie,je);if((0,We.L)(Ie))return function Qe(Ie,je){return te((0,We.Q)(Ie),je)}(Ie,je)}throw(0,De.z)(Ie)}(Ie,je):(0,h.Xf)(Ie)}},8421:(et,be,N)=>{N.d(be,{Xf:()=>ze});var h=N(655),X=N(1144),O=N(8239),le=N(8306),re=N(3670),ge=N(2206),ue=N(4532),oe=N(6495),he=N(3260),G=N(576),H=N(7849),te=N(8822);function ze(Ae){if(Ae instanceof le.y)return Ae;if(null!=Ae){if((0,re.c)(Ae))return function xe(Ae){return new le.y(we=>{const Ie=Ae[te.L]();if((0,G.m)(Ie.subscribe))return Ie.subscribe(we);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(Ae);if((0,X.z)(Ae))return function Ne(Ae){return new le.y(we=>{for(let Ie=0;Ie<Ae.length&&!we.closed;Ie++)we.next(Ae[Ie]);we.complete()})}(Ae);if((0,O.t)(Ae))return function Ue(Ae){return new le.y(we=>{Ae.then(Ie=>{we.closed||(we.next(Ie),we.complete())},Ie=>we.error(Ie)).then(null,H.h)})}(Ae);if((0,ge.D)(Ae))return De(Ae);if((0,oe.T)(Ae))return function fe(Ae){return new le.y(we=>{for(const Ie of Ae)if(we.next(Ie),we.closed)return;we.complete()})}(Ae);if((0,he.L)(Ae))return function We(Ae){return De((0,he.Q)(Ae))}(Ae)}throw(0,ue.z)(Ae)}function De(Ae){return new le.y(we=>{(function Qe(Ae,we){var Ie,je,Be,$;return(0,h.mG)(this,void 0,void 0,function*(){try{for(Ie=(0,h.KL)(Ae);!(je=yield Ie.next()).done;)if(we.next(je.value),we.closed)return}catch(ve){Be={error:ve}}finally{try{je&&!je.done&&($=Ie.return)&&(yield $.call(Ie))}finally{if(Be)throw Be.error}}we.complete()})})(Ae,we).catch(Ie=>we.error(Ie))})}},6451:(et,be,N)=>{N.d(be,{T:()=>ge});var h=N(8189),X=N(8421),O=N(515),le=N(7669),re=N(8996);function ge(...ue){const oe=(0,le.yG)(ue),he=(0,le._6)(ue,1/0),G=ue;return G.length?1===G.length?(0,X.Xf)(G[0]):(0,h.J)(he)((0,re.D)(G,oe)):O.E}},5403:(et,be,N)=>{N.d(be,{x:()=>X});var h=N(2961);function X(le,re,ge,ue,oe){return new O(le,re,ge,ue,oe)}class O extends h.Lv{constructor(re,ge,ue,oe,he,G){super(re),this.onFinalize=he,this.shouldUnsubscribe=G,this._next=ge?function(H){try{ge(H)}catch(te){re.error(te)}}:super._next,this._error=oe?function(H){try{oe(H)}catch(te){re.error(te)}finally{this.unsubscribe()}}:super._error,this._complete=ue?function(){try{ue()}catch(H){re.error(H)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var re;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:ge}=this;super.unsubscribe(),!ge&&(null===(re=this.onFinalize)||void 0===re||re.call(this))}}}},4004:(et,be,N)=>{N.d(be,{U:()=>O});var h=N(4482),X=N(5403);function O(le,re){return(0,h.e)((ge,ue)=>{let oe=0;ge.subscribe((0,X.x)(ue,he=>{ue.next(le.call(re,he,oe++))}))})}},8189:(et,be,N)=>{N.d(be,{J:()=>O});var h=N(5577),X=N(4671);function O(le=1/0){return(0,h.z)(X.y,le)}},5577:(et,be,N)=>{N.d(be,{z:()=>oe});var h=N(4004),X=N(8421),O=N(4482),le=N(9672),re=N(5403),ue=N(576);function oe(he,G,H=1/0){return(0,ue.m)(G)?oe((te,ze)=>(0,h.U)((xe,Ne)=>G(te,xe,ze,Ne))((0,X.Xf)(he(te,ze))),H):("number"==typeof G&&(H=G),(0,O.e)((te,ze)=>function ge(he,G,H,te,ze,xe,Ne,Ue){const fe=[];let De=0,We=0,Qe=!1;const Ae=()=>{Qe&&!fe.length&&!De&&G.complete()},we=je=>De<te?Ie(je):fe.push(je),Ie=je=>{xe&&G.next(je),De++;let Be=!1;(0,X.Xf)(H(je,We++)).subscribe((0,re.x)(G,$=>{null==ze||ze($),xe?we($):G.next($)},()=>{Be=!0},void 0,()=>{if(Be)try{for(De--;fe.length&&De<te;){const $=fe.shift();Ne?(0,le.f)(G,Ne,()=>Ie($)):Ie($)}Ae()}catch($){G.error($)}}))};return he.subscribe((0,re.x)(G,we,()=>{Qe=!0,Ae()})),()=>{null==Ue||Ue()}}(te,ze,he,H)))}},5363:(et,be,N)=>{N.d(be,{Q:()=>le});var h=N(9672),X=N(4482),O=N(5403);function le(re,ge=0){return(0,X.e)((ue,oe)=>{ue.subscribe((0,O.x)(oe,he=>(0,h.f)(oe,re,()=>oe.next(he),ge),()=>(0,h.f)(oe,re,()=>oe.complete(),ge),he=>(0,h.f)(oe,re,()=>oe.error(he),ge)))})}},3099:(et,be,N)=>{N.d(be,{B:()=>ge});var h=N(8996),X=N(5698),O=N(7579),le=N(2961),re=N(4482);function ge(oe={}){const{connector:he=(()=>new O.x),resetOnError:G=!0,resetOnComplete:H=!0,resetOnRefCountZero:te=!0}=oe;return ze=>{let xe=null,Ne=null,Ue=null,fe=0,De=!1,We=!1;const Qe=()=>{null==Ne||Ne.unsubscribe(),Ne=null},Ae=()=>{Qe(),xe=Ue=null,De=We=!1},we=()=>{const Ie=xe;Ae(),null==Ie||Ie.unsubscribe()};return(0,re.e)((Ie,je)=>{fe++,!We&&!De&&Qe();const Be=Ue=null!=Ue?Ue:he();je.add(()=>{fe--,0===fe&&!We&&!De&&(Ne=ue(we,te))}),Be.subscribe(je),xe||(xe=new le.Hp({next:$=>Be.next($),error:$=>{We=!0,Qe(),Ne=ue(Ae,G,$),Be.error($)},complete:()=>{De=!0,Qe(),Ne=ue(Ae,H),Be.complete()}}),(0,h.D)(Ie).subscribe(xe))})(ze)}}function ue(oe,he,...G){return!0===he?(oe(),null):!1===he?null:he(...G).pipe((0,X.q)(1)).subscribe(()=>oe())}},9468:(et,be,N)=>{N.d(be,{R:()=>X});var h=N(4482);function X(O,le=0){return(0,h.e)((re,ge)=>{ge.add(O.schedule(()=>re.subscribe(ge),le))})}},5698:(et,be,N)=>{N.d(be,{q:()=>le});var h=N(515),X=N(4482),O=N(5403);function le(re){return re<=0?()=>h.E:(0,X.e)((ge,ue)=>{let oe=0;ge.subscribe((0,O.x)(ue,he=>{++oe<=re&&(ue.next(he),re<=oe&&ue.complete())}))})}},8505:(et,be,N)=>{N.d(be,{b:()=>re});var h=N(576),X=N(4482),O=N(5403),le=N(4671);function re(ge,ue,oe){const he=(0,h.m)(ge)||ue||oe?{next:ge,error:ue,complete:oe}:ge;return he?(0,X.e)((G,H)=>{var te;null===(te=he.subscribe)||void 0===te||te.call(he);let ze=!0;G.subscribe((0,O.x)(H,xe=>{var Ne;null===(Ne=he.next)||void 0===Ne||Ne.call(he,xe),H.next(xe)},()=>{var xe;ze=!1,null===(xe=he.complete)||void 0===xe||xe.call(he),H.complete()},xe=>{var Ne;ze=!1,null===(Ne=he.error)||void 0===Ne||Ne.call(he,xe),H.error(xe)},()=>{var xe,Ne;ze&&(null===(xe=he.unsubscribe)||void 0===xe||xe.call(he)),null===(Ne=he.finalize)||void 0===Ne||Ne.call(he)}))}):le.y}},4408:(et,be,N)=>{N.d(be,{o:()=>re});var h=N(727);class X extends h.w0{constructor(ue,oe){super()}schedule(ue,oe=0){return this}}const O={setInterval(ge,ue,...oe){const{delegate:he}=O;return(null==he?void 0:he.setInterval)?he.setInterval(ge,ue,...oe):setInterval(ge,ue,...oe)},clearInterval(ge){const{delegate:ue}=O;return((null==ue?void 0:ue.clearInterval)||clearInterval)(ge)},delegate:void 0};var le=N(8737);class re extends X{constructor(ue,oe){super(ue,oe),this.scheduler=ue,this.work=oe,this.pending=!1}schedule(ue,oe=0){if(this.closed)return this;this.state=ue;const he=this.id,G=this.scheduler;return null!=he&&(this.id=this.recycleAsyncId(G,he,oe)),this.pending=!0,this.delay=oe,this.id=this.id||this.requestAsyncId(G,this.id,oe),this}requestAsyncId(ue,oe,he=0){return O.setInterval(ue.flush.bind(ue,this),he)}recycleAsyncId(ue,oe,he=0){if(null!=he&&this.delay===he&&!1===this.pending)return oe;O.clearInterval(oe)}execute(ue,oe){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const he=this._execute(ue,oe);if(he)return he;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(ue,oe){let G,he=!1;try{this.work(ue)}catch(H){he=!0,G=H||new Error("Scheduled action threw falsy error")}if(he)return this.unsubscribe(),G}unsubscribe(){if(!this.closed){const{id:ue,scheduler:oe}=this,{actions:he}=oe;this.work=this.state=this.scheduler=null,this.pending=!1,(0,le.P)(he,this),null!=ue&&(this.id=this.recycleAsyncId(oe,ue,null)),this.delay=null,super.unsubscribe()}}}},7565:(et,be,N)=>{N.d(be,{v:()=>O});var h=N(6063);class X{constructor(re,ge=X.now){this.schedulerActionCtor=re,this.now=ge}schedule(re,ge=0,ue){return new this.schedulerActionCtor(this,re).schedule(ue,ge)}}X.now=h.l.now;class O extends X{constructor(re,ge=X.now){super(re,ge),this.actions=[],this._active=!1,this._scheduled=void 0}flush(re){const{actions:ge}=this;if(this._active)return void ge.push(re);let ue;this._active=!0;do{if(ue=re.execute(re.state,re.delay))break}while(re=ge.shift());if(this._active=!1,ue){for(;re=ge.shift();)re.unsubscribe();throw ue}}}},4986:(et,be,N)=>{N.d(be,{z:()=>O});var h=N(4408);const O=new(N(7565).v)(h.o)},6063:(et,be,N)=>{N.d(be,{l:()=>h});const h={now:()=>(h.delegate||Date).now(),delegate:void 0}},3410:(et,be,N)=>{N.d(be,{z:()=>h});const h={setTimeout(X,O,...le){const{delegate:re}=h;return(null==re?void 0:re.setTimeout)?re.setTimeout(X,O,...le):setTimeout(X,O,...le)},clearTimeout(X){const{delegate:O}=h;return((null==O?void 0:O.clearTimeout)||clearTimeout)(X)},delegate:void 0}},2202:(et,be,N)=>{N.d(be,{h:()=>X});const X=function h(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},8822:(et,be,N)=>{N.d(be,{L:()=>h});const h="function"==typeof Symbol&&Symbol.observable||"@@observable"},7669:(et,be,N)=>{N.d(be,{_6:()=>ge,jO:()=>le,yG:()=>re});var h=N(576);function O(ue){return ue[ue.length-1]}function le(ue){return(0,h.m)(O(ue))?ue.pop():void 0}function re(ue){return function X(ue){return ue&&(0,h.m)(ue.schedule)}(O(ue))?ue.pop():void 0}function ge(ue,oe){return"number"==typeof O(ue)?ue.pop():oe}},8737:(et,be,N)=>{function h(X,O){if(X){const le=X.indexOf(O);0<=le&&X.splice(le,1)}}N.d(be,{P:()=>h})},3888:(et,be,N)=>{function h(X){const le=X(re=>{Error.call(re),re.stack=(new Error).stack});return le.prototype=Object.create(Error.prototype),le.prototype.constructor=le,le}N.d(be,{d:()=>h})},2806:(et,be,N)=>{N.d(be,{O:()=>le,x:()=>O});var h=N(2416);let X=null;function O(re){if(h.v.useDeprecatedSynchronousErrorHandling){const ge=!X;if(ge&&(X={errorThrown:!1,error:null}),re(),ge){const{errorThrown:ue,error:oe}=X;if(X=null,ue)throw oe}}else re()}function le(re){h.v.useDeprecatedSynchronousErrorHandling&&X&&(X.errorThrown=!0,X.error=re)}},9672:(et,be,N)=>{function h(X,O,le,re=0,ge=!1){const ue=O.schedule(function(){le(),ge?X.add(this.schedule(null,re)):this.unsubscribe()},re);if(X.add(ue),!ge)return ue}N.d(be,{f:()=>h})},4671:(et,be,N)=>{function h(X){return X}N.d(be,{y:()=>h})},1144:(et,be,N)=>{N.d(be,{z:()=>h});const h=X=>X&&"number"==typeof X.length&&"function"!=typeof X},2206:(et,be,N)=>{N.d(be,{D:()=>X});var h=N(576);function X(O){return Symbol.asyncIterator&&(0,h.m)(null==O?void 0:O[Symbol.asyncIterator])}},576:(et,be,N)=>{function h(X){return"function"==typeof X}N.d(be,{m:()=>h})},3670:(et,be,N)=>{N.d(be,{c:()=>O});var h=N(8822),X=N(576);function O(le){return(0,X.m)(le[h.L])}},6495:(et,be,N)=>{N.d(be,{T:()=>O});var h=N(2202),X=N(576);function O(le){return(0,X.m)(null==le?void 0:le[h.h])}},8239:(et,be,N)=>{N.d(be,{t:()=>X});var h=N(576);function X(O){return(0,h.m)(null==O?void 0:O.then)}},3260:(et,be,N)=>{N.d(be,{L:()=>le,Q:()=>O});var h=N(655),X=N(576);function O(re){return(0,h.FC)(this,arguments,function*(){const ue=re.getReader();try{for(;;){const{value:oe,done:he}=yield(0,h.qq)(ue.read());if(he)return yield(0,h.qq)(void 0);yield yield(0,h.qq)(oe)}}finally{ue.releaseLock()}})}function le(re){return(0,X.m)(null==re?void 0:re.getReader)}},4482:(et,be,N)=>{N.d(be,{A:()=>X,e:()=>O});var h=N(576);function X(le){return(0,h.m)(null==le?void 0:le.lift)}function O(le){return re=>{if(X(re))return re.lift(function(ge){try{return le(ge,this)}catch(ue){this.error(ue)}});throw new TypeError("Unable to lift unknown Observable type")}}},7849:(et,be,N)=>{N.d(be,{h:()=>O});var h=N(2416),X=N(3410);function O(le){X.z.setTimeout(()=>{const{onUnhandledError:re}=h.v;if(!re)throw le;re(le)})}},4532:(et,be,N)=>{function h(X){return new TypeError(`You provided ${null!==X&&"object"==typeof X?"an invalid object":`'${X}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}N.d(be,{z:()=>h})},655:(et,be,N)=>{function le(Z,ie){var ee={};for(var ye in Z)Object.prototype.hasOwnProperty.call(Z,ye)&&ie.indexOf(ye)<0&&(ee[ye]=Z[ye]);if(null!=Z&&"function"==typeof Object.getOwnPropertySymbols){var ae=0;for(ye=Object.getOwnPropertySymbols(Z);ae<ye.length;ae++)ie.indexOf(ye[ae])<0&&Object.prototype.propertyIsEnumerable.call(Z,ye[ae])&&(ee[ye[ae]]=Z[ye[ae]])}return ee}function oe(Z,ie,ee,ye){return new(ee||(ee=Promise))(function(Oe,ct){function $t(en){try{Je(ye.next(en))}catch(Mn){ct(Mn)}}function Ut(en){try{Je(ye.throw(en))}catch(Mn){ct(Mn)}}function Je(en){en.done?Oe(en.value):function ae(Oe){return Oe instanceof ee?Oe:new ee(function(ct){ct(Oe)})}(en.value).then($t,Ut)}Je((ye=ye.apply(Z,ie||[])).next())})}function fe(Z){return this instanceof fe?(this.v=Z,this):new fe(Z)}function De(Z,ie,ee){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var ae,ye=ee.apply(Z,ie||[]),Oe=[];return ae={},ct("next"),ct("throw"),ct("return"),ae[Symbol.asyncIterator]=function(){return this},ae;function ct(on){ye[on]&&(ae[on]=function(Qt){return new Promise(function(Dr,zt){Oe.push([on,Qt,Dr,zt])>1||$t(on,Qt)})})}function $t(on,Qt){try{!function Ut(on){on.value instanceof fe?Promise.resolve(on.value.v).then(Je,en):Mn(Oe[0][2],on)}(ye[on](Qt))}catch(Dr){Mn(Oe[0][3],Dr)}}function Je(on){$t("next",on)}function en(on){$t("throw",on)}function Mn(on,Qt){on(Qt),Oe.shift(),Oe.length&&$t(Oe[0][0],Oe[0][1])}}function Qe(Z){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var ee,ie=Z[Symbol.asyncIterator];return ie?ie.call(Z):(Z=function te(Z){var ie="function"==typeof Symbol&&Symbol.iterator,ee=ie&&Z[ie],ye=0;if(ee)return ee.call(Z);if(Z&&"number"==typeof Z.length)return{next:function(){return Z&&ye>=Z.length&&(Z=void 0),{value:Z&&Z[ye++],done:!Z}}};throw new TypeError(ie?"Object is not iterable.":"Symbol.iterator is not defined.")}(Z),ee={},ye("next"),ye("throw"),ye("return"),ee[Symbol.asyncIterator]=function(){return this},ee);function ye(Oe){ee[Oe]=Z[Oe]&&function(ct){return new Promise(function($t,Ut){!function ae(Oe,ct,$t,Ut){Promise.resolve(Ut).then(function(Je){Oe({value:Je,done:$t})},ct)}($t,Ut,(ct=Z[Oe](ct)).done,ct.value)})}}}N.d(be,{FC:()=>De,KL:()=>Qe,_T:()=>le,mG:()=>oe,qq:()=>fe})},5e3:(et,be,N)=>{N.d(be,{$8M:()=>ho,$Z:()=>Gw,AFp:()=>EI,AaK:()=>oe,AsE:()=>zv,CHM:()=>Ou,CRH:()=>bE,CZH:()=>Iy,CqO:()=>Lm,EJc:()=>bI,EpF:()=>ch,F4k:()=>Ov,FYo:()=>xh,FiY:()=>li,G48:()=>NI,GfV:()=>Nr,Gpc:()=>H,JOm:()=>T,LFG:()=>Ve,LSH:()=>nl,Lbi:()=>Po,MAs:()=>Rw,NdJ:()=>Vm,OlP:()=>gn,Oqu:()=>qv,PXZ:()=>Hp,Q6J:()=>yl,QGY:()=>dh,Qsj:()=>ay,R0b:()=>ts,RDi:()=>Ul,Rgc:()=>Fh,SBq:()=>Mh,Sil:()=>OE,Suo:()=>wE,TTD:()=>$i,TgZ:()=>Ea,VLi:()=>LE,W1O:()=>uI,X6Q:()=>jE,XFs:()=>yt,Xpm:()=>ft,Y36:()=>tp,YKP:()=>Oc,YNc:()=>uh,Yjl:()=>Ra,Yz7:()=>Qt,ZZ4:()=>Py,_Bn:()=>Fb,_UZ:()=>lh,_Vd:()=>Ap,_c5:()=>HI,_uU:()=>Km,aQg:()=>YE,c2e:()=>Hc,cJS:()=>zt,cg1:()=>yu,dDg:()=>AI,deG:()=>Ig,dqk:()=>Bt,eFA:()=>Tl,ekj:()=>Dc,g9A:()=>Bp,h0i:()=>Nc,hGG:()=>$I,hij:()=>Zm,iGM:()=>Lh,ifc:()=>Gt,ip1:()=>vI,kL8:()=>Xv,lG2:()=>Au,n5z:()=>Gu,oAB:()=>Tr,oxw:()=>op,q4F:()=>Ub,qLn:()=>Gd,qOj:()=>vr,qZA:()=>np,sBO:()=>Kc,sIi:()=>mc,s_b:()=>Np,soG:()=>bu,tBr:()=>$r,tb:()=>wI,tp0:()=>di,uIk:()=>bv,vHH:()=>Ne,vpe:()=>Da,wAp:()=>gt,xp6:()=>R_,z2F:()=>Hh,zSh:()=>dv,zs3:()=>Co});var h=N(7579),X=N(727),O=N(8306),le=N(6451),re=N(3099);function ge(s){for(let o in s)if(s[o]===ge)return o;throw Error("Could not find renamed property on target object.")}function ue(s,o){for(const a in o)o.hasOwnProperty(a)&&!s.hasOwnProperty(a)&&(s[a]=o[a])}function oe(s){if("string"==typeof s)return s;if(Array.isArray(s))return"["+s.map(oe).join(", ")+"]";if(null==s)return""+s;if(s.overriddenName)return`${s.overriddenName}`;if(s.name)return`${s.name}`;const o=s.toString();if(null==o)return""+o;const a=o.indexOf("\n");return-1===a?o:o.substring(0,a)}function he(s,o){return null==s||""===s?null===o?"":o:null==o||""===o?s:s+" "+o}const G=ge({__forward_ref__:ge});function H(s){return s.__forward_ref__=H,s.toString=function(){return oe(this())},s}function te(s){return ze(s)?s():s}function ze(s){return"function"==typeof s&&s.hasOwnProperty(G)&&s.__forward_ref__===H}class Ne extends Error{constructor(o,a){super(function Ue(s,o){return`NG0${Math.abs(s)}${o?": "+o:""}`}(o,a)),this.code=o}}function fe(s){return"string"==typeof s?s:null==s?"":String(s)}function De(s){return"function"==typeof s?s.name||s.toString():"object"==typeof s&&null!=s&&"function"==typeof s.type?s.type.name||s.type.toString():fe(s)}function we(s,o){const a=o?` in ${o}`:"";throw new Ne(-201,`No provider for ${De(s)} found${a}`)}function Ut(s,o){null==s&&function Je(s,o,a,l){throw new Error(`ASSERTION ERROR: ${s}`+(null==l?"":` [Expected=> ${a} ${l} ${o} <=Actual]`))}(o,s,null,"!=")}function Qt(s){return{token:s.token,providedIn:s.providedIn||null,factory:s.factory,value:void 0}}function zt(s){return{providers:s.providers||[],imports:s.imports||[]}}function Vt(s){return ss(s,Fi)||ss(s,Xr)}function ss(s,o){return s.hasOwnProperty(o)?s[o]:null}function Cr(s){return s&&(s.hasOwnProperty(Ms)||s.hasOwnProperty(Li))?s[Ms]:null}const Fi=ge({\u0275prov:ge}),Ms=ge({\u0275inj:ge}),Xr=ge({ngInjectableDef:ge}),Li=ge({ngInjectorDef:ge});var yt=(()=>((yt=yt||{})[yt.Default=0]="Default",yt[yt.Host=1]="Host",yt[yt.Self=2]="Self",yt[yt.SkipSelf=4]="SkipSelf",yt[yt.Optional=8]="Optional",yt))();let ei;function xn(s){const o=ei;return ei=s,o}function Js(s,o,a){const l=Vt(s);return l&&"root"==l.providedIn?void 0===l.value?l.value=l.factory():l.value:a&yt.Optional?null:void 0!==o?o:void we(oe(s),"Injector")}function Zn(s){return{toString:s}.toString()}var Fn=(()=>((Fn=Fn||{})[Fn.OnPush=0]="OnPush",Fn[Fn.Default=1]="Default",Fn))(),Gt=(()=>{return(s=Gt||(Gt={}))[s.Emulated=0]="Emulated",s[s.None=2]="None",s[s.ShadowDom=3]="ShadowDom",Gt;var s})();const at="undefined"!=typeof globalThis&&globalThis,vt="undefined"!=typeof window&&window,fr="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,Bt=at||"undefined"!=typeof global&&global||vt||fr,gr={},U=[],z=ge({\u0275cmp:ge}),W=ge({\u0275dir:ge}),Ce=ge({\u0275pipe:ge}),q=ge({\u0275mod:ge}),J=ge({\u0275fac:ge}),Pe=ge({__NG_ELEMENT_ID__:ge});let Xe=0;function ft(s){return Zn(()=>{const a={},l={type:s.type,providersResolver:null,decls:s.decls,vars:s.vars,factory:null,template:s.template||null,consts:s.consts||null,ngContentSelectors:s.ngContentSelectors,hostBindings:s.hostBindings||null,hostVars:s.hostVars||0,hostAttrs:s.hostAttrs||null,contentQueries:s.contentQueries||null,declaredInputs:a,inputs:null,outputs:null,exportAs:s.exportAs||null,onPush:s.changeDetection===Fn.OnPush,directiveDefs:null,pipeDefs:null,selectors:s.selectors||U,viewQuery:s.viewQuery||null,features:s.features||null,data:s.data||{},encapsulation:s.encapsulation||Gt.Emulated,id:"c",styles:s.styles||U,_:null,setInput:null,schemas:s.schemas||null,tView:null},d=s.directives,g=s.features,v=s.pipes;return l.id+=Xe++,l.inputs=xa(s.inputs,a),l.outputs=xa(s.outputs),g&&g.forEach(w=>w(l)),l.directiveDefs=d?()=>("function"==typeof d?d():d).map(hn):null,l.pipeDefs=v?()=>("function"==typeof v?v():v).map(Et):null,l})}function hn(s){return jn(s)||function Ar(s){return s[W]||null}(s)}function Et(s){return function os(s){return s[Ce]||null}(s)}const Bn={};function Tr(s){return Zn(()=>{const o={type:s.type,bootstrap:s.bootstrap||U,declarations:s.declarations||U,imports:s.imports||U,exports:s.exports||U,transitiveCompileScopes:null,schemas:s.schemas||null,id:s.id||null};return null!=s.id&&(Bn[s.id]=s.type),o})}function xa(s,o){if(null==s)return gr;const a={};for(const l in s)if(s.hasOwnProperty(l)){let d=s[l],g=d;Array.isArray(d)&&(g=d[1],d=d[0]),a[d]=l,o&&(o[d]=g)}return a}const Au=ft;function Ra(s){return{type:s.type,name:s.name,factory:null,pure:!1!==s.pure,onDestroy:s.type.prototype.ngOnDestroy||null}}function jn(s){return s[z]||null}function Hn(s,o){const a=s[q]||null;if(!a&&!0===o)throw new Error(`Type ${oe(s)} does not have '\u0275mod' property.`);return a}function Ur(s){return Array.isArray(s)&&"object"==typeof s[1]}function Bi(s){return Array.isArray(s)&&!0===s[1]}function xu(s){return 0!=(8&s.flags)}function ud(s){return 2==(2&s.flags)}function ji(s){return 1==(1&s.flags)}function Hi(s){return null!==s.template}function kl(s){return 0!=(512&s[2])}function yr(s,o){return s.hasOwnProperty(J)?s[J]:null}class no{constructor(o,a,l){this.previousValue=o,this.currentValue=a,this.firstChange=l}isFirstChange(){return this.firstChange}}function $i(){return $o}function $o(s){return s.type.prototype.ngOnChanges&&(s.setInput=lf),md}function md(){const s=ro(this),o=null==s?void 0:s.current;if(o){const a=s.previous;if(a===gr)s.previous=o;else for(let l in o)a[l]=o[l];s.current=null,this.ngOnChanges(o)}}function lf(s,o,a,l){const d=ro(s)||function Go(s,o){return s[yd]=o}(s,{previous:gr,current:null}),g=d.current||(d.current={}),v=d.previous,w=this.declaredInputs[a],I=v[w];g[w]=new no(I&&I.currentValue,o,v===gr),s[l]=o}$i.ngInherit=!0;const yd="__ngSimpleChanges__";function ro(s){return s[yd]||null}let zo;function Ul(s){zo=s}function nn(s){return!!s.listen}const ka={createRenderer:(s,o)=>function Gi(){return void 0!==zo?zo:"undefined"!=typeof document?document:void 0}()};function Jt(s){for(;Array.isArray(s);)s=s[0];return s}function Fs(s,o){return Jt(o[s])}function sr(s,o){return Jt(o[s.index])}function yn(s,o){return s.data[o]}function or(s,o){const a=o[s];return Ur(a)?a:a[0]}function so(s){return 4==(4&s[2])}function us(s){return 128==(128&s[2])}function Ai(s,o){return null==o?null:s[o]}function zi(s){s[18]=0}function Wo(s,o){s[5]+=o;let a=s,l=s[3];for(;null!==l&&(1===o&&1===a[5]||-1===o&&0===a[5]);)l[5]+=o,a=l,l=l[3]}const pt={lFrame:Ed(null),bindingsEnabled:!0,isInCheckNoChangesMode:!1};function Ua(){return pt.bindingsEnabled}function Se(){return pt.lFrame.lView}function Ft(){return pt.lFrame.tView}function Ou(s){return pt.lFrame.contextLView=s,s[8]}function pn(){let s=Zo();for(;null!==s&&64===s.type;)s=s.parent;return s}function Zo(){return pt.lFrame.currentTNode}function ii(s,o){const a=pt.lFrame;a.currentTNode=s,a.isParent=o}function Ba(){return pt.lFrame.isParent}function ja(){return pt.isInCheckNoChangesMode}function Fu(s){pt.isInCheckNoChangesMode=s}function Ls(){return pt.lFrame.bindingIndex++}function Si(s){const o=pt.lFrame,a=o.bindingIndex;return o.bindingIndex=o.bindingIndex+s,a}function zl(s,o){const a=pt.lFrame;a.bindingIndex=a.bindingRootIndex=s,$a(o)}function $a(s){pt.lFrame.currentDirectiveIndex=s}function Wl(){return pt.lFrame.currentQueryIndex}function Ga(s){pt.lFrame.currentQueryIndex=s}function Eg(s){const o=s[1];return 2===o.type?o.declTNode:1===o.type?s[6]:null}function Kl(s,o,a){if(a&yt.SkipSelf){let d=o,g=s;for(;!(d=d.parent,null!==d||a&yt.Host||(d=Eg(g),null===d||(g=g[15],10&d.type))););if(null===d)return!1;o=d,s=g}const l=pt.lFrame=qa();return l.currentTNode=o,l.lView=s,!0}function Qo(s){const o=qa(),a=s[1];pt.lFrame=o,o.currentTNode=a.firstChild,o.lView=s,o.tView=a,o.contextLView=s,o.bindingIndex=a.bindingStartIndex,o.inI18n=!1}function qa(){const s=pt.lFrame,o=null===s?null:s.child;return null===o?Ed(s):o}function Ed(s){const o={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:s,child:null,inI18n:!1};return null!==s&&(s.child=o),o}function Jo(){const s=pt.lFrame;return pt.lFrame=s.parent,s.currentTNode=null,s.lView=null,s}const wd=Jo;function Xo(){const s=Jo();s.isParent=!0,s.tView=null,s.selectedIndex=-1,s.contextLView=null,s.elementDepthCount=0,s.currentDirectiveIndex=-1,s.currentNamespace=null,s.bindingRootIndex=-1,s.bindingIndex=-1,s.currentQueryIndex=0}function Yn(){return pt.lFrame.selectedIndex}function Ki(s){pt.lFrame.selectedIndex=s}function wn(){const s=pt.lFrame;return yn(s.tView,s.selectedIndex)}function Id(s,o){for(let a=o.directiveStart,l=o.directiveEnd;a<l;a++){const g=s.data[a].type.prototype,{ngAfterContentInit:v,ngAfterContentChecked:w,ngAfterViewInit:I,ngAfterViewChecked:S,ngOnDestroy:x}=g;v&&(s.contentHooks||(s.contentHooks=[])).push(-a,v),w&&((s.contentHooks||(s.contentHooks=[])).push(a,w),(s.contentCheckHooks||(s.contentCheckHooks=[])).push(a,w)),I&&(s.viewHooks||(s.viewHooks=[])).push(-a,I),S&&((s.viewHooks||(s.viewHooks=[])).push(a,S),(s.viewCheckHooks||(s.viewCheckHooks=[])).push(a,S)),null!=x&&(s.destroyHooks||(s.destroyHooks=[])).push(a,x)}}function za(s,o,a){Qn(s,o,3,a)}function cs(s,o,a,l){(3&s[2])===a&&Qn(s,o,a,l)}function ea(s,o){let a=s[2];(3&a)===o&&(a&=2047,a+=1,s[2]=a)}function Qn(s,o,a,l){const g=null!=l?l:-1,v=o.length-1;let w=0;for(let I=void 0!==l?65535&s[18]:0;I<v;I++)if("number"==typeof o[I+1]){if(w=o[I],null!=l&&w>=l)break}else o[I]<0&&(s[18]+=65536),(w<g||-1==g)&&(ff(s,a,o,I),s[18]=(4294901760&s[18])+I+2),I++}function ff(s,o,a,l){const d=a[l]<0,g=a[l+1],w=s[d?-a[l]:a[l]];if(d){if(s[2]>>11<s[18]>>16&&(3&s[2])===o){s[2]+=2048;try{g.call(w)}finally{}}}else try{g.call(w)}finally{}}class Uu{constructor(o,a,l){this.factory=o,this.resolving=!1,this.canSeeViewProviders=a,this.injectImpl=l}}function rt(s,o,a){const l=nn(s);let d=0;for(;d<a.length;){const g=a[d];if("number"==typeof g){if(0!==g)break;d++;const v=a[d++],w=a[d++],I=a[d++];l?s.setAttribute(o,w,I,v):o.setAttributeNS(v,w,I)}else{const v=g,w=a[++d];oi(v)?l&&s.setProperty(o,v,w):l?s.setAttribute(o,v,w):o.setAttribute(v,w),d++}}return d}function si(s){return 3===s||4===s||6===s}function oi(s){return 64===s.charCodeAt(0)}function bn(s,o){if(null!==o&&0!==o.length)if(null===s||0===s.length)s=o.slice();else{let a=-1;for(let l=0;l<o.length;l++){const d=o[l];"number"==typeof d?a=d:0===a||Zl(s,a,d,null,-1===a||2===a?o[++l]:null)}}return s}function Zl(s,o,a,l,d){let g=0,v=s.length;if(-1===o)v=-1;else for(;g<s.length;){const w=s[g++];if("number"==typeof w){if(w===o){v=-1;break}if(w>o){v=g-1;break}}}for(;g<s.length;){const w=s[g];if("number"==typeof w)break;if(w===a){if(null===l)return void(null!==d&&(s[g+1]=d));if(l===s[g+1])return void(s[g+2]=d)}g++,null!==l&&g++,null!==d&&g++}-1!==v&&(s.splice(v,0,o),g=v+1),s.splice(g++,0,a),null!==l&&s.splice(g++,0,l),null!==d&&s.splice(g++,0,d)}function Td(s){return-1!==s}function Zi(s){return 32767&s}function cn(s,o){let a=function Yl(s){return s>>16}(s),l=o;for(;a>0;)l=l[15],a--;return l}let Ka=!0;function Mi(s){const o=Ka;return Ka=s,o}let Sd=0;function In(s,o){const a=na(s,o);if(-1!==a)return a;const l=o[1];l.firstCreatePass&&(s.injectorIndex=o.length,ta(l.data,s),ta(o,null),ta(l.blueprint,null));const d=Vs(s,o),g=s.injectorIndex;if(Td(d)){const v=Zi(d),w=cn(d,o),I=w[1].data;for(let S=0;S<8;S++)o[g+S]=w[v+S]|I[v+S]}return o[g+8]=d,g}function ta(s,o){s.push(0,0,0,0,0,0,0,0,o)}function na(s,o){return-1===s.injectorIndex||s.parent&&s.parent.injectorIndex===s.injectorIndex||null===o[s.injectorIndex+8]?-1:s.injectorIndex}function Vs(s,o){if(s.parent&&-1!==s.parent.injectorIndex)return s.parent.injectorIndex;let a=0,l=null,d=o;for(;null!==d;){const g=d[1],v=g.type;if(l=2===v?g.declTNode:1===v?d[6]:null,null===l)return-1;if(a++,d=d[15],-1!==l.injectorIndex)return l.injectorIndex|a<<16}return-1}function ar(s,o,a){!function Ql(s,o,a){let l;"string"==typeof a?l=a.charCodeAt(0)||0:a.hasOwnProperty(Pe)&&(l=a[Pe]),null==l&&(l=a[Pe]=Sd++);const d=255&l;o.data[s+(d>>5)]|=1<<d}(s,o,a)}function Us(s,o,a){if(a&yt.Optional)return s;we(o,"NodeInjector")}function ra(s,o,a,l){if(a&yt.Optional&&void 0===l&&(l=null),0==(a&(yt.Self|yt.Host))){const d=s[9],g=xn(void 0);try{return d?d.get(o,l,a&yt.Optional):Js(o,l,a&yt.Optional)}finally{xn(g)}}return Us(l,o,a)}function Bs(s,o,a,l=yt.Default,d){if(null!==s){const g=function Za(s){if("string"==typeof s)return s.charCodeAt(0)||0;const o=s.hasOwnProperty(Pe)?s[Pe]:void 0;return"number"==typeof o?o>=0?255&o:lo:o}(a);if("function"==typeof g){if(!Kl(o,s,l))return l&yt.Host?Us(d,a,l):ra(o,a,l,d);try{const v=g(l);if(null!=v||l&yt.Optional)return v;we(a)}finally{wd()}}else if("number"==typeof g){let v=null,w=na(s,o),I=-1,S=l&yt.Host?o[16][6]:null;for((-1===w||l&yt.SkipSelf)&&(I=-1===w?Vs(s,o):o[w+8],-1!==I&&Jn(l,!1)?(v=o[1],w=Zi(I),o=cn(I,o)):w=-1);-1!==w;){const x=o[1];if(js(g,w,x.data)){const k=sa(w,o,a,v,l,S);if(k!==ia)return k}I=o[w+8],-1!==I&&Jn(l,o[1].data[w+8]===S)&&js(g,w,o)?(v=x,w=Zi(I),o=cn(I,o)):w=-1}}}return ra(o,a,l,d)}const ia={};function lo(){return new co(pn(),Se())}function sa(s,o,a,l,d,g){const v=o[1],w=v.data[s+8],x=oa(w,v,a,null==l?ud(w)&&Ka:l!=v&&0!=(3&w.type),d&yt.Host&&g===w);return null!==x?aa(o,v,x,w):ia}function oa(s,o,a,l,d){const g=s.providerIndexes,v=o.data,w=1048575&g,I=s.directiveStart,x=g>>20,j=d?w+x:s.directiveEnd;for(let Q=l?w:w+x;Q<j;Q++){const _e=v[Q];if(Q<I&&a===_e||Q>=I&&_e.type===a)return Q}if(d){const Q=v[I];if(Q&&Hi(Q)&&Q.type===a)return I}return null}function aa(s,o,a,l){let d=s[a];const g=o.data;if(function Dd(s){return s instanceof Uu}(d)){const v=d;v.resolving&&function We(s,o){const a=o?`. Dependency path: ${o.join(" > ")} > ${s}`:"";throw new Ne(-200,`Circular dependency in DI detected for ${s}${a}`)}(De(g[a]));const w=Mi(v.canSeeViewProviders);v.resolving=!0;const I=v.injectImpl?xn(v.injectImpl):null;Kl(s,l,yt.Default);try{d=s[a]=v.factory(void 0,g,s,l),o.firstCreatePass&&a>=l.directiveStart&&function wg(s,o,a){const{ngOnChanges:l,ngOnInit:d,ngDoCheck:g}=o.type.prototype;if(l){const v=$o(o);(a.preOrderHooks||(a.preOrderHooks=[])).push(s,v),(a.preOrderCheckHooks||(a.preOrderCheckHooks=[])).push(s,v)}d&&(a.preOrderHooks||(a.preOrderHooks=[])).push(0-s,d),g&&((a.preOrderHooks||(a.preOrderHooks=[])).push(s,g),(a.preOrderCheckHooks||(a.preOrderCheckHooks=[])).push(s,g))}(a,g[a],o)}finally{null!==I&&xn(I),Mi(w),v.resolving=!1,wd()}}return d}function js(s,o,a){return!!(a[o+(s>>5)]&1<<s)}function Jn(s,o){return!(s&yt.Self||s&yt.Host&&o)}class co{constructor(o,a){this._tNode=o,this._lView=a}get(o,a,l){return Bs(this._tNode,this._lView,o,l,a)}}function Gu(s){return Zn(()=>{const o=s.prototype.constructor,a=o[J]||Dn(o),l=Object.prototype;let d=Object.getPrototypeOf(s.prototype).constructor;for(;d&&d!==l;){const g=d[J]||Dn(d);if(g&&g!==a)return g;d=Object.getPrototypeOf(d)}return g=>new g})}function Dn(s){return ze(s)?()=>{const o=Dn(te(s));return o&&o()}:yr(s)}function ho(s){return function $u(s,o){if("class"===o)return s.classes;if("style"===o)return s.styles;const a=s.attrs;if(a){const l=a.length;let d=0;for(;d<l;){const g=a[d];if(si(g))break;if(0===g)d+=2;else if("number"==typeof g)for(d++;d<l&&"string"==typeof a[d];)d++;else{if(g===o)return a[d+1];d+=2}}}return null}(pn(),s)}const ds="__parameters__";function Cn(s,o,a){return Zn(()=>{const l=function ai(s){return function(...a){if(s){const l=s(...a);for(const d in l)this[d]=l[d]}}}(o);function d(...g){if(this instanceof d)return l.apply(this,g),this;const v=new d(...g);return w.annotation=v,w;function w(I,S,x){const k=I.hasOwnProperty(ds)?I[ds]:Object.defineProperty(I,ds,{value:[]})[ds];for(;k.length<=x;)k.push(null);return(k[x]=k[x]||[]).push(v),I}}return a&&(d.prototype=Object.create(a.prototype)),d.prototype.ngMetadataName=s,d.annotationCls=d,d})}class gn{constructor(o,a){this._desc=o,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof a?this.__NG_ELEMENT_ID__=a:void 0!==a&&(this.\u0275prov=Qt({token:this,providedIn:a.providedIn||"root",factory:a.factory}))}toString(){return`InjectionToken ${this._desc}`}}const Ig=new gn("AnalyzeForEntryComponents");function ui(s,o){void 0===o&&(o=s);for(let a=0;a<s.length;a++){let l=s[a];Array.isArray(l)?(o===s&&(o=s.slice(0,a)),ui(l,o)):o!==s&&o.push(l)}return o}function Hr(s,o){s.forEach(a=>Array.isArray(a)?Hr(a,o):o(a))}function la(s,o,a){o>=s.length?s.push(a):s.splice(o,0,a)}function go(s,o){return o>=s.length-1?s.pop():s.splice(o,1)[0]}function Xn(s,o,a){let l=$s(s,o);return l>=0?s[1|l]=a:(l=~l,function hs(s,o,a,l){let d=s.length;if(d==o)s.push(a,l);else if(1===d)s.push(l,s[0]),s[0]=a;else{for(d--,s.push(s[d-1],s[d]);d>o;)s[d]=s[d-2],d--;s[o]=a,s[o+1]=l}}(s,l,o,a)),l}function Xa(s,o){const a=$s(s,o);if(a>=0)return s[1|a]}function $s(s,o){return function xd(s,o,a){let l=0,d=s.length>>a;for(;d!==l;){const g=l+(d-l>>1),v=s[g<<a];if(o===v)return g<<a;v>o?d=g:l=g+1}return~(d<<a)}(s,o,1)}const da={},ha="__NG_DI_FLAG__",_o="ngTempTokenPath",D=/\n/gm,R="__source",L=ge({provide:String,useValue:ge});let Y;function ne(s){const o=Y;return Y=s,o}function me(s,o=yt.Default){if(void 0===Y)throw new Ne(203,"");return null===Y?Js(s,void 0,o):Y.get(s,o&yt.Optional?null:void 0,o)}function Ve(s,o=yt.Default){return(function En(){return ei}()||me)(te(s),o)}const ht=Ve;function jt(s){const o=[];for(let a=0;a<s.length;a++){const l=te(s[a]);if(Array.isArray(l)){if(0===l.length)throw new Ne(900,"");let d,g=yt.Default;for(let v=0;v<l.length;v++){const w=l[v],I=_r(w);"number"==typeof I?-1===I?d=w.token:g|=I:d=w}o.push(Ve(d,g))}else o.push(Ve(l))}return o}function wt(s,o){return s[ha]=o,s.prototype[ha]=o,s}function _r(s){return s[ha]}const $r=wt(Cn("Inject",s=>({token:s})),-1),li=wt(Cn("Optional"),8),di=wt(Cn("SkipSelf"),4);class Fd{constructor(o){this.changingThisBreaksApplicationSecurity=o}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}function pa(s){return s instanceof Fd?s.changingThisBreaksApplicationSecurity:s}const Ud=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,Lg=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;var qt=(()=>((qt=qt||{})[qt.NONE=0]="NONE",qt[qt.HTML=1]="HTML",qt[qt.STYLE=2]="STYLE",qt[qt.SCRIPT=3]="SCRIPT",qt[qt.URL=4]="URL",qt[qt.RESOURCE_URL=5]="RESOURCE_URL",qt))();function nl(s){const o=function ga(){const s=Se();return s&&s[12]}();return o?o.sanitize(qt.URL,s)||"":function qs(s,o){const a=function ic(s){return s instanceof Fd&&s.getTypeName()||null}(s);if(null!=a&&a!==o){if("ResourceURL"===a&&"URL"===o)return!0;throw new Error(`Required a safe ${o}, got a ${a} (see https://g.co/ng/security#xss)`)}return a===o}(s,"URL")?pa(s):function zs(s){return(s=String(s)).match(Ud)||s.match(Lg)?s:"unsafe:"+s}(fe(s))}const Af="__ngContext__";function ur(s,o){s[Af]=o}function $d(s){const o=function ou(s){return s[Af]||null}(s);return o?Array.isArray(o)?o:o.lView:null}function fi(s){return s.ngOriginalError}function g_(s,...o){s.error(...o)}class Gd{constructor(){this._console=console}handleError(o){const a=this._findOriginalError(o),l=function Wg(s){return s&&s.ngErrorLogger||g_}(o);l(this._console,"ERROR",o),a&&l(this._console,"ORIGINAL ERROR",a)}_findOriginalError(o){let a=o&&fi(o);for(;a&&fi(a);)a=fi(a);return a||null}}const y_=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(Bt))();function gs(s){return s instanceof Function?s():s}var T=(()=>((T=T||{})[T.Important=1]="Important",T[T.DashCase=2]="DashCase",T))();function K(s,o){return undefined(s,o)}function Ye(s){const o=s[3];return Bi(o)?o[3]:o}function Tn(s){return lc(s[13])}function gi(s){return lc(s[4])}function lc(s){for(;null!==s&&!Bi(s);)s=s[4];return s}function ma(s,o,a,l,d){if(null!=l){let g,v=!1;Bi(l)?g=l:Ur(l)&&(v=!0,l=l[0]);const w=Jt(l);0===s&&null!==a?null==d?I_(o,a,w):ms(o,a,w,d||null,!0):1===s&&null!==a?ms(o,a,w,d||null,!0):2===s?function A_(s,o,a){const l=Ff(s,o);l&&function WD(s,o,a,l){nn(s)?s.removeChild(o,a,l):o.removeChild(a)}(s,l,o,a)}(o,w,v):3===s&&o.destroyNode(w),null!=g&&function cc(s,o,a,l,d){const g=a[7];g!==Jt(a)&&ma(o,s,l,g,d);for(let w=10;w<a.length;w++){const I=a[w];tm(I[1],I,s,o,l,g)}}(o,s,g,a,d)}}function Wd(s,o,a){if(nn(s))return s.createElement(o,a);{const l=null!==a?function Vl(s){const o=s.toLowerCase();return"svg"===o?"http://www.w3.org/2000/svg":"math"===o?"http://www.w3.org/1998/MathML/":null}(a):null;return null===l?s.createElement(o):s.createElementNS(l,o)}}function v_(s,o){const a=s[9],l=a.indexOf(o),d=o[3];1024&o[2]&&(o[2]&=-1025,Wo(d,-1)),a.splice(l,1)}function E_(s,o){if(s.length<=10)return;const a=10+o,l=s[a];if(l){const d=l[17];null!==d&&d!==s&&v_(d,l),o>0&&(s[a-1][4]=l[4]);const g=go(s,10+o);!function Gr(s,o){tm(s,o,o[11],2,null,null),o[0]=null,o[6]=null}(l[1],l);const v=g[19];null!==v&&v.detachView(g[1]),l[3]=null,l[4]=null,l[2]&=-129}return l}function w_(s,o){if(!(256&o[2])){const a=o[11];nn(a)&&a.destroyNode&&tm(s,o,a,3,null,null),function kf(s){let o=s[13];if(!o)return b_(s[1],s);for(;o;){let a=null;if(Ur(o))a=o[13];else{const l=o[10];l&&(a=l)}if(!a){for(;o&&!o[4]&&o!==s;)Ur(o)&&b_(o[1],o),o=o[3];null===o&&(o=s),Ur(o)&&b_(o[1],o),a=o&&o[4]}o=a}}(o)}}function b_(s,o){if(!(256&o[2])){o[2]&=-129,o[2]|=256,function R0(s,o){let a;if(null!=s&&null!=(a=s.destroyHooks))for(let l=0;l<a.length;l+=2){const d=o[a[l]];if(!(d instanceof Uu)){const g=a[l+1];if(Array.isArray(g))for(let v=0;v<g.length;v+=2){const w=d[g[v]],I=g[v+1];try{I.call(w)}finally{}}else try{g.call(d)}finally{}}}}(s,o),function x0(s,o){const a=s.cleanup,l=o[7];let d=-1;if(null!==a)for(let g=0;g<a.length-1;g+=2)if("string"==typeof a[g]){const v=a[g+1],w="function"==typeof v?v(o):Jt(o[v]),I=l[d=a[g+2]],S=a[g+3];"boolean"==typeof S?w.removeEventListener(a[g],I,S):S>=0?l[d=S]():l[d=-S].unsubscribe(),g+=2}else{const v=l[d=a[g+1]];a[g].call(v)}if(null!==l){for(let g=d+1;g<l.length;g++)l[g]();o[7]=null}}(s,o),1===o[1].type&&nn(o[11])&&o[11].destroy();const a=o[17];if(null!==a&&Bi(o[3])){a!==o[3]&&v_(a,o);const l=o[19];null!==l&&l.detachView(s)}}}function Xg(s,o,a){return function zD(s,o,a){let l=o;for(;null!==l&&40&l.type;)l=(o=l).parent;if(null===l)return a[0];if(2&l.flags){const d=s.data[l.directiveStart].encapsulation;if(d===Gt.None||d===Gt.Emulated)return null}return sr(l,a)}(s,o.parent,a)}function ms(s,o,a,l,d){nn(s)?s.insertBefore(o,a,l,d):o.insertBefore(a,l,d)}function I_(s,o,a){nn(s)?s.appendChild(o,a):o.appendChild(a)}function P0(s,o,a,l,d){null!==l?ms(s,o,a,l,d):I_(s,o,a)}function Ff(s,o){return nn(s)?s.parentNode(o):o.parentNode}let D_=function O0(s,o,a){return 40&s.type?sr(s,a):null};function em(s,o,a,l){const d=Xg(s,l,o),g=o[11],w=function N0(s,o,a){return D_(s,o,a)}(l.parent||o[6],l,o);if(null!=d)if(Array.isArray(a))for(let I=0;I<a.length;I++)P0(g,d,a[I],w,!1);else P0(g,d,a,w,!1)}function Kd(s,o){if(null!==o){const a=o.type;if(3&a)return sr(o,s);if(4&a)return T_(-1,s[o.index]);if(8&a){const l=o.child;if(null!==l)return Kd(s,l);{const d=s[o.index];return Bi(d)?T_(-1,d):Jt(d)}}if(32&a)return K(o,s)()||Jt(s[o.index]);{const l=F0(s,o);return null!==l?Array.isArray(l)?l[0]:Kd(Ye(s[16]),l):Kd(s,o.next)}}return null}function F0(s,o){return null!==o?s[16][6].projection[o.projection]:null}function T_(s,o){const a=10+s+1;if(a<o.length){const l=o[a],d=l[1].firstChild;if(null!==d)return Kd(l,d)}return o[7]}function S_(s,o,a,l,d,g,v){for(;null!=a;){const w=l[a.index],I=a.type;if(v&&0===o&&(w&&ur(Jt(w),l),a.flags|=4),64!=(64&a.flags))if(8&I)S_(s,o,a.child,l,d,g,!1),ma(o,s,d,w,g);else if(32&I){const S=K(a,l);let x;for(;x=S();)ma(o,s,d,x,g);ma(o,s,d,w,g)}else 16&I?M_(s,o,l,a,d,g):ma(o,s,d,w,g);a=v?a.projectionNext:a.next}}function tm(s,o,a,l,d,g){S_(a,l,s.firstChild,o,d,g,!1)}function M_(s,o,a,l,d,g){const v=a[16],I=v[6].projection[l.projection];if(Array.isArray(I))for(let S=0;S<I.length;S++)ma(o,s,d,I[S],g);else S_(s,o,I,v[3],d,g,!0)}function L0(s,o,a){nn(s)?s.setAttribute(o,"style",a):o.style.cssText=a}function nm(s,o,a){nn(s)?""===a?s.removeAttribute(o,"class"):s.setAttribute(o,"class",a):o.className=a}function V0(s,o,a){let l=s.length;for(;;){const d=s.indexOf(o,a);if(-1===d)return d;if(0===d||s.charCodeAt(d-1)<=32){const g=o.length;if(d+g===l||s.charCodeAt(d+g)<=32)return d}a=d+1}}const U0="ng-template";function Zd(s,o,a){let l=0;for(;l<s.length;){let d=s[l++];if(a&&"class"===d){if(d=s[l],-1!==V0(d.toLowerCase(),o,0))return!0}else if(1===d){for(;l<s.length&&"string"==typeof(d=s[l++]);)if(d.toLowerCase()===o)return!0;return!1}}return!1}function lu(s){return 4===s.type&&s.value!==U0}function B0(s,o,a){return o===(4!==s.type||a?s.value:U0)}function mi(s,o,a){let l=4;const d=s.attrs||[],g=function H0(s){for(let o=0;o<s.length;o++)if(si(s[o]))return o;return s.length}(d);let v=!1;for(let w=0;w<o.length;w++){const I=o[w];if("number"!=typeof I){if(!v)if(4&l){if(l=2|1&l,""!==I&&!B0(s,I,a)||""===I&&1===o.length){if(Rr(l))return!1;v=!0}}else{const S=8&l?I:o[++w];if(8&l&&null!==s.attrs){if(!Zd(s.attrs,S,a)){if(Rr(l))return!1;v=!0}continue}const k=YD(8&l?"class":I,d,lu(s),a);if(-1===k){if(Rr(l))return!1;v=!0;continue}if(""!==S){let j;j=k>g?"":d[k+1].toLowerCase();const Q=8&l?j:null;if(Q&&-1!==V0(Q,S,0)||2&l&&S!==j){if(Rr(l))return!1;v=!0}}}}else{if(!v&&!Rr(l)&&!Rr(I))return!1;if(v&&Rr(I))continue;v=!1,l=I|1&l}}return Rr(l)||v}function Rr(s){return 0==(1&s)}function YD(s,o,a,l){if(null===o)return-1;let d=0;if(l||!a){let g=!1;for(;d<o.length;){const v=o[d];if(v===s)return d;if(3===v||6===v)g=!0;else{if(1===v||2===v){let w=o[++d];for(;"string"==typeof w;)w=o[++d];continue}if(4===v)break;if(0===v){d+=4;continue}}d+=g?1:2}return-1}return function $0(s,o){let a=s.indexOf(4);if(a>-1)for(a++;a<s.length;){const l=s[a];if("number"==typeof l)return-1;if(l===o)return a;a++}return-1}(o,s)}function Xi(s,o,a=!1){for(let l=0;l<o.length;l++)if(mi(s,o[l],a))return!0;return!1}function x_(s,o){return s?":not("+o.trim()+")":o}function q0(s){let o=s[0],a=1,l=2,d="",g=!1;for(;a<s.length;){let v=s[a];if("string"==typeof v)if(2&l){const w=s[++a];d+="["+v+(w.length>0?'="'+w+'"':"")+"]"}else 8&l?d+="."+v:4&l&&(d+=" "+v);else""!==d&&!Rr(v)&&(o+=x_(g,d),d=""),l=v,g=g||!Rr(l);a++}return""!==d&&(o+=x_(g,d)),o}const Mt={};function R_(s){P_(Ft(),Se(),Yn()+s,ja())}function P_(s,o,a,l){if(!l)if(3==(3&o[2])){const g=s.preOrderCheckHooks;null!==g&&za(o,g,a)}else{const g=s.preOrderHooks;null!==g&&cs(o,g,0,a)}Ki(a)}function Lf(s,o){return s<<17|o<<2}function Io(s){return s>>17&32767}function Vf(s){return 2|s}function _a(s){return(131068&s)>>2}function Uf(s,o){return-131069&s|o<<2}function rm(s){return 1|s}function H_(s,o){const a=s.contentQueries;if(null!==a)for(let l=0;l<a.length;l+=2){const d=a[l],g=a[l+1];if(-1!==g){const v=s.data[g];Ga(d),v.contentQueries(2,o[g],g)}}}function Hf(s,o,a,l,d,g,v,w,I,S){const x=o.blueprint.slice();return x[0]=d,x[2]=140|l,zi(x),x[3]=x[15]=s,x[8]=a,x[10]=v||s&&s[10],x[11]=w||s&&s[11],x[12]=I||s&&s[12]||null,x[9]=S||s&&s[9]||null,x[6]=g,x[16]=2==o.type?s[16]:x,x}function dc(s,o,a,l,d){let g=s.data[o];if(null===g)g=function $f(s,o,a,l,d){const g=Zo(),v=Ba(),I=s.data[o]=function tw(s,o,a,l,d,g){return{type:a,index:l,insertBeforeIndex:null,injectorIndex:o?o.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:d,attrs:g,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:o,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,v?g:g&&g.parent,a,o,l,d);return null===s.firstChild&&(s.firstChild=I),null!==g&&(v?null==g.child&&null!==I.parent&&(g.child=I):null===g.next&&(g.next=I)),I}(s,o,a,l,d),function ql(){return pt.lFrame.inI18n}()&&(g.flags|=64);else if(64&g.type){g.type=a,g.value=l,g.attrs=d;const v=function oo(){const s=pt.lFrame,o=s.currentTNode;return s.isParent?o:o.parent}();g.injectorIndex=null===v?-1:v.injectorIndex}return ii(g,!0),g}function ul(s,o,a,l){if(0===a)return-1;const d=o.length;for(let g=0;g<a;g++)o.push(l),s.blueprint.push(l),s.data.push(null);return d}function cm(s,o,a){Qo(o);try{const l=s.viewQuery;null!==l&&av(1,l,a);const d=s.template;null!==d&&qf(s,o,d,1,a),s.firstCreatePass&&(s.firstCreatePass=!1),s.staticContentQueries&&H_(s,o),s.staticViewQueries&&av(2,s.viewQuery,a);const g=s.components;null!==g&&function $_(s,o){for(let a=0;a<o.length;a++)Kf(s,o[a])}(o,g)}catch(l){throw s.firstCreatePass&&(s.incompleteFirstPass=!0,s.firstCreatePass=!1),l}finally{o[2]&=-5,Xo()}}function ll(s,o,a,l){const d=o[2];if(256==(256&d))return;Qo(o);const g=ja();try{zi(o),function Ha(s){return pt.lFrame.bindingIndex=s}(s.bindingStartIndex),null!==a&&qf(s,o,a,2,l);const v=3==(3&d);if(!g)if(v){const S=s.preOrderCheckHooks;null!==S&&za(o,S,null)}else{const S=s.preOrderHooks;null!==S&&cs(o,S,0,null),ea(o,0)}if(function dC(s){for(let o=Tn(s);null!==o;o=gi(o)){if(!o[2])continue;const a=o[9];for(let l=0;l<a.length;l++){const d=a[l],g=d[3];0==(1024&d[2])&&Wo(g,1),d[2]|=1024}}}(o),function nv(s){for(let o=Tn(s);null!==o;o=gi(o))for(let a=10;a<o.length;a++){const l=o[a],d=l[1];us(l)&&ll(d,l,d.template,l[8])}}(o),null!==s.contentQueries&&H_(s,o),!g)if(v){const S=s.contentCheckHooks;null!==S&&za(o,S)}else{const S=s.contentHooks;null!==S&&cs(o,S,1),ea(o,1)}!function iC(s,o){const a=s.hostBindingOpCodes;if(null!==a)try{for(let l=0;l<a.length;l++){const d=a[l];if(d<0)Ki(~d);else{const g=d,v=a[++l],w=a[++l];zl(v,g),w(2,o[g])}}}finally{Ki(-1)}}(s,o);const w=s.components;null!==w&&function wM(s,o){for(let a=0;a<o.length;a++)uw(s,o[a])}(o,w);const I=s.viewQuery;if(null!==I&&av(2,I,l),!g)if(v){const S=s.viewCheckHooks;null!==S&&za(o,S)}else{const S=s.viewHooks;null!==S&&cs(o,S,2),ea(o,2)}!0===s.firstUpdatePass&&(s.firstUpdatePass=!1),g||(o[2]&=-73),1024&o[2]&&(o[2]&=-1025,Wo(o[3],-1))}finally{Xo()}}function Gf(s,o,a,l){const d=o[10],g=!ja(),v=so(o);try{g&&!v&&d.begin&&d.begin(),v&&cm(s,o,l),ll(s,o,a,l)}finally{g&&!v&&d.end&&d.end()}}function qf(s,o,a,l,d){const g=Yn(),v=2&l;try{Ki(-1),v&&o.length>20&&P_(s,o,20,ja()),a(l,d)}finally{Ki(g)}}function fc(s,o,a){!Ua()||(function DM(s,o,a,l){const d=a.directiveStart,g=a.directiveEnd;s.firstCreatePass||In(a,o),ur(l,o);const v=a.initialInputs;for(let w=d;w<g;w++){const I=s.data[w],S=Hi(I);S&&lC(o,a,I);const x=aa(o,s,w,a);ur(x,o),null!==v&&cC(0,w-d,x,I,0,v),S&&(or(a.index,o)[8]=x)}}(s,o,a,sr(a,o)),128==(128&a.flags)&&function aC(s,o,a){const l=a.directiveStart,d=a.directiveEnd,v=a.index,w=function Vu(){return pt.lFrame.currentDirectiveIndex}();try{Ki(v);for(let I=l;I<d;I++){const S=s.data[I],x=o[I];$a(I),(null!==S.hostBindings||0!==S.hostVars||null!==S.hostAttrs)&&Y_(S,x)}}finally{Ki(-1),$a(w)}}(s,o,a))}function G_(s,o,a=sr){const l=o.localNames;if(null!==l){let d=o.index+1;for(let g=0;g<l.length;g+=2){const v=l[g+1],w=-1===v?a(o,s):s[v];s[d++]=w}}}function dm(s){const o=s.tView;return null===o||o.incompleteFirstPass?s.tView=zf(1,null,s.template,s.decls,s.vars,s.directiveDefs,s.pipeDefs,s.viewQuery,s.schemas,s.consts):o}function zf(s,o,a,l,d,g,v,w,I,S){const x=20+l,k=x+d,j=function q_(s,o){const a=[];for(let l=0;l<o;l++)a.push(l<s?null:Mt);return a}(x,k),Q="function"==typeof S?S():S;return j[1]={type:s,blueprint:j,template:a,queries:null,viewQuery:w,declTNode:o,data:j.slice().fill(null,x),bindingStartIndex:x,expandoStartIndex:k,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof g?g():g,pipeRegistry:"function"==typeof v?v():v,firstChild:null,schemas:I,consts:Q,incompleteFirstPass:!1}}function Wf(s,o,a,l){const d=dw(o);null===a?d.push(l):(d.push(a),s.firstCreatePass&&uv(s).push(l,d.length-1))}function K_(s,o,a){for(let l in s)if(s.hasOwnProperty(l)){const d=s[l];(a=null===a?{}:a).hasOwnProperty(l)?a[l].push(o,d):a[l]=[o,d]}return a}function ow(s,o,a,l){let d=!1;if(Ua()){const g=function uC(s,o,a){const l=s.directiveRegistry;let d=null;if(l)for(let g=0;g<l.length;g++){const v=l[g];Xi(a,v.selectors,!1)&&(d||(d=[]),ar(In(a,o),s,v.type),Hi(v)?(Q_(s,a),d.unshift(v)):d.push(v))}return d}(s,o,a),v=null===l?null:{"":-1};if(null!==g){d=!0,aw(a,s.data.length,g.length);for(let x=0;x<g.length;x++){const k=g[x];k.providersResolver&&k.providersResolver(k)}let w=!1,I=!1,S=ul(s,o,g.length,null);for(let x=0;x<g.length;x++){const k=g[x];a.mergedAttrs=bn(a.mergedAttrs,k.hostAttrs),pm(s,a,o,S,k),X_(S,k,v),null!==k.contentQueries&&(a.flags|=8),(null!==k.hostBindings||null!==k.hostAttrs||0!==k.hostVars)&&(a.flags|=128);const j=k.type.prototype;!w&&(j.ngOnChanges||j.ngOnInit||j.ngDoCheck)&&((s.preOrderHooks||(s.preOrderHooks=[])).push(a.index),w=!0),!I&&(j.ngOnChanges||j.ngDoCheck)&&((s.preOrderCheckHooks||(s.preOrderCheckHooks=[])).push(a.index),I=!0),S++}!function nw(s,o){const l=o.directiveEnd,d=s.data,g=o.attrs,v=[];let w=null,I=null;for(let S=o.directiveStart;S<l;S++){const x=d[S],k=x.inputs,j=null===g||lu(o)?null:ev(k,g);v.push(j),w=K_(k,S,w),I=K_(x.outputs,S,I)}null!==w&&(w.hasOwnProperty("class")&&(o.flags|=16),w.hasOwnProperty("style")&&(o.flags|=32)),o.initialInputs=v,o.inputs=w,o.outputs=I}(s,a)}v&&function J_(s,o,a){if(o){const l=s.localNames=[];for(let d=0;d<o.length;d+=2){const g=a[o[d+1]];if(null==g)throw new Ne(-301,!1);l.push(o[d],g)}}}(a,l,v)}return a.mergedAttrs=bn(a.mergedAttrs,a.attrs),d}function oC(s,o,a,l,d,g){const v=g.hostBindings;if(v){let w=s.hostBindingOpCodes;null===w&&(w=s.hostBindingOpCodes=[]);const I=~o.index;(function IM(s){let o=s.length;for(;o>0;){const a=s[--o];if("number"==typeof a&&a<0)return a}return 0})(w)!=I&&w.push(I),w.push(l,d,v)}}function Y_(s,o){null!==s.hostBindings&&s.hostBindings(1,o)}function Q_(s,o){o.flags|=2,(s.components||(s.components=[])).push(o.index)}function X_(s,o,a){if(a){if(o.exportAs)for(let l=0;l<o.exportAs.length;l++)a[o.exportAs[l]]=s;Hi(o)&&(a[""]=s)}}function aw(s,o,a){s.flags|=1,s.directiveStart=o,s.directiveEnd=o+a,s.providerIndexes=o}function pm(s,o,a,l,d){s.data[l]=d;const g=d.factory||(d.factory=yr(d.type)),v=new Uu(g,Hi(d),null);s.blueprint[l]=v,a[l]=v,oC(s,o,0,l,ul(s,a,d.hostVars,Mt),d)}function lC(s,o,a){const l=sr(o,s),d=dm(a),g=s[10],v=Xd(s,Hf(s,d,null,a.onPush?64:16,l,o,g,g.createRenderer(l,a),null,null));s[o.index]=v}function cu(s,o,a,l,d,g){const v=sr(s,o);!function gm(s,o,a,l,d,g,v){if(null==g)nn(s)?s.removeAttribute(o,d,a):o.removeAttribute(d);else{const w=null==v?fe(g):v(g,l||"",d);nn(s)?s.setAttribute(o,d,w,a):a?o.setAttributeNS(a,d,w):o.setAttribute(d,w)}}(o[11],v,g,s.value,a,l,d)}function cC(s,o,a,l,d,g){const v=g[o];if(null!==v){const w=l.setInput;for(let I=0;I<v.length;){const S=v[I++],x=v[I++],k=v[I++];null!==w?l.setInput(a,k,S,x):a[x]=k}}}function ev(s,o){let a=null,l=0;for(;l<o.length;){const d=o[l];if(0!==d)if(5!==d){if("number"==typeof d)break;s.hasOwnProperty(d)&&(null===a&&(a=[]),a.push(d,s[d],o[l+1])),l+=2}else l+=2;else l+=4}return a}function tv(s,o,a,l){return new Array(s,!0,!1,o,null,0,l,a,null,null)}function uw(s,o){const a=or(o,s);if(us(a)){const l=a[1];80&a[2]?ll(l,a,l.template,a[8]):a[5]>0&&rv(a)}}function rv(s){for(let l=Tn(s);null!==l;l=gi(l))for(let d=10;d<l.length;d++){const g=l[d];if(1024&g[2]){const v=g[1];ll(v,g,v.template,g[8])}else g[5]>0&&rv(g)}const a=s[1].components;if(null!==a)for(let l=0;l<a.length;l++){const d=or(a[l],s);us(d)&&d[5]>0&&rv(d)}}function Kf(s,o){const a=or(o,s),l=a[1];(function hC(s,o){for(let a=o.length;a<s.blueprint.length;a++)o.push(s.blueprint[a])})(l,a),cm(l,a,a[8])}function Xd(s,o){return s[13]?s[14][4]=o:s[13]=o,s[14]=o,o}function iv(s){for(;s;){s[2]|=64;const o=Ye(s);if(kl(s)&&!o)return s;s=o}return null}function ov(s,o,a){const l=o[10];l.begin&&l.begin();try{ll(s,o,s.template,a)}catch(d){throw gC(o,d),d}finally{l.end&&l.end()}}function Zf(s){!function mm(s){for(let o=0;o<s.components.length;o++){const a=s.components[o],l=$d(a),d=l[1];Gf(d,l,d.template,a)}}(s[8])}function av(s,o,a){Ga(0),o(s,a)}const pC=(()=>Promise.resolve(null))();function dw(s){return s[7]||(s[7]=[])}function uv(s){return s.cleanup||(s.cleanup=[])}function gC(s,o){const a=s[9],l=a?a.get(Gd,null):null;l&&l.handleError(o)}function ym(s,o,a,l,d){for(let g=0;g<a.length;){const v=a[g++],w=a[g++],I=o[v],S=s.data[v];null!==S.setInput?S.setInput(I,d,l,w):I[w]=d}}function du(s,o,a){const l=Fs(o,s);!function zd(s,o,a){nn(s)?s.setValue(o,a):o.textContent=a}(s[11],l,a)}function Yf(s,o,a){let l=a?s.styles:null,d=a?s.classes:null,g=0;if(null!==o)for(let v=0;v<o.length;v++){const w=o[v];"number"==typeof w?g=w:1==g?d=he(d,w):2==g&&(l=he(l,w+": "+o[++v]+";"))}a?s.styles=l:s.stylesWithoutHost=l,a?s.classes=d:s.classesWithoutHost=d}const lv=new gn("INJECTOR",-1);class cv{get(o,a=da){if(a===da){const l=new Error(`NullInjectorError: No provider for ${oe(o)}!`);throw l.name="NullInjectorError",l}return a}}const dv=new gn("Set Injector scope."),th={},yC={};let hv;function _m(){return void 0===hv&&(hv=new cv),hv}function fv(s,o=null,a=null,l){const d=pw(s,o,a,l);return d._resolveInjectorDefTypes(),d}function pw(s,o=null,a=null,l){return new gw(s,a,o||_m(),l)}class gw{constructor(o,a,l,d=null){this.parent=l,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const g=[];a&&Hr(a,w=>this.processProvider(w,o,a)),Hr([o],w=>this.processInjectorType(w,[],g)),this.records.set(lv,nh(void 0,this));const v=this.records.get(dv);this.scope=null!=v?v.value:null,this.source=d||("object"==typeof o?null:oe(o))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(o=>o.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(o,a=da,l=yt.Default){this.assertNotDestroyed();const d=ne(this),g=xn(void 0);try{if(!(l&yt.SkipSelf)){let w=this.records.get(o);if(void 0===w){const I=function EC(s){return"function"==typeof s||"object"==typeof s&&s instanceof gn}(o)&&Vt(o);w=I&&this.injectableDefInScope(I)?nh(pv(o),th):null,this.records.set(o,w)}if(null!=w)return this.hydrate(o,w)}return(l&yt.Self?_m():this.parent).get(o,a=l&yt.Optional&&a===da?null:a)}catch(v){if("NullInjectorError"===v.name){if((v[_o]=v[_o]||[]).unshift(oe(o)),d)throw v;return function tr(s,o,a,l){const d=s[_o];throw o[R]&&d.unshift(o[R]),s.message=function fs(s,o,a,l=null){s=s&&"\n"===s.charAt(0)&&"\u0275"==s.charAt(1)?s.substr(2):s;let d=oe(o);if(Array.isArray(o))d=o.map(oe).join(" -> ");else if("object"==typeof o){let g=[];for(let v in o)if(o.hasOwnProperty(v)){let w=o[v];g.push(v+":"+("string"==typeof w?JSON.stringify(w):oe(w)))}d=`{${g.join(", ")}}`}return`${a}${l?"("+l+")":""}[${d}]: ${s.replace(D,"\n  ")}`}("\n"+s.message,d,a,l),s.ngTokenPath=d,s[_o]=null,s}(v,o,"R3InjectorError",this.source)}throw v}finally{xn(g),ne(d)}}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(o=>this.get(o))}toString(){const o=[];return this.records.forEach((l,d)=>o.push(oe(d))),`R3Injector[${o.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Ne(205,!1)}processInjectorType(o,a,l){if(!(o=te(o)))return!1;let d=Cr(o);const g=null==d&&o.ngModule||void 0,v=void 0===g?o:g,w=-1!==l.indexOf(v);if(void 0!==g&&(d=Cr(g)),null==d)return!1;if(null!=d.imports&&!w){let x;l.push(v);try{Hr(d.imports,k=>{this.processInjectorType(k,a,l)&&(void 0===x&&(x=[]),x.push(k))})}finally{}if(void 0!==x)for(let k=0;k<x.length;k++){const{ngModule:j,providers:Q}=x[k];Hr(Q,_e=>this.processProvider(_e,j,Q||U))}}this.injectorDefTypes.add(v);const I=yr(v)||(()=>new v);this.records.set(v,nh(I,th));const S=d.providers;if(null!=S&&!w){const x=o;Hr(S,k=>this.processProvider(k,x,S))}return void 0!==g&&void 0!==o.providers}processProvider(o,a,l){let d=Qf(o=te(o))?o:te(o&&o.provide);const g=function _C(s,o,a){return mv(s)?nh(void 0,s.useValue):nh(gv(s),th)}(o);if(Qf(o)||!0!==o.multi)this.records.get(d);else{let v=this.records.get(d);v||(v=nh(void 0,th,!0),v.factory=()=>jt(v.multi),this.records.set(d,v)),d=o,v.multi.push(o)}this.records.set(d,g)}hydrate(o,a){return a.value===th&&(a.value=yC,a.value=a.factory()),"object"==typeof a.value&&a.value&&function _w(s){return null!==s&&"object"==typeof s&&"function"==typeof s.ngOnDestroy}(a.value)&&this.onDestroy.add(a.value),a.value}injectableDefInScope(o){if(!o.providedIn)return!1;const a=te(o.providedIn);return"string"==typeof a?"any"===a||a===this.scope:this.injectorDefTypes.has(a)}}function pv(s){const o=Vt(s),a=null!==o?o.factory:yr(s);if(null!==a)return a;if(s instanceof gn)throw new Ne(204,!1);if(s instanceof Function)return function mw(s){const o=s.length;if(o>0)throw function mo(s,o){const a=[];for(let l=0;l<s;l++)a.push(o);return a}(o,"?"),new Ne(204,!1);const a=function Jr(s){const o=s&&(s[Fi]||s[Xr]);if(o){const a=function hr(s){if(s.hasOwnProperty("name"))return s.name;const o=(""+s).match(/^function\s*([^\s(]+)/);return null===o?"":o[1]}(s);return console.warn(`DEPRECATED: DI is instantiating a token "${a}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${a}" class.`),o}return null}(s);return null!==a?()=>a.factory(s):()=>new s}(s);throw new Ne(204,!1)}function gv(s,o,a){let l;if(Qf(s)){const d=te(s);return yr(d)||pv(d)}if(mv(s))l=()=>te(s.useValue);else if(function AM(s){return!(!s||!s.useFactory)}(s))l=()=>s.useFactory(...jt(s.deps||[]));else if(function TM(s){return!(!s||!s.useExisting)}(s))l=()=>Ve(te(s.useExisting));else{const d=te(s&&(s.useClass||s.provide));if(!function vC(s){return!!s.deps}(s))return yr(d)||pv(d);l=()=>new d(...jt(s.deps))}return l}function nh(s,o,a=!1){return{factory:s,value:o,multi:a?[]:void 0}}function mv(s){return null!==s&&"object"==typeof s&&L in s}function Qf(s){return"function"==typeof s}let Co=(()=>{class s{static create(a,l){var d;if(Array.isArray(a))return fv({name:""},l,a,"");{const g=null!==(d=a.name)&&void 0!==d?d:"";return fv({name:g},a.parent,a.providers,g)}}}return s.THROW_IF_NOT_FOUND=da,s.NULL=new cv,s.\u0275prov=Qt({token:s,providedIn:"any",factory:()=>Ve(lv)}),s.__NG_ELEMENT_ID__=-1,s})();function IC(s,o){Id($d(s)[1],pn())}function vr(s){let o=function Jf(s){return Object.getPrototypeOf(s.prototype).constructor}(s.type),a=!0;const l=[s];for(;o;){let d;if(Hi(s))d=o.\u0275cmp||o.\u0275dir;else{if(o.\u0275cmp)throw new Ne(903,"");d=o.\u0275dir}if(d){if(a){l.push(d);const v=s;v.inputs=Ev(s.inputs),v.declaredInputs=Ev(s.declaredInputs),v.outputs=Ev(s.outputs);const w=d.hostBindings;w&&Dw(s,w);const I=d.viewQuery,S=d.contentQueries;if(I&&DC(s,I),S&&Iw(s,S),ue(s.inputs,d.inputs),ue(s.declaredInputs,d.declaredInputs),ue(s.outputs,d.outputs),Hi(d)&&d.data.animation){const x=s.data;x.animation=(x.animation||[]).concat(d.data.animation)}}const g=d.features;if(g)for(let v=0;v<g.length;v++){const w=g[v];w&&w.ngInherit&&w(s),w===vr&&(a=!1)}}o=Object.getPrototypeOf(o)}!function dl(s){let o=0,a=null;for(let l=s.length-1;l>=0;l--){const d=s[l];d.hostVars=o+=d.hostVars,d.hostAttrs=bn(d.hostAttrs,a=bn(a,d.hostAttrs))}}(l)}function Ev(s){return s===gr?{}:s===U?[]:s}function DC(s,o){const a=s.viewQuery;s.viewQuery=a?(l,d)=>{o(l,d),a(l,d)}:o}function Iw(s,o){const a=s.contentQueries;s.contentQueries=a?(l,d,g)=>{o(l,d,g),a(l,d,g)}:o}function Dw(s,o){const a=s.hostBindings;s.hostBindings=a?(l,d)=>{o(l,d),a(l,d)}:o}let pc=null;function gc(){if(!pc){const s=Bt.Symbol;if(s&&s.iterator)pc=s.iterator;else{const o=Object.getOwnPropertyNames(Map.prototype);for(let a=0;a<o.length;++a){const l=o[a];"entries"!==l&&"size"!==l&&Map.prototype[l]===Map.prototype.entries&&(pc=l)}}}return pc}function mc(s){return!!Im(s)&&(Array.isArray(s)||!(s instanceof Map)&&gc()in s)}function Im(s){return null!==s&&("function"==typeof s||"object"==typeof s)}function zr(s,o,a){return!Object.is(s[o],a)&&(s[o]=a,!0)}function bv(s,o,a,l){const d=Se();return zr(d,Ls(),o)&&(Ft(),cu(wn(),d,s,o,a,l)),bv}function fl(s,o,a,l,d,g){const w=function hl(s,o,a,l){const d=zr(s,o,a);return zr(s,o+1,l)||d}(s,function ls(){return pt.lFrame.bindingIndex}(),a,d);return Si(2),w?o+fe(a)+l+fe(d)+g:Mt}function uh(s,o,a,l,d,g,v,w){const I=Se(),S=Ft(),x=s+20,k=S.firstCreatePass?function TC(s,o,a,l,d,g,v,w,I){const S=o.consts,x=dc(o,s,4,v||null,Ai(S,w));ow(o,a,x,Ai(S,I)),Id(o,x);const k=x.tViews=zf(2,x,l,d,g,o.directiveRegistry,o.pipeRegistry,null,o.schemas,S);return null!==o.queries&&(o.queries.template(o,x),k.queries=o.queries.embeddedTView(x)),x}(x,S,I,o,a,l,d,g,v):S.data[x];ii(k,!1);const j=I[11].createComment("");em(S,I,j,k),ur(j,I),Xd(I,I[x]=tv(j,I,j,k)),ji(k)&&fc(S,I,k),null!=v&&G_(I,k,w)}function Rw(s){return function qi(s,o){return s[o]}(function ku(){return pt.lFrame.contextLView}(),20+s)}function tp(s,o=yt.Default){const a=Se();return null===a?Ve(s,o):Bs(pn(),a,te(s),o)}function Gw(){throw new Error("invalid")}function yl(s,o,a){const l=Se();return zr(l,Ls(),o)&&function Ri(s,o,a,l,d,g,v,w){const I=sr(o,a);let x,S=o.inputs;!w&&null!=S&&(x=S[l])?(ym(s,a,x,l,d),ud(o)&&function Z_(s,o){const a=or(o,s);16&a[2]||(a[2]|=64)}(a,o.index)):3&o.type&&(l=function rw(s){return"class"===s?"className":"for"===s?"htmlFor":"formaction"===s?"formAction":"innerHtml"===s?"innerHTML":"readonly"===s?"readOnly":"tabindex"===s?"tabIndex":s}(l),d=null!=v?v(d,o.value||"",l):d,nn(g)?g.setProperty(I,l,d):oi(l)||(I.setProperty?I.setProperty(l,d):I[l]=d))}(Ft(),wn(),l,s,o,l[11],a,!1),yl}function Pv(s,o,a,l,d){const v=d?"class":"style";ym(s,a,o.inputs[v],v,l)}function Ea(s,o,a,l){const d=Se(),g=Ft(),v=20+s,w=d[11],I=d[v]=Wd(w,o,function bd(){return pt.lFrame.currentNamespace}()),S=g.firstCreatePass?function PC(s,o,a,l,d,g,v){const w=o.consts,S=dc(o,s,2,d,Ai(w,g));return ow(o,a,S,Ai(w,v)),null!==S.attrs&&Yf(S,S.attrs,!1),null!==S.mergedAttrs&&Yf(S,S.mergedAttrs,!0),null!==o.queries&&o.queries.elementStart(o,S),S}(v,g,d,0,o,a,l):g.data[v];ii(S,!0);const x=S.mergedAttrs;null!==x&&rt(w,I,x);const k=S.classes;null!==k&&nm(w,I,k);const j=S.styles;return null!==j&&L0(w,I,j),64!=(64&S.flags)&&em(g,d,I,S),0===function Nu(){return pt.lFrame.elementDepthCount}()&&ur(I,d),function Va(){pt.lFrame.elementDepthCount++}(),ji(S)&&(fc(g,d,S),function hc(s,o,a){if(xu(o)){const d=o.directiveEnd;for(let g=o.directiveStart;g<d;g++){const v=s.data[g];v.contentQueries&&v.contentQueries(1,a[g],g)}}}(g,S,d)),null!==l&&G_(d,S),Ea}function np(){let s=pn();Ba()?function Gl(){pt.lFrame.isParent=!1}():(s=s.parent,ii(s,!1));const o=s;!function jl(){pt.lFrame.elementDepthCount--}();const a=Ft();return a.firstCreatePass&&(Id(a,s),xu(s)&&a.queries.elementEnd(s)),null!=o.classesWithoutHost&&function Cd(s){return 0!=(16&s.flags)}(o)&&Pv(a,o,Se(),o.classesWithoutHost,!0),null!=o.stylesWithoutHost&&function bg(s){return 0!=(32&s.flags)}(o)&&Pv(a,o,Se(),o.stylesWithoutHost,!1),np}function lh(s,o,a,l){return Ea(s,o,a,l),np(),lh}function ch(){return Se()}function dh(s){return!!s&&"function"==typeof s.then}function Ov(s){return!!s&&"function"==typeof s.subscribe}const Lm=Ov;function Vm(s,o,a,l){const d=Se(),g=Ft(),v=pn();return function Um(s,o,a,l,d,g,v,w){const I=ji(l),x=s.firstCreatePass&&uv(s),k=o[8],j=dw(o);let Q=!0;if(3&l.type||w){const Ge=sr(l,o),st=w?w(Ge):Ge,Me=j.length,mt=w?Ht=>w(Jt(Ht[l.index])):l.index;if(nn(a)){let Ht=null;if(!w&&I&&(Ht=function ip(s,o,a,l){const d=s.cleanup;if(null!=d)for(let g=0;g<d.length-1;g+=2){const v=d[g];if(v===a&&d[g+1]===l){const w=o[7],I=d[g+2];return w.length>I?w[I]:null}"string"==typeof v&&(g+=2)}return null}(s,o,d,l.index)),null!==Ht)(Ht.__ngLastListenerFn__||Ht).__ngNextListenerFn__=g,Ht.__ngLastListenerFn__=g,Q=!1;else{g=sp(l,o,k,g,!1);const rn=a.listen(st,d,g);j.push(g,rn),x&&x.push(d,mt,Me,Me+1)}}else g=sp(l,o,k,g,!0),st.addEventListener(d,g,v),j.push(g),x&&x.push(d,mt,Me,v)}else g=sp(l,o,k,g,!1);const _e=l.outputs;let Fe;if(Q&&null!==_e&&(Fe=_e[d])){const Ge=Fe.length;if(Ge)for(let st=0;st<Ge;st+=2){const bi=o[Fe[st]][Fe[st+1]].subscribe(g),No=j.length;j.push(g,bi),x&&x.push(d,l.index,No,-(No+1))}}}(g,d,d[11],v,s,o,!!a,l),Vm}function Bm(s,o,a,l){try{return!1!==a(l)}catch(d){return gC(s,d),!1}}function sp(s,o,a,l,d){return function g(v){if(v===Function)return l;const w=2&s.flags?or(s.index,o):o;0==(32&o[2])&&iv(w);let I=Bm(o,0,l,v),S=g.__ngNextListenerFn__;for(;S;)I=Bm(o,0,S,v)&&I,S=S.__ngNextListenerFn__;return d&&!1===I&&(v.preventDefault(),v.returnValue=!1),I}}function op(s=1){return function Wi(s){return(pt.lFrame.contextLView=function df(s,o){for(;s>0;)o=o[15],s--;return o}(s,pt.lFrame.contextLView))[8]}(s)}function Ww(s,o,a,l,d){const g=s[a+1],v=null===o;let w=l?Io(g):_a(g),I=!1;for(;0!==w&&(!1===I||v);){const x=s[w+1];jv(s[w],o)&&(I=!0,s[w+1]=l?rm(x):Vf(x)),w=l?Io(x):_a(x)}I&&(s[a+1]=l?Vf(g):rm(g))}function jv(s,o){return null===s||null==o||(Array.isArray(s)?s[1]:s)===o||!(!Array.isArray(s)||"string"!=typeof o)&&$s(s,o)>=0}function Dc(s,o){return function So(s,o,a,l){const d=Se(),g=Ft(),v=Si(2);g.firstUpdatePass&&function pu(s,o,a,l){const d=s.data;if(null===d[a+1]){const g=d[Yn()],v=function gh(s,o){return o>=s.expandoStartIndex}(s,a);(function Gv(s,o){return 0!=(s.flags&(o?16:32))})(g,l)&&null===o&&!v&&(o=!1),o=function Xw(s,o,a,l){const d=function Yo(s){const o=pt.lFrame.currentDirectiveIndex;return-1===o?null:s[o]}(s);let g=l?o.residualClasses:o.residualStyles;if(null===d)0===(l?o.classBindings:o.styleBindings)&&(a=cp(a=Hv(null,s,o,a,l),o.attrs,l),g=null);else{const v=o.directiveStylingLast;if(-1===v||s[v]!==d)if(a=Hv(d,s,o,a,l),null===g){let I=function eb(s,o,a){const l=a?o.classBindings:o.styleBindings;if(0!==_a(l))return s[Io(l)]}(s,o,l);void 0!==I&&Array.isArray(I)&&(I=Hv(null,s,o,I[1],l),I=cp(I,o.attrs,l),function tb(s,o,a,l){s[Io(a?o.classBindings:o.styleBindings)]=l}(s,o,l,I))}else g=function mh(s,o,a){let l;const d=o.directiveEnd;for(let g=1+o.directiveStylingLast;g<d;g++)l=cp(l,s[g].hostAttrs,a);return cp(l,o.attrs,a)}(s,o,l)}return void 0!==g&&(l?o.residualClasses=g:o.residualStyles=g),a}(d,g,o,l),function wc(s,o,a,l,d,g){let v=g?o.classBindings:o.styleBindings,w=Io(v),I=_a(v);s[l]=a;let x,S=!1;if(Array.isArray(a)){const k=a;x=k[1],(null===x||$s(k,x)>0)&&(S=!0)}else x=a;if(d)if(0!==I){const j=Io(s[w+1]);s[l+1]=Lf(j,w),0!==j&&(s[j+1]=Uf(s[j+1],l)),s[w+1]=function K0(s,o){return 131071&s|o<<17}(s[w+1],l)}else s[l+1]=Lf(w,0),0!==w&&(s[w+1]=Uf(s[w+1],l)),w=l;else s[l+1]=Lf(I,0),0===w?w=l:s[I+1]=Uf(s[I+1],l),I=l;S&&(s[l+1]=Vf(s[l+1])),Ww(s,x,l,!0),Ww(s,x,l,!1),function Bv(s,o,a,l,d){const g=d?s.residualClasses:s.residualStyles;null!=g&&"string"==typeof o&&$s(g,o)>=0&&(a[l+1]=rm(a[l+1]))}(o,x,s,l,g),v=Lf(w,I),g?o.classBindings=v:o.styleBindings=v}(d,g,o,a,v,l)}}(g,s,v,l),o!==Mt&&zr(d,v,o)&&function $v(s,o,a,l,d,g,v,w){if(!(3&o.type))return;const I=s.data,S=I[w+1];yh(function k_(s){return 1==(1&s)}(S)?Wm(I,o,a,d,_a(S),v):void 0)||(yh(g)||function O_(s){return 2==(2&s)}(S)&&(g=Wm(I,null,a,d,w,v)),function ya(s,o,a,l,d){const g=nn(s);if(o)d?g?s.addClass(a,l):a.classList.add(l):g?s.removeClass(a,l):a.classList.remove(l);else{let v=-1===l.indexOf("-")?void 0:T.DashCase;if(null==d)g?s.removeStyle(a,l,v):a.style.removeProperty(l);else{const w="string"==typeof d&&d.endsWith("!important");w&&(d=d.slice(0,-10),v|=T.Important),g?s.setStyle(a,l,d,v):a.style.setProperty(l,d,w?"important":"")}}}(l,v,Fs(Yn(),a),d,g))}(g,g.data[Yn()],d,d[11],s,d[v+1]=function sb(s,o){return null==s||("string"==typeof o?s+=o:"object"==typeof s&&(s=oe(pa(s)))),s}(o,a),l,v)}(s,o,null,!0),Dc}function Hv(s,o,a,l,d){let g=null;const v=a.directiveEnd;let w=a.directiveStylingLast;for(-1===w?w=a.directiveStart:w++;w<v&&(g=o[w],l=cp(l,g.hostAttrs,d),g!==s);)w++;return null!==s&&(a.directiveStylingLast=w),l}function cp(s,o,a){const l=a?1:2;let d=-1;if(null!==o)for(let g=0;g<o.length;g++){const v=o[g];"number"==typeof v?d=v:d===l&&(Array.isArray(s)||(s=void 0===s?[]:["",s]),Xn(s,v,!!a||o[++g]))}return void 0===s?null:s}function Wm(s,o,a,l,d,g){const v=null===o;let w;for(;d>0;){const I=s[d],S=Array.isArray(I),x=S?I[1]:I,k=null===x;let j=a[d+1];j===Mt&&(j=k?U:void 0);let Q=k?Xa(j,l):x===l?j:void 0;if(S&&!yh(Q)&&(Q=Xa(I,l)),yh(Q)&&(w=Q,v))return w;const _e=s[d+1];d=v?Io(_e):_a(_e)}if(null!==o){let I=g?o.residualClasses:o.residualStyles;null!=I&&(w=Xa(I,l))}return w}function yh(s){return void 0!==s}function Km(s,o=""){const a=Se(),l=Ft(),d=s+20,g=l.firstCreatePass?dc(l,d,1,o,null):l.data[d],v=a[d]=function qd(s,o){return nn(s)?s.createText(o):s.createTextNode(o)}(a[11],o);em(l,a,v,g),ii(g,!1)}function qv(s){return Zm("",s,""),qv}function Zm(s,o,a){const l=Se(),d=function yc(s,o,a,l){return zr(s,Ls(),a)?o+fe(a)+l:Mt}(l,s,o,a);return d!==Mt&&du(l,Yn(),d),Zm}function zv(s,o,a,l,d){const g=Se(),v=fl(g,s,o,a,l,d);return v!==Mt&&du(g,Yn(),v),zv}const mu=void 0;var ty=["en",[["a","p"],["AM","PM"],mu],[["AM","PM"],mu,mu],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],mu,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],mu,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",mu,"{1} 'at' {0}",mu],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function pb(s){const a=Math.floor(Math.abs(s)),l=s.toString().replace(/^[^.]*\.?/,"").length;return 1===a&&0===l?1:5}];let Cc={};function yu(s){const o=function _s(s){return s.toLowerCase().replace(/_/g,"-")}(s);let a=eE(o);if(a)return a;const l=o.split("-")[0];if(a=eE(l),a)return a;if("en"===l)return ty;throw new Error(`Missing locale data for the locale "${s}".`)}function Xv(s){return yu(s)[gt.PluralCase]}function eE(s){return s in Cc||(Cc[s]=Bt.ng&&Bt.ng.common&&Bt.ng.common.locales&&Bt.ng.common.locales[s]),Cc[s]}var gt=(()=>((gt=gt||{})[gt.LocaleId=0]="LocaleId",gt[gt.DayPeriodsFormat=1]="DayPeriodsFormat",gt[gt.DayPeriodsStandalone=2]="DayPeriodsStandalone",gt[gt.DaysFormat=3]="DaysFormat",gt[gt.DaysStandalone=4]="DaysStandalone",gt[gt.MonthsFormat=5]="MonthsFormat",gt[gt.MonthsStandalone=6]="MonthsStandalone",gt[gt.Eras=7]="Eras",gt[gt.FirstDayOfWeek=8]="FirstDayOfWeek",gt[gt.WeekendRange=9]="WeekendRange",gt[gt.DateFormat=10]="DateFormat",gt[gt.TimeFormat=11]="TimeFormat",gt[gt.DateTimeFormat=12]="DateTimeFormat",gt[gt.NumberSymbols=13]="NumberSymbols",gt[gt.NumberFormats=14]="NumberFormats",gt[gt.CurrencyCode=15]="CurrencyCode",gt[gt.CurrencySymbol=16]="CurrencySymbol",gt[gt.CurrencyName=17]="CurrencyName",gt[gt.Currencies=18]="Currencies",gt[gt.Directionality=19]="Directionality",gt[gt.PluralCase=20]="PluralCase",gt[gt.ExtraData=21]="ExtraData",gt))();const _u="en-US";let tE=_u;function sy(s,o,a,l,d){if(s=te(s),Array.isArray(s))for(let g=0;g<s.length;g++)sy(s[g],o,a,l,d);else{const g=Ft(),v=Se();let w=Qf(s)?s:te(s.provide),I=gv(s);const S=pn(),x=1048575&S.providerIndexes,k=S.directiveStart,j=S.providerIndexes>>20;if(Qf(s)||!s.multi){const Q=new Uu(I,d,tp),_e=Cp(w,o,d?x:x+j,k);-1===_e?(ar(In(S,v),g,w),mn(g,s,o.length),o.push(w),S.directiveStart++,S.directiveEnd++,d&&(S.providerIndexes+=1048576),a.push(Q),v.push(Q)):(a[_e]=Q,v[_e]=Q)}else{const Q=Cp(w,o,x+j,k),_e=Cp(w,o,x,x+j),Fe=Q>=0&&a[Q],Ge=_e>=0&&a[_e];if(d&&!Ge||!d&&!Fe){ar(In(S,v),g,w);const st=function kb(s,o,a,l,d){const g=new Uu(s,a,tp);return g.multi=[],g.index=o,g.componentProviders=0,Dp(g,d,l&&!a),g}(d?oy:xc,a.length,d,l,I);!d&&Ge&&(a[_e].providerFactory=st),mn(g,s,o.length,0),o.push(w),S.directiveStart++,S.directiveEnd++,d&&(S.providerIndexes+=1048576),a.push(st),v.push(st)}else mn(g,s,Q>-1?Q:_e,Dp(a[d?_e:Q],I,!d&&l));!d&&l&&Ge&&a[_e].componentProviders++}}}function mn(s,o,a,l){const d=Qf(o),g=function yw(s){return!!s.useClass}(o);if(d||g){const I=(g?te(o.useClass):o).prototype.ngOnDestroy;if(I){const S=s.destroyHooks||(s.destroyHooks=[]);if(!d&&o.multi){const x=S.indexOf(a);-1===x?S.push(a,[l,I]):S[x+1].push(l,I)}else S.push(a,I)}}}function Dp(s,o,a){return a&&s.componentProviders++,s.multi.push(o)-1}function Cp(s,o,a,l){for(let d=a;d<l;d++)if(o[d]===s)return d;return-1}function xc(s,o,a,l){return Rc(this.multi,[])}function oy(s,o,a,l){const d=this.multi;let g;if(this.providerFactory){const v=this.providerFactory.componentProviders,w=aa(a,a[1],this.providerFactory.index,l);g=w.slice(0,v),Rc(d,g);for(let I=v;I<w.length;I++)g.push(w[I])}else g=[],Rc(d,g);return g}function Rc(s,o){for(let a=0;a<s.length;a++)o.push((0,s[a])());return o}function Fb(s,o=[]){return a=>{a.providersResolver=(l,d)=>function vi(s,o,a){const l=Ft();if(l.firstCreatePass){const d=Hi(s);sy(a,l.data,l.blueprint,d,!0),sy(o,l.data,l.blueprint,d,!1)}}(l,d?d(s):s,o)}}class dE{}class vn{resolveComponentFactory(o){throw function nr(s){const o=Error(`No component factory found for ${oe(s)}. Did you add it to @NgModule.entryComponents?`);return o.ngComponent=s,o}(o)}}let Ap=(()=>{class s{}return s.NULL=new vn,s})();function Ah(){return Sh(pn(),Se())}function Sh(s,o){return new Mh(sr(s,o))}let Mh=(()=>{class s{constructor(a){this.nativeElement=a}}return s.__NG_ELEMENT_ID__=Ah,s})();function Pc(s){return s instanceof Mh?s.nativeElement:s}class xh{}let ay=(()=>{class s{}return s.__NG_ELEMENT_ID__=()=>function Lb(){const s=Se(),a=or(pn().index,s);return function uy(s){return s[11]}(Ur(a)?a:s)}(),s})(),Vb=(()=>{class s{}return s.\u0275prov=Qt({token:s,providedIn:"root",factory:()=>null}),s})();class Nr{constructor(o){this.full=o,this.major=o.split(".")[0],this.minor=o.split(".")[1],this.patch=o.split(".").slice(2).join(".")}}const Ub=new Nr("13.3.6"),hE={};function ly(s,o,a,l,d=!1){for(;null!==a;){const g=o[a.index];if(null!==g&&l.push(Jt(g)),Bi(g))for(let w=10;w<g.length;w++){const I=g[w],S=I[1].firstChild;null!==S&&ly(I[1],I,S,l)}const v=a.type;if(8&v)ly(s,o,a.child,l);else if(32&v){const w=K(a,o);let I;for(;I=w();)l.push(I)}else if(16&v){const w=F0(o,a);if(Array.isArray(w))l.push(...w);else{const I=Ye(o[16]);ly(I[1],I,w,l,!0)}}a=d?a.projectionNext:a.next}return l}class Rh{constructor(o,a){this._lView=o,this._cdRefInjectingView=a,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const o=this._lView,a=o[1];return ly(a,o,a.firstChild,[])}get context(){return this._lView[8]}set context(o){this._lView[8]=o}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const o=this._lView[3];if(Bi(o)){const a=o[8],l=a?a.indexOf(this):-1;l>-1&&(E_(o,l),go(a,l))}this._attachedToViewContainer=!1}w_(this._lView[1],this._lView)}onDestroy(o){Wf(this._lView[1],this._lView,null,o)}markForCheck(){iv(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){ov(this._lView[1],this._lView,this.context)}checkNoChanges(){!function fC(s,o,a){Fu(!0);try{ov(s,o,a)}finally{Fu(!1)}}(this._lView[1],this._lView,this.context)}attachToViewContainerRef(){if(this._appRef)throw new Ne(902,"");this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function Of(s,o){tm(s,o,o[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(o){if(this._attachedToViewContainer)throw new Ne(902,"");this._appRef=o}}class eT extends Rh{constructor(o){super(o),this._view=o}detectChanges(){Zf(this._view)}checkNoChanges(){!function lw(s){Fu(!0);try{Zf(s)}finally{Fu(!1)}}(this._view)}get context(){return null}}class Bb extends Ap{constructor(o){super(),this.ngModule=o}resolveComponentFactory(o){const a=jn(o);return new Il(a,this.ngModule)}}function jb(s){const o=[];for(let a in s)s.hasOwnProperty(a)&&o.push({propName:s[a],templateName:a});return o}class Il extends dE{constructor(o,a){super(),this.componentDef=o,this.ngModule=a,this.componentType=o.type,this.selector=function z0(s){return s.map(q0).join(",")}(o.selectors),this.ngContentSelectors=o.ngContentSelectors?o.ngContentSelectors:[],this.isBoundToModule=!!a}get inputs(){return jb(this.componentDef.inputs)}get outputs(){return jb(this.componentDef.outputs)}create(o,a,l,d){const g=(d=d||this.ngModule)?function bl(s,o){return{get:(a,l,d)=>{const g=s.get(a,hE,d);return g!==hE||l===hE?g:o.get(a,l,d)}}}(o,d.injector):o,v=g.get(xh,ka),w=g.get(Vb,null),I=v.createRenderer(null,this.componentDef),S=this.componentDef.selectors[0][0]||"div",x=l?function hm(s,o,a){if(nn(s))return s.selectRootElement(o,a===Gt.ShadowDom);let l="string"==typeof o?s.querySelector(o):o;return l.textContent="",l}(I,l,this.componentDef.encapsulation):Wd(v.createRenderer(null,this.componentDef),S,function tT(s){const o=s.toLowerCase();return"svg"===o?"svg":"math"===o?"math":null}(S)),k=this.componentDef.onPush?576:528,j=function bw(s,o){return{components:[],scheduler:s||y_,clean:pC,playerHandler:o||null,flags:0}}(),Q=zf(0,null,null,1,0,null,null,null,null,null),_e=Hf(null,Q,j,k,null,null,v,I,w,g);let Fe,Ge;Qo(_e);try{const st=function bm(s,o,a,l,d,g){const v=a[1];a[20]=s;const I=dc(v,20,2,"#host",null),S=I.mergedAttrs=o.hostAttrs;null!==S&&(Yf(I,S,!0),null!==s&&(rt(d,s,S),null!==I.classes&&nm(d,s,I.classes),null!==I.styles&&L0(d,s,I.styles)));const x=l.createRenderer(s,o),k=Hf(a,dm(o),null,o.onPush?64:16,a[20],I,l,x,g||null,null);return v.firstCreatePass&&(ar(In(I,a),v,o.type),Q_(v,I),aw(I,a.length,1)),Xd(a,k),a[20]=k}(x,this.componentDef,_e,v,I);if(x)if(l)rt(I,x,["ng-version",Ub.full]);else{const{attrs:Me,classes:mt}=function W0(s){const o=[],a=[];let l=1,d=2;for(;l<s.length;){let g=s[l];if("string"==typeof g)2===d?""!==g&&o.push(g,s[++l]):8===d&&a.push(g);else{if(!Rr(d))break;d=g}l++}return{attrs:o,classes:a}}(this.componentDef.selectors[0]);Me&&rt(I,x,Me),mt&&mt.length>0&&nm(I,x,mt.join(" "))}if(Ge=yn(Q,20),void 0!==a){const Me=Ge.projection=[];for(let mt=0;mt<this.ngContentSelectors.length;mt++){const Ht=a[mt];Me.push(null!=Ht?Array.from(Ht):null)}}Fe=function ww(s,o,a,l,d){const g=a[1],v=function sw(s,o,a){const l=pn();s.firstCreatePass&&(a.providersResolver&&a.providersResolver(a),pm(s,l,o,ul(s,o,1,null),a));const d=aa(o,s,l.directiveStart,l);ur(d,o);const g=sr(l,o);return g&&ur(g,o),d}(g,a,o);if(l.components.push(v),s[8]=v,d&&d.forEach(I=>I(v,o)),o.contentQueries){const I=pn();o.contentQueries(1,v,I.directiveStart)}const w=pn();return!g.firstCreatePass||null===o.hostBindings&&null===o.hostAttrs||(Ki(w.index),oC(a[1],w,0,w.directiveStart,w.directiveEnd,o),Y_(o,v)),v}(st,this.componentDef,_e,j,[IC]),cm(Q,_e,null)}finally{Xo()}return new Hb(this.componentType,Fe,Sh(Ge,_e),_e,Ge)}}class Hb extends class xo{}{constructor(o,a,l,d,g){super(),this.location=l,this._rootLView=d,this._tNode=g,this.instance=a,this.hostView=this.changeDetectorRef=new eT(d),this.componentType=o}get injector(){return new co(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(o){this.hostView.onDestroy(o)}}class Nc{}class Oc{}const Ph=new Map;class Nh extends Nc{constructor(o,a){super(),this._parent=a,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new Bb(this);const l=Hn(o);this._bootstrapComponents=gs(l.bootstrap),this._r3Injector=pw(o,a,[{provide:Nc,useValue:this},{provide:Ap,useValue:this.componentFactoryResolver}],oe(o)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(o)}get(o,a=Co.THROW_IF_NOT_FOUND,l=yt.Default){return o===Co||o===Nc||o===lv?this:this._r3Injector.get(o,a,l)}destroy(){const o=this._r3Injector;!o.destroyed&&o.destroy(),this.destroyCbs.forEach(a=>a()),this.destroyCbs=null}onDestroy(o){this.destroyCbs.push(o)}}class dy extends Oc{constructor(o){super(),this.moduleType=o,null!==Hn(o)&&function fE(s){const o=new Set;!function a(l){const d=Hn(l,!0),g=d.id;null!==g&&(function cy(s,o,a){if(o&&o!==a)throw new Error(`Duplicate module registered for ${s} - ${oe(o)} vs ${oe(o.name)}`)}(g,Ph.get(g),l),Ph.set(g,l));const v=gs(d.imports);for(const w of v)o.has(w)||(o.add(w),a(w))}(s)}(o)}create(o){return new Nh(this.moduleType,o)}}function kh(s){return o=>{setTimeout(s,void 0,o)}}const Da=class fy extends h.x{constructor(o=!1){super(),this.__isAsync=o}emit(o){super.next(o)}subscribe(o,a,l){var d,g,v;let w=o,I=a||(()=>null),S=l;if(o&&"object"==typeof o){const k=o;w=null===(d=k.next)||void 0===d?void 0:d.bind(k),I=null===(g=k.error)||void 0===g?void 0:g.bind(k),S=null===(v=k.complete)||void 0===v?void 0:v.bind(k)}this.__isAsync&&(I=kh(I),w&&(w=kh(w)),S&&(S=kh(S)));const x=super.subscribe({next:w,error:I,complete:S});return o instanceof X.w0&&o.add(x),x}};function _E(){return this._results[gc()]()}class vE{constructor(o=!1){this._emitDistinctChangesOnly=o,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const a=gc(),l=vE.prototype;l[a]||(l[a]=_E)}get changes(){return this._changes||(this._changes=new Da)}get(o){return this._results[o]}map(o){return this._results.map(o)}filter(o){return this._results.filter(o)}find(o){return this._results.find(o)}reduce(o,a){return this._results.reduce(o,a)}forEach(o){this._results.forEach(o)}some(o){return this._results.some(o)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(o,a){const l=this;l.dirty=!1;const d=ui(o);(this._changesDetected=!function Xl(s,o,a){if(s.length!==o.length)return!1;for(let l=0;l<s.length;l++){let d=s[l],g=o[l];if(a&&(d=a(d),g=a(g)),g!==d)return!1}return!0}(l._results,d,a))&&(l._results=d,l.length=d.length,l.last=d[this.length-1],l.first=d[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}Symbol;let Fh=(()=>{class s{}return s.__NG_ELEMENT_ID__=Fc,s})();const Jb=Fh,Rp=class extends Jb{constructor(o,a,l){super(),this._declarationLView=o,this._declarationTContainer=a,this.elementRef=l}createEmbeddedView(o){const a=this._declarationTContainer.tViews,l=Hf(this._declarationLView,a,o,16,null,a.declTNode,null,null,null,null);l[17]=this._declarationLView[this._declarationTContainer.index];const g=this._declarationLView[19];return null!==g&&(l[19]=g.createEmbeddedView(a)),cm(a,l,o),new Rh(l)}};function Fc(){return Pp(pn(),Se())}function Pp(s,o){return 4&s.type?new Rp(o,s,Sh(s,o)):null}let Np=(()=>{class s{}return s.__NG_ELEMENT_ID__=Xb,s})();function Xb(){return Wt(pn(),Se())}const Op=Np,py=class extends Op{constructor(o,a,l){super(),this._lContainer=o,this._hostTNode=a,this._hostLView=l}get element(){return Sh(this._hostTNode,this._hostLView)}get injector(){return new co(this._hostTNode,this._hostLView)}get parentInjector(){const o=Vs(this._hostTNode,this._hostLView);if(Td(o)){const a=cn(o,this._hostLView),l=Zi(o);return new co(a[1].data[l+8],a)}return new co(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(o){const a=eI(this._lContainer);return null!==a&&a[o]||null}get length(){return this._lContainer.length-10}createEmbeddedView(o,a,l){const d=o.createEmbeddedView(a||{});return this.insert(d,l),d}createComponent(o,a,l,d,g){const v=o&&!function po(s){return"function"==typeof s}(o);let w;if(v)w=a;else{const k=a||{};w=k.index,l=k.injector,d=k.projectableNodes,g=k.ngModuleRef}const I=v?o:new Il(jn(o)),S=l||this.parentInjector;if(!g&&null==I.ngModule){const j=(v?S:this.parentInjector).get(Nc,null);j&&(g=j)}const x=I.create(S,d,void 0,g);return this.insert(x.hostView,w),x}insert(o,a){const l=o._lView,d=l[1];if(function La(s){return Bi(s[3])}(l)){const x=this.indexOf(o);if(-1!==x)this.detach(x);else{const k=l[3],j=new py(k,k[6],k[3]);j.detach(j.indexOf(o))}}const g=this._adjustIndex(a),v=this._lContainer;!function sl(s,o,a,l){const d=10+l,g=a.length;l>0&&(a[d-1][4]=o),l<g-10?(o[4]=a[d],la(a,10+l,o)):(a.push(o),o[4]=null),o[3]=a;const v=o[17];null!==v&&a!==v&&function ol(s,o){const a=s[9];o[16]!==o[3][3][16]&&(s[2]=!0),null===a?s[9]=[o]:a.push(o)}(v,o);const w=o[19];null!==w&&w.insertView(s),o[2]|=128}(d,l,v,g);const w=T_(g,v),I=l[11],S=Ff(I,v[7]);return null!==S&&function Nf(s,o,a,l,d,g){l[0]=d,l[6]=o,tm(s,l,a,1,d,g)}(d,v[6],I,l,S,w),o.attachToViewContainerRef(),la(Wn(v),g,o),o}move(o,a){return this.insert(o,a)}indexOf(o){const a=eI(this._lContainer);return null!==a?a.indexOf(o):-1}remove(o){const a=this._adjustIndex(o,-1),l=E_(this._lContainer,a);l&&(go(Wn(this._lContainer),a),w_(l[1],l))}detach(o){const a=this._adjustIndex(o,-1),l=E_(this._lContainer,a);return l&&null!=go(Wn(this._lContainer),a)?new Rh(l):null}_adjustIndex(o,a=0){return null==o?this.length+a:o}};function eI(s){return s[8]}function Wn(s){return s[8]||(s[8]=[])}function Wt(s,o){let a;const l=o[s.index];if(Bi(l))a=l;else{let d;if(8&s.type)d=Jt(l);else{const g=o[11];d=g.createComment("");const v=sr(s,o);ms(g,Ff(g,v),d,function KD(s,o){return nn(s)?s.nextSibling(o):o.nextSibling}(g,v),!1)}o[s.index]=a=tv(l,o,d,s),Xd(o,a)}return new py(a,s,o)}class EE{constructor(o){this.queryList=o,this.matches=null}clone(){return new EE(this.queryList)}setDirty(){this.queryList.setDirty()}}class es{constructor(o=[]){this.queries=o}createEmbeddedView(o){const a=o.queries;if(null!==a){const l=null!==o.contentQueries?o.contentQueries[0]:a.length,d=[];for(let g=0;g<l;g++){const v=a.getByIndex(g);d.push(this.queries[v.indexInDeclarationView].clone())}return new es(d)}return null}insertView(o){this.dirtyQueriesWithMatches(o)}detachView(o){this.dirtyQueriesWithMatches(o)}dirtyQueriesWithMatches(o){for(let a=0;a<this.queries.length;a++)null!==aI(o,a).matches&&this.queries[a].setDirty()}}class rI{constructor(o,a,l=null){this.predicate=o,this.flags=a,this.read=l}}class kp{constructor(o=[]){this.queries=o}elementStart(o,a){for(let l=0;l<this.queries.length;l++)this.queries[l].elementStart(o,a)}elementEnd(o){for(let a=0;a<this.queries.length;a++)this.queries[a].elementEnd(o)}embeddedTView(o){let a=null;for(let l=0;l<this.length;l++){const d=null!==a?a.length:0,g=this.getByIndex(l).embeddedTView(o,d);g&&(g.indexInDeclarationView=l,null!==a?a.push(g):a=[g])}return null!==a?new kp(a):null}template(o,a){for(let l=0;l<this.queries.length;l++)this.queries[l].template(o,a)}getByIndex(o){return this.queries[o]}get length(){return this.queries.length}track(o){this.queries.push(o)}}class Vc{constructor(o,a=-1){this.metadata=o,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=a}elementStart(o,a){this.isApplyingToNode(a)&&this.matchTNode(o,a)}elementEnd(o){this._declarationNodeIndex===o.index&&(this._appliesToNextNode=!1)}template(o,a){this.elementStart(o,a)}embeddedTView(o,a){return this.isApplyingToNode(o)?(this.crossesNgTemplate=!0,this.addMatch(-o.index,a),new Vc(this.metadata)):null}isApplyingToNode(o){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const a=this._declarationNodeIndex;let l=o.parent;for(;null!==l&&8&l.type&&l.index!==a;)l=l.parent;return a===(null!==l?l.index:-1)}return this._appliesToNextNode}matchTNode(o,a){const l=this.metadata.predicate;if(Array.isArray(l))for(let d=0;d<l.length;d++){const g=l[d];this.matchTNodeWithReadOption(o,a,lT(a,g)),this.matchTNodeWithReadOption(o,a,oa(a,o,g,!1,!1))}else l===Fh?4&a.type&&this.matchTNodeWithReadOption(o,a,-1):this.matchTNodeWithReadOption(o,a,oa(a,o,l,!1,!1))}matchTNodeWithReadOption(o,a,l){if(null!==l){const d=this.metadata.read;if(null!==d)if(d===Mh||d===Np||d===Fh&&4&a.type)this.addMatch(a.index,-2);else{const g=oa(a,o,d,!1,!1);null!==g&&this.addMatch(a.index,g)}else this.addMatch(a.index,l)}}addMatch(o,a){null===this.matches?this.matches=[o,a]:this.matches.push(o,a)}}function lT(s,o){const a=s.localNames;if(null!==a)for(let l=0;l<a.length;l+=2)if(a[l]===o)return a[l+1];return null}function un(s,o,a,l){return-1===a?function cT(s,o){return 11&s.type?Sh(s,o):4&s.type?Pp(s,o):null}(o,s):-2===a?function dT(s,o,a){return a===Mh?Sh(o,s):a===Fh?Pp(o,s):a===Np?Wt(o,s):void 0}(s,o,l):aa(s,s[1],a,o)}function Fp(s,o,a,l){const d=o[19].queries[l];if(null===d.matches){const g=s.data,v=a.matches,w=[];for(let I=0;I<v.length;I+=2){const S=v[I];w.push(S<0?null:un(o,g[S],v[I+1],a.metadata.read))}d.matches=w}return d.matches}function Uc(s,o,a,l){const d=s.queries.getByIndex(a),g=d.matches;if(null!==g){const v=Fp(s,o,d,a);for(let w=0;w<g.length;w+=2){const I=g[w];if(I>0)l.push(v[w/2]);else{const S=g[w+1],x=o[-I];for(let k=10;k<x.length;k++){const j=x[k];j[17]===j[3]&&Uc(j[1],j,S,l)}if(null!==x[9]){const k=x[9];for(let j=0;j<k.length;j++){const Q=k[j];Uc(Q[1],Q,S,l)}}}}}return l}function Lh(s){const o=Se(),a=Ft(),l=Wl();Ga(l+1);const d=aI(a,l);if(s.dirty&&so(o)===(2==(2&d.metadata.flags))){if(null===d.matches)s.reset([]);else{const g=d.crossesNgTemplate?Uc(a,o,l,[]):Fp(a,o,d,l);s.reset(g,Pc),s.notifyOnChanges()}return!0}return!1}function wE(s,o,a,l){const d=Ft();if(d.firstCreatePass){const g=pn();(function IE(s,o,a){null===s.queries&&(s.queries=new kp),s.queries.track(new Vc(o,a))})(d,new rI(o,a,l),g.index),function oI(s,o){const a=s.contentQueries||(s.contentQueries=[]);o!==(a.length?a[a.length-1]:-1)&&a.push(s.queries.length-1,o)}(d,s),2==(2&a)&&(d.staticContentQueries=!0)}!function sI(s,o,a){const l=new vE(4==(4&a));Wf(s,o,l,l.destroy),null===o[19]&&(o[19]=new es),o[19].queries.push(new EE(l))}(d,Se(),a)}function bE(){return function iI(s,o){return s[19].queries[o].queryList}(Se(),Wl())}function aI(s,o){return s.queries.getByIndex(o)}function uI(s,o){return Pp(s,o)}function by(...s){}const vI=new gn("Application Initializer");let Iy=(()=>{class s{constructor(a){this.appInits=a,this.resolve=by,this.reject=by,this.initialized=!1,this.done=!1,this.donePromise=new Promise((l,d)=>{this.resolve=l,this.reject=d})}runInitializers(){if(this.initialized)return;const a=[],l=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let d=0;d<this.appInits.length;d++){const g=this.appInits[d]();if(dh(g))a.push(g);else if(Lm(g)){const v=new Promise((w,I)=>{g.subscribe({complete:w,error:I})});a.push(v)}}Promise.all(a).then(()=>{l()}).catch(d=>{this.reject(d)}),0===a.length&&l(),this.initialized=!0}}return s.\u0275fac=function(a){return new(a||s)(Ve(vI,8))},s.\u0275prov=Qt({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();const EI=new gn("AppId",{providedIn:"root",factory:function PE(){return`${de()}${de()}${de()}`}});function de(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const Bp=new gn("Platform Initializer"),Po=new gn("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),wI=new gn("appBootstrapListener");let Hc=(()=>{class s{log(a){console.log(a)}warn(a){console.warn(a)}}return s.\u0275fac=function(a){return new(a||s)},s.\u0275prov=Qt({token:s,factory:s.\u0275fac,providedIn:"platform"}),s})();const bu=new gn("LocaleId",{providedIn:"root",factory:()=>ht(bu,yt.Optional|yt.SkipSelf)||function wT(){return"undefined"!=typeof $localize&&$localize.locale||_u}()}),bI=new gn("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});class NE{constructor(o,a){this.ngModuleFactory=o,this.componentFactories=a}}let OE=(()=>{class s{compileModuleSync(a){return new dy(a)}compileModuleAsync(a){return Promise.resolve(this.compileModuleSync(a))}compileModuleAndAllComponentsSync(a){const l=this.compileModuleSync(a),g=gs(Hn(a).declarations).reduce((v,w)=>{const I=jn(w);return I&&v.push(new Il(I)),v},[]);return new NE(l,g)}compileModuleAndAllComponentsAsync(a){return Promise.resolve(this.compileModuleAndAllComponentsSync(a))}clearCache(){}clearCacheFor(a){}getModuleId(a){}}return s.\u0275fac=function(a){return new(a||s)},s.\u0275prov=Qt({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();const DI=(()=>Promise.resolve(0))();function FE(s){"undefined"==typeof Zone?DI.then(()=>{s&&s.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",s)}class ts{constructor({enableLongStackTrace:o=!1,shouldCoalesceEventChangeDetection:a=!1,shouldCoalesceRunChangeDetection:l=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Da(!1),this.onMicrotaskEmpty=new Da(!1),this.onStable=new Da(!1),this.onError=new Da(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const d=this;d._nesting=0,d._outer=d._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(d._inner=d._inner.fork(new Zone.TaskTrackingZoneSpec)),o&&Zone.longStackTraceZoneSpec&&(d._inner=d._inner.fork(Zone.longStackTraceZoneSpec)),d.shouldCoalesceEventChangeDetection=!l&&a,d.shouldCoalesceRunChangeDetection=l,d.lastRequestAnimationFrameId=-1,d.nativeRequestAnimationFrame=function CI(){let s=Bt.requestAnimationFrame,o=Bt.cancelAnimationFrame;if("undefined"!=typeof Zone&&s&&o){const a=s[Zone.__symbol__("OriginalDelegate")];a&&(s=a);const l=o[Zone.__symbol__("OriginalDelegate")];l&&(o=l)}return{nativeRequestAnimationFrame:s,nativeCancelAnimationFrame:o}}().nativeRequestAnimationFrame,function jp(s){const o=()=>{!function Bh(s){s.isCheckStableRunning||-1!==s.lastRequestAnimationFrameId||(s.lastRequestAnimationFrameId=s.nativeRequestAnimationFrame.call(Bt,()=>{s.fakeTopEventTask||(s.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{s.lastRequestAnimationFrameId=-1,Cy(s),s.isCheckStableRunning=!0,Iu(s),s.isCheckStableRunning=!1},void 0,()=>{},()=>{})),s.fakeTopEventTask.invoke()}),Cy(s))}(s)};s._inner=s._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(a,l,d,g,v,w)=>{try{return Ty(s),a.invokeTask(d,g,v,w)}finally{(s.shouldCoalesceEventChangeDetection&&"eventTask"===g.type||s.shouldCoalesceRunChangeDetection)&&o(),Ay(s)}},onInvoke:(a,l,d,g,v,w,I)=>{try{return Ty(s),a.invoke(d,g,v,w,I)}finally{s.shouldCoalesceRunChangeDetection&&o(),Ay(s)}},onHasTask:(a,l,d,g)=>{a.hasTask(d,g),l===d&&("microTask"==g.change?(s._hasPendingMicrotasks=g.microTask,Cy(s),Iu(s)):"macroTask"==g.change&&(s.hasPendingMacrotasks=g.macroTask))},onHandleError:(a,l,d,g)=>(a.handleError(d,g),s.runOutsideAngular(()=>s.onError.emit(g)),!1)})}(d)}static isInAngularZone(){return"undefined"!=typeof Zone&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!ts.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(ts.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(o,a,l){return this._inner.run(o,a,l)}runTask(o,a,l,d){const g=this._inner,v=g.scheduleEventTask("NgZoneEvent: "+d,o,Gc,by,by);try{return g.runTask(v,a,l)}finally{g.cancelTask(v)}}runGuarded(o,a,l){return this._inner.runGuarded(o,a,l)}runOutsideAngular(o){return this._outer.run(o)}}const Gc={};function Iu(s){if(0==s._nesting&&!s.hasPendingMicrotasks&&!s.isStable)try{s._nesting++,s.onMicrotaskEmpty.emit(null)}finally{if(s._nesting--,!s.hasPendingMicrotasks)try{s.runOutsideAngular(()=>s.onStable.emit(null))}finally{s.isStable=!0}}}function Cy(s){s.hasPendingMicrotasks=!!(s._hasPendingMicrotasks||(s.shouldCoalesceEventChangeDetection||s.shouldCoalesceRunChangeDetection)&&-1!==s.lastRequestAnimationFrameId)}function Ty(s){s._nesting++,s.isStable&&(s.isStable=!1,s.onUnstable.emit(null))}function Ay(s){s._nesting--,Iu(s)}class TI{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Da,this.onMicrotaskEmpty=new Da,this.onStable=new Da,this.onError=new Da}run(o,a,l){return o.apply(a,l)}runGuarded(o,a,l){return o.apply(a,l)}runOutsideAngular(o){return o()}runTask(o,a,l,d){return o.apply(a,l)}}let AI=(()=>{class s{constructor(a){this._ngZone=a,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),a.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{ts.assertNotInAngularZone(),FE(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())FE(()=>{for(;0!==this._callbacks.length;){let a=this._callbacks.pop();clearTimeout(a.timeoutId),a.doneCb(this._didWork)}this._didWork=!1});else{let a=this.getPendingTasks();this._callbacks=this._callbacks.filter(l=>!l.updateCb||!l.updateCb(a)||(clearTimeout(l.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(a=>({source:a.source,creationLocation:a.creationLocation,data:a.data})):[]}addCallback(a,l,d){let g=-1;l&&l>0&&(g=setTimeout(()=>{this._callbacks=this._callbacks.filter(v=>v.timeoutId!==g),a(this._didWork,this.getPendingTasks())},l)),this._callbacks.push({doneCb:a,timeoutId:g,updateCb:d})}whenStable(a,l,d){if(d&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(a,l,d),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(a,l,d){return[]}}return s.\u0275fac=function(a){return new(a||s)(Ve(ts))},s.\u0275prov=Qt({token:s,factory:s.\u0275fac}),s})(),SI=(()=>{class s{constructor(){this._applications=new Map,qc.addToWindow(this)}registerApplication(a,l){this._applications.set(a,l)}unregisterApplication(a){this._applications.delete(a)}unregisterAllApplications(){this._applications.clear()}getTestability(a){return this._applications.get(a)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(a,l=!0){return qc.findTestabilityInTree(this,a,l)}}return s.\u0275fac=function(a){return new(a||s)},s.\u0275prov=Qt({token:s,factory:s.\u0275fac,providedIn:"platform"}),s})();class MI{addToWindow(o){}findTestabilityInTree(o,a,l){return null}}function LE(s){qc=s}let qc=new MI,bs=null;const xI=new gn("AllowMultipleToken"),VE=new gn("PlatformOnDestroy");class Hp{constructor(o,a){this.name=o,this.token=a}}function Tl(s,o,a=[]){const l=`Platform: ${o}`,d=new gn(l);return(g=[])=>{let v=$p();if(!v||v.injector.get(xI,!1)){const w=[...a,...g,{provide:d,useValue:!0}];s?s(w):function zc(s){if(bs&&!bs.get(xI,!1))throw new Ne(400,"");bs=s;const o=s.get(Gp),a=s.get(Bp,null);a&&a.forEach(l=>l())}(function CT(s=[],o){return Co.create({name:o,providers:[{provide:dv,useValue:"platform"},{provide:VE,useValue:()=>bs=null},...s]})}(w,l))}return function RI(s){const o=$p();if(!o)throw new Ne(401,"");return o}()}}function $p(){var s;return null!==(s=null==bs?void 0:bs.get(Gp))&&void 0!==s?s:null}let Gp=(()=>{class s{constructor(a){this._injector=a,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(a,l){const w=function TT(s,o){let a;return a="noop"===s?new TI:("zone.js"===s?void 0:s)||new ts({enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!!(null==o?void 0:o.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==o?void 0:o.ngZoneRunCoalescing)}),a}(l?l.ngZone:void 0,{ngZoneEventCoalescing:l&&l.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:l&&l.ngZoneRunCoalescing||!1}),I=[{provide:ts,useValue:w}];return w.run(()=>{const S=Co.create({providers:I,parent:this.injector,name:a.moduleType.name}),x=a.create(S),k=x.injector.get(Gd,null);if(!k)throw new Ne(402,"");return w.runOutsideAngular(()=>{const j=w.onError.subscribe({next:Q=>{k.handleError(Q)}});x.onDestroy(()=>{$h(this._modules,x),j.unsubscribe()})}),function PI(s,o,a){try{const l=a();return dh(l)?l.catch(d=>{throw o.runOutsideAngular(()=>s.handleError(d)),d}):l}catch(l){throw o.runOutsideAngular(()=>s.handleError(l)),l}}(k,w,()=>{const j=x.injector.get(Iy);return j.runInitializers(),j.donePromise.then(()=>(function zC(s){Ut(s,"Expected localeId to be defined"),"string"==typeof s&&(tE=s.toLowerCase().replace(/_/g,"-"))}(x.injector.get(bu,_u)||_u),this._moduleDoBootstrap(x),x))})})}bootstrapModule(a,l=[]){const d=jh({},l);return function IT(s,o,a){const l=new dy(a);return Promise.resolve(l)}(0,0,a).then(g=>this.bootstrapModuleFactory(g,d))}_moduleDoBootstrap(a){const l=a.injector.get(Hh);if(a._bootstrapComponents.length>0)a._bootstrapComponents.forEach(d=>l.bootstrap(d));else{if(!a.instance.ngDoBootstrap)throw new Ne(403,"");a.instance.ngDoBootstrap(l)}this._modules.push(a)}onDestroy(a){this._destroyListeners.push(a)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Ne(404,"");this._modules.slice().forEach(l=>l.destroy()),this._destroyListeners.forEach(l=>l());const a=this._injector.get(VE,null);null==a||a(),this._destroyed=!0}get destroyed(){return this._destroyed}}return s.\u0275fac=function(a){return new(a||s)(Ve(Co))},s.\u0275prov=Qt({token:s,factory:s.\u0275fac,providedIn:"platform"}),s})();function jh(s,o){return Array.isArray(o)?o.reduce(jh,s):Object.assign(Object.assign({},s),o)}let Hh=(()=>{class s{constructor(a,l,d,g){this._zone=a,this._injector=l,this._exceptionHandler=d,this._initStatus=g,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const v=new O.y(I=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{I.next(this._stable),I.complete()})}),w=new O.y(I=>{let S;this._zone.runOutsideAngular(()=>{S=this._zone.onStable.subscribe(()=>{ts.assertNotInAngularZone(),FE(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,I.next(!0))})})});const x=this._zone.onUnstable.subscribe(()=>{ts.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{I.next(!1)}))});return()=>{S.unsubscribe(),x.unsubscribe()}});this.isStable=(0,le.T)(v,w.pipe((0,re.B)()))}bootstrap(a,l){if(!this._initStatus.done)throw new Ne(405,"");let d;d=a instanceof dE?a:this._injector.get(Ap).resolveComponentFactory(a),this.componentTypes.push(d.componentType);const g=function DT(s){return s.isBoundToModule}(d)?void 0:this._injector.get(Nc),w=d.create(Co.NULL,[],l||d.selector,g),I=w.location.nativeElement,S=w.injector.get(AI,null),x=S&&w.injector.get(SI);return S&&x&&x.registerApplication(I,S),w.onDestroy(()=>{this.detachView(w.hostView),$h(this.components,w),x&&x.unregisterApplication(I)}),this._loadComponent(w),w}tick(){if(this._runningTick)throw new Ne(101,"");try{this._runningTick=!0;for(let a of this._views)a.detectChanges()}catch(a){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(a))}finally{this._runningTick=!1}}attachView(a){const l=a;this._views.push(l),l.attachToAppRef(this)}detachView(a){const l=a;$h(this._views,l),l.detachFromAppRef()}_loadComponent(a){this.attachView(a.hostView),this.tick(),this.components.push(a),this._injector.get(wI,[]).concat(this._bootstrapListeners).forEach(d=>d(a))}ngOnDestroy(){this._views.slice().forEach(a=>a.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return s.\u0275fac=function(a){return new(a||s)(Ve(ts),Ve(Co),Ve(Gd),Ve(Iy))},s.\u0275prov=Qt({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();function $h(s,o){const a=s.indexOf(o);a>-1&&s.splice(a,1)}let BE=!0,qp=!1;function jE(){return qp=!0,BE}function NI(){if(qp)throw new Error("Cannot enable prod mode after platform setup.");BE=!1}let Kc=(()=>{class s{}return s.__NG_ELEMENT_ID__=AT,s})();function AT(s){return function Gh(s,o,a){if(ud(s)&&!a){const l=or(s.index,o);return new Rh(l,l)}return 47&s.type?new Rh(o[16],o):null}(pn(),Se(),16==(16&s))}class zh{constructor(){}supports(o){return mc(o)}create(o){return new GE(o)}}const Ry=(s,o)=>o;class GE{constructor(o){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=o||Ry}forEachItem(o){let a;for(a=this._itHead;null!==a;a=a._next)o(a)}forEachOperation(o){let a=this._itHead,l=this._removalsHead,d=0,g=null;for(;a||l;){const v=!l||a&&a.currentIndex<VI(l,d,g)?a:l,w=VI(v,d,g),I=v.currentIndex;if(v===l)d--,l=l._nextRemoved;else if(a=a._next,null==v.previousIndex)d++;else{g||(g=[]);const S=w-d,x=I-d;if(S!=x){for(let j=0;j<S;j++){const Q=j<g.length?g[j]:g[j]=0,_e=Q+j;x<=_e&&_e<S&&(g[j]=Q+1)}g[v.previousIndex]=x-S}}w!==I&&o(v,w,I)}}forEachPreviousItem(o){let a;for(a=this._previousItHead;null!==a;a=a._nextPrevious)o(a)}forEachAddedItem(o){let a;for(a=this._additionsHead;null!==a;a=a._nextAdded)o(a)}forEachMovedItem(o){let a;for(a=this._movesHead;null!==a;a=a._nextMoved)o(a)}forEachRemovedItem(o){let a;for(a=this._removalsHead;null!==a;a=a._nextRemoved)o(a)}forEachIdentityChange(o){let a;for(a=this._identityChangesHead;null!==a;a=a._nextIdentityChange)o(a)}diff(o){if(null==o&&(o=[]),!mc(o))throw new Ne(900,"");return this.check(o)?this:null}onDestroy(){}check(o){this._reset();let d,g,v,a=this._itHead,l=!1;if(Array.isArray(o)){this.length=o.length;for(let w=0;w<this.length;w++)g=o[w],v=this._trackByFn(w,g),null!==a&&Object.is(a.trackById,v)?(l&&(a=this._verifyReinsertion(a,g,v,w)),Object.is(a.item,g)||this._addIdentityChange(a,g)):(a=this._mismatch(a,g,v,w),l=!0),a=a._next}else d=0,function Tw(s,o){if(Array.isArray(s))for(let a=0;a<s.length;a++)o(s[a]);else{const a=s[gc()]();let l;for(;!(l=a.next()).done;)o(l.value)}}(o,w=>{v=this._trackByFn(d,w),null!==a&&Object.is(a.trackById,v)?(l&&(a=this._verifyReinsertion(a,w,v,d)),Object.is(a.item,w)||this._addIdentityChange(a,w)):(a=this._mismatch(a,w,v,d),l=!0),a=a._next,d++}),this.length=d;return this._truncate(a),this.collection=o,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let o;for(o=this._previousItHead=this._itHead;null!==o;o=o._next)o._nextPrevious=o._next;for(o=this._additionsHead;null!==o;o=o._nextAdded)o.previousIndex=o.currentIndex;for(this._additionsHead=this._additionsTail=null,o=this._movesHead;null!==o;o=o._nextMoved)o.previousIndex=o.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(o,a,l,d){let g;return null===o?g=this._itTail:(g=o._prev,this._remove(o)),null!==(o=null===this._unlinkedRecords?null:this._unlinkedRecords.get(l,null))?(Object.is(o.item,a)||this._addIdentityChange(o,a),this._reinsertAfter(o,g,d)):null!==(o=null===this._linkedRecords?null:this._linkedRecords.get(l,d))?(Object.is(o.item,a)||this._addIdentityChange(o,a),this._moveAfter(o,g,d)):o=this._addAfter(new OT(a,l),g,d),o}_verifyReinsertion(o,a,l,d){let g=null===this._unlinkedRecords?null:this._unlinkedRecords.get(l,null);return null!==g?o=this._reinsertAfter(g,o._prev,d):o.currentIndex!=d&&(o.currentIndex=d,this._addToMoves(o,d)),o}_truncate(o){for(;null!==o;){const a=o._next;this._addToRemovals(this._unlink(o)),o=a}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(o,a,l){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(o);const d=o._prevRemoved,g=o._nextRemoved;return null===d?this._removalsHead=g:d._nextRemoved=g,null===g?this._removalsTail=d:g._prevRemoved=d,this._insertAfter(o,a,l),this._addToMoves(o,l),o}_moveAfter(o,a,l){return this._unlink(o),this._insertAfter(o,a,l),this._addToMoves(o,l),o}_addAfter(o,a,l){return this._insertAfter(o,a,l),this._additionsTail=null===this._additionsTail?this._additionsHead=o:this._additionsTail._nextAdded=o,o}_insertAfter(o,a,l){const d=null===a?this._itHead:a._next;return o._next=d,o._prev=a,null===d?this._itTail=o:d._prev=o,null===a?this._itHead=o:a._next=o,null===this._linkedRecords&&(this._linkedRecords=new zE),this._linkedRecords.put(o),o.currentIndex=l,o}_remove(o){return this._addToRemovals(this._unlink(o))}_unlink(o){null!==this._linkedRecords&&this._linkedRecords.remove(o);const a=o._prev,l=o._next;return null===a?this._itHead=l:a._next=l,null===l?this._itTail=a:l._prev=a,o}_addToMoves(o,a){return o.previousIndex===a||(this._movesTail=null===this._movesTail?this._movesHead=o:this._movesTail._nextMoved=o),o}_addToRemovals(o){return null===this._unlinkedRecords&&(this._unlinkedRecords=new zE),this._unlinkedRecords.put(o),o.currentIndex=null,o._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=o,o._prevRemoved=null):(o._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=o),o}_addIdentityChange(o,a){return o.item=a,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=o:this._identityChangesTail._nextIdentityChange=o,o}}class OT{constructor(o,a){this.item=o,this.trackById=a,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class qE{constructor(){this._head=null,this._tail=null}add(o){null===this._head?(this._head=this._tail=o,o._nextDup=null,o._prevDup=null):(this._tail._nextDup=o,o._prevDup=this._tail,o._nextDup=null,this._tail=o)}get(o,a){let l;for(l=this._head;null!==l;l=l._nextDup)if((null===a||a<=l.currentIndex)&&Object.is(l.trackById,o))return l;return null}remove(o){const a=o._prevDup,l=o._nextDup;return null===a?this._head=l:a._nextDup=l,null===l?this._tail=a:l._prevDup=a,null===this._head}}class zE{constructor(){this.map=new Map}put(o){const a=o.trackById;let l=this.map.get(a);l||(l=new qE,this.map.set(a,l)),l.add(o)}get(o,a){const d=this.map.get(o);return d?d.get(o,a):null}remove(o){const a=o.trackById;return this.map.get(a).remove(o)&&this.map.delete(a),o}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function VI(s,o,a){const l=s.previousIndex;if(null===l)return l;let d=0;return a&&l<a.length&&(d=a[l]),l+o+d}class WE{constructor(){}supports(o){return o instanceof Map||Im(o)}create(){return new UI}}class UI{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(o){let a;for(a=this._mapHead;null!==a;a=a._next)o(a)}forEachPreviousItem(o){let a;for(a=this._previousMapHead;null!==a;a=a._nextPrevious)o(a)}forEachChangedItem(o){let a;for(a=this._changesHead;null!==a;a=a._nextChanged)o(a)}forEachAddedItem(o){let a;for(a=this._additionsHead;null!==a;a=a._nextAdded)o(a)}forEachRemovedItem(o){let a;for(a=this._removalsHead;null!==a;a=a._nextRemoved)o(a)}diff(o){if(o){if(!(o instanceof Map||Im(o)))throw new Ne(900,"")}else o=new Map;return this.check(o)?this:null}onDestroy(){}check(o){this._reset();let a=this._mapHead;if(this._appendAfter=null,this._forEach(o,(l,d)=>{if(a&&a.key===d)this._maybeAddToChanges(a,l),this._appendAfter=a,a=a._next;else{const g=this._getOrCreateRecordForKey(d,l);a=this._insertBeforeOrAppend(a,g)}}),a){a._prev&&(a._prev._next=null),this._removalsHead=a;for(let l=a;null!==l;l=l._nextRemoved)l===this._mapHead&&(this._mapHead=null),this._records.delete(l.key),l._nextRemoved=l._next,l.previousValue=l.currentValue,l.currentValue=null,l._prev=null,l._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(o,a){if(o){const l=o._prev;return a._next=o,a._prev=l,o._prev=a,l&&(l._next=a),o===this._mapHead&&(this._mapHead=a),this._appendAfter=o,o}return this._appendAfter?(this._appendAfter._next=a,a._prev=this._appendAfter):this._mapHead=a,this._appendAfter=a,null}_getOrCreateRecordForKey(o,a){if(this._records.has(o)){const d=this._records.get(o);this._maybeAddToChanges(d,a);const g=d._prev,v=d._next;return g&&(g._next=v),v&&(v._prev=g),d._next=null,d._prev=null,d}const l=new KE(o);return this._records.set(o,l),l.currentValue=a,this._addToAdditions(l),l}_reset(){if(this.isDirty){let o;for(this._previousMapHead=this._mapHead,o=this._previousMapHead;null!==o;o=o._next)o._nextPrevious=o._next;for(o=this._changesHead;null!==o;o=o._nextChanged)o.previousValue=o.currentValue;for(o=this._additionsHead;null!=o;o=o._nextAdded)o.previousValue=o.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(o,a){Object.is(a,o.currentValue)||(o.previousValue=o.currentValue,o.currentValue=a,this._addToChanges(o))}_addToAdditions(o){null===this._additionsHead?this._additionsHead=this._additionsTail=o:(this._additionsTail._nextAdded=o,this._additionsTail=o)}_addToChanges(o){null===this._changesHead?this._changesHead=this._changesTail=o:(this._changesTail._nextChanged=o,this._changesTail=o)}_forEach(o,a){o instanceof Map?o.forEach(a):Object.keys(o).forEach(l=>a(o[l],l))}}class KE{constructor(o){this.key=o,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function BI(){return new Py([new zh])}let Py=(()=>{class s{constructor(a){this.factories=a}static create(a,l){if(null!=l){const d=l.factories.slice();a=a.concat(d)}return new s(a)}static extend(a){return{provide:s,useFactory:l=>s.create(a,l||BI()),deps:[[s,new di,new li]]}}find(a){const l=this.factories.find(d=>d.supports(a));if(null!=l)return l;throw new Ne(901,"")}}return s.\u0275prov=Qt({token:s,providedIn:"root",factory:BI}),s})();function ZE(){return new YE([new WE])}let YE=(()=>{class s{constructor(a){this.factories=a}static create(a,l){if(l){const d=l.factories.slice();a=a.concat(d)}return new s(a)}static extend(a){return{provide:s,useFactory:l=>s.create(a,l||ZE()),deps:[[s,new di,new li]]}}find(a){const l=this.factories.find(g=>g.supports(a));if(l)return l;throw new Ne(901,"")}}return s.\u0275prov=Qt({token:s,providedIn:"root",factory:ZE}),s})();const HI=Tl(null,"core",[]);let $I=(()=>{class s{constructor(a){}}return s.\u0275fac=function(a){return new(a||s)(Ve(Hh))},s.\u0275mod=Tr({type:s}),s.\u0275inj=zt({}),s})()},3942:(et,be,N)=>{N.d(be,{Z:()=>Ne});var h=N(2090),X=N(4859),O=N(9681),le=N(1877);class re{constructor(fe,De){this._delegate=fe,this.firebase=De,(0,O._addComponent)(fe,new X.wA("app-compat",()=>this,"PUBLIC")),this.container=fe.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(fe){this._delegate.automaticDataCollectionEnabled=fe}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(fe=>{this._delegate.checkDestroyed(),fe()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,O.deleteApp)(this._delegate)))}_getService(fe,De=O._DEFAULT_ENTRY_NAME){var We;this._delegate.checkDestroyed();const Qe=this._delegate.container.getProvider(fe);return!Qe.isInitialized()&&"EXPLICIT"===(null===(We=Qe.getComponent())||void 0===We?void 0:We.instantiationMode)&&Qe.initialize(),Qe.getImmediate({identifier:De})}_removeServiceInstance(fe,De=O._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(fe).clearInstance(De)}_addComponent(fe){(0,O._addComponent)(this._delegate,fe)}_addOrOverwriteComponent(fe){(0,O._addOrOverwriteComponent)(this._delegate,fe)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const ue=new h.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),G=function he(){const Ue=function oe(Ue){const fe={},De={__esModule:!0,initializeApp:function Ae(Be,$={}){const ve=O.initializeApp(Be,$);if((0,h.r3)(fe,ve.name))return fe[ve.name];const Z=new Ue(ve,De);return fe[ve.name]=Z,Z},app:Qe,registerVersion:O.registerVersion,setLogLevel:O.setLogLevel,onLog:O.onLog,apps:null,SDK_VERSION:O.SDK_VERSION,INTERNAL:{registerComponent:function Ie(Be){const $=Be.name,ve=$.replace("-compat","");if(O._registerComponent(Be)&&"PUBLIC"===Be.type){const Z=(ie=Qe())=>{if("function"!=typeof ie[ve])throw ue.create("invalid-app-argument",{appName:$});return ie[ve]()};void 0!==Be.serviceProps&&(0,h.ZB)(Z,Be.serviceProps),De[ve]=Z,Ue.prototype[ve]=function(...ie){return this._getService.bind(this,$).apply(this,Be.multipleInstances?ie:[])}}return"PUBLIC"===Be.type?De[ve]:null},removeApp:function We(Be){delete fe[Be]},useAsService:function je(Be,$){return"serverAuth"===$?null:$},modularAPIs:O}};function Qe(Be){if(!(0,h.r3)(fe,Be=Be||O._DEFAULT_ENTRY_NAME))throw ue.create("no-app",{appName:Be});return fe[Be]}return De.default=De,Object.defineProperty(De,"apps",{get:function we(){return Object.keys(fe).map(Be=>fe[Be])}}),Qe.App=Ue,De}(re);return Ue.INTERNAL=Object.assign(Object.assign({},Ue.INTERNAL),{createFirebaseNamespace:he,extendNamespace:function fe(De){(0,h.ZB)(Ue,De)},createSubscribe:h.ne,ErrorFactory:h.LL,deepExtend:h.ZB}),Ue}(),H=new le.Yd("@firebase/app-compat");if((0,h.jU)()&&void 0!==self.firebase){H.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const Ue=self.firebase.SDK_VERSION;Ue&&Ue.indexOf("LITE")>=0&&H.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const Ne=G;!function xe(Ue){(0,O.registerVersion)("@firebase/app-compat","0.1.25",Ue)}()},9681:(et,be,N)=>{N.r(be),N.d(be,{FirebaseError:()=>le.ZR,SDK_VERSION:()=>Fi,_DEFAULT_ENTRY_NAME:()=>Ut,_addComponent:()=>on,_addOrOverwriteComponent:()=>Qt,_apps:()=>en,_clearComponents:()=>ss,_components:()=>Mn,_getProvider:()=>zt,_registerComponent:()=>Dr,_removeServiceInstance:()=>Vt,deleteApp:()=>yt,getApp:()=>Xr,getApps:()=>Li,initializeApp:()=>Ms,onLog:()=>xn,registerVersion:()=>En,setLogLevel:()=>Js});var h=N(5861),X=N(4859),O=N(1877),le=N(2090),re=N(8766);class ge{constructor(J){this.container=J}getPlatformInfoString(){return this.container.getProviders().map(Pe=>{if(function ue(q){const J=q.getComponent();return"VERSION"===(null==J?void 0:J.type)}(Pe)){const Xe=Pe.getImmediate();return`${Xe.library}/${Xe.version}`}return null}).filter(Pe=>Pe).join(" ")}}const oe="@firebase/app",G=new O.Yd("@firebase/app"),Ut="[DEFAULT]",Je={[oe]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},en=new Map,Mn=new Map;function on(q,J){try{q.container.addComponent(J)}catch(Pe){G.debug(`Component ${J.name} failed to register with FirebaseApp ${q.name}`,Pe)}}function Qt(q,J){q.container.addOrOverwriteComponent(J)}function Dr(q){const J=q.name;if(Mn.has(J))return G.debug(`There were multiple attempts to register component ${J}.`),!1;Mn.set(J,q);for(const Pe of en.values())on(Pe,q);return!0}function zt(q,J){const Pe=q.container.getProvider("heartbeat").getImmediate({optional:!0});return Pe&&Pe.triggerHeartbeat(),q.container.getProvider(J)}function Vt(q,J,Pe=Ut){zt(q,J).clearInstance(Pe)}function ss(){Mn.clear()}const hr=new le.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}."});class Cr{constructor(J,Pe,Xe){this._isDeleted=!1,this._options=Object.assign({},J),this._config=Object.assign({},Pe),this._name=Pe.name,this._automaticDataCollectionEnabled=Pe.automaticDataCollectionEnabled,this._container=Xe,this.container.addComponent(new X.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(J){this.checkDestroyed(),this._automaticDataCollectionEnabled=J}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(J){this._isDeleted=J}checkDestroyed(){if(this.isDeleted)throw hr.create("app-deleted",{appName:this._name})}}const Fi="9.8.1";function Ms(q,J={}){"object"!=typeof J&&(J={name:J});const Pe=Object.assign({name:Ut,automaticDataCollectionEnabled:!1},J),Xe=Pe.name;if("string"!=typeof Xe||!Xe)throw hr.create("bad-app-name",{appName:String(Xe)});const ft=en.get(Xe);if(ft){if((0,le.vZ)(q,ft.options)&&(0,le.vZ)(Pe,ft.config))return ft;throw hr.create("duplicate-app",{appName:Xe})}const It=new X.H0(Xe);for(const Et of Mn.values())It.addComponent(Et);const hn=new Cr(q,Pe,It);return en.set(Xe,hn),hn}function Xr(q=Ut){const J=en.get(q);if(!J)throw hr.create("no-app",{appName:q});return J}function Li(){return Array.from(en.values())}function yt(q){return ei.apply(this,arguments)}function ei(){return(ei=(0,h.Z)(function*(q){const J=q.name;en.has(J)&&(en.delete(J),yield Promise.all(q.container.getProviders().map(Pe=>Pe.delete())),q.isDeleted=!0)})).apply(this,arguments)}function En(q,J,Pe){var Xe;let ft=null!==(Xe=Je[q])&&void 0!==Xe?Xe:q;Pe&&(ft+=`-${Pe}`);const It=ft.match(/\s|\//),hn=J.match(/\s|\//);if(It||hn){const Et=[`Unable to register library "${ft}" with version "${J}":`];return It&&Et.push(`library name "${ft}" contains illegal characters (whitespace or "/")`),It&&hn&&Et.push("and"),hn&&Et.push(`version name "${J}" contains illegal characters (whitespace or "/")`),void G.warn(Et.join(" "))}Dr(new X.wA(`${ft}-version`,()=>({library:ft,version:J}),"VERSION"))}function xn(q,J){if(null!==q&&"function"!=typeof q)throw hr.create("invalid-log-argument");(0,O.Am)(q,J)}function Js(q){(0,O.Ub)(q)}const Fn="firebase-heartbeat-store";let Ci=null;function Uo(){return Ci||(Ci=(0,re.X3)("firebase-heartbeat-database",1,{upgrade:(q,J)=>{0===J&&q.createObjectStore(Fn)}}).catch(q=>{throw hr.create("storage-open",{originalErrorMessage:q.message})})),Ci}function at(){return(at=(0,h.Z)(function*(q){try{return(yield Uo()).transaction(Fn).objectStore(Fn).get(ni(q))}catch(J){throw hr.create("storage-get",{originalErrorMessage:J.message})}})).apply(this,arguments)}function vt(q,J){return fr.apply(this,arguments)}function fr(){return(fr=(0,h.Z)(function*(q,J){try{const Xe=(yield Uo()).transaction(Fn,"readwrite");return yield Xe.objectStore(Fn).put(J,ni(q)),Xe.done}catch(Pe){throw hr.create("storage-set",{originalErrorMessage:Pe.message})}})).apply(this,arguments)}function ni(q){return`${q.name}!${q.options.appId}`}class pr{constructor(J){this.container=J,this._heartbeatsCache=null;const Pe=this.container.getProvider("app").getImmediate();this._storage=new z(Pe),this._heartbeatsCachePromise=this._storage.read().then(Xe=>(this._heartbeatsCache=Xe,Xe))}triggerHeartbeat(){var J=this;return(0,h.Z)(function*(){const Xe=J.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),ft=gr();if(null===J._heartbeatsCache&&(J._heartbeatsCache=yield J._heartbeatsCachePromise),J._heartbeatsCache.lastSentHeartbeatDate!==ft&&!J._heartbeatsCache.heartbeats.some(It=>It.date===ft))return J._heartbeatsCache.heartbeats.push({date:ft,agent:Xe}),J._heartbeatsCache.heartbeats=J._heartbeatsCache.heartbeats.filter(It=>{const hn=new Date(It.date).valueOf();return Date.now()-hn<=2592e6}),J._storage.overwrite(J._heartbeatsCache)})()}getHeartbeatsHeader(){var J=this;return(0,h.Z)(function*(){if(null===J._heartbeatsCache&&(yield J._heartbeatsCachePromise),null===J._heartbeatsCache||0===J._heartbeatsCache.heartbeats.length)return"";const Pe=gr(),{heartbeatsToSend:Xe,unsentEntries:ft}=function U(q,J=1024){const Pe=[];let Xe=q.slice();for(const ft of q){const It=Pe.find(hn=>hn.agent===ft.agent);if(It){if(It.dates.push(ft.date),W(Pe)>J){It.dates.pop();break}}else if(Pe.push({agent:ft.agent,dates:[ft.date]}),W(Pe)>J){Pe.pop();break}Xe=Xe.slice(1)}return{heartbeatsToSend:Pe,unsentEntries:Xe}}(J._heartbeatsCache.heartbeats),It=(0,le.L)(JSON.stringify({version:2,heartbeats:Xe}));return J._heartbeatsCache.lastSentHeartbeatDate=Pe,ft.length>0?(J._heartbeatsCache.heartbeats=ft,yield J._storage.overwrite(J._heartbeatsCache)):(J._heartbeatsCache.heartbeats=[],J._storage.overwrite(J._heartbeatsCache)),It})()}}function gr(){return(new Date).toISOString().substring(0,10)}class z{constructor(J){this.app=J,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,h.Z)(function*(){return!!(0,le.hl)()&&(0,le.eu)().then(()=>!0).catch(()=>!1)})()}read(){var J=this;return(0,h.Z)(function*(){return(yield J._canUseIndexedDBPromise)&&(yield function Gt(q){return at.apply(this,arguments)}(J.app))||{heartbeats:[]}})()}overwrite(J){var Pe=this;return(0,h.Z)(function*(){var Xe;if(yield Pe._canUseIndexedDBPromise){const It=yield Pe.read();return vt(Pe.app,{lastSentHeartbeatDate:null!==(Xe=J.lastSentHeartbeatDate)&&void 0!==Xe?Xe:It.lastSentHeartbeatDate,heartbeats:J.heartbeats})}})()}add(J){var Pe=this;return(0,h.Z)(function*(){var Xe;if(yield Pe._canUseIndexedDBPromise){const It=yield Pe.read();return vt(Pe.app,{lastSentHeartbeatDate:null!==(Xe=J.lastSentHeartbeatDate)&&void 0!==Xe?Xe:It.lastSentHeartbeatDate,heartbeats:[...It.heartbeats,...J.heartbeats]})}})()}}function W(q){return(0,le.L)(JSON.stringify({version:2,heartbeats:q})).length}!function Ce(q){Dr(new X.wA("platform-logger",J=>new ge(J),"PRIVATE")),Dr(new X.wA("heartbeat",J=>new pr(J),"PRIVATE")),En(oe,"0.7.24",q),En(oe,"0.7.24","esm2017"),En("fire-js","")}("")},4859:(et,be,N)=>{N.d(be,{H0:()=>oe,wA:()=>O});var h=N(5861),X=N(2090);class O{constructor(G,H,te){this.name=G,this.instanceFactory=H,this.type=te,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(G){return this.instantiationMode=G,this}setMultipleInstances(G){return this.multipleInstances=G,this}setServiceProps(G){return this.serviceProps=G,this}setInstanceCreatedCallback(G){return this.onInstanceCreated=G,this}}const le="[DEFAULT]";class re{constructor(G,H){this.name=G,this.container=H,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(G){const H=this.normalizeInstanceIdentifier(G);if(!this.instancesDeferred.has(H)){const te=new X.BH;if(this.instancesDeferred.set(H,te),this.isInitialized(H)||this.shouldAutoInitialize())try{const ze=this.getOrInitializeService({instanceIdentifier:H});ze&&te.resolve(ze)}catch(ze){}}return this.instancesDeferred.get(H).promise}getImmediate(G){var H;const te=this.normalizeInstanceIdentifier(null==G?void 0:G.identifier),ze=null!==(H=null==G?void 0:G.optional)&&void 0!==H&&H;if(!this.isInitialized(te)&&!this.shouldAutoInitialize()){if(ze)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:te})}catch(xe){if(ze)return null;throw xe}}getComponent(){return this.component}setComponent(G){if(G.name!==this.name)throw Error(`Mismatching Component ${G.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=G,this.shouldAutoInitialize()){if(function ue(he){return"EAGER"===he.instantiationMode}(G))try{this.getOrInitializeService({instanceIdentifier:le})}catch(H){}for(const[H,te]of this.instancesDeferred.entries()){const ze=this.normalizeInstanceIdentifier(H);try{const xe=this.getOrInitializeService({instanceIdentifier:ze});te.resolve(xe)}catch(xe){}}}}clearInstance(G=le){this.instancesDeferred.delete(G),this.instancesOptions.delete(G),this.instances.delete(G)}delete(){var G=this;return(0,h.Z)(function*(){const H=Array.from(G.instances.values());yield Promise.all([...H.filter(te=>"INTERNAL"in te).map(te=>te.INTERNAL.delete()),...H.filter(te=>"_delete"in te).map(te=>te._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(G=le){return this.instances.has(G)}getOptions(G=le){return this.instancesOptions.get(G)||{}}initialize(G={}){const{options:H={}}=G,te=this.normalizeInstanceIdentifier(G.instanceIdentifier);if(this.isInitialized(te))throw Error(`${this.name}(${te}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const ze=this.getOrInitializeService({instanceIdentifier:te,options:H});for(const[xe,Ne]of this.instancesDeferred.entries())te===this.normalizeInstanceIdentifier(xe)&&Ne.resolve(ze);return ze}onInit(G,H){var te;const ze=this.normalizeInstanceIdentifier(H),xe=null!==(te=this.onInitCallbacks.get(ze))&&void 0!==te?te:new Set;xe.add(G),this.onInitCallbacks.set(ze,xe);const Ne=this.instances.get(ze);return Ne&&G(Ne,ze),()=>{xe.delete(G)}}invokeOnInitCallbacks(G,H){const te=this.onInitCallbacks.get(H);if(te)for(const ze of te)try{ze(G,H)}catch(xe){}}getOrInitializeService({instanceIdentifier:G,options:H={}}){let te=this.instances.get(G);if(!te&&this.component&&(te=this.component.instanceFactory(this.container,{instanceIdentifier:(he=G,he===le?void 0:he),options:H}),this.instances.set(G,te),this.instancesOptions.set(G,H),this.invokeOnInitCallbacks(te,G),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,G,te)}catch(ze){}var he;return te||null}normalizeInstanceIdentifier(G=le){return this.component?this.component.multipleInstances?G:le:G}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class oe{constructor(G){this.name=G,this.providers=new Map}addComponent(G){const H=this.getProvider(G.name);if(H.isComponentSet())throw new Error(`Component ${G.name} has already been registered with ${this.name}`);H.setComponent(G)}addOrOverwriteComponent(G){this.getProvider(G.name).isComponentSet()&&this.providers.delete(G.name),this.addComponent(G)}getProvider(G){if(this.providers.has(G))return this.providers.get(G);const H=new re(G,this);return this.providers.set(G,H),H}getProviders(){return Array.from(this.providers.values())}}},1877:(et,be,N)=>{N.d(be,{Am:()=>he,Ub:()=>oe,Yd:()=>ue,in:()=>X});const h=[];var X=(()=>{return(G=X||(X={}))[G.DEBUG=0]="DEBUG",G[G.VERBOSE=1]="VERBOSE",G[G.INFO=2]="INFO",G[G.WARN=3]="WARN",G[G.ERROR=4]="ERROR",G[G.SILENT=5]="SILENT",X;var G})();const O={debug:X.DEBUG,verbose:X.VERBOSE,info:X.INFO,warn:X.WARN,error:X.ERROR,silent:X.SILENT},le=X.INFO,re={[X.DEBUG]:"log",[X.VERBOSE]:"log",[X.INFO]:"info",[X.WARN]:"warn",[X.ERROR]:"error"},ge=(G,H,...te)=>{if(H<G.logLevel)return;const ze=(new Date).toISOString(),xe=re[H];if(!xe)throw new Error(`Attempted to log a message with an invalid logType (value: ${H})`);console[xe](`[${ze}]  ${G.name}:`,...te)};class ue{constructor(H){this.name=H,this._logLevel=le,this._logHandler=ge,this._userLogHandler=null,h.push(this)}get logLevel(){return this._logLevel}set logLevel(H){if(!(H in X))throw new TypeError(`Invalid value "${H}" assigned to \`logLevel\``);this._logLevel=H}setLogLevel(H){this._logLevel="string"==typeof H?O[H]:H}get logHandler(){return this._logHandler}set logHandler(H){if("function"!=typeof H)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=H}get userLogHandler(){return this._userLogHandler}set userLogHandler(H){this._userLogHandler=H}debug(...H){this._userLogHandler&&this._userLogHandler(this,X.DEBUG,...H),this._logHandler(this,X.DEBUG,...H)}log(...H){this._userLogHandler&&this._userLogHandler(this,X.VERBOSE,...H),this._logHandler(this,X.VERBOSE,...H)}info(...H){this._userLogHandler&&this._userLogHandler(this,X.INFO,...H),this._logHandler(this,X.INFO,...H)}warn(...H){this._userLogHandler&&this._userLogHandler(this,X.WARN,...H),this._logHandler(this,X.WARN,...H)}error(...H){this._userLogHandler&&this._userLogHandler(this,X.ERROR,...H),this._logHandler(this,X.ERROR,...H)}}function oe(G){h.forEach(H=>{H.setLogLevel(G)})}function he(G,H){for(const te of h){let ze=null;H&&H.level&&(ze=O[H.level]),te.userLogHandler=null===G?null:(xe,Ne,...Ue)=>{const fe=Ue.map(De=>{if(null==De)return null;if("string"==typeof De)return De;if("number"==typeof De||"boolean"==typeof De)return De.toString();if(De instanceof Error)return De.message;try{return JSON.stringify(De)}catch(We){return null}}).filter(De=>De).join(" ");Ne>=(null!=ze?ze:xe.logLevel)&&G({level:X[Ne].toLowerCase(),message:fe,args:Ue,type:xe.name})}}}},8766:(et,be,N)=>{N.d(be,{Lj:()=>Ae,X3:()=>Qe});var h=N(5861);let O,le;const ue=new WeakMap,oe=new WeakMap,he=new WeakMap,G=new WeakMap,H=new WeakMap;let xe={get($,ve,Z){if($ instanceof IDBTransaction){if("done"===ve)return oe.get($);if("objectStoreNames"===ve)return $.objectStoreNames||he.get($);if("store"===ve)return Z.objectStoreNames[1]?void 0:Z.objectStore(Z.objectStoreNames[0])}return De($[ve])},set:($,ve,Z)=>($[ve]=Z,!0),has:($,ve)=>$ instanceof IDBTransaction&&("done"===ve||"store"===ve)||ve in $};function fe($){return"function"==typeof $?function Ue($){return $!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function ge(){return le||(le=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes($)?function(...ve){return $.apply(We(this),ve),De(ue.get(this))}:function(...ve){return De($.apply(We(this),ve))}:function(ve,...Z){const ie=$.call(We(this),ve,...Z);return he.set(ie,ve.sort?ve.sort():[ve]),De(ie)}}($):($ instanceof IDBTransaction&&function ze($){if(oe.has($))return;const ve=new Promise((Z,ie)=>{const ee=()=>{$.removeEventListener("complete",ye),$.removeEventListener("error",ae),$.removeEventListener("abort",ae)},ye=()=>{Z(),ee()},ae=()=>{ie($.error||new DOMException("AbortError","AbortError")),ee()};$.addEventListener("complete",ye),$.addEventListener("error",ae),$.addEventListener("abort",ae)});oe.set($,ve)}($),(($,ve)=>ve.some(Z=>$ instanceof Z))($,function re(){return O||(O=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy($,xe):$)}function De($){if($ instanceof IDBRequest)return function te($){const ve=new Promise((Z,ie)=>{const ee=()=>{$.removeEventListener("success",ye),$.removeEventListener("error",ae)},ye=()=>{Z(De($.result)),ee()},ae=()=>{ie($.error),ee()};$.addEventListener("success",ye),$.addEventListener("error",ae)});return ve.then(Z=>{Z instanceof IDBCursor&&ue.set(Z,$)}).catch(()=>{}),H.set(ve,$),ve}($);if(G.has($))return G.get($);const ve=fe($);return ve!==$&&(G.set($,ve),H.set(ve,$)),ve}const We=$=>H.get($);function Qe($,ve,{blocked:Z,upgrade:ie,blocking:ee,terminated:ye}={}){const ae=indexedDB.open($,ve),Oe=De(ae);return ie&&ae.addEventListener("upgradeneeded",ct=>{ie(De(ae.result),ct.oldVersion,ct.newVersion,De(ae.transaction))}),Z&&ae.addEventListener("blocked",()=>Z()),Oe.then(ct=>{ye&&ct.addEventListener("close",()=>ye()),ee&&ct.addEventListener("versionchange",()=>ee())}).catch(()=>{}),Oe}function Ae($,{blocked:ve}={}){const Z=indexedDB.deleteDatabase($);return ve&&Z.addEventListener("blocked",()=>ve()),De(Z).then(()=>{})}const we=["get","getKey","getAll","getAllKeys","count"],Ie=["put","add","delete","clear"],je=new Map;function Be($,ve){if(!($ instanceof IDBDatabase)||ve in $||"string"!=typeof ve)return;if(je.get(ve))return je.get(ve);const Z=ve.replace(/FromIndex$/,""),ie=ve!==Z,ee=Ie.includes(Z);if(!(Z in(ie?IDBIndex:IDBObjectStore).prototype)||!ee&&!we.includes(Z))return;const ye=function(){var ae=(0,h.Z)(function*(Oe,...ct){const $t=this.transaction(Oe,ee?"readwrite":"readonly");let Ut=$t.store;return ie&&(Ut=Ut.index(ct.shift())),(yield Promise.all([Ut[Z](...ct),ee&&$t.done]))[0]});return function(ct){return ae.apply(this,arguments)}}();return je.set(ve,ye),ye}!function Ne($){xe=$(xe)}($=>YN(ZN({},$),{get:(ve,Z,ie)=>Be(ve,Z)||$.get(ve,Z,ie),has:(ve,Z)=>!!Be(ve,Z)||$.has(ve,Z)}))},5861:(et,be,N)=>{function h(O,le,re,ge,ue,oe,he){try{var G=O[oe](he),H=G.value}catch(te){return void re(te)}G.done?le(H):Promise.resolve(H).then(ge,ue)}function X(O){return function(){var le=this,re=arguments;return new Promise(function(ge,ue){var oe=O.apply(le,re);function he(H){h(oe,ge,ue,he,G,"next",H)}function G(H){h(oe,ge,ue,he,G,"throw",H)}he(void 0)})}}N.d(be,{Z:()=>X})}},et=>{et(et.s=4127)}]);